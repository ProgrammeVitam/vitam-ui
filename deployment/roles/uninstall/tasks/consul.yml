
---
# tasks file for vitam-consul-uninstall
- name: Stop vitam service
  systemd:
    name: "vitam-{{ service_name }}"
    state: stopped
  ignore_errors: yes

- name: Uninstall vitam service
  yum:
    name: "vitam-{{ service_name }}"
    state: absent

- name: Delete file system of consul
  file:
    name: "{{ item }}"
    state: absent
  with_items:
    - "/vitam/app/{{ service_name }}"
    - "/vitam/bin/{{ service_name }}"
    - "/vitam/conf/{{ service_name }}"
    - "/vitam/data/{{ service_name }}"
    - "/vitam/defaults/{{ service_name }}"
    - "/vitam/lib/{{ service_name }}"
    - "/vitam/log/{{ service_name }}"
    - "/vitam/run/{{ service_name }}"
    - "/vitam/script/{{ service_name }}"
    - "/vitam/tmp/{{ service_name }}"
