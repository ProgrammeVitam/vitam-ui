#jinja2: lstrip_blocks: True

{% for cots_service in cots_service_list %}
#
# "{{cots_service }}"
#
- type: filestream
  id: "{{ vitam_site_name }}-{{cots_service }}"
  paths:
{% if inventory_hostname in groups['hosts_vitamui_mongod'] or
      inventory_hostname in groups['hosts_vitamui_mongos'] or
      inventory_hostname in groups['hosts_vitamui_mongoc'] or
      inventory_hostname in groups['mongoc'] or
      inventory_hostname in groups['mongod'] or
      inventory_hostname in groups['mongos']
 %}
{% set mongo_service =  cots_service %}
    - "{{ vitamui_defaults.folder.root_path }}/log/{{ mongo_service }}/{{ mongo_service }}*.log"
{% else %}
    - "{{ vitamui_defaults.folder.root_path }}/log/{{ cots_service }}/{{ cots_service }}*.log"
{% endif %}
  fields:
    kind: log
    vitam_component: "{{ cots_service }}"
    source: vitam

{% endfor %}

#
# Consul
#
- type: filestream
  id: "{{ vitam_site_name }}-consul"
  paths:
    - "{{ vitam_defaults.folder.root_path }}/log/consul/consul*.log"
  fields:
    kind: log
    vitam_component: consul
    source: vitam