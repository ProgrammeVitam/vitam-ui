# Referential internal calls VITAM
- hosts: hosts_vitamui_referential_internal
  gather_facts: no
  any_errors_fatal: true
  roles:
    - vitamui
  vars:
    app_default_root_path: "/vitamui"
    vitamui_struct: "{{ vitamui.referential_internal }}"
    vitamui_certificate_client_type: "iam"
    password_keystore: "{{ keystores.server.referential_internal }}"
    password_manager_keystore: "{{ keystores.server.referential_internal }}"
    password_truststore_server: "{{ truststores.server }}"
    password_truststore: "{{ truststores.client_iam }}"
    other_stores: ["iam_internal"]
    consul_tags: "referential-internal, api, internal"

# Referential internal calls referential internal
- hosts: hosts_vitamui_referential_external
  gather_facts: no
  any_errors_fatal: true
  roles:
    - vitamui
  vars:
    app_default_root_path: "/vitamui"
    vitamui_struct: "{{ vitamui.referential_external }}"
    vitamui_certificate_client_type: "iam"
    password_keystore: "{{ keystores.server.referential_external }}"
    password_manager_keystore: "{{ keystores.server.referential_external }}"
    password_truststore_server: "{{ truststores.server }}"
    password_truststore: "{{ truststores.client_iam }}"
    other_stores: ["referential_internal", "iam_internal", "security_internal"]
    consul_tags: "referential-external, api, external"

# UI referential calls referential external
- hosts: hosts_ui_referential
  gather_facts: no
  any_errors_fatal: true
  roles:
    - vitamui
  vars:
    app_default_root_path: "/vitamui"
    vitamui_struct: "{{ vitamui.referential }}"
    password_keystore: "{{ keystores.server.ui_referential }}"
    password_manager_keystore: "{{ keystores.server.ui_referential }}"
    password_truststore_server: "{{ truststores.server }}"
    vitamui_certificate_client_type: "iam"
    password_truststore: "{{ truststores.client_iam }}"
    other_stores: ["referential_external", "iam_external"]
    consul_tags: "ui-referential, ui"
