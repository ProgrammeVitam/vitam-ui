---

- hosts: localhost
  any_errors_fatal: yes
  gather_facts: no
  vars_prompt:
    name: "confirmation"
    prompt: "This playbook will uninstall referential components.\n\nAre you sure you want to run this playbook ?\nAnswer with 'YES'"
    default: "NO"
    private: no
  tasks:
    - name: Check Confirmation
      fail: msg="Playbook run confirmation failed"
      when: confirmation|upper != "YES"

########################################################
# ZONE APP
########################################################

- hosts: hosts_vitamui_referential_internal
  roles:
    - uninstall
  vars:
    service_name: referential-internal
    uninstaller_type: vitamui-service
  tags:
    - zone-vitamui-app
    - referential-internal

- hosts: hosts_vitamui_referential_external
  roles:
    - uninstall
  vars:
    service_name: referential-external
    uninstaller_type: vitamui-service
  tags:
    - zone-vitamui-app
    - referential-external

########################################################
# ZONE UI
########################################################
- hosts: hosts_ui_referential
  roles:
    - uninstall
  vars:
    service_name: ui-referential
    uninstaller_type: vitamui-service
  tags:
    - zone-vitamui-ui
    - ui-referential
