---

- hosts: hosts_ui_referential
  gather_facts: no
  roles:
    - service_state
    # - check_port
  vars:
    vitamui_struct: "{{ vitamui.referential }}"
    etat: "stopped"
  tags:
    - referential_app

- hosts: hosts_ui_ingest
  gather_facts: no
  roles:
    - service_state
    # - check_port
  vars:
    vitamui_struct: "{{ vitamui.ingest }}"
    etat: "stopped"

- hosts: hosts_ui_archive_search
  gather_facts: no
  roles:
    - service_state
    # - check_port
  vars:
    vitamui_struct: "{{ vitamui.archive_search }}"
    etat: "stopped"

- hosts: hosts_ui_identity_admin
  gather_facts: no
  roles:
    - service_state
    # - check_port
  vars:
    vitamui_struct: "{{ vitamui.identity_admin }}"
    etat: "stopped"

- hosts: hosts_ui_identity
  gather_facts: no
  roles:
    - service_state
    # - check_port
  vars:
    vitamui_struct: "{{ vitamui.identity }}"
    etat: "stopped"


- hosts: hosts_ui_portal
  gather_facts: no
  roles:
    - service_state
    # - check_port
  vars:
    vitamui_struct: "{{ vitamui.portal }}"
    etat: "stopped"

- hosts: hosts_cas_server
  gather_facts: no
  roles:
    - service_state
    # - check_port
  vars:
    vitamui_struct: "{{ vitamui.cas_server }}"
    etat: "stopped"

- hosts: hosts_vitamui_referential_external
  gather_facts: no
  roles:
    - service_state
    # - check_port
  vars:
    vitamui_struct: "{{ vitamui.referential_external }}"
    etat: "stopped"
  tags:
    - referential_app

- hosts: hosts_vitamui_referential_internal
  roles:
    - service_state
    # - check_port
  vars:
    vitamui_struct: "{{ vitamui.referential_internal }}"
    etat: "stopped"
  tags:
    - referential_app


- hosts: hosts_vitamui_ingest_external
  gather_facts: no
  roles:
    - service_state
    # - check_port
  vars:
    vitamui_struct: "{{ vitamui.ingest_external }}"
    etat: "stopped"

- hosts: hosts_vitamui_ingest_internal
  roles:
    - service_state
    # - check_port
  vars:
    vitamui_struct: "{{ vitamui.ingest_internal }}"
    etat: "stopped"

- hosts: hosts_vitamui_archive_search_external
  gather_facts: no
  roles:
    - service_state
    # - check_port
  vars:
    vitamui_struct: "{{ vitamui.archive_search_external }}"
    etat: "stopped"

- hosts: hosts_vitamui_archive_search_internal
  roles:
    - service_state
    # - check_port
  vars:
    vitamui_struct: "{{ vitamui.archive_search_internal }}"
    etat: "stopped"

- hosts: hosts_vitamui_iam_external
  gather_facts: no
  roles:
    - service_state
    # - check_port
  vars:
    vitamui_struct: "{{ vitamui.iam_external }}"
    etat: "stopped"


- hosts: hosts_vitamui_iam_internal
  gather_facts: no
  roles:
    - service_state
    # - check_port
  vars:
    vitamui_struct: "{{ vitamui.iam_internal }}"
    etat: "stopped"

- hosts: hosts_vitamui_security_internal
  gather_facts: no
  roles:
    - service_state
    # - check_port
  vars:
    vitamui_struct: "{{ vitamui.security_internal }}"
    etat: "stopped"

- hosts: hosts_vitamui_mongod
  gather_facts: no
  roles:
    - { role: service_state, when: "mongo_express_enabled | default(false) | bool == true" }
    # - check_port
  vars:
    vitamui_struct: "{{ mongo_express }}"
    etat: "stopped"
  tags:
    - cots

- hosts: hosts_vitamui_mongod
  gather_facts: no
  roles:
    - service_state
    # - check_port
  vars:
    vitamui_struct: "{{ mongodb }}"
    etat: "stopped"
  tags:
    - cots

- hosts: hosts_vitamui_logstash
  gather_facts: no
  roles:
    - service_state
    # - check_port
  vars:
    vitamui_struct: "{{ logstash }}"
    etat: "stopped"
  tags:
    - cots

- hosts: hosts_vitamui
  gather_facts: no
  roles:
    - service_state
  vars:
    vitamui_struct: "{{ consul }}"
    etat: "stopped"
  tags:
    - cots
