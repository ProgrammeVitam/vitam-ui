<div *ngIf="!loadingHolding" class="justify-content-around">
  <div *ngIf="!loadingHolding" class="tree-filing-scheme">
    <mat-tree [dataSource]="nestedDataSource" [treeControl]="nestedTreeControl" class="filing-holding-scheme-tree">

      <mat-tree-node *matTreeNodeDef="let node">
        <ng-container *ngIf="!node.hidden">
          <li class="mat-tree-node filing-holding-scheme-tree-node">
            <app-filing-holding-node disabled [node]="node" (nodeToggle)="nestedTreeControl.toggle(node)"
                                     (labelClick)="emitNode(node)"></app-filing-holding-node>
            <span *ngIf="node?.count != null  && node?.checked && hasResults" class="badge badge-secondary pad">{{node?.count | number : '1.0'}}</span>
          </li>
        </ng-container>
      </mat-tree-node>

      <mat-nested-tree-node *matTreeNodeDef="let node; when: hasNestedChild">
        <ng-container *ngIf="!node.hidden">
          <li>
            <div class="mat-tree-node filing-holding-scheme-tree-node">
              <app-filing-holding-node [node]="node" [expanded]="nestedTreeControl.isExpanded(node)"
                                       (nodeToggle)="nestedTreeControl.toggle(node)" (labelClick)="emitNode(node)"></app-filing-holding-node>
              <span *ngIf="node?.count!= null && node?.checked && hasResults" class="badge badge-secondary pad">{{node?.count | number : '1.0'}}</span>
            </div>
            <ul [class.filing-holding-scheme-tree-invisible]="!nestedTreeControl.isExpanded(node)">
              <ng-container matTreeNodeOutlet></ng-container>
            </ul>
          </li>
        </ng-container>
      </mat-nested-tree-node>
    </mat-tree>
  </div>
  <div *ngIf="nestedDataSource.data.length <= 0"> {{'ARCHIVE_SEARCH.FILING_SHCEMA.NO_TREES_NO_PLANS_FOR_ACCESS_CONTRACT' | translate}}  </div>
  <a *ngIf="nestedDataSource.data.length > 0 && !linkOneToNotKeep "" class="tree-show-link" (click)="showAllTreeNodes()"> {{'ARCHIVE_SEARCH.FILING_SHCEMA.SHOW_ENTIRE_TREE' | translate}}</a>
  <a *ngIf="nestedDataSource.data.length > 0 && !linkTwoToNotKeep" class="tree-show-link" (click)="showOnlyParentTreeNodes()">RÃ©duire l'arborescence</a>
</div>

<div class="" *ngIf="loadingHolding">
  <mat-spinner diameter="50" color="accent"></mat-spinner>
</div>
