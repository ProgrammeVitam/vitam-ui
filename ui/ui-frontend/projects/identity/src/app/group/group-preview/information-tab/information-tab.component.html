<form [formGroup]="form">
  <div clas="row">
    <vitamui-common-slide-toggle formControlName="enabled"
    [matTooltip]="'GROUP.INFORMATIONS.ACTIVE_SWITCH_TOOLTIP' | translate" matTooltipClass="vitamui-tooltip" [matTooltipDisabled]="form.get('enabled').enabled || readOnly">
      <span *ngIf="!form?.get('enabled').value">{{'GROUP.INFORMATIONS.INACTIVE_SWITCH' | translate}}</span>
      <span *ngIf="form?.get('enabled').value">{{'GROUP.INFORMATIONS.ACTIVE_SWITCH' | translate}}</span>
    </vitamui-common-slide-toggle>
  </div>
  <div class="row">
      <div class="col-8 form-control">
        <vitamui-common-editable-input formControlName="identifier" [label]="'COMMON.ID' |translate"
          [validator]="form?.get('identifier')?.validator" [asyncValidator]="form?.get('identifier')?.asyncValidator">
        </vitamui-common-editable-input>
      </div>
    </div>
  <div class="row">
    <div class="col-8 form-control">
      <vitamui-common-editable-input formControlName="name" minlength="2" maxlength="100" [label]="'GROUP.INFORMATIONS.NAME' | translate"
        [validator]="form?.get('name')?.validator" [asyncValidator]="form?.get('name')?.asyncValidator">
        <vitamui-common-field-error errorKey="required" >{{'COMMON.ERROR.REQUIRED' | translate}}</vitamui-common-field-error>
        <vitamui-common-field-error errorKey="nameExists">{{'GROUP.INFORMATIONS.EXISTING_NAME' | translate}}</vitamui-common-field-error>
      </vitamui-common-editable-input>
    </div>
  </div>

  <div class="row">
    <div class="col-12 form-control">
      <vitamui-common-editable-textarea formControlName="description" maxlength="250" minlength="4" maxlength="100" [label]="'GROUP.INFORMATIONS.DESCRIPTION' | translate"
        [validator]="form?.get('description')?.validator"
        [asyncValidator]="form?.get('description')?.asyncValidator">
        <vitamui-common-field-error errorKey="required" >{{'COMMON.ERROR.REQUIRED' | translate}}</vitamui-common-field-error>
      </vitamui-common-editable-textarea>
    </div>
  </div>

  <div class="row d-flex">
    <div class="col-5">
      <div class="read-only-field">
          <label>{{'GROUP.INFORMATIONS.LEVEL' | translate}}</label>
          <div>{{authService.user.level}}</div>
      </div>
    </div>
    <div class="col-7" [matTooltip]="'GROUP.INFORMATIONS.SUBLEVEL_TOOLTIP' | translate" matTooltipClass="vitamui-tooltip" [matTooltipDisabled]="form?.get('level').enabled || readOnly">
      <vitamui-common-editable-level-input
        formControlName="level"
        maxlength="250"
        [prefix]="authService.user.level"
        [label]="'GROUP.INFORMATIONS.SUBLEVEL' | translate"
        [validator]="form?.get('level')?.validator">
          <vitamui-common-field-error errorKey="required" >{{'COMMON.ERROR.REQUIRED' | translate}}</vitamui-common-field-error>
          <vitamui-common-field-error errorKey="nameExists">{{'GROUP.INFORMATIONS.WRONG_FORMAT' | translate}}</vitamui-common-field-error>
      </vitamui-common-editable-level-input>
    </div>
  </div>

  <div class="vitamui-separator"></div>

  <!-- Units -->
  <div>
    <button *ngIf="!readOnly" class="btn primary mb-3" (click)="openEditUnitsDialog()">
      {{'GROUP.INFORMATIONS.MODIF_UNITS_BUTTON' | translate}}
    </button>
    <div class="align-items-center "> 
      <div class="text small primary mb-2">{{'GROUP.INFORMATIONS.UNITS_TABLE_TITLE' | translate}}</div>
      <div *ngFor="let unit of getUnits(group)" class="text medium">{{ unit}}</div>
    </div>
  </div>
</form>
