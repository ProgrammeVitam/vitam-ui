<form [formGroup]="form">
  <div class="row">
    <div class="col-6 form-control">
      <vitamui-common-editable-input
        formControlName="code"
        [label]="'CUSTOMER.INFORMATIONS.CODE' | translate"
        [validator]="form?.get('code')?.validator"
        [asyncValidator]="form?.get('code')?.asyncValidator"
      >
        <vitamui-common-field-error errorKey="required">{{ 'COMMON.ERROR.REQUIRED' | translate }}</vitamui-common-field-error>
        <vitamui-common-field-error errorKey="pattern">{{ 'COMMON.ERROR.WRONG_FORMAT' | translate }}</vitamui-common-field-error>
        <vitamui-common-field-error errorKey="maxlength">{{
          'COMMON.ERROR.STRING_MAX_LENGTH' | translate: { max: customerCodeMaxLength }
        }}</vitamui-common-field-error>
        <vitamui-common-field-error errorKey="uniqueCode">{{
          'CUSTOMER.INFORMATIONS.CODE_ALREADY_EXIST' | translate
        }}</vitamui-common-field-error>
      </vitamui-common-editable-input>
    </div>
    <div class="col-6">
      <vitamui-common-editable-input
        formControlName="identifier"
        maxlength="12"
        [label]="'COMMON.ID' | translate"
        [validator]="form?.get('identifier')?.validator"
        [asyncValidator]="form?.get('identifier')?.asyncValidator"
      >
      </vitamui-common-editable-input>
    </div>
  </div>

  <div class="row">
    <div class="col-6 form-control">
      <vitamui-common-editable-input
        formControlName="name"
        maxlength="100"
        [label]="'CUSTOMER.INFORMATIONS.NAME' | translate"
        [validator]="form?.get('name')?.validator"
        [asyncValidator]="form?.get('name')?.asyncValidator"
      >
        <vitamui-common-field-error errorKey="required">{{ 'COMMON.ERROR.REQUIRED' | translate }} </vitamui-common-field-error>
      </vitamui-common-editable-input>
    </div>
    <div class="col-6 form-control">
      <vitamui-common-editable-input
        formControlName="companyName"
        maxlength="250"
        [label]="'CUSTOMER.INFORMATIONS.SOCIAL_REASON' | translate"
        [validator]="form?.get('companyName')?.validator"
        [asyncValidator]="form?.get('companyName')?.asyncValidator"
      >
        <vitamui-common-field-error errorKey="required">{{ 'COMMON.ERROR.REQUIRED' | translate }} </vitamui-common-field-error>
      </vitamui-common-editable-input>
    </div>
  </div>

  <ng-container formGroupName="address">
    <div class="row">
      <div class="col-12 form-control">
        <vitamui-common-editable-input
          formControlName="street"
          maxlength="{{ maxStreetLength }}"
          [label]="'COMMON.ADRESS.STREET' | translate"
          [validator]="form?.get('address.street')?.validator"
          [asyncValidator]="form?.get('address.street')?.asyncValidator"
        >
          <vitamui-common-field-error errorKey="required">{{ 'COMMON.ERROR.REQUIRED' | translate }} </vitamui-common-field-error>
        </vitamui-common-editable-input>
      </div>
    </div>

    <div class="row">
      <div class="col-6 form-control">
        <vitamui-common-editable-input
          formControlName="zipCode"
          maxlength="10"
          [label]="'COMMON.ADRESS.ZIPCODE' | translate"
          [validator]="form?.get('address.zipCode')?.validator"
          [asyncValidator]="form?.get('address.zipCode')?.asyncValidator"
        >
          <vitamui-common-field-error errorKey="required">{{ 'COMMON.ERROR.REQUIRED' | translate }} </vitamui-common-field-error>
        </vitamui-common-editable-input>
      </div>
      <div class="col-6 form-control">
        <vitamui-common-editable-input
          formControlName="city"
          maxlength="100"
          [label]="'COMMON.ADRESS.CITY' | translate"
          [validator]="form?.get('address.city')?.validator"
          [asyncValidator]="form?.get('address.city')?.asyncValidator"
        >
          <vitamui-common-field-error errorKey="required">{{ 'COMMON.ERROR.REQUIRED' | translate }} </vitamui-common-field-error>
        </vitamui-common-editable-input>
      </div>
    </div>

    <div class="row">
      <div class="col-12 form-control">
        <vitamui-common-editable-select
          formControlName="country"
          [label]="'COMMON.ADRESS.COUNTRY' | translate"
          [validator]="form?.get('address.country')?.validator"
          [asyncValidator]="form?.get('address.country')?.asyncValidator"
        >
          <vitamui-common-editable-option *ngFor="let country of countries" [value]="country.code" [content]="country.name">
          </vitamui-common-editable-option>
        </vitamui-common-editable-select>
      </div>
    </div>
  </ng-container>

  <div class="row">
    <div class="col-12 form-control">
      <vitamui-common-editable-input
        formControlName="internalCode"
        maxlength="20"
        [label]="'CUSTOMER.INFORMATIONS.INTERNAL_CODE' | translate"
      ></vitamui-common-editable-input>
    </div>
  </div>

  <div class="row">
    <div class="col-12 form-control">
      <vitamui-common-editable-select
        formControlName="language"
        [label]="'CUSTOMER.INFORMATIONS.DEFAULT_LANGUAGE' | translate"
        [validator]="form?.get('language')?.validator"
        [asyncValidator]="form?.get('language')?.asyncValidator"
      >
        <vitamui-common-editable-option value="ENGLISH" [content]="'COMMON.LANGUAGE.ENGLISH' | translate"></vitamui-common-editable-option>
        <vitamui-common-editable-option value="FRENCH" [content]="'COMMON.LANGUAGE.FRENCH' | translate"></vitamui-common-editable-option>
      </vitamui-common-editable-select>
    </div>
  </div>

  <div class="row">
    <div class="col-12 form-control">
      <vitamui-common-editable-select
        formControlName="passwordRevocationDelay"
        [label]="'CUSTOMER.INFORMATIONS.PASSWORD_DURATION' | translate"
        [validator]="form?.get('passwordRevocationDelay')?.validator"
        [asyncValidator]="form?.get('passwordRevocationDelay')?.asyncValidator"
      >
        <vitamui-common-editable-option
          [value]="3"
          [content]="'CUSTOMER.INFORMATIONS.PWD_REVOCATION_THREE' | translate"
        ></vitamui-common-editable-option>
        <vitamui-common-editable-option
          [value]="6"
          [content]="'CUSTOMER.INFORMATIONS.PWD_REVOCATION_SIX' | translate"
        ></vitamui-common-editable-option>
        <vitamui-common-editable-option
          [value]="9"
          [content]="'CUSTOMER.INFORMATIONS.PWD_REVOCATION_NINE' | translate"
        ></vitamui-common-editable-option>
        <vitamui-common-editable-option
          [value]="12"
          [content]="'CUSTOMER.INFORMATIONS.PWD_REVOCATION_TWELVE' | translate"
        ></vitamui-common-editable-option>
      </vitamui-common-editable-select>
    </div>
  </div>

  <div class="row">
    <div class="col-12 form-control">
      <vitamui-common-editable-toggle-group
        formControlName="otp"
        [label]="'CUSTOMER.INFORMATIONS.VALIDATIONS' | translate"
        [validator]="form?.get('otp')?.validator"
        [asyncValidator]="form?.get('otp')?.asyncValidator"
      >
        <vitamui-common-editable-button-toggle
          value="DISABLED"
          [content]="'CUSTOMER.INFORMATIONS.OTP_DISABLED' | translate"
        ></vitamui-common-editable-button-toggle>
        <vitamui-common-editable-button-toggle
          value="OPTIONAL"
          [content]="'CUSTOMER.INFORMATIONS.OTP_OPTIONAL' | translate"
        ></vitamui-common-editable-button-toggle>
        <vitamui-common-editable-button-toggle
          value="MANDATORY"
          [content]="'CUSTOMER.INFORMATIONS.OTP_MANDATORY' | translate"
        ></vitamui-common-editable-button-toggle>
      </vitamui-common-editable-toggle-group>
    </div>
  </div>

  <div class="row">
    <div class="col-12 form-control">
      <app-editable-domain-input
        formControlName="emailDomains"
        [label]="'CUSTOMER.INFORMATIONS.DOMAINS' | translate"
        [validator]="form?.get('emailDomains')?.validator"
        [asyncValidator]="form?.get('emailDomains')?.asyncValidator"
        [defaultDomain]="form.get('defaultEmailDomain').value"
        (defaultDomainChange)="form.get('defaultEmailDomain').setValue($event)"
      ></app-editable-domain-input>
    </div>
  </div>

  <div class="row">
    <div class="col-12 form-control">
      <vitamui-common-slide-toggle
        formControlName="gdprAlert"
        i18n="gdprAlert Account@@accountgdprAlertToggleLabel"
        [disabled]="gdprReadOnlyStatus"
      >
        Alerte sur les utilisateurs inactifs
      </vitamui-common-slide-toggle>
    </div>
  </div>
  <div class="row" *ngIf="form?.get('gdprAlert')?.value">
    <div class="col-12 form-control">
      <vitamui-common-editable-input
        [disabled]="gdprReadOnlyStatus && !form?.get('gdprAlert')?.value"
        formControlName="gdprAlertDelay"
        label="Durée d'alerte sur les utilisateurs inactifs (mois)"
        i18n-label="gdprAlertDelay@@CustomerDetailLabelgdprAlertDelay"
        [validator]="form?.get('gdprAlertDelay')?.validator"
        [asyncValidator]="form?.get('gdprAlertDelay')?.asyncValidator"
      >
        <vitamui-common-field-error errorKey="required" i18n="Required field error hint@@formErrorRequiredFieldAndMinValue"
          >Champ obligatoire et il faut une valeur supérieure à 0
        </vitamui-common-field-error>
        <vitamui-common-field-error errorKey="pattern" i18n="Wrong format error hint@@formErrorFormatField"
          >Format incorrecte
        </vitamui-common-field-error>
        <vitamui-common-field-error errorKey="min" i18n="Required a min value error hint@@formErrorRequiredMinValue"
          >Il faut une valeur supérieure à 0
        </vitamui-common-field-error>
      </vitamui-common-editable-input>
    </div>
  </div>
</form>
