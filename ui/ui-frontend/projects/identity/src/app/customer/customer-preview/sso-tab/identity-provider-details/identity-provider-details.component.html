<form [formGroup]="form">

  <div class="row">
    <div class="col-5">
      <vitamui-common-slide-toggle formControlName="enabled" i18n="IDP Active@@idpFormLabelEnabled">{{'CUSTOMER.SSO.ACTIVE_SWITCH' | translate}}</vitamui-common-slide-toggle>
    </div>
    <div class="col-5">
        <vitamui-common-editable-input
        formControlName="identifier"
        maxlength="12"
        [label]="'COMMON.ID' |translate"
        [validator]="form?.get('identifier')?.validator"
        [asyncValidator]="form?.get('identifier')?.asyncValidator"
      >
      </vitamui-common-editable-input>
    </div>
  </div>

  <div class="row">
    <div class="col-5 form-control">
      <vitamui-common-editable-input
        formControlName="name"
        maxlength="100"
        [label]="'CUSTOMER.SSO.ACTIVE_SWITCH' | translate"
        [validator]="form?.get('name')?.validator"
        [asyncValidator]="form?.get('name')?.asyncValidator"
      >
        <vitamui-common-field-error errorKey="required" >{{'COMMON.REQUIRED' | translate}}</vitamui-common-field-error>
      </vitamui-common-editable-input>
    </div>

    <div class="col-7 form-control">
      <vitamui-common-editable-toggle-group
        formControlName="internal"
        label="Type" i18n-label="Type@@idpFormLabelType"
        [validator]="form?.get('internal')?.validator"
        [asyncValidator]="form?.get('internal')?.asyncValidator"
      >
        <vitamui-common-editable-button-toggle [value]="true" [content]="'CUSTOMER.SSO.TYPE_INTERNAL' | translate"></vitamui-common-editable-button-toggle>
        <vitamui-common-editable-button-toggle [value]="false" [content]="'CUSTOMER.SSO.TYPE_EXTERNAL' | translate"></vitamui-common-editable-button-toggle>
      </vitamui-common-editable-toggle-group>
      </div>
  </div>

  <div class="row">
    <div class="col-6">
      <app-editable-keystore [identityProvider]="identityProvider" [disabled]="readOnly"></app-editable-keystore>
    </div>
    <div class="col-6">
      <vitamui-common-editable-file
        [formControl]="idpMetadata"
        accept=".xml"
        [label]="'CUSTOMER.SSO.IDP_METADATA' | translate"
        [validator]="idpMetadata?.validator"
        [asyncValidator]="idpMetadata?.asyncValidator"
      >
        <vitamui-common-field-error errorKey="required" >{{'COMMON.REQUIRED' | translate}}</vitamui-common-field-error>
      </vitamui-common-editable-file>
    </div>
  </div>

  <div class="row pattern-row">
    <div class="col-12">
      <app-editable-patterns
        formControlName="patterns"
        [label]="'CUSTOMER.SSO.PATTERNS' | translate"
        [options]="domains"
        [validator]="form?.get('patterns')?.validator"
        [asyncValidator]="form?.get('patterns')?.asyncValidator"
      >
        <vitamui-common-field-error errorKey="required" >{{'COMMON.REQUIRED' | translate}}</vitamui-common-field-error>
      </app-editable-patterns>
    </div>
  </div>

  <div class="row" *ngIf="identityProvider.technicalName">
    <div class="col-12">
        <div class="read-only-field">
          <label>Identifiant SSO</label>
          <div>{{identityProvider.technicalName}}</div>
        </div>
    </div>
  </div>

  <div class="row">
    <div class="col-6 form-control">
      <vitamui-common-editable-input
        formControlName="mailAttribute"
        maxlength="100"
        [label]="'CUSTOMER.SSO.MAIL_ATTRIBUTE' | translate"
      >
      </vitamui-common-editable-input>
    </div>
  </div>

  <div class="row">
    <div class="col-6 form-control">
      <vitamui-common-editable-toggle-group
      formControlName="authnRequestBinding"
      label="Authentication Request Binding" i18n-label="AuthenticationRequestBinding@@idpFormLabelAuthenticationRequestBinding"
      [validator]="form?.get('authnRequestBinding')?.validator"
      [asyncValidator]="form?.get('authnRequestBinding')?.asyncValidator"
    >
      <vitamui-common-editable-button-toggle value="GET" content="GET" i18n-content="Authentication Request Binding Get button@@idpAuthenticationRequestBindingGetdButton"></vitamui-common-editable-button-toggle>
      <vitamui-common-editable-button-toggle value="POST" content="POST" i18n-content="Authentication Request Binding Post button@@idpAuthenticationRequestBindingPostdButton"></vitamui-common-editable-button-toggle>
      
      <vitamui-common-field-error errorKey="required" >{{'COMMON.REQUIRED' | translate}}</vitamui-common-field-error>
    </vitamui-common-editable-toggle-group>
    </div>
  </div>

</form>
