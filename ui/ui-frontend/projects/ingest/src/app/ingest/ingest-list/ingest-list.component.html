<div vitamuiCommonInfiniteScroll (vitamuiScroll)="onScroll()">
  <div class="vitamui-table">
    <div class="vitamui-table-head">
      <div class="row col-1"><i class="vitamui-icon vitamui-icon-ingest vitamui-row-icon"></i></div>
      <div class="col-3" i18n="ingest identifier column header@@ingestListIdentifierHeader">
        <span>{{'INGEST_LIST.ID' | translate}}</span>
        <vitamui-common-order-by-button orderByKey="#id" [(orderBy)]="orderBy" [(direction)]="direction"
          (orderChange)="emitOrderChange()">
        </vitamui-common-order-by-button>
      </div>
      <div class="col-2" i18n="Ingest name@@IngestSIPName">{{'INGEST_LIST.NAME' | translate}}</div>
      <div class="col-2" i18n="ingest createdDate column header@@ingestListCreatedDateHeader">
        <span>{{'INGEST_LIST.START_DATE' | translate}}</span>
        <vitamui-common-order-by-button orderByKey="evDateTime" [(orderBy)]="orderBy" [(direction)]="direction"
          (orderChange)="emitOrderChange()">
        </vitamui-common-order-by-button>
      </div>
      <div class="col-2" i18n="ingest createdDate column header@@ingestListCreatedDateHeader">
        <span>{{'INGEST_LIST.END_DATE' | translate}}</span>
        <vitamui-common-order-by-button orderByKey="evDateTime" [(orderBy)]="orderBy" [(direction)]="direction"
          (orderChange)="emitOrderChange()">
        </vitamui-common-order-by-button>
      </div>
      <div class="col-2" i18n="Ingest name@@IngestStatus">{{'INGEST_LIST.STATUS' | translate}}</div>
    </div>
    <div class="vitamui-table-body">
      <div class="vitamui-table-rows" *ngFor="let ingest of dataSource; let index = index"
        (click)="ingestClick.emit(ingest)">
        <div class="vitamui-row d-flex align-items-center clickable">
          <div class="row col-1">
            <ng-container [ngSwitch]="ingestStatus(ingest)">
              <div *ngSwitchCase="'OK'">
                <i class="vitamui-icon vitamui-icon-box vitamui-row-icon status-badge status-badge-green"
                  [style.fontSize.px]="30"></i>
              </div>
              <div *ngSwitchCase="'STARTED'">
                <i class="vitamui-icon vitamui-icon-box vitamui-row-icon status-badge status-badge-grey"
                  [style.fontSize.px]="30"></i>
              </div>
              <div *ngSwitchCase="'WARNING'">
                <i class="vitamui-icon vitamui-icon-box vitamui-row-icon status-badge status-badge-orange"
                  [style.fontSize.px]="30"></i>
              </div>
              <div *ngSwitchCase="'FATAL'">
                <i class="vitamui-icon vitamui-icon-box vitamui-row-icon status-badge status-badge-black"
                  [style.fontSize.px]="30"></i>
              </div>
              <div *ngSwitchCase="'KO'">
                <i class="vitamui-icon vitamui-icon-box vitamui-row-icon status-badge status-badge-red"
                  [style.fontSize.px]="30"></i>
              </div>
            </ng-container>
          </div>
          <div class="col-3">{{ ingest?.obIdIn }}</div>
          <div class="col-2">{{ ingest?.evDetData?.EvDetailReq }}</div>
          <div class="col-2">
            <div> {{ ingest?.evDateTime | date: 'dd/MM/yyyy'  }} </div> <span class="date">
              {{ ingest?.evDateTime | date: 'hh:mm:ss' }}
            </span>
          </div>
          <div class="col-2">
            <div> {{ ingest?.evDateTime | date: 'dd/MM/yyyy'  }} </div> <span class="date">
              {{ ingestEndDate(ingest) | date: 'hh:mm:ss'  }}
            </span>
          </div>
          <div class="col-2">
            <ng-container [ngSwitch]="ingestStatus(ingest)">
              <div *ngSwitchCase="'OK'">
                <span class="status">Terminé</span><br/>Succès</span>
              </div>
              <div *ngSwitchCase="'STARTED'">
                <span class="status">En cours</span><br/>...</span>
              </div>
              <div *ngSwitchCase="'WARNING'">
                <span class="status">Terminé</span><br />Avertissement</span>
              </div>
              <div *ngSwitchCase="'FATAL'">
                <span class="status">En pause</span><br />Erreur Technique</span>
              </div>
              <div *ngSwitchCase="'KO'">
                <span class="status">Terminé</span><br />Erreur</span>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="!dataSource || pending then loadingSpinner"></div>
</div>
<ng-template #loadingSpinner>
  <div class="vitamui-min-content">
    <mat-spinner class="vitamui-spinner medium"></mat-spinner>
  </div>
</ng-template>
