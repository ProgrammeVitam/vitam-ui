(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{pz1T:function(e,t,n){"use strict";n.r(t),n.d(t,"ProjectModule",(function(){return ut}));var r=n("2kYt"),i=n("nIj0"),c=n("OWX3"),a=n("7zxd"),o=n("AadN"),s=n("jdnZ"),l=n("gcUQ"),d=n("OZ4H"),u=n("29Wa"),h=n("Jb3d"),f=n("csyo"),p=n("R7+U"),m=n("lQ7A"),g=n("W1gw"),b=n("KZIX"),v=n("sEIs"),_=n("D57K"),C=n("f7+R"),O=n("YtkY"),T=n("TLy2"),y=n("8j5Y"),E=n("4e/d"),L=n("vobO"),I=n("uwHF"),w=n("C05f"),A=n("ROBh"),k=n("EM62");let P=(()=>{class e{constructor(e){this.httpClient=e,this.uploadingFiles$=new w.a([]),this.filesToUpload=[],this.zippedFile=null,this.watchZippedFile$=new w.a(null),this.zipFile=new I}static uploadFilesInfo(t){let n=0;for(let e=0;e<t.length;e++)n+=t[e].size;return{name:e.uploadFilesDirectoryName(t),size:n,dragged:!1}}static uploadFilesDirectoryName(e){let t=e[0].webkitRelativePath;return-1!==t.indexOf("/")&&(t=t.split("/")[0]),t}static dragAndDropUploadFilesDirectoryName(e){return e[0].webkitGetAsEntry().fullPath.substring(1)}getUploadingFiles(){return this.uploadingFiles$.asObservable()}getZipFile(){return this.watchZippedFile$.asObservable()}removeFolder(e){const t=this.filesToUpload.indexOf(e);-1!==t&&(this.zipFile.remove(e.name),this.filesToUpload.splice(t,1),this.uploadingFiles$.next(this.filesToUpload))}directoryExistInZipFile(t,n){let r;return r=n?e.dragAndDropUploadFilesDirectoryName(t):e.uploadFilesDirectoryName(t),-1!==Object.values(this.zipFile.files).filter(e=>e.dir).map(e=>e.name.slice(0,-1)).findIndex(e=>e===r)}uploadZip(t,n){this.zippedFile={name:n+".zip",size:this.filesToUpload.map(e=>e.size).reduce((e,t)=>e+t,0),uploadedSize:0},this.watchZippedFile$.next(this.zippedFile);let r=new L.g;r=r.set(e.X_TENANT_KEY,t.toString()),r=r.set(e.X_TRANSACTION_ID_KEY,n),r=r.set(e.X_ORIGINAL_FILENAME_HEADER,this.zippedFile.name),r=r.set("Content-Type","application/octet-stream"),r=r.set("reportProgress","true"),r=r.set("ngsw-bypass","true");const i={headers:r,responseType:"text",reportProgress:!0};return this.zipFile.generateInternalStream({type:"blob"}).accumulate(e=>{this.updateInternalZipFile(e.currentFile,e.percent)}).then(t=>this.httpClient.request(new L.i("POST",e.COLLECT_UPLOAD_URL,t,i)).pipe(Object(y.a)(e=>{e&&this.updateUploadedZipFile(e)}),Object(E.a)(e=>Object(A.a)(e))))}reinitializeZip(){for(const e of this.filesToUpload)this.zipFile.remove(e.name);this.filesToUpload=[],this.uploadingFiles$.next(this.filesToUpload)}handleUpload(t){return Object(_.a)(this,void 0,void 0,(function*(){if(0!==t.length){this.uploadInfo(e.uploadFilesInfo(t));for(let e=0;e<t.length;e++){const n=t[e];this.zipFile.file(n.webkitRelativePath,n)}}}))}handleDragAndDropUpload(e){return Object(_.a)(this,void 0,void 0,(function*(){const[t]=yield Promise.all([this.dragAndDropUploadFilesInfo(e),this.buildAsyncZip(e)]);this.uploadInfo(t)}))}updateUploadedZipFile(e){let t=0;switch(e.type){case L.f.UploadProgress:t=Math.round(e.loaded/e.total*100);break;case L.f.Response:t=100}this.zippedFile.uploadedSize=t,this.watchZippedFile$.next(this.zippedFile)}updateInternalZipFile(e,t){this.zippedFile.currentFile=e,this.zippedFile.currentFileUploadedSize=t,this.watchZippedFile$.next(this.zippedFile)}buildAsyncZip(e){return Object(_.a)(this,void 0,void 0,(function*(){for(let t=0;t<e.length;t++){const n=e[t].webkitGetAsEntry();n&&(yield this.parse(this.zipFile,n))}}))}dragAndDropUploadFilesInfo(t){return Object(_.a)(this,void 0,void 0,(function*(){const n=e.dragAndDropUploadFilesDirectoryName(t);let r=0;for(let e=0;e<t.length;e++){const n=t[e].webkitGetAsEntry();n&&(r+=(yield this.calcDragAndDropUploadFilesSize(n)))}return{name:n,size:r,dragged:!0}}))}calcDragAndDropUploadFilesSize(e){return Object(_.a)(this,void 0,void 0,(function*(){if(e.isDirectory){let t=0;const n=yield this.parseDirectoryEntry(e);for(const e of n)t+=(yield this.calcDragAndDropUploadFilesSize(e));return t}return(yield this.parseFileEntry(e)).size}))}parse(e,t){return Object(_.a)(this,void 0,void 0,(function*(){if(t.isDirectory){const n=yield this.parseDirectoryEntry(t);0===n.length&&e.folder(t.fullPath.substring(1));for(const t of n)yield this.parse(e,t)}else{const n=yield this.parseFileEntry(t);e.file(t.fullPath.substring(1),n)}}))}parseFileEntry(e){return new Promise((t,n)=>{e.file(e=>{t(e)},e=>{n(e)})})}parseDirectoryEntry(e){const t=e.createReader();return new Promise((e,n)=>{t.readEntries(t=>{e(t)},e=>{n(e)})})}uploadInfo(e){this.filesToUpload.push(e),this.uploadingFiles$.next(this.filesToUpload)}}return e.X_TENANT_KEY="X-Tenant-Id",e.X_TRANSACTION_ID_KEY="X-Transaction-Id",e.X_ORIGINAL_FILENAME_HEADER="X-Original-Filename",e.COLLECT_UPLOAD_URL="./collect-api/projects/upload",e.\u0275fac=function(t){return new(t||e)(k.ic(L.c))},e.\u0275prov=k.Tb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var S=n("NEmo"),x=n("ublV");let N=(()=>{class e{constructor(e){this.projectsApiService=e}create(e){return this.projectsApiService.createTransaction(e)}updateTransaction(e){return this.projectsApiService.updateTransaction(e)}}return e.\u0275fac=function(t){return new(t||e)(k.ic(x.a))},e.\u0275prov=k.Tb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var R=n("s2Ay"),F=n("IrDo"),D=n("mFH5"),M=n("Y2X+"),j=n("66mq");const U=["fileSearch"],z=["confirmDeleteAddRuleDialog"];function B(e,t){if(1&e&&(k.dc(0,"mat-option",40),k.Vc(1),k.cc()),2&e){const e=t.$implicit;k.vc("value",e),k.Lb(1),k.Wc(e)}}function V(e,t){if(1&e&&(k.dc(0,"mat-option",40),k.Vc(1),k.cc()),2&e){const e=t.$implicit;k.vc("value",e.id),k.Lb(1),k.Wc(e.value)}}function W(e,t){if(1&e){const e=k.ec();k.dc(0,"div",53),k.dc(1,"div",54),k.Vc(2),k.dc(3,"span",55),k.Vc(4),k.qc(5,"bytes"),k.cc(),k.cc(),k.dc(6,"div",56),k.lc("click",(function(){k.Kc(e);const n=t.$implicit;return k.pc(3).removeFolder(n)})),k.dc(7,"i",57),k.Vc(8,"clear"),k.cc(),k.cc(),k.cc()}if(2&e){const e=t.$implicit;k.Lb(1),k.vc("title",e),k.Lb(1),k.Xc(" ",null==e?null:e.name," "),k.Lb(2),k.Wc(k.rc(5,3,null==e?null:e.size))}}function q(e,t){if(1&e&&(k.dc(0,"div",49),k.dc(1,"div",50),k.dc(2,"div",51),k.Tc(3,W,9,5,"div",52),k.qc(4,"async"),k.cc(),k.cc(),k.cc()),2&e){const e=k.pc(2);k.Lb(3),k.vc("ngForOf",k.rc(4,1,e.uploadFiles$))}}const X=function(e){return{"on-over":e}};function Y(e,t){if(1&e){const e=k.ec();k.dc(0,"cdk-step"),k.dc(1,"div",4),k.dc(2,"h4"),k.Vc(3),k.qc(4,"translate"),k.cc(),k.dc(5,"h2"),k.Vc(6),k.qc(7,"translate"),k.cc(),k.dc(8,"div",5),k.dc(9,"div",41),k.lc("dragleave",(function(t){return k.Kc(e),k.pc().onDragLeave(t)}))("dragover",(function(t){return k.Kc(e),k.pc().onDragOver(t)}))("drop",(function(t){return k.Kc(e),k.pc().onDropped(t)})),k.Tc(10,q,5,3,"div",42),k.qc(11,"async"),k.dc(12,"input",43,44),k.lc("change",(function(t){return k.Kc(e),k.pc().handleFile(t)})),k.cc(),k.dc(14,"div",45),k.dc(15,"div",46),k.dc(16,"span",47),k.lc("click",(function(){return k.Kc(e),k.pc().addFolder()})),k.Vc(17),k.qc(18,"translate"),k.cc(),k.dc(19,"span",48),k.Vc(20),k.qc(21,"translate"),k.cc(),k.cc(),k.cc(),k.cc(),k.cc(),k.dc(22,"div",9),k.dc(23,"div",10),k.dc(24,"button",22),k.lc("click",(function(){return k.Kc(e),k.pc().moveToNextStep()})),k.qc(25,"async"),k.Vc(26),k.qc(27,"translate"),k.cc(),k.dc(28,"button",12),k.lc("click",(function(){return k.Kc(e),k.pc().onClose()})),k.Vc(29),k.qc(30,"translate"),k.cc(),k.cc(),k.dc(31,"button",23),k.lc("click",(function(){return k.Kc(e),k.pc().backToPreviousStep()})),k.Yb(32,"i",24),k.dc(33,"span",25),k.Vc(34),k.qc(35,"translate"),k.cc(),k.cc(),k.cc(),k.cc(),k.cc()}if(2&e){const e=k.pc();var n,r;k.Lb(3),k.Wc(k.rc(4,10,"COLLECT.MODAL.TITLE")),k.Lb(3),k.Wc(k.rc(7,12,"COLLECT.MODAL.UPLOAD_SUB_TITLE")),k.Lb(3),k.vc("ngClass",k.Ac(28,X,e.hasDropZoneOver)),k.Lb(1),k.vc("ngIf",(null==(n=k.rc(11,14,e.uploadFiles$))?null:n.length)>0),k.Lb(7),k.Xc(" ",k.rc(18,16,"COLLECT.UPLOAD.DRAG_AND_DROP_OR_BROWSE")," "),k.Lb(3),k.Wc(k.rc(21,18,"COLLECT.UPLOAD.ADD_FILE_DESCRIPTION")),k.Lb(4),k.vc("disabled",0===(null==(r=k.rc(25,20,e.uploadFiles$))?null:r.length)),k.Lb(2),k.Xc(" ",k.rc(27,22,"COMMON.NEXT")," "),k.Lb(3),k.Xc(" ",k.rc(30,24,"COMMON.UNDO")," "),k.Lb(5),k.Wc(k.rc(35,26,"COMMON.BACK"))}}function Z(e,t){if(1&e){const e=k.ec();k.dc(0,"cdk-step"),k.dc(1,"div",4),k.dc(2,"h4"),k.Vc(3),k.qc(4,"translate"),k.cc(),k.dc(5,"h2"),k.Vc(6),k.qc(7,"translate"),k.cc(),k.dc(8,"div",58),k.dc(9,"mat-button-toggle-group",6),k.dc(10,"mat-button-toggle",7),k.lc("click",(function(){k.Kc(e);const t=k.pc();return t.setFlowType(t.FlowType.FIX)})),k.Vc(11),k.qc(12,"translate"),k.cc(),k.dc(13,"mat-button-toggle",8),k.lc("click",(function(){k.Kc(e);const t=k.pc();return t.setFlowType(t.FlowType.RULES)})),k.Vc(14),k.qc(15,"translate"),k.cc(),k.cc(),k.dc(16,"div",59),k.dc(17,"span"),k.Vc(18),k.qc(19,"translate"),k.cc(),k.dc(20,"mat-button-toggle-group",60),k.dc(21,"mat-button-toggle",40),k.Vc(22),k.qc(23,"translate"),k.cc(),k.dc(24,"mat-button-toggle",40),k.Vc(25),k.qc(26,"translate"),k.cc(),k.cc(),k.cc(),k.cc(),k.dc(27,"div",9),k.dc(28,"div",10),k.dc(29,"button",11),k.lc("click",(function(){return k.Kc(e),k.pc().prepareRulesAndMoveToNextStep()})),k.Vc(30),k.qc(31,"translate"),k.cc(),k.dc(32,"button",12),k.lc("click",(function(){return k.Kc(e),k.pc().onClose()})),k.Vc(33),k.qc(34,"translate"),k.cc(),k.cc(),k.dc(35,"button",23),k.lc("click",(function(){return k.Kc(e),k.pc().backToPreviousStep()})),k.Yb(36,"i",24),k.dc(37,"span",25),k.Vc(38),k.qc(39,"translate"),k.cc(),k.cc(),k.cc(),k.cc(),k.cc()}if(2&e){const e=k.pc();k.Lb(3),k.Wc(k.rc(4,15,"COLLECT.MODAL.TITLE")),k.Lb(3),k.Wc(k.rc(7,17,"COLLECT.MODAL.FLOW_WORKFLOW_TYPE_CHOICE")),k.Lb(4),k.wc("value",e.FlowType.FIX),k.vc("checked",!0),k.Lb(1),k.Xc(" ",k.rc(12,19,"COLLECT.MODAL.FIX_FLOW_WORKFLOW")," "),k.Lb(2),k.wc("value",e.FlowType.RULES),k.Lb(1),k.Xc(" ",k.rc(15,21,"COLLECT.MODAL.RULES_FLOW_WORKFLOW")," "),k.Lb(4),k.Wc(k.rc(19,23,"COLLECT.MODAL.AUTO_INGEST")),k.Lb(3),k.vc("value",!0),k.Lb(1),k.Xc(" ",k.rc(23,25,"COLLECT.MODAL.AUTO_INGEST_TRUE")," "),k.Lb(2),k.vc("value",!1),k.Lb(1),k.Xc(" ",k.rc(26,27,"COLLECT.MODAL.AUTO_INGEST_FALSE")," "),k.Lb(5),k.Xc(" ",k.rc(31,29,"COMMON.NEXT")," "),k.Lb(3),k.Xc(" ",k.rc(34,31,"COMMON.UNDO")," "),k.Lb(5),k.Wc(k.rc(39,33,"COMMON.BACK"))}}function K(e,t){if(1&e){const e=k.ec();k.dc(0,"cdk-step"),k.dc(1,"div",4),k.dc(2,"h4"),k.Vc(3),k.qc(4,"translate"),k.cc(),k.dc(5,"h2"),k.Vc(6),k.qc(7,"translate"),k.cc(),k.dc(8,"div",5),k.dc(9,"div",61),k.Yb(10,"vitamui-library-filing-plan",62),k.cc(),k.cc(),k.dc(11,"div",9),k.dc(12,"div",10),k.dc(13,"button",11),k.lc("click",(function(){return k.Kc(e),k.pc().validateAndCreateProject()})),k.Vc(14),k.qc(15,"translate"),k.cc(),k.dc(16,"button",12),k.lc("click",(function(){return k.Kc(e),k.pc().onClose()})),k.Vc(17),k.qc(18,"translate"),k.cc(),k.cc(),k.dc(19,"button",23),k.lc("click",(function(){return k.Kc(e),k.pc().backToPreviousStep()})),k.Yb(20,"i",24),k.dc(21,"span",25),k.Vc(22),k.qc(23,"translate"),k.cc(),k.cc(),k.cc(),k.cc(),k.cc()}if(2&e){const e=k.pc();k.Lb(3),k.Wc(k.rc(4,9,"COLLECT.MODAL.TITLE")),k.Lb(3),k.Wc(k.rc(7,11,"COLLECT.MODAL.ARCHIVE_POSITION_SUB_TITLE")),k.Lb(4),k.vc("accessContract",e.accessContractSelect.value)("formControl",e.linkParentIdControl)("mode",e.FilingPlanMode.SOLO)("tenantIdentifier",e.tenantIdentifier),k.Lb(4),k.Xc(" ",k.rc(15,13,"COMMON.SUBMIT")," "),k.Lb(3),k.Xc(" ",k.rc(18,15,"COMMON.UNDO")," "),k.Lb(5),k.Wc(k.rc(23,17,"COMMON.BACK"))}}function G(e,t){if(1&e&&(k.dc(0,"mat-option",83),k.Vc(1),k.cc()),2&e){const e=t.$implicit;k.vc("value",e),k.Lb(1),k.Xc(" ",e.Identifier," ")}}function J(e,t){1&e&&(k.Yb(0,"vitamui-common-input",84),k.qc(1,"translate")),2&e&&k.wc("placeholder",k.rc(1,1,"COLLECT.MODAL.VALUE"))}function H(e,t){if(1&e){const e=k.ec();k.dc(0,"span",90),k.lc("click",(function(){return k.Kc(e),k.pc(),k.Gc(6).open()})),k.Vc(1),k.cc()}if(2&e){const e=k.pc(2).$implicit;k.Lb(1),k.Xc(" ",e.value.metadataValue," ")}}function $(e,t){if(1&e){const e=k.ec();k.dc(0,"span",91),k.lc("click",(function(){return k.Kc(e),k.pc(),k.Gc(6).open()})),k.Vc(1),k.qc(2,"dateTime"),k.cc()}if(2&e){const e=k.pc(2).$implicit;k.Lb(1),k.Xc(" ",k.sc(2,1,e.value.metadataValue,"dd/MM/yyyy")," ")}}function Q(e,t){if(1&e){const e=k.ec();k.dc(0,"div",85),k.lc("click",(function(){return k.Kc(e),k.Gc(6).open()})),k.Tc(1,H,2,1,"span",86),k.Tc(2,$,3,4,"ng-template",null,87,k.Uc),k.Yb(4,"input",88),k.Yb(5,"mat-datepicker",null,89),k.cc()}if(2&e){const e=k.Gc(3),t=k.Gc(6),n=k.pc().$implicit;k.Lb(1),k.vc("ngIf",!n.value.metadataValue)("ngIfElse",e),k.Lb(3),k.vc("matDatepicker",t)}}const ee=function(e){return{opened:e}};function te(e,t){if(1&e){const e=k.ec();k.dc(0,"div",66),k.bc(1,2),k.dc(2,"div",67),k.lc("click",(function(){k.Kc(e);const n=t.$implicit;return k.pc(2).openCloseRuleParam(n.value)})),k.dc(3,"div",68),k.dc(4,"div",69),k.Yb(5,"i"),k.cc(),k.dc(6,"div",70),k.Vc(7),k.qc(8,"translate"),k.cc(),k.cc(),k.dc(9,"div",68),k.Yb(10,"div",71),k.dc(11,"button",72),k.lc("click",(function(){k.Kc(e);const n=t.index;return k.pc(2).deleteRuleParam(n)})),k.qc(12,"translate"),k.Yb(13,"i",73),k.cc(),k.cc(),k.cc(),k.dc(14,"div",74),k.dc(15,"div",75),k.dc(16,"div",13),k.dc(17,"div",16),k.dc(18,"label"),k.Vc(19),k.qc(20,"translate"),k.cc(),k.dc(21,"mat-form-field",76),k.dc(22,"mat-select",77),k.qc(23,"translate"),k.Tc(24,G,2,2,"mat-option",78),k.cc(),k.dc(25,"div",79),k.dc(26,"i",57),k.Vc(27,"keyboard_arrow_up"),k.cc(),k.dc(28,"i",57),k.Vc(29,"keyboard_arrow_down"),k.cc(),k.cc(),k.cc(),k.cc(),k.dc(30,"div",16),k.dc(31,"label"),k.Vc(32),k.qc(33,"translate"),k.cc(),k.Tc(34,J,2,3,"vitamui-common-input",80),k.Tc(35,Q,7,3,"div",81),k.cc(),k.cc(),k.dc(36,"div",13),k.dc(37,"div",16),k.dc(38,"label"),k.Vc(39),k.qc(40,"translate"),k.cc(),k.Yb(41,"vitamui-library-filing-plan",82),k.cc(),k.cc(),k.cc(),k.cc(),k.ac(),k.cc()}if(2&e){const e=t.$implicit,n=t.index,r=k.pc(2);k.Lb(1),k.vc("formGroup",r.asFormGroup(e)),k.Lb(1),k.vc("ngClass",k.Ac(31,ee,e.value.opened)),k.Lb(3),k.Ob("vitamui-icon ",e.value.opened?"vitamui-icon-chevron-down":"vitamui-icon-chevron-right",""),k.Lb(2),k.Xc(" ",k.rc(8,19,"COLLECT.MODAL.RULE_PARAMETER_PREFIX")+(n+1)," "),k.Lb(4),k.wc("matTooltip",k.rc(12,21,"COLLECT.MODAL.REMOVE_PARAM")),k.Lb(3),k.vc("hidden",!e.value.opened),k.Lb(5),k.Wc(k.rc(20,23,"COLLECT.MODAL.SELECT_METADATA")),k.Lb(3),k.wc("placeholder",k.rc(23,25,"COLLECT.MODAL.SELECT_THE_METADATA")),k.Lb(2),k.vc("ngForOf",r.ontologies),k.Lb(8),k.Wc(k.rc(33,27,"COLLECT.MODAL.SET_VALUE")),k.Lb(2),k.vc("ngIf","DATE"!==e.value.ontology.Type),k.Lb(1),k.vc("ngIf","DATE"===e.value.ontology.Type),k.Lb(4),k.Wc(k.rc(40,29,"COLLECT.MODAL.ATTACH_POSITION")),k.Lb(2),k.vc("formControl",r.asFormControl(e.get("unitUp")))("accessContract",r.accessContractSelect.value)("mode",r.FilingPlanMode.SOLO)("tenantIdentifier",r.tenantIdentifier)}}function ne(e,t){if(1&e){const e=k.ec();k.dc(0,"cdk-step"),k.dc(1,"div",4),k.dc(2,"h4"),k.Vc(3),k.qc(4,"translate"),k.cc(),k.dc(5,"h2"),k.Vc(6),k.qc(7,"translate"),k.cc(),k.dc(8,"div",5),k.bc(9,63),k.Tc(10,te,42,33,"div",64),k.ac(),k.dc(11,"div"),k.dc(12,"button",23),k.lc("click",(function(){return k.Kc(e),k.pc().addRuleParam()})),k.Yb(13,"i",65),k.dc(14,"span"),k.Vc(15),k.qc(16,"translate"),k.cc(),k.cc(),k.cc(),k.cc(),k.dc(17,"div",9),k.dc(18,"div",10),k.dc(19,"button",22),k.lc("click",(function(){return k.Kc(e),k.pc().validateAndCreateProject()})),k.Vc(20),k.qc(21,"translate"),k.cc(),k.dc(22,"button",12),k.lc("click",(function(){return k.Kc(e),k.pc().onClose()})),k.Vc(23),k.qc(24,"translate"),k.cc(),k.cc(),k.dc(25,"button",23),k.lc("click",(function(){return k.Kc(e),k.pc().backToPreviousStep()})),k.Yb(26,"i",24),k.dc(27,"span",25),k.Vc(28),k.qc(29,"translate"),k.cc(),k.cc(),k.cc(),k.cc(),k.cc()}if(2&e){const e=k.pc();k.Lb(3),k.Wc(k.rc(4,8,"COLLECT.MODAL.TITLE")),k.Lb(3),k.Wc(k.rc(7,10,"COLLECT.MODAL.RULES_TITLE")),k.Lb(4),k.vc("ngForOf",e.rulesParams.controls),k.Lb(5),k.Wc(k.rc(16,12,"COLLECT.MODAL.RULES_PARAMS_ADD")),k.Lb(4),k.vc("disabled",e.stepRulesParamsIsInvalid()),k.Lb(1),k.Xc(" ",k.rc(21,14,"COMMON.SUBMIT")," "),k.Lb(3),k.Xc(" ",k.rc(24,16,"COMMON.UNDO")," "),k.Lb(5),k.Wc(k.rc(29,18,"COMMON.BACK"))}}function re(e,t){if(1&e){const e=k.ec();k.dc(0,"cdk-step"),k.dc(1,"div",4),k.dc(2,"h4"),k.Vc(3),k.qc(4,"translate"),k.cc(),k.dc(5,"h2"),k.Vc(6),k.qc(7,"translate"),k.cc(),k.dc(8,"div",5),k.dc(9,"div",92),k.dc(10,"div",93),k.dc(11,"div",94),k.Vc(12),k.qc(13,"translate"),k.cc(),k.dc(14,"div",95),k.Vc(15),k.qc(16,"translate"),k.cc(),k.dc(17,"div",96),k.Vc(18),k.qc(19,"translate"),k.cc(),k.dc(20,"div",97),k.Vc(21),k.qc(22,"translate"),k.cc(),k.cc(),k.dc(23,"div",98),k.dc(24,"div",94),k.Vc(25),k.qc(26,"async"),k.cc(),k.dc(27,"div",95),k.Vc(28),k.qc(29,"fileSize"),k.qc(30,"async"),k.cc(),k.dc(31,"div",96),k.dc(32,"span",99),k.Vc(33),k.qc(34,"number"),k.qc(35,"async"),k.cc(),k.Yb(36,"mat-progress-bar",100),k.qc(37,"async"),k.cc(),k.dc(38,"div",97),k.dc(39,"span",99),k.Vc(40),k.qc(41,"number"),k.qc(42,"async"),k.cc(),k.Yb(43,"mat-progress-bar",100),k.qc(44,"async"),k.cc(),k.cc(),k.cc(),k.cc(),k.dc(45,"div",9),k.dc(46,"button",22),k.lc("click",(function(){return k.Kc(e),k.pc().close()})),k.Vc(47),k.qc(48,"translate"),k.cc(),k.cc(),k.cc(),k.cc()}if(2&e){const e=k.pc();var n,r,i,c,a,o;k.Lb(3),k.Wc(k.rc(4,14,"COLLECT.MODAL.TITLE")),k.Lb(3),k.Wc(k.rc(7,16,"COLLECT.MODAL.UPLOAD_FILES")),k.Lb(6),k.Wc(k.rc(13,18,"COLLECT.UPLOAD.ZIP_NAME")),k.Lb(3),k.Wc(k.rc(16,20,"COLLECT.UPLOAD.WEIGHT")),k.Lb(3),k.Wc(k.rc(19,22,"COLLECT.UPLOAD.ZIP_TRACKING_TITLE")),k.Lb(3),k.Wc(k.rc(22,24,"COLLECT.UPLOAD.STATUS")),k.Lb(4),k.Wc(null==(n=k.rc(26,26,e.zippedFile$))?null:n.name),k.Lb(3),k.Wc(k.rc(29,28,null==(r=k.rc(30,30,e.zippedFile$))?null:r.size)),k.Lb(5),k.Xc("",k.sc(34,32,null==(i=k.rc(35,35,e.zippedFile$))?null:i.currentFileUploadedSize,"1.0-0")," %"),k.Lb(3),k.vc("value",null==(c=k.rc(37,37,e.zippedFile$))?null:c.currentFileUploadedSize),k.Lb(4),k.Xc("",k.sc(41,39,null==(a=k.rc(42,42,e.zippedFile$))?null:a.uploadedSize,"1.0-0")," %"),k.Lb(3),k.vc("value",null==(o=k.rc(44,44,e.zippedFile$))?null:o.uploadedSize),k.Lb(3),k.vc("disabled",e.pending),k.Lb(1),k.Xc(" ",k.rc(48,46,"COMMON.CLOSE")," ")}}function ie(e,t){if(1&e){const e=k.ec();k.dc(0,"cdk-step"),k.dc(1,"div",4),k.dc(2,"h4"),k.Vc(3),k.qc(4,"translate"),k.cc(),k.dc(5,"h2"),k.Vc(6),k.qc(7,"translate"),k.cc(),k.Yb(8,"div",5),k.dc(9,"div",9),k.dc(10,"button",22),k.lc("click",(function(){return k.Kc(e),k.pc().close()})),k.Vc(11),k.qc(12,"translate"),k.cc(),k.cc(),k.cc(),k.cc()}if(2&e){const e=k.pc();k.Lb(3),k.Wc(k.rc(4,4,"COLLECT.MODAL.TITLE")),k.Lb(3),k.Wc(k.rc(7,6,"COLLECT.MODAL.PROJECT_CREATED")),k.Lb(4),k.vc("disabled",e.pending),k.Lb(1),k.Xc(" ",k.rc(12,8,"COMMON.CLOSE")," ")}}let ce=(()=>{class e{constructor(e,t,n,r,i,o,s,l,d,u,h,f,p,m){this.formBuilder=e,this.dialogRef=t,this.dialogRefToClose=n,this.data=r,this.projectsService=i,this.transactionsService=o,this.uploadService=s,this.snackBar=l,this.logger=d,this.externalParameterService=u,this.cdr=h,this.translationService=f,this.dialog=p,this.ontologyService=m,this.Workflow=c.rb,this.FilingPlanMode=a.b,this.FlowType=c.I,this.selectedWorkflow=c.rb.MANUAL,this.selectedFlowType=c.I.FIX,this.stepIndex=0,this.stepCount=6,this.hasDropZoneOver=!1,this.hasError=!1,this.acquisitionInformationsList=[this.translationService.instant("ACQUISITION_INFORMATION.PAYMENT"),this.translationService.instant("ACQUISITION_INFORMATION.PROTOCOL"),this.translationService.instant("ACQUISITION_INFORMATION.PURCHASE"),this.translationService.instant("ACQUISITION_INFORMATION.COPY"),this.translationService.instant("ACQUISITION_INFORMATION.DATION"),this.translationService.instant("ACQUISITION_INFORMATION.DEPOSIT"),this.translationService.instant("ACQUISITION_INFORMATION.DEVOLUTION"),this.translationService.instant("ACQUISITION_INFORMATION.DONATION"),this.translationService.instant("ACQUISITION_INFORMATION.BEQUEST"),this.translationService.instant("ACQUISITION_INFORMATION.REINSTATEMENT"),this.translationService.instant("ACQUISITION_INFORMATION.OTHER"),this.translationService.instant("ACQUISITION_INFORMATION.UNKNOWN")],this.legalStatusList=[{id:"Public Archive",value:this.translationService.instant("LEGAL_STATUS.PUBLIC_ARCHIVE")},{id:"Private Archive",value:this.translationService.instant("LEGAL_STATUS.PRIVATE_ARCHIVE")},{id:"Public and Private Archive",value:this.translationService.instant("LEGAL_STATUS.PUBLIC_PRIVATE_ARCHIVE")}],this.uploadZipCompleted=!1}get linkParentIdControl(){return this.projectForm.controls.linkParentIdControl}get accessContractSelect(){return this.projectForm.controls.accessContractSelect}ngOnInit(){this.tenantIdentifier=this.data.tenantIdentifier,this.initForm(),this.accessContract(),this.uploadFiles$=this.uploadService.getUploadingFiles(),this.zippedFile$=this.uploadService.getZipFile(),this.ontologyService.getInternalOntologyFieldsList().subscribe(e=>{this.ontologies=e,this.ontologies.sort((e,t)=>{const n=e.Identifier,r=t.Identifier;return n<r?-1:n>r?1:0})})}ngOnDestroy(){this.uploadService.reinitializeZip()}ngAfterViewChecked(){this.cdr.detectChanges()}accessContract(){this.externalParameterService.getUserExternalParameters().subscribe(e=>{const t=e.get(c.E.PARAM_ACCESS_CONTRACT);t&&t.length>0?this.accessContractSelect.setValue(t):this.snackBar.open(this.translationService.instant("COLLECT.NO_ACCESS_CONTRACT"),null,{panelClass:"vitamui-snack-bar",duration:1e4})})}onClose(){this.dialogRefToClose.close(!0)}setWorkflow(e){this.selectedWorkflow=e}setFlowType(e){this.selectedFlowType=e}prepareRulesAndMoveToNextStep(){this.selectedFlowType===c.I.RULES&&0===this.rulesParams.length&&this.addRuleParam(),this.moveToNextStep()}moveToNextStep(){this.stepIndex=this.stepIndex+1}backToPreviousStep(){this.stepIndex=this.stepIndex-1}onDragOver(e){e.preventDefault(),this.hasDropZoneOver=!0}onDragLeave(e){e.preventDefault(),this.hasDropZoneOver=!1}onDropped(e){return Object(_.a)(this,void 0,void 0,(function*(){this.hasDropZoneOver=!1,e.preventDefault();const t=e.dataTransfer.items;this.uploadService.directoryExistInZipFile(t,!0)?this.snackBar.open(this.translationService.instant("COLLECT.UPLOAD_FILE_ALREADY_IMPORTED"),null,{duration:3e3}):yield this.uploadService.handleDragAndDropUpload(t)}))}handleFile(e){return Object(_.a)(this,void 0,void 0,(function*(){e.preventDefault();const t=e.target.files;this.uploadService.directoryExistInZipFile(t,!1)?this.snackBar.open(this.translationService.instant("COLLECT.UPLOAD_FILE_ALREADY_IMPORTED"),null,{duration:3e3}):yield this.uploadService.handleUpload(t)}))}addFolder(){this.fileSearch.nativeElement.click()}removeFolder(e){this.uploadService.removeFolder(e)}stepDescriptionIsInvalid(){return this.projectForm.controls.originatingAgencyIdentifier.invalid||this.projectForm.controls.messageIdentifier.invalid||this.projectForm.controls.submissionAgencyIdentifier.invalid}stepContextIsInvalid(){return this.projectForm.controls.archivalAgencyIdentifier.invalid||this.projectForm.controls.transferringAgencyIdentifier.invalid||this.projectForm.controls.archivalAgreement.invalid}stepRulesParamsIsInvalid(){return this.projectForm.controls.rulesParams.invalid}close(){this.dialogRef.close(!0)}initForm(){this.projectForm=this.formBuilder.group({accessContractSelect:[null],automaticIngest:[!0],referentialCheckup:[!1],archivalAgreement:[null,i.w.required],messageIdentifier:[null],archivalAgencyIdentifier:[null,i.w.required],transferringAgencyIdentifier:[null,i.w.required],originatingAgencyIdentifier:[null,i.w.required],submissionAgencyIdentifier:[null,i.w.required],archiveProfile:[null],acquisitionInformation:[null],legalStatus:[null],linkParentIdControl:[{included:[],excluded:[]}],rulesParams:this.formBuilder.array([],i.w.required),comment:[null],status:[null]})}formToProject(){const e={name:this.projectForm.value.messageIdentifier,archivalAgreement:this.projectForm.value.archivalAgreement,messageIdentifier:this.projectForm.value.messageIdentifier,archivalAgencyIdentifier:this.projectForm.value.archivalAgencyIdentifier,transferringAgencyIdentifier:this.projectForm.value.transferringAgencyIdentifier,originatingAgencyIdentifier:this.projectForm.value.originatingAgencyIdentifier,submissionAgencyIdentifier:this.projectForm.value.submissionAgencyIdentifier,archivalProfile:this.projectForm.value.archivalProfile,archiveProfile:this.projectForm.value.archiveProfile,acquisitionInformation:this.projectForm.value.acquisitionInformation,legalStatus:this.projectForm.value.legalStatus,comment:this.projectForm.value.comment,status:c.U.OPEN,automaticIngest:this.selectedWorkflow===c.rb.MANUAL?null:!0===this.projectForm.value.automaticIngest};return this.selectedWorkflow===c.rb.MANUAL||this.selectedFlowType===c.I.FIX?e.unitUp=this.linkParentIdControl.value.included[0]:e.unitUps=this.convertRuleParamsToMetadata(),e}convertRuleParamsToMetadata(){return this.rulesParams.controls.map(e=>{const t=e.value;return{metadataKey:t.ontology.ApiField,metadataValue:t.metadataValue,unitUp:t.unitUp.included[0]}})}get rulesParams(){return this.projectForm.controls.rulesParams}openCloseRuleParam(e){e.opened=!e.opened}addRuleParam(){for(const t of this.rulesParams.controls)t.value.opened=!1;const e=this.formBuilder.group({opened:[!0],ontology:["",i.w.required],metadataValue:["",i.w.required],unitUp:[{included:[],excluded:[]},Object(a.g)()]});this.rulesParams.push(e)}deleteRuleParam(e){this.rulesParams.removeAt(e)}validateAndCreateProject(){this.selectedWorkflow===c.rb.MANUAL?this.createProjectAndTransactionAndUpload():this.createProject()}createProject(){this.pending=!0;const e=this.formToProject();this.moveToNextStep(),this.projectsService.create(e).subscribe(e=>{this.pending=!1,this.snackBar.open(this.translationService.instant("COLLECT.MODAL.PROJECT_CREATED"),null,{panelClass:"vitamui-snack-bar",duration:1e4})},e=>{this.pending=!1,this.snackBar.open(this.translationService.instant("COLLECT.MODAL.PROJECT_CREATION_ERROR"),null,{panelClass:"vitamui-snack-bar",duration:1e4})})}createProjectAndTransactionAndUpload(){this.uploadZipCompleted=!1,this.pending=!0;const e=this.formToProject();this.moveToNextStep(),this.projectsService.create(e).pipe(Object(O.a)(e=>e.id),Object(O.a)(e=>({status:c.ib.OPEN,projectId:e})),Object(T.a)(e=>this.transactionsService.create(e)),Object(O.a)(e=>e.id),Object(T.a)(e=>this.uploadService.uploadZip(this.tenantIdentifier,e)),Object(T.a)(e=>e),Object(y.a)(()=>{this.uploadZipCompleted=!0,this.pending=!1,this.snackBar.open(this.translationService.instant("COLLECT.UPLOAD.TERMINATED"),null,{panelClass:"vitamui-snack-bar",duration:1e4})}),Object(E.a)(e=>this.logger.error(e))).subscribe()}asFormGroup(e){return e}asFormControl(e){return e}}return e.\u0275fac=function(t){return new(t||e)(k.Xb(i.e),k.Xb(d.h),k.Xb(d.h),k.Xb(d.a),k.Xb(S.a),k.Xb(N),k.Xb(P),k.Xb(g.b),k.Xb(c.O),k.Xb(c.F),k.Xb(k.h),k.Xb(R.e),k.Xb(d.b),k.Xb(c.R))},e.\u0275cmp=k.Rb({type:e,selectors:[["app-create-project"]],viewQuery:function(e,t){var n;1&e&&(k.bd(U,!0),k.Pc(z,!0)),2&e&&(k.Fc(n=k.mc())&&(t.fileSearch=n.first),k.Fc(n=k.mc())&&(t.confirmDeleteAddRuleDialog=n.first))},decls:145,vars:130,consts:[[1,"header"],[3,"count","index"],[3,"formGroup"],[3,"selectedIndex"],[1,"content"],[1,"main-content"],[1,"vitamui-button-toggle-group"],[3,"value","checked","click"],[3,"value","click"],[1,"actions"],[1,"line"],["type","button",1,"btn","primary",3,"click"],["type","button",1,"btn","link",3,"click"],[1,"row"],["formControlName","messageIdentifier","required","",1,"col",3,"placeholder"],["formControlName","comment",1,"col",3,"placeholder"],[1,"col"],[1,"col","toggle-right"],["formControlName","referentialCheckup","matTooltipPosition","below",1,"fields-padding","d-flex",3,"disabled"],["formControlName","originatingAgencyIdentifier","required","",1,"col",3,"placeholder"],[1,"col","offset-1",3,"disabled","placeholder"],["formControlName","submissionAgencyIdentifier","required","",1,"col",3,"placeholder"],["type","button",1,"btn","primary",3,"disabled","click"],["type","button",1,"btn","link","back",3,"click"],[1,"vitamui-icon","vitamui-icon-chevron-left"],[1,"underline"],["formControlName","referentialCheckup","matTooltipPosition","below",1,"fields-padding",3,"disabled"],["formControlName","archivalAgencyIdentifier","required","",1,"col",3,"placeholder"],["formControlName","transferringAgencyIdentifier","required","",1,"col",3,"placeholder"],["formControlName","archivalAgreement","required","",1,"col",3,"placeholder"],["formControlName","archiveProfile",1,"col",3,"placeholder"],["appearance","outline","id","acquisition-informations",1,"col"],["for","acquisition-informations"],[1,"pb-3"],["formControlName","acquisitionInformation"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline","id","legal-status",1,"col"],["for","legal-status"],["formControlName","legalStatus"],[4,"ngIf"],[3,"value"],[1,"drag-and-drop-area",3,"ngClass","dragleave","dragover","drop"],["class","drag-container",4,"ngIf"],["directory","","multiple","","type","file","webkitdirectory","",1,"input-file",3,"change"],["fileSearch",""],[1,"drop-area"],[1,"sip-drop"],[1,"url-select",3,"click"],[1,"sip-drop-small"],[1,"drag-container"],[1,"file-info-class"],[1,"vitamui-chip-list"],["class","vitamui-chip",4,"ngFor","ngForOf"],[1,"vitamui-chip"],[1,"vitamui-chip-content",3,"title"],[1,"file-size"],[1,"vitamui-remove-chip",3,"click"],[1,"material-icons"],[1,"main-content","gap-20"],[1,"hgap-10"],["formControlName","automaticIngest",1,"vitamui-button-toggle-group"],[1,"form-group"],[3,"accessContract","formControl","mode","tenantIdentifier"],["formArrayName","rulesParams"],["class","object-container",4,"ngFor","ngForOf"],[1,"vitamui-icon","vitamui-icon-chevron-right"],[1,"object-container"],[1,"object-menu",3,"ngClass","click"],[1,"line","split"],[1,"line","open-close-icon"],[1,"line","shrink","object-name"],[1,"line","shrink","object-type"],["matTooltipClass","vitamui-tooltip",1,"delete-button",3,"matTooltip","click"],[1,"vitamui-icon","vitamui-icon-delete"],[1,"object-details",3,"hidden"],[1,"object-details-group"],[1,"vitamui-mat-select"],["formControlName","ontology",1,"select",3,"placeholder"],["class","option",3,"value",4,"ngFor","ngForOf"],[1,"select-arrow"],["formControlName","metadataValue","class","col",3,"placeholder",4,"ngIf"],["class","vitamui-input",3,"click",4,"ngIf"],[3,"formControl","accessContract","mode","tenantIdentifier"],[1,"option",3,"value"],["formControlName","metadataValue",1,"col",3,"placeholder"],[1,"vitamui-input",3,"click"],["class","search-date-label",3,"click",4,"ngIf","ngIfElse"],["showOtherCriteria",""],["size","0","formControlName","metadataValue",1,"hidden",3,"matDatepicker"],["pickerOtherCriteria",""],[1,"search-date-label",3,"click"],[3,"click"],[1,"new-design-table"],[1,"new-design-row","new-design-head"],[1,"name"],[1,"size"],[1,"compression"],[1,"upload"],[1,"new-design-row"],[1,"purcent"],["mode","determinate",1,"stepper-progress-bar",3,"value"]],template:function(e,t){1&e&&(k.dc(0,"div",0),k.Yb(1,"vitamui-common-progress-bar",1),k.cc(),k.dc(2,"form",2),k.dc(3,"vitamui-common-stepper",3),k.dc(4,"cdk-step"),k.dc(5,"div",4),k.dc(6,"h4"),k.Vc(7),k.qc(8,"translate"),k.cc(),k.dc(9,"h2"),k.Vc(10),k.qc(11,"translate"),k.cc(),k.dc(12,"div",5),k.dc(13,"mat-button-toggle-group",6),k.dc(14,"mat-button-toggle",7),k.lc("click",(function(){return t.setWorkflow(t.Workflow.MANUAL)})),k.Vc(15),k.qc(16,"translate"),k.cc(),k.dc(17,"mat-button-toggle",8),k.lc("click",(function(){return t.setWorkflow(t.Workflow.FLOW)})),k.Vc(18),k.qc(19,"translate"),k.cc(),k.cc(),k.cc(),k.dc(20,"div",9),k.dc(21,"div",10),k.dc(22,"button",11),k.lc("click",(function(){return t.moveToNextStep()})),k.Vc(23),k.qc(24,"translate"),k.cc(),k.dc(25,"button",12),k.lc("click",(function(){return t.onClose()})),k.Vc(26),k.qc(27,"translate"),k.cc(),k.cc(),k.cc(),k.cc(),k.cc(),k.dc(28,"cdk-step"),k.dc(29,"div",4),k.dc(30,"h4"),k.Vc(31),k.qc(32,"translate"),k.cc(),k.dc(33,"h2"),k.Vc(34),k.qc(35,"translate"),k.cc(),k.dc(36,"div",5),k.dc(37,"div",13),k.Yb(38,"vitamui-common-input",14),k.qc(39,"translate"),k.cc(),k.dc(40,"div",13),k.Yb(41,"vitamui-common-textarea",15),k.qc(42,"translate"),k.cc(),k.dc(43,"div",13),k.dc(44,"div",16),k.dc(45,"h4"),k.Vc(46),k.qc(47,"translate"),k.cc(),k.cc(),k.dc(48,"div",17),k.dc(49,"vitamui-common-slide-toggle",18),k.Vc(50),k.qc(51,"translate"),k.cc(),k.cc(),k.cc(),k.dc(52,"div",13),k.Yb(53,"vitamui-common-input",19),k.qc(54,"translate"),k.Yb(55,"vitamui-common-input",20),k.qc(56,"translate"),k.cc(),k.dc(57,"div",13),k.Yb(58,"vitamui-common-input",21),k.qc(59,"translate"),k.Yb(60,"vitamui-common-input",20),k.qc(61,"translate"),k.cc(),k.cc(),k.dc(62,"div",9),k.dc(63,"div",10),k.dc(64,"button",22),k.lc("click",(function(){return t.moveToNextStep()})),k.Vc(65),k.qc(66,"translate"),k.cc(),k.dc(67,"button",12),k.lc("click",(function(){return t.onClose()})),k.Vc(68),k.qc(69,"translate"),k.cc(),k.cc(),k.dc(70,"button",23),k.lc("click",(function(){return t.backToPreviousStep()})),k.Yb(71,"i",24),k.dc(72,"span",25),k.Vc(73),k.qc(74,"translate"),k.cc(),k.cc(),k.cc(),k.cc(),k.cc(),k.dc(75,"cdk-step"),k.dc(76,"div",4),k.dc(77,"h4"),k.Vc(78),k.qc(79,"translate"),k.cc(),k.dc(80,"div",13),k.dc(81,"div",16),k.dc(82,"h2"),k.Vc(83),k.qc(84,"translate"),k.cc(),k.cc(),k.dc(85,"div",17),k.dc(86,"vitamui-common-slide-toggle",26),k.Vc(87),k.qc(88,"translate"),k.cc(),k.cc(),k.cc(),k.dc(89,"div",5),k.dc(90,"div",13),k.Yb(91,"vitamui-common-input",27),k.qc(92,"translate"),k.Yb(93,"vitamui-common-input",20),k.qc(94,"translate"),k.cc(),k.dc(95,"div",13),k.Yb(96,"vitamui-common-input",28),k.qc(97,"translate"),k.Yb(98,"vitamui-common-input",20),k.qc(99,"translate"),k.cc(),k.dc(100,"div",13),k.Yb(101,"vitamui-common-input",29),k.qc(102,"translate"),k.Yb(103,"vitamui-common-input",20),k.qc(104,"translate"),k.cc(),k.dc(105,"div",13),k.Yb(106,"vitamui-common-input",30),k.qc(107,"translate"),k.Yb(108,"vitamui-common-input",20),k.qc(109,"translate"),k.cc(),k.dc(110,"div",13),k.dc(111,"mat-form-field",31),k.dc(112,"label",32),k.dc(113,"span",33),k.Vc(114),k.qc(115,"translate"),k.cc(),k.cc(),k.dc(116,"mat-select",34),k.Tc(117,B,2,2,"mat-option",35),k.cc(),k.cc(),k.cc(),k.dc(118,"div",13),k.dc(119,"mat-form-field",36),k.dc(120,"label",37),k.dc(121,"span",33),k.Vc(122),k.qc(123,"translate"),k.cc(),k.cc(),k.dc(124,"mat-select",38),k.Tc(125,V,2,2,"mat-option",35),k.cc(),k.cc(),k.cc(),k.cc(),k.dc(126,"div",9),k.dc(127,"div",10),k.dc(128,"button",22),k.lc("click",(function(){return t.moveToNextStep()})),k.Vc(129),k.qc(130,"translate"),k.cc(),k.dc(131,"button",12),k.lc("click",(function(){return t.onClose()})),k.Vc(132),k.qc(133,"translate"),k.cc(),k.cc(),k.dc(134,"button",23),k.lc("click",(function(){return t.backToPreviousStep()})),k.Yb(135,"i",24),k.dc(136,"span",25),k.Vc(137),k.qc(138,"translate"),k.cc(),k.cc(),k.cc(),k.cc(),k.cc(),k.Tc(139,Y,36,30,"cdk-step",39),k.Tc(140,Z,40,35,"cdk-step",39),k.Tc(141,K,24,19,"cdk-step",39),k.Tc(142,ne,30,20,"cdk-step",39),k.Tc(143,re,49,48,"cdk-step",39),k.Tc(144,ie,13,10,"cdk-step",39),k.cc(),k.cc()),2&e&&(k.Lb(1),k.vc("count",t.stepCount)("index",t.stepIndex),k.Lb(1),k.vc("formGroup",t.projectForm),k.Lb(1),k.vc("selectedIndex",t.stepIndex),k.Lb(4),k.Wc(k.rc(8,60,"COLLECT.MODAL.TITLE")),k.Lb(3),k.Wc(k.rc(11,62,"COLLECT.MODAL.WORKFLOW_CHOICE")),k.Lb(4),k.wc("value",t.Workflow.MANUAL),k.vc("checked",!0),k.Lb(1),k.Xc(" ",k.rc(16,64,"COLLECT.MODAL.MANUAL_WORKFLOW")," "),k.Lb(2),k.wc("value",t.Workflow.FLOW),k.Lb(1),k.Xc(" ",k.rc(19,66,"COLLECT.MODAL.FLOW_WORKFLOW")," "),k.Lb(5),k.Xc(" ",k.rc(24,68,"COMMON.NEXT")," "),k.Lb(3),k.Xc(" ",k.rc(27,70,"COMMON.UNDO")," "),k.Lb(5),k.Wc(k.rc(32,72,"COLLECT.MODAL.TITLE")),k.Lb(3),k.Wc(k.rc(35,74,"COLLECT.PROJECT_DESCRIPTION_SUB_TITLE")),k.Lb(4),k.wc("placeholder",k.rc(39,76,"COLLECT.PROJECT_DESCRIPTION_LABEL")),k.Lb(3),k.wc("placeholder",k.rc(42,78,"COLLECT.PROJECT_DESCRIPTION_DESC")),k.Lb(5),k.Wc(k.rc(47,80,"COLLECT.PROJECT_DESCRIPTION_SERVICES")),k.Lb(3),k.vc("disabled",!0),k.Lb(1),k.Xc(" ",k.rc(51,82,"COLLECT.PROJECT_DESCRIPTION_REFERENTIAL_CHECKUP")," "),k.Lb(3),k.wc("placeholder",k.rc(54,84,"COLLECT.PROJECT_DESCRIPTION_ORIGINATING_AGENCY")),k.Lb(2),k.wc("placeholder",k.rc(56,86,"COLLECT.PROJECT_DESCRIPTION_ORIGINATING_AGENCY")),k.vc("disabled",!0),k.Lb(3),k.wc("placeholder",k.rc(59,88,"COLLECT.PROJECT_DESCRIPTION_SUBMISSION_AGENCY")),k.Lb(2),k.wc("placeholder",k.rc(61,90,"COLLECT.PROJECT_DESCRIPTION_SUBMISSION_AGENCY")),k.vc("disabled",!0),k.Lb(4),k.vc("disabled",t.stepDescriptionIsInvalid()),k.Lb(1),k.Xc(" ",k.rc(66,92,"COMMON.NEXT")," "),k.Lb(3),k.Xc(" ",k.rc(69,94,"COMMON.UNDO")," "),k.Lb(5),k.Wc(k.rc(74,96,"COMMON.BACK")),k.Lb(5),k.Wc(k.rc(79,98,"COLLECT.MODAL.TITLE")),k.Lb(5),k.Wc(k.rc(84,100,"COLLECT.PROJECT_CONTEXT_SUB_TITLE")),k.Lb(3),k.vc("disabled",!0),k.Lb(1),k.Xc(" ",k.rc(88,102,"COLLECT.PROJECT_DESCRIPTION_REFERENTIAL_CHECKUP")," "),k.Lb(4),k.wc("placeholder",k.rc(92,104,"COLLECT.PROJECT_CONTEXT_ARCHIVAL_AGENCY")),k.Lb(2),k.wc("placeholder",k.rc(94,106,"COLLECT.PROJECT_CONTEXT_ARCHIVAL_AGENCY")),k.vc("disabled",!0),k.Lb(3),k.wc("placeholder",k.rc(97,108,"COLLECT.PROJECT_CONTEXT_TRANSFERRING_AGENCY")),k.Lb(2),k.wc("placeholder",k.rc(99,110,"COLLECT.PROJECT_CONTEXT_TRANSFERRING_AGENCY")),k.vc("disabled",!0),k.Lb(3),k.wc("placeholder",k.rc(102,112,"COLLECT.PROJECT_CONTEXT_ARCHIVAL_AGREEMENT")),k.Lb(2),k.wc("placeholder",k.rc(104,114,"COLLECT.PROJECT_CONTEXT_ARCHIVAL_AGREEMENT")),k.vc("disabled",!0),k.Lb(3),k.wc("placeholder",k.rc(107,116,"COLLECT.PROJECT_CONTEXT_ARCHIVE_PROFILE")),k.Lb(2),k.wc("placeholder",k.rc(109,118,"COLLECT.PROJECT_CONTEXT_ARCHIVE_PROFILE")),k.vc("disabled",!0),k.Lb(6),k.Wc(k.rc(115,120,"COLLECT.PROJECT_CONTEXT_ACQUISITION_INFORMATION")),k.Lb(3),k.vc("ngForOf",t.acquisitionInformationsList),k.Lb(5),k.Wc(k.rc(123,122,"COLLECT.PROJECT_CONTEXT_LEGAL_STATUS")),k.Lb(3),k.vc("ngForOf",t.legalStatusList),k.Lb(3),k.vc("disabled",t.stepContextIsInvalid()),k.Lb(1),k.Xc(" ",k.rc(130,124,"COMMON.NEXT")," "),k.Lb(3),k.Xc(" ",k.rc(133,126,"COMMON.UNDO")," "),k.Lb(5),k.Wc(k.rc(138,128,"COMMON.BACK")),k.Lb(2),k.vc("ngIf",t.selectedWorkflow===t.Workflow.MANUAL),k.Lb(1),k.vc("ngIf",t.selectedWorkflow===t.Workflow.FLOW),k.Lb(1),k.vc("ngIf",t.selectedWorkflow===t.Workflow.MANUAL||t.selectedFlowType===t.FlowType.FIX),k.Lb(1),k.vc("ngIf",t.selectedWorkflow===t.Workflow.FLOW&&t.selectedFlowType===t.FlowType.RULES),k.Lb(1),k.vc("ngIf",t.selectedWorkflow===t.Workflow.MANUAL),k.Lb(1),k.vc("ngIf",t.selectedWorkflow===t.Workflow.FLOW))},directives:[c.Lb,i.x,i.q,i.i,c.eb,F.a,s.b,s.a,c.Cb,i.p,i.h,i.v,c.Db,c.Jb,u.b,p.a,r.o,r.p,D.n,r.n,a.a,i.g,i.d,M.a,i.c,l.b,l.a,j.a],pipes:[R.d,r.b,c.p,c.Vb,c.Xb,r.f],styles:[".content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{margin-bottom:20px}.content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:20px}h2[_ngcontent-%COMP%]{font-size:23px;line-height:46px;margin-top:10px}h4[_ngcontent-%COMP%]{font-size:19px;line-height:26px;margin-top:7px;margin-bottom:7px}.drag-and-drop-area[_ngcontent-%COMP%]{width:100%;height:25vh;border:2px dashed var(--vitamui-primary);border-radius:6px;box-shadow:0 0 80px rgba(255,255,249,.3);background:#fff;overflow:hidden;display:flex;flex-direction:column;justify-content:flex-start;align-items:center}.drag-and-drop-area[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:20px}.drag-and-drop-area[_ngcontent-%COMP%]   .drag-container[_ngcontent-%COMP%]{width:100%;vertical-align:middle;text-align:center;overflow-y:scroll}.drag-and-drop-area[_ngcontent-%COMP%]   .drop-area[_ngcontent-%COMP%]{flex-grow:1;justify-content:center}.drag-and-drop-area[_ngcontent-%COMP%]   .drop-area[_ngcontent-%COMP%], .drag-and-drop-area[_ngcontent-%COMP%]   .drop-area[_ngcontent-%COMP%]   .sip-drop[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.on-over[_ngcontent-%COMP%]{border:2px solid var(--vitamui-secondary);height:300px}.on-over[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.on-over[_ngcontent-%COMP%]   .drop-area[_ngcontent-%COMP%]{height:100%;background:#5cbaa9;opacity:.9;color:#fff;overflow:hidden}.input-file[_ngcontent-%COMP%]{display:none}.url-select[_ngcontent-%COMP%]{cursor:pointer;font-size:30px;color:var(--vitamui-primary);letter-spacing:.1px;white-space:nowrap;transform-origin:left;transition:transform .15s ease-out}.select[_ngcontent-%COMP%], .select[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:var(--vitamui-primary)}.vitamui-chip-list[_ngcontent-%COMP%]{width:90%;margin:10px auto 0}.vitamui-chip-list[_ngcontent-%COMP%]   .vitamui-chip[_ngcontent-%COMP%]{width:80%;margin:5px auto;text-align:flex-start}.vitamui-chip-list[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{color:#888;margin-left:15px}.mat-form-field[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%], .mat-form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:0 20px!important}.mat-form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:var(--vitamui-primary)}.radio-group[_ngcontent-%COMP%]{border:1px solid var(--vitamui-primary);display:flex;flex:1;border-radius:5px;overflow:hidden;text-align:right}.radio-group[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]{color:var(--vitamui-primary);display:flex;flex:1;cursor:pointer;font-weight:700;padding:5px 20px}.radio-group[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]   .checked[_ngcontent-%COMP%]{background:var(--vitamui-primary)}.object-container[_ngcontent-%COMP%]{width:100%}.object-container[_ngcontent-%COMP%]   .object-menu[_ngcontent-%COMP%]{height:50px;margin-top:20px;padding:0 5px;border-radius:5px;display:flex;background-color:var(--vitamui-background);flex-direction:row;font-size:14px;font-weight:600;line-height:22px;cursor:pointer}.object-container[_ngcontent-%COMP%]   .object-menu.opened[_ngcontent-%COMP%]{border-left:5px solid var(--vitamui-primary);padding-left:0;color:var(--vitamui-primary)}.object-container[_ngcontent-%COMP%]   .object-menu[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%]{padding:0 10px;width:50%}.object-container[_ngcontent-%COMP%]   .object-menu[_ngcontent-%COMP%]   .open-close-icon[_ngcontent-%COMP%]{padding-right:5px}.object-container[_ngcontent-%COMP%]   .object-menu[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{border:1px solid var(--vitamui-primary);border-radius:50%;background-color:#fff;width:30px;height:30px;font-size:medium;color:var(--vitamui-primary);cursor:pointer}.object-container[_ngcontent-%COMP%]   .object-details[_ngcontent-%COMP%]{padding:15px;margin-top:5px;background-color:var(--vitamui-background)}.object-container[_ngcontent-%COMP%]   .object-details[_ngcontent-%COMP%]   .object-details-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-bottom:10px}.object-container[_ngcontent-%COMP%]   .object-details[_ngcontent-%COMP%]   .object-details-group.delete-button[_ngcontent-%COMP%]{padding:15px 0 15px 20px}.col[_ngcontent-%COMP%]{flex-direction:column;flex-shrink:1}.col[_ngcontent-%COMP%], .line[_ngcontent-%COMP%]{display:flex}.line[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.toggle-right[_ngcontent-%COMP%]{margin-top:7px;align-items:end;justify-content:center}.shrink[_ngcontent-%COMP%]{display:flex;flex-grow:1;flex-shrink:1;overflow:hidden;text-overflow:ellipsis}.new-design-table[_ngcontent-%COMP%]{font-family:Mulish,sans-serif;font-size:15px;display:flex;flex-direction:column}.new-design-table[_ngcontent-%COMP%]   .new-design-head[_ngcontent-%COMP%]{box-shadow:0 4px 2px -2px var(--vitamui-grey-300);font-weight:700}.new-design-table[_ngcontent-%COMP%]   .new-design-row[_ngcontent-%COMP%]{border:1px solid var(--vitamui-grey-300);border-radius:5px;display:flex;flex-direction:row;padding:8px 14px;margin-bottom:3px}.new-design-table[_ngcontent-%COMP%]   .new-design-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-shrink:0;flex-basis:auto}.new-design-table[_ngcontent-%COMP%]   .new-design-row[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex-grow:2}.new-design-table[_ngcontent-%COMP%]   .new-design-row[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{flex-grow:1}.new-design-table[_ngcontent-%COMP%]   .new-design-row[_ngcontent-%COMP%]   .compression[_ngcontent-%COMP%], .new-design-table[_ngcontent-%COMP%]   .new-design-row[_ngcontent-%COMP%]   .upload[_ngcontent-%COMP%]{flex-grow:2}.gap-20[_ngcontent-%COMP%]{display:flex;gap:20px;flex-direction:column;align-items:flex-start}.hgap-10[_ngcontent-%COMP%]{display:flex;gap:10px;flex-direction:row;align-items:center}"],data:{animation:[Object(C.o)("rotateAnimation",[Object(C.l)("collapse",Object(C.m)({transform:"rotate(-180deg)"})),Object(C.l)("expand",Object(C.m)({transform:"rotate(0deg)"})),Object(C.n)("expand <=> collapse",Object(C.e)("200ms ease-out"))])]}}),e})();function ae(e,t){if(1&e){const e=k.ec();k.dc(0,"div",22),k.dc(1,"div",23),k.dc(2,"div",8),k.Yb(3,"i"),k.cc(),k.dc(4,"div",24),k.lc("click",(function(){k.Kc(e);const n=t.$implicit;return k.pc().showProjectDetails(n.id)})),k.Vc(5),k.cc(),k.dc(6,"div",24),k.lc("click",(function(){k.Kc(e);const n=t.$implicit;return k.pc().showProjectDetails(n.id)})),k.Vc(7),k.cc(),k.dc(8,"div",24),k.lc("click",(function(){k.Kc(e);const n=t.$implicit;return k.pc().showProjectDetails(n.id)})),k.Vc(9),k.qc(10,"empty"),k.qc(11,"date"),k.cc(),k.dc(12,"div",24),k.lc("click",(function(){k.Kc(e);const n=t.$implicit;return k.pc().showProjectDetails(n.id)})),k.Vc(13),k.qc(14,"empty"),k.qc(15,"date"),k.cc(),k.dc(16,"div",24),k.lc("click",(function(){k.Kc(e);const n=t.$implicit;return k.pc().showProjectDetails(n.id)})),k.Vc(17),k.cc(),k.dc(18,"div",8),k.dc(19,"vitamui-common-menu-button",25),k.dc(20,"button",26),k.lc("click",(function(){k.Kc(e);const n=t.$implicit;return k.pc().searchArchiveUnitsByProject(n)})),k.Vc(21),k.qc(22,"translate"),k.cc(),k.dc(23,"button",26),k.lc("click",(function(){k.Kc(e);const n=t.$implicit;return k.pc().searchTransactions(n)})),k.Vc(24),k.qc(25,"translate"),k.cc(),k.cc(),k.cc(),k.cc(),k.cc()}if(2&e){const e=t.$implicit,n=k.pc();k.Lb(3),k.Ob("vitamui-icon ",n.getProjectIcon(e),""),k.Lb(2),k.Wc(e.messageIdentifier),k.Lb(2),k.Wc(e.submissionAgencyIdentifier),k.Lb(2),k.Wc(k.rc(10,12,k.sc(11,14,e.createdOn,"dd/MM/yyyy"))),k.Lb(4),k.Wc(k.rc(14,17,k.sc(15,19,e.lastModifyOn,"dd/MM/yyyy"))),k.Lb(4),k.Wc(e.status),k.Lb(2),k.vc("overlayPos","end")("icon","vitamui-icon-more-horiz"),k.Lb(2),k.Xc(" ",k.rc(22,22,"COLLECT.PROJECT_UNIT_PREVIEW.ACTIONS.SHOW_PROJECT_ARCHIVE_UNITS")," "),k.Lb(3),k.Xc(" ",k.rc(25,24,"COLLECT.PROJECT_TRANSACTION_PREVIEW.ACTIONS.SHOW_TRANSACTIONS")," ")}}function oe(e,t){1&e&&k.Yb(0,"div")}function se(e,t){1&e&&k.Yb(0,"div")}function le(e,t){1&e&&k.Yb(0,"div")}function de(e,t){1&e&&(k.dc(0,"div",27),k.Vc(1),k.qc(2,"translate"),k.cc()),2&e&&(k.Lb(1),k.Wc(k.rc(2,1,"COLLECT.NO_RESULT")))}function ue(e,t){if(1&e){const e=k.ec();k.dc(0,"div",28),k.lc("click",(function(){return k.Kc(e),k.pc().projectsService.loadMore()})),k.dc(1,"span",29),k.Vc(2),k.qc(3,"translate"),k.cc(),k.cc()}2&e&&(k.Lb(2),k.Wc(k.rc(3,1,"COLLECT.LOAD_MORE_RESULTS")))}function he(e,t){1&e&&(k.dc(0,"div",30),k.Yb(1,"mat-spinner",31),k.cc())}const fe=function(e){return{nb:e}};let pe=(()=>{class e extends c.L{constructor(e,t){super(e),this.projectsService=e,this.router=t,this.direction=c.z.DESCENDANT,this.orderBy="archivalAgreement",this.orderChange=new w.a(this.orderBy),this.previewProjectDetailsPanel=new k.p,this.getProjectIcon=c.tb}ngOnInit(){this.searchProject(),this.projectUpdated=this.projectsService.getUpdatedProject$().subscribe(e=>{for(let t=0;t<this.dataSource.length;t++)this.dataSource[t].id===e.id&&(this.dataSource[t]=Object.assign({},e))})}ngOnDestroy(){this.projectUpdated.unsubscribe()}searchProject(){const e=new c.T(0,c.w,this.orderBy,this.direction);super.search(e)}onScroll(){this.loadMore()}emitOrderChange(e){this.orderChange.next(e)}searchArchiveUnitsByProject(e){this.router.navigate(["collect/tenant/"+this.tenantIdentifier+"/units",e.id],{queryParams:{projectName:e.messageIdentifier}})}searchTransactions(e){this.router.navigate(["collect/transactions",e.id])}showProjectDetails(e){this.previewProjectDetailsPanel.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(k.Xb(S.a),k.Xb(v.d))},e.\u0275cmp=k.Rb({type:e,selectors:[["app-project-list"]],inputs:{tenantIdentifier:"tenantIdentifier"},outputs:{previewProjectDetailsPanel:"previewProjectDetailsPanel"},features:[k.Ib],decls:53,vars:41,consts:[[1,"row"],[1,"col","mb-2"],[1,"col"],["vitamuiCommonInfiniteScroll",""],[1,"vitamui-table"],[1,"vitamui-table-head","title-text","result-layout"],[1,"col-13"],[1,"vitamui-table-head"],[1,"col-1"],[1,"vitamui-icon","vitamui-icon-ic40-flux"],[1,"col-2"],["orderByKey","messageIdentifier",3,"direction","orderBy","orderChange","directionChange","orderByChange"],["orderByKey","submissionAgencyIdentifier",3,"direction","orderBy","orderChange","directionChange","orderByChange"],["orderByKey","createdOn",3,"direction","orderBy","orderChange","directionChange","orderByChange"],["orderByKey","lastModifyOn",3,"direction","orderBy","orderChange","directionChange","orderByChange"],["orderByKey","status",3,"direction","orderBy","orderChange","directionChange","orderByChange"],[1,"vitamui-table-body"],["class","vitamui-table-rows",4,"ngFor","ngForOf"],[4,"ngIf","ngIfThen"],["noResults",""],["loadMore",""],["loadingSpinner",""],[1,"vitamui-table-rows"],[1,"vitamui-row","d-flex","align-items-center","clickable"],[1,"col-2",3,"click"],["menuButtonSize","medium",3,"overlayPos","icon"],["mat-menu-item","",3,"click"],[1,"vitamui-min-content","vitamui-table-message"],[1,"vitamui-min-content","vitamui-table-message",3,"click"],[1,"clickable"],[1,"vitamui-min-content"],[1,"vitamui-spinner","medium"]],template:function(e,t){if(1&e&&(k.dc(0,"div",0),k.dc(1,"div",1),k.dc(2,"h5"),k.Vc(3),k.qc(4,"translate"),k.cc(),k.cc(),k.cc(),k.dc(5,"div",0),k.dc(6,"div",2),k.dc(7,"div",3),k.dc(8,"div",4),k.dc(9,"div",5),k.dc(10,"div",6),k.Vc(11),k.qc(12,"translate"),k.cc(),k.cc(),k.dc(13,"div",7),k.dc(14,"div",8),k.Yb(15,"i",9),k.cc(),k.dc(16,"div",10),k.dc(17,"span"),k.Vc(18),k.qc(19,"translate"),k.cc(),k.dc(20,"vitamui-common-order-by-button",11),k.lc("orderChange",(function(e){return t.emitOrderChange(e)}))("directionChange",(function(e){return t.direction=e}))("orderByChange",(function(e){return t.orderBy=e})),k.cc(),k.cc(),k.dc(21,"div",10),k.dc(22,"span"),k.Vc(23),k.qc(24,"translate"),k.cc(),k.dc(25,"vitamui-common-order-by-button",12),k.lc("orderChange",(function(e){return t.emitOrderChange(e)}))("directionChange",(function(e){return t.direction=e}))("orderByChange",(function(e){return t.orderBy=e})),k.cc(),k.cc(),k.dc(26,"div",10),k.dc(27,"span"),k.Vc(28),k.qc(29,"translate"),k.cc(),k.dc(30,"vitamui-common-order-by-button",13),k.lc("orderChange",(function(e){return t.emitOrderChange(e)}))("directionChange",(function(e){return t.direction=e}))("orderByChange",(function(e){return t.orderBy=e})),k.cc(),k.cc(),k.dc(31,"div",10),k.dc(32,"span"),k.Vc(33),k.qc(34,"translate"),k.cc(),k.dc(35,"vitamui-common-order-by-button",14),k.lc("orderChange",(function(e){return t.emitOrderChange(e)}))("directionChange",(function(e){return t.direction=e}))("orderByChange",(function(e){return t.orderBy=e})),k.cc(),k.cc(),k.dc(36,"div",10),k.dc(37,"span"),k.Vc(38),k.qc(39,"translate"),k.cc(),k.dc(40,"vitamui-common-order-by-button",15),k.lc("orderChange",(function(e){return t.emitOrderChange(e)}))("directionChange",(function(e){return t.direction=e}))("orderByChange",(function(e){return t.orderBy=e})),k.cc(),k.cc(),k.Yb(41,"div",8),k.cc(),k.dc(42,"div",16),k.Tc(43,ae,26,26,"div",17),k.cc(),k.cc(),k.Tc(44,oe,1,0,"div",18),k.Tc(45,se,1,0,"div",18),k.Tc(46,le,1,0,"div",18),k.cc(),k.Tc(47,de,3,3,"ng-template",null,19,k.Uc),k.Tc(49,ue,4,3,"ng-template",null,20,k.Uc),k.Tc(51,he,2,0,"ng-template",null,21,k.Uc),k.cc(),k.cc()),2&e){const e=k.Gc(48),n=k.Gc(50),r=k.Gc(52);k.Lb(3),k.Wc(k.rc(4,24,"COLLECT.PROJECT_LIST_TITLE")),k.Lb(8),k.Xc(" ",k.sc(12,26,"COLLECT.NB_ENTRIES",k.Ac(39,fe,null==t.dataSource?null:t.dataSource.length))," "),k.Lb(7),k.Wc(k.rc(19,29,"COLLECT.FIELD_MESSAGE_IDENTIFIER")),k.Lb(2),k.vc("direction",t.direction)("orderBy",t.orderBy),k.Lb(3),k.Wc(k.rc(24,31,"COLLECT.FIELD_SUBMISSION_AGENCY_IDENTIFIER")),k.Lb(2),k.vc("direction",t.direction)("orderBy",t.orderBy),k.Lb(3),k.Wc(k.rc(29,33,"COLLECT.FIELD_CREATED_ON")),k.Lb(2),k.vc("direction",t.direction)("orderBy",t.orderBy),k.Lb(3),k.Wc(k.rc(34,35,"COLLECT.FIELD_LAST_MODIFY_ON")),k.Lb(2),k.vc("direction",t.direction)("orderBy",t.orderBy),k.Lb(3),k.Wc(k.rc(39,37,"COLLECT.FIELD_STATUS")),k.Lb(2),k.vc("direction",t.direction)("orderBy",t.orderBy),k.Lb(3),k.vc("ngForOf",t.dataSource),k.Lb(1),k.vc("ngIf",!t.dataSource||t.pending)("ngIfThen",r),k.Lb(1),k.vc("ngIf",!t.pending&&0===(null==t.dataSource?null:t.dataSource.length))("ngIfThen",e),k.Lb(1),k.vc("ngIf",t.infiniteScrollDisabled&&t.projectsService.canLoadMore&&!t.pending)("ngIfThen",n)}},directives:[c.K,c.S,r.o,r.p,c.Eb,h.a,f.b],pipes:[R.d,c.Wb,r.e],styles:[""]}),e})();var me=n("HM3f"),ge=n("cJ9h");const be=["confirmEditProject"];function ve(e,t){if(1&e){const e=k.ec();k.dc(0,"button",6),k.lc("click",(function(){return k.Kc(e),k.pc(2).showExtendedPanel()})),k.Vc(1),k.qc(2,"translate"),k.cc()}2&e&&(k.Lb(1),k.Xc(" ",k.rc(2,1,"COLLECT.PROJECT_UNIT_PREVIEW.ACTIONS.SHOW_MORE_DETAILS")," "))}function _e(e,t){if(1&e){const e=k.ec();k.dc(0,"button",6),k.lc("click",(function(){return k.Kc(e),k.pc(2).showNormalPanel()})),k.Vc(1),k.qc(2,"translate"),k.cc()}2&e&&(k.Lb(1),k.Xc(" ",k.rc(2,1,"COLLECT.PROJECT_UNIT_PREVIEW.ACTIONS.SHOW_ONLY_INFORMATION_DETAILS")," "))}function Ce(e,t){if(1&e&&(k.bc(0),k.Vc(1),k.ac()),2&e){const e=k.pc(2).$implicit;k.Lb(1),k.Xc(" ",e.messageIdentifier," ")}}function Oe(e,t){if(1&e&&(k.dc(0,"div",16),k.dc(1,"label"),k.Vc(2),k.qc(3,"translate"),k.cc(),k.dc(4,"div"),k.Tc(5,Ce,2,1,"ng-container",17),k.cc(),k.cc()),2&e){const e=k.pc().$implicit;k.Lb(2),k.Xc("",k.rc(3,2,"COLLECT.PROJECT_UNIT_PREVIEW.FIELDS.NAME")," :"),k.Lb(3),k.vc("ngIf",e.messageIdentifier)}}function Te(e,t){1&e&&(k.dc(0,"div",25),k.Yb(1,"vitamui-common-input",26),k.qc(2,"translate"),k.cc()),2&e&&(k.Lb(1),k.wc("placeholder",k.rc(2,1,"COLLECT.PROJECT_UNIT_PREVIEW.FIELDS.NAME")))}function ye(e,t){if(1&e&&(k.bc(0),k.Vc(1),k.ac()),2&e){const e=k.pc().$implicit;k.Lb(1),k.Xc(" ",e.id," ")}}function Ee(e,t){if(1&e&&(k.bc(0),k.Vc(1),k.ac()),2&e){const e=k.pc(2).$implicit;k.Lb(1),k.Xc(" ",e.comment," ")}}function Le(e,t){if(1&e&&(k.dc(0,"div",16),k.dc(1,"label"),k.Vc(2),k.qc(3,"translate"),k.cc(),k.dc(4,"div"),k.Tc(5,Ee,2,1,"ng-container",17),k.cc(),k.cc()),2&e){const e=k.pc().$implicit;k.Lb(2),k.Xc("",k.rc(3,2,"COLLECT.PROJECT_UNIT_PREVIEW.FIELDS.DESCRIPTION")," :"),k.Lb(3),k.vc("ngIf",e.comment)}}function Ie(e,t){1&e&&(k.dc(0,"div",27),k.Yb(1,"vitamui-common-textarea",28),k.qc(2,"translate"),k.Yb(3,"div",29),k.cc()),2&e&&(k.Lb(1),k.wc("placeholder",k.rc(2,1,"COLLECT.PROJECT_UNIT_PREVIEW.FIELDS.DESCRIPTION")))}function we(e,t){1&e&&(k.Yb(0,"vitamui-common-input",30),k.qc(1,"translate")),2&e&&k.xc("placeholder","",k.rc(1,1,"COLLECT.PROJECT_UNIT_PREVIEW.FIELDS.SP_ID")," ")}function Ae(e,t){1&e&&(k.Yb(0,"vitamui-common-input",31),k.qc(1,"translate")),2&e&&(k.xc("placeholder","",k.rc(1,2,"COLLECT.PROJECT_UNIT_PREVIEW.FIELDS.SP_ID")," "),k.vc("disabled",!0))}function ke(e,t){1&e&&(k.Yb(0,"vitamui-common-input",32),k.qc(1,"translate")),2&e&&k.xc("placeholder","",k.rc(1,1,"COLLECT.PROJECT_UNIT_PREVIEW.FIELDS.SV_ID")," ")}function Pe(e,t){1&e&&(k.Yb(0,"vitamui-common-input",31),k.qc(1,"translate")),2&e&&(k.xc("placeholder","",k.rc(1,2,"COLLECT.PROJECT_UNIT_PREVIEW.FIELDS.SV_ID")," "),k.vc("disabled",!0))}function Se(e,t){if(1&e){const e=k.ec();k.dc(0,"div",33),k.dc(1,"div",34),k.dc(2,"button",35),k.lc("click",(function(){return k.Kc(e),k.pc(2).launchUpdate()})),k.Vc(3),k.qc(4,"translate"),k.cc(),k.cc(),k.cc()}if(2&e){const e=k.pc(2);k.Lb(2),k.vc("disabled",!e.form.valid||!e.form.dirty),k.Lb(1),k.Xc(" ",k.rc(4,2,"UNIT_UPDATE.SAVE")," ")}}function xe(e,t){if(1&e&&(k.bc(0),k.Vc(1),k.ac()),2&e){const e=k.pc(2).$implicit;k.Lb(1),k.Xc(" ",e.originatingAgencyIdentifier," ")}}function Ne(e,t){if(1&e&&(k.dc(0,"div",16),k.dc(1,"label"),k.Vc(2),k.qc(3,"translate"),k.cc(),k.dc(4,"div"),k.Tc(5,xe,2,1,"ng-container",17),k.cc(),k.cc()),2&e){const e=k.pc().$implicit;k.Lb(2),k.Xc("",k.rc(3,2,"COLLECT.PROJECT_UNIT_PREVIEW.FIELDS.SP_ID")," :"),k.Lb(3),k.vc("ngIf",e.originatingAgencyIdentifier)}}function Re(e,t){if(1&e&&(k.bc(0),k.Vc(1),k.ac()),2&e){const e=k.pc(2).$implicit;k.Lb(1),k.Xc(" ",e.submissionAgencyIdentifier," ")}}function Fe(e,t){if(1&e&&(k.dc(0,"div",16),k.dc(1,"label"),k.Vc(2),k.qc(3,"translate"),k.cc(),k.dc(4,"div"),k.Tc(5,Re,2,1,"ng-container",17),k.cc(),k.cc()),2&e){const e=k.pc().$implicit;k.Lb(2),k.Xc("",k.rc(3,2,"COLLECT.PROJECT_UNIT_PREVIEW.FIELDS.SV_ID")," :"),k.Lb(3),k.vc("ngIf",e.submissionAgencyIdentifier)}}function De(e,t){if(1&e&&(k.bc(0),k.Vc(1),k.ac()),2&e){const e=k.pc(2).$implicit;k.Lb(1),k.Xc(" ",e.archivalAgencyIdentifier," ")}}function Me(e,t){if(1&e&&(k.dc(0,"div",16),k.dc(1,"label"),k.Vc(2),k.qc(3,"translate"),k.cc(),k.dc(4,"div"),k.Tc(5,De,2,1,"ng-container",17),k.cc(),k.cc()),2&e){const e=k.pc().$implicit;k.Lb(2),k.Xc("",k.rc(3,2,"COLLECT.PROJECT_CONTEXT_ARCHIVAL_AGENCY")," :"),k.Lb(3),k.vc("ngIf",e.archivalAgencyIdentifier)}}function je(e,t){if(1&e&&(k.bc(0),k.Vc(1),k.ac()),2&e){const e=k.pc(2).$implicit;k.Lb(1),k.Xc(" ",e.transferringAgencyIdentifier," ")}}function Ue(e,t){if(1&e&&(k.dc(0,"div",16),k.dc(1,"label"),k.Vc(2),k.qc(3,"translate"),k.cc(),k.dc(4,"div"),k.Tc(5,je,2,1,"ng-container",17),k.cc(),k.cc()),2&e){const e=k.pc().$implicit;k.Lb(2),k.Xc("",k.rc(3,2,"COLLECT.PROJECT_CONTEXT_TRANSFERRING_AGENCY")," :"),k.Lb(3),k.vc("ngIf",e.transferringAgencyIdentifier)}}function ze(e,t){if(1&e&&(k.bc(0),k.Vc(1),k.ac()),2&e){const e=k.pc(2).$implicit;k.Lb(1),k.Xc(" ",e.archivalAgreement," ")}}function Be(e,t){if(1&e&&(k.dc(0,"div",16),k.dc(1,"label"),k.Vc(2),k.qc(3,"translate"),k.cc(),k.dc(4,"div"),k.Tc(5,ze,2,1,"ng-container",17),k.cc(),k.cc()),2&e){const e=k.pc().$implicit;k.Lb(2),k.Xc("",k.rc(3,2,"COLLECT.PROJECT_CONTEXT_ARCHIVAL_AGREEMENT")," :"),k.Lb(3),k.vc("ngIf",e.archivalAgreement)}}function Ve(e,t){if(1&e&&(k.bc(0),k.Vc(1),k.ac()),2&e){const e=k.pc(2).$implicit;k.Lb(1),k.Xc(" ",e.archiveProfile," ")}}function We(e,t){if(1&e&&(k.dc(0,"div",16),k.dc(1,"label"),k.Vc(2),k.qc(3,"translate"),k.cc(),k.dc(4,"div"),k.Tc(5,Ve,2,1,"ng-container",17),k.cc(),k.cc()),2&e){const e=k.pc().$implicit;k.Lb(2),k.Xc("",k.rc(3,2,"COLLECT.PROJECT_CONTEXT_ARCHIVE_PROFILE")," :"),k.Lb(3),k.vc("ngIf",e.archiveProfile)}}function qe(e,t){if(1&e&&(k.bc(0),k.Vc(1),k.ac()),2&e){const e=k.pc(2).$implicit;k.Lb(1),k.Xc(" ",e.acquisitionInformation," ")}}function Xe(e,t){if(1&e&&(k.dc(0,"div",16),k.dc(1,"label"),k.Vc(2),k.qc(3,"translate"),k.cc(),k.dc(4,"div"),k.Tc(5,qe,2,1,"ng-container",17),k.cc(),k.cc()),2&e){const e=k.pc().$implicit;k.Lb(2),k.Xc("",k.rc(3,2,"COLLECT.PROJECT_CONTEXT_ACQUISITION_INFORMATION")," :"),k.Lb(3),k.vc("ngIf",e.acquisitionInformation)}}function Ye(e,t){if(1&e&&(k.bc(0),k.Vc(1),k.ac()),2&e){const e=k.pc(2).$implicit;k.Lb(1),k.Xc(" ",e.legalStatus," ")}}function Ze(e,t){if(1&e&&(k.dc(0,"div",16),k.dc(1,"label"),k.Vc(2),k.qc(3,"translate"),k.cc(),k.dc(4,"div"),k.Tc(5,Ye,2,1,"ng-container",17),k.cc(),k.cc()),2&e){const e=k.pc().$implicit;k.Lb(2),k.Xc("",k.rc(3,2,"COLLECT.PROJECT_CONTEXT_LEGAL_STATUS")," :"),k.Lb(3),k.vc("ngIf",e.legalStatus)}}function Ke(e,t){if(1&e&&(k.dc(0,"mat-option",50),k.Vc(1),k.cc()),2&e){const e=t.$implicit;k.vc("value",e),k.Lb(1),k.Wc(e)}}function Ge(e,t){if(1&e&&(k.dc(0,"mat-option",50),k.Vc(1),k.cc()),2&e){const e=t.$implicit;k.vc("value",e.id),k.Lb(1),k.Wc(e.value)}}function Je(e,t){if(1&e){const e=k.ec();k.dc(0,"div",36),k.dc(1,"div",25),k.Yb(2,"vitamui-common-input",37),k.qc(3,"translate"),k.Yb(4,"vitamui-common-input",38),k.qc(5,"translate"),k.cc(),k.dc(6,"div",25),k.Yb(7,"vitamui-common-input",39),k.qc(8,"translate"),k.Yb(9,"vitamui-common-input",38),k.qc(10,"translate"),k.cc(),k.dc(11,"div",25),k.Yb(12,"vitamui-common-input",40),k.qc(13,"translate"),k.cc(),k.dc(14,"div",25),k.Yb(15,"vitamui-common-input",41),k.qc(16,"translate"),k.cc(),k.dc(17,"div",25),k.dc(18,"mat-form-field",42),k.dc(19,"label",43),k.dc(20,"span",44),k.Vc(21),k.qc(22,"translate"),k.cc(),k.cc(),k.dc(23,"mat-select",45),k.Tc(24,Ke,2,2,"mat-option",46),k.cc(),k.cc(),k.cc(),k.dc(25,"div",25),k.dc(26,"mat-form-field",47),k.dc(27,"label",48),k.dc(28,"span",44),k.Vc(29),k.qc(30,"translate"),k.cc(),k.cc(),k.dc(31,"mat-select",49),k.Tc(32,Ge,2,2,"mat-option",46),k.cc(),k.cc(),k.cc(),k.dc(33,"div",25),k.dc(34,"div",34),k.dc(35,"button",35),k.lc("click",(function(){return k.Kc(e),k.pc(2).launchUpdate()})),k.Vc(36),k.qc(37,"translate"),k.cc(),k.cc(),k.cc(),k.cc()}if(2&e){const e=k.pc(2);k.Lb(2),k.wc("placeholder",k.rc(3,14,"COLLECT.PROJECT_CONTEXT_ARCHIVAL_AGENCY")),k.Lb(2),k.wc("placeholder",k.rc(5,16,"COLLECT.PROJECT_CONTEXT_ARCHIVAL_AGENCY")),k.vc("disabled",!0),k.Lb(3),k.wc("placeholder",k.rc(8,18,"COLLECT.PROJECT_CONTEXT_TRANSFERRING_AGENCY")),k.Lb(2),k.wc("placeholder",k.rc(10,20,"COLLECT.PROJECT_CONTEXT_TRANSFERRING_AGENCY")),k.vc("disabled",!0),k.Lb(3),k.wc("placeholder",k.rc(13,22,"COLLECT.PROJECT_CONTEXT_ARCHIVAL_AGREEMENT")),k.Lb(3),k.wc("placeholder",k.rc(16,24,"COLLECT.PROJECT_CONTEXT_ARCHIVE_PROFILE")),k.Lb(6),k.Wc(k.rc(22,26,"COLLECT.PROJECT_CONTEXT_ACQUISITION_INFORMATION")),k.Lb(3),k.vc("ngForOf",e.acquisitionInformationsList),k.Lb(5),k.Wc(k.rc(30,28,"COLLECT.PROJECT_CONTEXT_LEGAL_STATUS")),k.Lb(3),k.vc("ngForOf",e.legalStatusList),k.Lb(3),k.vc("disabled",!e.form.valid||!e.form.dirty),k.Lb(1),k.Xc(" ",k.rc(37,30,"UNIT_UPDATE.SAVE")," ")}}function He(e,t){if(1&e&&(k.dc(0,"div",53),k.dc(1,"div",54),k.Vc(2),k.qc(3,"translate"),k.cc(),k.Yb(4,"vitamui-common-data",55),k.qc(5,"translate"),k.cc()),2&e){const e=k.pc(2).$implicit;k.Lb(2),k.Wc(k.rc(3,3,"COLLECT.PROJECT_UNIT_PREVIEW.ATTACHMENT.FIX.TITLE")),k.Lb(2),k.vc("label",k.rc(5,5,"COLLECT.PROJECT_UNIT_PREVIEW.ATTACHMENT.FIX.ATTACHMENT_ID"))("value",e.unitUp)}}function $e(e,t){if(1&e&&(k.dc(0,"vitamui-common-accordion",58),k.dc(1,"div",59),k.Vc(2),k.cc(),k.dc(3,"div",60),k.Yb(4,"vitamui-common-data",55),k.Yb(5,"vitamui-common-data",55),k.qc(6,"translate"),k.cc(),k.cc()),2&e){const e=t.$implicit,n=t.index;k.vc("opened",t.first),k.Lb(2),k.Xc("Param\xe8tre ",n+1,""),k.Lb(2),k.vc("label",e.metadataKey)("value",e.metadataValue),k.Lb(1),k.vc("label",k.rc(6,6,"COLLECT.PROJECT_UNIT_PREVIEW.ATTACHMENT.FIX.ATTACHMENT_ID"))("value",e.unitUp)}}function Qe(e,t){if(1&e&&(k.dc(0,"div",56),k.dc(1,"div",54),k.Vc(2),k.qc(3,"translate"),k.cc(),k.Tc(4,$e,7,8,"vitamui-common-accordion",57),k.cc()),2&e){const e=k.pc(2).$implicit;k.Lb(2),k.Xc(" ",k.rc(3,2,"COLLECT.PROJECT_UNIT_PREVIEW.ATTACHMENT.RULES.TITLE")," "),k.Lb(2),k.vc("ngForOf",e.unitUps)}}function et(e,t){1&e&&(k.bc(0),k.dc(1,"div",61),k.Vc(2),k.qc(3,"translate"),k.cc(),k.ac()),2&e&&(k.Lb(2),k.Xc(" ",k.rc(3,1,"COLLECT.PROJECT_UNIT_PREVIEW.ATTACHMENT.NO_EXISTANT_ATTACHMENT")," "))}function tt(e,t){if(1&e&&(k.bc(0),k.Tc(1,He,6,7,"div",51),k.Tc(2,Qe,5,4,"div",52),k.Tc(3,et,4,3,"ng-container",17),k.ac()),2&e){const e=k.pc().$implicit;k.Lb(1),k.vc("ngIf",e.unitUp),k.Lb(1),k.vc("ngIf",e.unitUps),k.Lb(1),k.vc("ngIf",!e.unitUp&&!e.unitUps)}}function nt(e,t){if(1&e&&(k.dc(0,"mat-tab",11),k.qc(1,"translate"),k.Yb(2,"vitamui-common-data",55),k.qc(3,"translate"),k.qc(4,"translate"),k.cc()),2&e){const e=k.pc().$implicit;k.wc("label",k.rc(1,3,"COLLECT.PROJECT_UNIT_PREVIEW.TABS.CONFIGURATION")),k.Lb(2),k.vc("label",k.rc(3,5,"COLLECT.PROJECT_UNIT_PREVIEW.CONFIGURATION.AUTO_INGEST"))("value",k.rc(4,7,"COLLECT.PROJECT_UNIT_PREVIEW.CONFIGURATION."+(e.automaticIngest?"ENABLED":"DISABLED")))}}function rt(e,t){if(1&e){const e=k.ec();k.dc(0,"div"),k.dc(1,"vitamui-common-sidenav-header",3),k.lc("onclose",(function(){return k.Kc(e),k.pc().emitClose()})),k.qc(2,"translate"),k.dc(3,"vitamui-common-menu-button",4),k.Tc(4,ve,3,3,"button",5),k.Tc(5,_e,3,3,"button",5),k.dc(6,"button",6),k.lc("click",(function(){return k.Kc(e),k.pc().showEditProject()})),k.Vc(7),k.qc(8,"translate"),k.cc(),k.dc(9,"button",6),k.lc("click",(function(){return k.Kc(e),k.pc().searchArchiveUnitsByProject()})),k.Vc(10),k.qc(11,"translate"),k.cc(),k.dc(12,"button",7),k.Vc(13),k.qc(14,"translate"),k.cc(),k.cc(),k.cc(),k.dc(15,"form",8),k.dc(16,"mat-tab-group",9,10),k.dc(18,"mat-tab",11),k.qc(19,"translate"),k.dc(20,"div",12),k.dc(21,"div",13),k.Tc(22,Oe,6,4,"div",14),k.Tc(23,Te,3,3,"div",15),k.dc(24,"div",16),k.dc(25,"label"),k.Vc(26),k.qc(27,"translate"),k.cc(),k.dc(28,"div"),k.Tc(29,ye,2,1,"ng-container",17),k.cc(),k.cc(),k.Tc(30,Le,6,4,"div",14),k.Tc(31,Ie,4,3,"div",18),k.Tc(32,we,2,3,"vitamui-common-input",19),k.Tc(33,Ae,2,4,"vitamui-common-input",20),k.Tc(34,ke,2,3,"vitamui-common-input",21),k.Tc(35,Pe,2,4,"vitamui-common-input",20),k.Tc(36,Se,5,4,"div",22),k.Tc(37,Ne,6,4,"div",14),k.Tc(38,Fe,6,4,"div",14),k.cc(),k.cc(),k.cc(),k.dc(39,"mat-tab",11),k.qc(40,"translate"),k.dc(41,"div",12),k.dc(42,"div",13),k.Tc(43,Me,6,4,"div",14),k.Tc(44,Ue,6,4,"div",14),k.Tc(45,Be,6,4,"div",14),k.Tc(46,We,6,4,"div",14),k.Tc(47,Xe,6,4,"div",14),k.Tc(48,Ze,6,4,"div",14),k.Tc(49,Je,38,32,"div",23),k.cc(),k.cc(),k.cc(),k.dc(50,"mat-tab",11),k.qc(51,"translate"),k.dc(52,"div",12),k.dc(53,"div",13),k.Tc(54,tt,4,3,"ng-container",17),k.cc(),k.cc(),k.cc(),k.Tc(55,nt,5,9,"mat-tab",24),k.cc(),k.cc(),k.cc()}if(2&e){const e=t.$implicit,n=k.pc();k.Lb(1),k.vc("extended",n.isPanelextended)("title",e.messageIdentifier)("subtitle",k.rc(2,40,"COLLECT.PROJECT_UNIT_PREVIEW.WORKFLOW."+n.getProjectWorkflow(e)))("icon",n.getProjectIcon(e)),k.Lb(2),k.vc("overlayPos","end")("icon","vitamui-icon-more-horiz"),k.Lb(1),k.vc("ngIf",!n.isPanelextended),k.Lb(1),k.vc("ngIf",n.isPanelextended),k.Lb(2),k.Xc(" ",k.rc(8,42,"COLLECT.PROJECT_UNIT_PREVIEW.ACTIONS.EDIT_PROJECT")," "),k.Lb(3),k.Xc(" ",k.rc(11,44,"COLLECT.PROJECT_UNIT_PREVIEW.ACTIONS.SHOW_PROJECT_ARCHIVE_UNITS")," "),k.Lb(2),k.vc("disabled",!0),k.Lb(1),k.Xc(" ",k.rc(14,46,"UNIT_UPDATE.UPDATE_DESC_METADATA")," "),k.Lb(2),k.vc("formGroup",n.form),k.Lb(1),k.vc("selectedIndex",n.selectedTabIndex)("ngClass",n.isPanelextended?"extended-preview-tab-group":"preview-tab-group"),k.Lb(2),k.wc("label",k.rc(19,48,"COLLECT.PROJECT_UNIT_PREVIEW.TABS.DESCRIPTION")),k.Lb(4),k.vc("ngIf",!n.updateStarted),k.Lb(1),k.vc("ngIf",n.updateStarted),k.Lb(3),k.Xc("",k.rc(27,50,"COLLECT.PROJECT_UNIT_PREVIEW.FIELDS.ID")," :"),k.Lb(3),k.vc("ngIf",e.id),k.Lb(1),k.vc("ngIf",!n.updateStarted),k.Lb(1),k.vc("ngIf",n.updateStarted),k.Lb(1),k.vc("ngIf",n.updateStarted),k.Lb(1),k.vc("ngIf",n.updateStarted),k.Lb(1),k.vc("ngIf",n.updateStarted),k.Lb(1),k.vc("ngIf",n.updateStarted),k.Lb(1),k.vc("ngIf",n.updateStarted),k.Lb(1),k.vc("ngIf",!n.updateStarted),k.Lb(1),k.vc("ngIf",!n.updateStarted),k.Lb(1),k.wc("label",k.rc(40,52,"COLLECT.PROJECT_UNIT_PREVIEW.TABS.CONTEXT")),k.Lb(4),k.vc("ngIf",!n.updateStarted),k.Lb(1),k.vc("ngIf",!n.updateStarted),k.Lb(1),k.vc("ngIf",!n.updateStarted),k.Lb(1),k.vc("ngIf",!n.updateStarted),k.Lb(1),k.vc("ngIf",!n.updateStarted),k.Lb(1),k.vc("ngIf",!n.updateStarted),k.Lb(1),k.vc("ngIf",n.updateStarted),k.Lb(1),k.wc("label",k.rc(51,54,"COLLECT.PROJECT_UNIT_PREVIEW.TABS.ATTACHEMENT")),k.Lb(4),k.vc("ngIf",!n.updateStarted),k.Lb(1),k.vc("ngIf",n.getProjectWorkflow(e)===n.Workflow.FLOW)}}function it(e,t){1&e&&(k.dc(0,"div",62),k.Yb(1,"mat-spinner",63),k.cc())}function ct(e,t){if(1&e){const e=k.ec();k.dc(0,"mat-dialog-content",12),k.dc(1,"div",68),k.Vc(2),k.qc(3,"translate"),k.cc(),k.dc(4,"div",69),k.Vc(5),k.qc(6,"translate"),k.qc(7,"translate"),k.Yb(8,"br"),k.Vc(9),k.qc(10,"translate"),k.Yb(11,"br"),k.Vc(12),k.qc(13,"translate"),k.cc(),k.dc(14,"div",70),k.dc(15,"mat-button-toggle-group",71,72),k.lc("ngModelChange",(function(t){return k.Kc(e),k.pc(2).selectedValue=t})),k.dc(17,"mat-button-toggle",73),k.Vc(18),k.qc(19,"translate"),k.cc(),k.dc(20,"mat-button-toggle",74),k.Vc(21),k.qc(22,"translate"),k.cc(),k.cc(),k.cc(),k.cc()}if(2&e){const e=t.$implicit,n=k.pc(2);k.Lb(2),k.Xc(" ",k.rc(3,9,"COLLECT.UPDATE_PROJECT.POPUP_ACTIONS_TITLE")," "),k.Lb(3),k.Zc(" ",k.rc(6,11,"COLLECT.UPDATE_PROJECT.POPUP_ACTIONS_CONTENT_MAJ1")," ",null==e.values?null:e.values.length," ",k.rc(7,13,"COLLECT.UPDATE_PROJECT.POPUP_ACTIONS_CONTENT_MAJ2")," "),k.Lb(4),k.Xc(" ",k.rc(10,15,"COLLECT.UPDATE_PROJECT.POPUP_ACTIONS_CONTENT_MAJ3")," "),k.Lb(3),k.Xc(" ",k.rc(13,17,"COLLECT.UPDATE_PROJECT.POPUP_ACTIONS_CONTENT_MAJ4")," "),k.Lb(3),k.vc("ngModel",n.selectedValue),k.Lb(3),k.Xc(" ",k.rc(19,19,"COMMON.YES"),""),k.Lb(3),k.Xc("",k.rc(22,21,"COMMON.NO")," ")}}function at(e,t){if(1&e){const e=k.ec();k.Tc(0,ct,23,23,"mat-dialog-content",64),k.dc(1,"mat-dialog-actions",65),k.dc(2,"button",66),k.lc("click",(function(){return k.Kc(e),k.pc().onConfirm()})),k.Vc(3),k.qc(4,"translate"),k.cc(),k.dc(5,"button",67),k.lc("click",(function(){return k.Kc(e),k.pc().onClose()})),k.Vc(6),k.qc(7,"translate"),k.cc(),k.cc()}if(2&e){const e=k.pc(),t=k.Gc(2);k.vc("ngIf",e.transactions$.getValue())("ngIfElse",t),k.Lb(3),k.Wc(k.rc(4,4,"COMMON.CONFIRM")),k.Lb(3),k.Wc(k.rc(7,6,"COMMON.UNDO"))}}let ot=(()=>{class e{constructor(e,t,n,r,i,a,o,s){this.formBuilder=e,this.projectService=t,this.projectApiService=n,this.route=r,this.router=i,this.dialog=a,this.translationService=o,this.snackBar=s,this.backToNormalLateralPanel=new k.p,this.previewClose=new k.p,this.showExtendedLateralPanel=new k.p,this.legalStatusList=[],this.Workflow=c.rb,this.getProjectIcon=c.tb,this.getProjectWorkflow=c.ub,this.projectId$=new w.a(null),this.updateStarted=!1,this.isPanelextended=!1,this.selectedTabIndex=0,this.selectedValue="YES",this.transactions$=new w.a(null)}get projectId(){return this.projectId$.getValue()}set projectId(e){this.project=null,this.projectId$.next(e),this.selectedTabIndex=0}ngOnInit(){this.route.params.subscribe(e=>{this.tenantIdentifier=e.tenantIdentifier}),this.projectId$.pipe(Object(ge.a)(()=>this.projectService.getProjectById(this.projectId$.getValue()))).subscribe(e=>{this.project=e}),this.legalStatusList=this.projectService.getLegalStatusList(),this.acquisitionInformationsList=this.projectService.getAcquisitionInformationsList(),this.configForm()}searchArchiveUnitsByProject(){this.router.navigate(["collect/tenant/"+this.tenantIdentifier+"/units",this.project.id],{queryParams:{projectName:this.project.messageIdentifier}})}emitClose(){this.isPanelextended=!1,this.previewClose.emit(),this.backToNormalLateralPanel.emit(),this.selectedTabIndex=0}showNormalPanel(){this.isPanelextended=!1,this.backToNormalLateralPanel.emit(),this.updateStarted=!1}showExtendedPanel(){this.isPanelextended=!0,this.showExtendedLateralPanel.emit()}configForm(){this.form=this.formBuilder.group({messageIdentifier:[null,[i.w.required]],id:[null],comment:[],originatingAgencyIdentifier:[null,[i.w.required]],submissionAgencyIdentifier:[],archivalAgencyIdentifier:[null,i.w.required],transferringAgencyIdentifier:[null,i.w.required],archivalAgreement:[null,i.w.required],archiveProfile:[null],acquisitionInformation:[null],legalStatus:[null]})}showEditProject(){this.form.markAsPristine(),this.updateStarted=!0,this.showExtendedPanel(),this.initFormForEdit()}initFormForEdit(){this.form.get("messageIdentifier").setValue(this.project.messageIdentifier),this.form.get("comment").setValue(this.project.comment),this.form.get("originatingAgencyIdentifier").setValue(this.project.originatingAgencyIdentifier),this.form.get("submissionAgencyIdentifier").setValue(this.project.submissionAgencyIdentifier),this.form.get("archivalAgencyIdentifier").setValue(this.project.archivalAgencyIdentifier),this.form.get("transferringAgencyIdentifier").setValue(this.project.transferringAgencyIdentifier),this.form.get("archivalAgreement").setValue(this.project.archivalAgreement),this.form.get("archiveProfile").setValue(this.project.archiveProfile),this.form.get("acquisitionInformation").setValue(this.project.acquisitionInformation),this.form.get("legalStatus").setValue(this.project.legalStatus)}launchUpdate(){const e=this.confirmEditProject;this.selectedValue="YES";const t=new c.T(0,c.w,"id",c.z.ASCENDANT);this.projectApiService.getTransactionsByProjectId(t,this.projectId$.getValue()).subscribe(e=>{this.transactions$.next(e)}),this.dialogRefToClose=this.dialog.open(e,{panelClass:"vitamui-dialog"})}mapProjectInternalFields(e){e.id=this.project.id,e.createdOn=this.project.createdOn,e.unitUp=this.project.unitUp,e.status=this.project.status,e.unitUps=this.project.unitUps}fillTransactionFromProject(e){e.archivalAgreement=this.project.archivalAgreement,e.messageIdentifier=this.project.messageIdentifier,e.archivalAgencyIdentifier=this.project.archivalAgencyIdentifier,e.transferringAgencyIdentifier=this.project.transferringAgencyIdentifier,e.originatingAgencyIdentifier=this.project.originatingAgencyIdentifier,e.submissionAgencyIdentifier=this.project.submissionAgencyIdentifier,e.archiveProfile=this.project.archiveProfile,e.legalStatus=this.project.legalStatus,e.comment=this.project.comment,e.acquisitionInformation=this.project.acquisitionInformation}onConfirm(){const e=Object.assign(Object.assign({},this.form.value),{name:this.form.value.messageIdentifier});this.mapProjectInternalFields(e);const t=this.projectService.updateProject(e),n=this.project;this.project=null,"NO"!==this.selectedValue?t.pipe(Object(ge.a)(e=>(this.dialogRefToClose.close(!0),this.project=e,this.projectService.nextUpdatedProject(e),this.updateStarted=!1,this.transactions$)),Object(O.a)(e=>e.values),Object(ge.a)(e=>{const t=[],n=[];return e.forEach(e=>{e.status===c.ib.OPEN?(this.fillTransactionFromProject(e),t.push(this.projectApiService.updateTransaction(e))):e.status===c.ib.KO&&n.push(e)}),Object(me.a)(t).pipe(Object(O.a)(()=>n))})).subscribe(e=>{let t=this.translationService.instant("COLLECT.UPDATE_PROJECT.TERMINATED");e.length>0&&(t+=" "+this.translationService.instant("COLLECT.UPDATE_PROJECT.TRANSACTIONS_KO")),this.snackBar.open(t,null,{panelClass:"vitamui-snack-bar",duration:1e4})},()=>{this.project=n}):t.subscribe(e=>{this.snackBar.open(this.translationService.instant("COLLECT.UPDATE_PROJECT.TERMINATED"),null,{panelClass:"vitamui-snack-bar",duration:1e4}),this.dialogRefToClose.close(!0),this.updateStarted=!1,this.project=e,this.projectService.nextUpdatedProject(e)},()=>{this.project=n})}onClose(){this.dialogRefToClose.close(!0)}}return e.\u0275fac=function(t){return new(t||e)(k.Xb(i.e),k.Xb(S.a),k.Xb(x.a),k.Xb(v.a),k.Xb(v.d),k.Xb(d.b),k.Xb(R.e),k.Xb(g.b))},e.\u0275cmp=k.Rb({type:e,selectors:[["app-project-preview"]],viewQuery:function(e,t){var n;1&e&&(k.bd(b.b,!0),k.Pc(be,!0)),2&e&&(k.Fc(n=k.mc())&&(t.tabGroup=n.first),k.Fc(n=k.mc())&&(t.confirmEditProject=n.first))},inputs:{projectId:"projectId"},outputs:{backToNormalLateralPanel:"backToNormalLateralPanel",previewClose:"previewClose",showExtendedLateralPanel:"showExtendedLateralPanel"},decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["loadingSpinner",""],["confirmEditProject",""],[3,"extended","title","subtitle","icon","onclose"],[3,"overlayPos","icon"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled"],[1,"vitamui-sidepanel-body",3,"formGroup"],[3,"selectedIndex","ngClass"],["tabGroup",""],[3,"label"],[1,"row"],[1,"col-12"],["class","read-only-field",4,"ngIf"],["class","form-control read-only-field",4,"ngIf"],[1,"read-only-field"],[4,"ngIf"],["class","form-control read-only-field","class","col-8 px-0",4,"ngIf"],["class","col-4 px-0","formControlName","originatingAgencyIdentifier","required","",3,"placeholder",4,"ngIf"],["class","ml-2 col-4",3,"disabled","placeholder",4,"ngIf"],["class","col-4 px-0","formControlName","submissionAgencyIdentifier","required","",3,"placeholder",4,"ngIf"],["class","row padding-style",4,"ngIf"],["class","col-8 mr-4",4,"ngIf"],[3,"label",4,"ngIf"],[1,"form-control","read-only-field"],["formControlName","messageIdentifier","required","",1,"col-8","px-0","mr-4",3,"placeholder"],[1,"col-8","px-0"],["formControlName","comment",3,"placeholder"],[1,"col-4"],["formControlName","originatingAgencyIdentifier","required","",1,"col-4","px-0",3,"placeholder"],[1,"ml-2","col-4",3,"disabled","placeholder"],["formControlName","submissionAgencyIdentifier","required","",1,"col-4","px-0",3,"placeholder"],[1,"row","padding-style"],[1,"col-2","mr-10","actions"],["type","button",1,"btn","primary",3,"disabled","click"],[1,"col-8","mr-4"],["formControlName","archivalAgencyIdentifier","required","",1,"col-5",3,"placeholder"],[1,"col-6","offset-1",3,"disabled","placeholder"],["formControlName","transferringAgencyIdentifier","required","",1,"col-5",3,"placeholder"],["formControlName","archivalAgreement","required","",1,"col-5","mr-7",3,"placeholder"],["formControlName","archiveProfile",1,"col-5","mr-7",3,"placeholder"],["appearance","outline","id","acquisition-informations",1,"col-5","mr-7"],["for","acquisition-informations"],[1,"pb-3"],["formControlName","acquisitionInformation"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline","id","legal-status",1,"col-5","mr-7"],["for","legal-status"],["formControlName","legalStatus","panelClass","legal-status"],[3,"value"],["class","gap-10",4,"ngIf"],["class","gap-20",4,"ngIf"],[1,"gap-10"],[1,"text","normal","bold","primary","uppercase"],[3,"label","value"],[1,"gap-20"],[3,"opened",4,"ngFor","ngForOf"],[3,"opened"],[1,"title"],[1,"content"],[1,"text","medium"],[1,"spinnerClass"],[1,"vitamui-spinner","large"],["class","row",4,"ngIf","ngIfElse"],[1,"row","mt-4"],[1,"btn","primary","btn-confirm-dialog","mr-2","margin-btn",3,"click"],[1,"btn","cancel",3,"click"],[1,"text","large","bold"],[1,"text","d-flex","mt-4"],[1,"mt-4"],[1,"vitamui-button-toggle-group",3,"ngModel","ngModelChange"],["group","matButtonToggleGroup"],["value","YES"],["value","NO"]],template:function(e,t){if(1&e&&(k.Tc(0,rt,56,56,"div",0),k.Tc(1,it,2,0,"ng-template",null,1,k.Uc),k.Tc(3,at,8,8,"ng-template",null,2,k.Uc)),2&e){const e=k.Gc(2);k.vc("ngIf",t.project)("ngIfElse",e)}},directives:[r.p,c.Ub,c.Eb,h.a,i.x,i.q,i.i,b.b,r.n,b.a,c.Cb,i.p,i.h,i.v,c.Db,u.b,p.a,r.o,D.n,c.x,c.b,f.b,d.c,d.f,s.b,i.s,s.a],pipes:[R.d],styles:[".spinnerClass[_ngcontent-%COMP%]{min-height:100px;display:flex;align-items:center;justify-content:center;margin-top:50%}[_nghost-%COMP%]  .mat-form-field .mat-form-field-outline{background-color:#fff}[_nghost-%COMP%]  .mat-form-field .mat-select, [_nghost-%COMP%]  .mat-form-field label{padding:0 20px!important}[_nghost-%COMP%]  .mat-form-field label{font-weight:700;color:var(--vitamui-primary)}.gap-10[_ngcontent-%COMP%]{gap:10px}.gap-10[_ngcontent-%COMP%], .gap-20[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.gap-20[_ngcontent-%COMP%]{gap:20px}"]}),e})();function st(e,t){if(1&e){const e=k.ec();k.dc(0,"app-project-preview",10),k.lc("previewClose",(function(){return k.Kc(e),k.pc().closePanel()}))("showExtendedLateralPanel",(function(){return k.Kc(e),k.pc().showExtendedLateralPanel()}))("backToNormalLateralPanel",(function(){return k.Kc(e),k.pc().backToNormalLateralPanel()})),k.cc()}if(2&e){const e=k.pc();k.vc("projectId",e.projectId)}}const lt=[{path:"",component:(()=>{class e extends c.cb{constructor(e,t,n){super(t,e),this.dialog=n,this.isLPExtended=!1,t.params.subscribe(e=>{this.tenantIdentifier=e.tenantIdentifier})}ngOnDestroy(){var e;super.ngOnDestroy(),null===(e=this.createDialogSub)||void 0===e||e.unsubscribe()}openCreateProjectDialog(){const e=this.dialog.open(ce,{panelClass:"vitamui-modal",disableClose:!0,data:{tenantIdentifier:this.tenantIdentifier}});this.createDialogSub=e.afterClosed().subscribe(()=>{this.projectListComponent.search(new c.T(0,c.w,"archivalAgreement",c.z.ASCENDANT))})}openProjectDetailsPanel(e){this.projectId=e,this.openPanel(e)}showExtendedLateralPanel(){this.isLPExtended=!0}backToNormalLateralPanel(){this.isLPExtended=!1}onSearch(e){const t=e?JSON.stringify({query:e}):null,n=new c.T(0,c.w,"archivalAgreement",c.z.ASCENDANT,t);this.projectListComponent.search(n)}}return e.\u0275fac=function(t){return new(t||e)(k.Xb(S.a),k.Xb(v.a),k.Xb(d.b))},e.\u0275cmp=k.Rb({type:e,selectors:[["app-projects"]],viewQuery:function(e,t){var n;1&e&&k.Pc(pe,!0),2&e&&k.Fc(n=k.mc())&&(t.projectListComponent=n.first)},features:[k.Ib],decls:19,vars:15,consts:[[3,"autosize","hasBackdrop"],["mode","side","position","end",3,"ngClass","fixedInViewport"],["panel",""],[3,"projectId","previewClose","showExtendedLateralPanel","backToNormalLateralPanel",4,"ngIf"],[1,"vitamui-heading"],[3,"searchbarPlaceholder","search"],[1,"btn","primary",3,"click"],[1,"vitamui-content"],[1,"mt-3"],[3,"tenantIdentifier","previewProjectDetailsPanel"],[3,"projectId","previewClose","showExtendedLateralPanel","backToNormalLateralPanel"]],template:function(e,t){1&e&&(k.dc(0,"mat-sidenav-container",0),k.dc(1,"mat-sidenav",1,2),k.Tc(3,st,1,1,"app-project-preview",3),k.cc(),k.dc(4,"mat-sidenav-content"),k.dc(5,"div",4),k.dc(6,"vitamui-common-title-breadcrumb"),k.Vc(7),k.qc(8,"translate"),k.cc(),k.dc(9,"vitamui-common-banner",5),k.lc("search",(function(e){return t.onSearch(e)})),k.qc(10,"translate"),k.dc(11,"button",6),k.lc("click",(function(){return t.openCreateProjectDialog()})),k.dc(12,"span"),k.Vc(13),k.qc(14,"translate"),k.cc(),k.cc(),k.cc(),k.cc(),k.dc(15,"div",7),k.Yb(16,"div"),k.dc(17,"div",8),k.dc(18,"app-project-list",9),k.lc("previewProjectDetailsPanel",(function(e){return t.openProjectDetailsPanel(e)})),k.cc(),k.cc(),k.cc(),k.cc(),k.cc()),2&e&&(k.vc("autosize",!0)("hasBackdrop",!1),k.Lb(1),k.vc("ngClass",t.isLPExtended?"extended-lateral-panel":"normal-lateral-panel")("fixedInViewport",!0),k.Lb(2),k.vc("ngIf",t.projectId),k.Lb(4),k.Wc(k.rc(8,9,"COLLECT.APP_BREADCRUMB")),k.Lb(2),k.vc("searchbarPlaceholder",k.rc(10,11,"COLLECT.SEARCH_PLACEHOLDER")),k.Lb(4),k.Wc(k.rc(14,13,"COLLECT.CREATE_PROJECT")),k.Lb(5),k.vc("tenantIdentifier",t.tenantIdentifier))},directives:[m.b,m.a,r.n,r.p,m.c,c.Kb,c.Sb,pe,ot],pipes:[R.d],styles:[""]}),e})(),canActivate:[c.e]}];let dt=(()=>{class e{}return e.\u0275mod=k.Vb({type:e}),e.\u0275inj=k.Ub({factory:function(t){return new(t||e)},imports:[[r.c,v.g.forChild(lt)],v.g]}),e})(),ut=(()=>{class e{}return e.\u0275mod=k.Vb({type:e}),e.\u0275inj=k.Ub({factory:function(t){return new(t||e)},providers:[{provide:o.a,useValue:{useUtc:!0}}],imports:[[r.c,dt,c.lb,h.b,g.e,d.g,m.d,f.a,c.fb,a.f,i.u,u.d,l.c,p.b,b.d,s.c,i.j]]}),e})()},uwHF:function(e,t,n){e.exports=function e(t,n,r){function i(a,o){if(!n[a]){if(!t[a]){if(c)return c(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){return i(t[a][1][e]||e)}),l,l.exports,e,t,n,r)}return n[a].exports}for(var c=!1,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,a,o,s,l=[],d=0,u=e.length,h=u,f="string"!==r.getTypeOf(e);d<e.length;)h=u-d,i=f?(t=e[d++],n=d<u?e[d++]:0,d<u?e[d++]:0):(t=e.charCodeAt(d++),n=d<u?e.charCodeAt(d++):0,d<u?e.charCodeAt(d++):0),a=(3&t)<<4|n>>4,o=1<h?(15&n)<<2|i>>6:64,s=2<h?63&i:64,l.push(c.charAt(t>>2)+c.charAt(a)+c.charAt(o)+c.charAt(s));return l.join("")},n.decode=function(e){var t,n,r,a,o,s,l=0,d=0,u="data:";if(e.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var h,f=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===c.charAt(64)&&f--,e.charAt(e.length-2)===c.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=i.uint8array?new Uint8Array(0|f):new Array(0|f);l<e.length;)t=c.indexOf(e.charAt(l++))<<2|(a=c.indexOf(e.charAt(l++)))>>4,n=(15&a)<<4|(o=c.indexOf(e.charAt(l++)))>>2,r=(3&o)<<6|(s=c.indexOf(e.charAt(l++))),h[d++]=t,64!==o&&(h[d++]=n),64!==s&&(h[d++]=r);return h}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),i=e("./stream/DataWorker"),c=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");function o(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}o.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(e,t,n){return e.pipe(new c).pipe(new a("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var c=i,a=0+n;e^=-1;for(var o=0;o<a;o++)e=e>>>8^c[255&(e^t[o])];return-1^e}(0|t,e,e.length):function(e,t,n,r){var c=i,a=0+n;e^=-1;for(var o=0;o<a;o++)e=e>>>8^c[255&(e^t.charCodeAt(o))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var r;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),c=e("./utils"),a=e("./stream/GenericWorker"),o=r?"uint8array":"array";function s(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",c.inherits(s,a),s.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(c.transformTo(o,e.data),!1)},s.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},s.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},s.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new s("Deflate",e)},n.uncompressWorker=function(){return new s("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function i(e,t,n,i,a,d){var u,h,f=e.file,p=e.compression,m=d!==o.utf8encode,g=c.transformTo("string",d(f.name)),b=c.transformTo("string",o.utf8encode(f.name)),v=f.comment,_=c.transformTo("string",d(v)),C=c.transformTo("string",o.utf8encode(v)),O=b.length!==f.name.length,T=C.length!==v.length,y="",E="",L="",I=f.dir,w=f.date,A={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(A.crc32=e.crc32,A.compressedSize=e.compressedSize,A.uncompressedSize=e.uncompressedSize);var k=0;t&&(k|=8),m||!O&&!T||(k|=2048);var P=0,S=0;I&&(P|=16),"UNIX"===a?(S=798,P|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(f.unixPermissions,I)):(S=20,P|=function(e){return 63&(e||0)}(f.dosPermissions)),u=w.getUTCHours(),u<<=6,u|=w.getUTCMinutes(),u<<=5,u|=w.getUTCSeconds()/2,h=w.getUTCFullYear()-1980,h<<=4,h|=w.getUTCMonth()+1,h<<=5,h|=w.getUTCDate(),O&&(E=r(1,1)+r(s(g),4)+b,y+="up"+r(E.length,2)+E),T&&(L=r(1,1)+r(s(_),4)+C,y+="uc"+r(L.length,2)+L);var x="";return x+="\n\0",x+=r(k,2),x+=p.magic,x+=r(u,2),x+=r(h,2),x+=r(A.crc32,4),x+=r(A.compressedSize,4),x+=r(A.uncompressedSize,4),x+=r(g.length,2),x+=r(y.length,2),{fileRecord:l.LOCAL_FILE_HEADER+x+g+y,dirRecord:l.CENTRAL_FILE_HEADER+r(S,2)+x+r(_.length,2)+"\0\0\0\0"+r(P,4)+r(i,4)+g+y+_}}var c=e("../utils"),a=e("../stream/GenericWorker"),o=e("../utf8"),s=e("../crc32"),l=e("../signature");function d(e,t,n,r){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(d,a),d.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,a.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},d.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=i(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return l.DATA_DESCRIPTOR+r(e.crc32,4)+r(e.compressedSize,4)+r(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=function(e,t,n,i,a){var o=c.transformTo("string",a(i));return l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(t,4)+r(n,4)+r(o.length,2)+o}(this.dirRecords.length,this.bytesWritten-e,e,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},d.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(e){var t=this._sources;if(!a.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},d.prototype.lock=function(){a.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var c=new i(t.streamFiles,n,t.platform,t.encodeFileName),a=0;try{e.forEach((function(e,n){a++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),o=n.dir,s=n.date;n._compressWorker(i,n.options.compressionOptions||t.compressionOptions||{}).withStreamInfo("file",{name:e,dir:o,date:s,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(c)})),c.entriesCount=a}catch(e){c.error(e)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./external"),c=e("./utf8"),a=e("./zipEntries"),o=e("./stream/Crc32Probe"),s=e("./nodejsUtils");function l(e){return new i.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new o);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),s.isNode&&s.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new a(t);return n.load(e),n})).then((function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var c=0;c<r.length;c++)n.push(l(r[c]));return i.Promise.all(n)})).then((function(e){for(var i=e.shift(),c=i.files,a=0;a<c.length;a++){var o=c[a],s=o.fileNameStr,l=r.resolve(o.fileNameStr);n.file(l,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:t.createFolders}),o.dir||(n.file(l).unsafeOriginalName=s)}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../stream/GenericWorker");function c(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(c,i),c.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},c.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),n&&n(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function r(e,t,n){var r,i,o=c.getTypeOf(t),u=c.extend(n||{},s);u.date=u.date||new Date,null!==u.compression&&(u.compression=u.compression.toUpperCase()),"string"==typeof u.unixPermissions&&(u.unixPermissions=parseInt(u.unixPermissions,8)),u.unixPermissions&&16384&u.unixPermissions&&(u.dir=!0),u.dosPermissions&&16&u.dosPermissions&&(u.dir=!0),u.dir&&(e=m(e)),u.createFolders&&(r=p(e))&&g.call(this,r,!0),n&&void 0!==n.binary||(u.binary=!("string"===o&&!1===u.binary&&!1===u.base64)),(t instanceof l&&0===t.uncompressedSize||u.dir||!t||0===t.length)&&(u.base64=!1,u.binary=!0,t="",u.compression="STORE",o="string"),i=t instanceof l||t instanceof a?t:h.isNode&&h.isStream(t)?new f(e,t):c.prepareContent(e,t,u.binary,u.optimizedBinaryString,u.base64);var b=new d(e,i,u);this.files[e]=b}var i=e("./utf8"),c=e("./utils"),a=e("./stream/GenericWorker"),o=e("./stream/StreamHelper"),s=e("./defaults"),l=e("./compressedObject"),d=e("./zipObject"),u=e("./generate"),h=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),p=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:s.createFolders,e=m(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function b(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1!==arguments.length)return r.call(this,e=this.root+e,t,n),this;if(b(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var c=this.files[this.root+e];return c&&!c.dir?c:null},folder:function(e){if(!e)return this;if(b(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=g.call(this,this.root+e),n=this.clone();return n.root=t.name,n},remove:function(e){var t=this.files[e=this.root+e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=c.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");c.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS"),t=u.generateWorker(this,n,n.comment||this.comment||"")}catch(e){(t=new a("error")).error(e)}return new o(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),c=this.length-4;0<=c;--c)if(this.data[c]===t&&this.data[c+1]===n&&this.data[c+2]===r&&this.data[c+3]===i)return c-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),c=this.readData(4);return t===c[0]&&n===c[1]&&r===c[2]&&i===c[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../support"),c=e("./ArrayReader"),a=e("./StringReader"),o=e("./NodeBufferReader"),s=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new o(e):i.uint8array?new s(r.transformTo("uint8array",e)):new c(r.transformTo("array",e)):new a(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK\x03\x04",n.CENTRAL_FILE_HEADER="PK\x01\x02",n.CENTRAL_DIRECTORY_END="PK\x05\x06",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../utils");function c(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(c,r),c.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../crc32");function c(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(c,r),c.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function c(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(c,i),c.prototype.processChunk=function(e){e&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+e.data.length),i.prototype.processChunk.call(this,e)},t.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function c(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(c,i),c.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./ConvertWorker"),c=e("./GenericWorker"),a=e("../base64"),o=e("../support"),s=e("../external"),l=null;if(o.nodestream)try{l=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function d(e,t,n){var a=t;switch(t){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=t,this._mimeType=n,r.checkSupport(a),this._worker=e.pipe(new i(a)),e.lock()}catch(e){this._worker=new c("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return function(e,t){return new s.Promise((function(n,i){var c=[],o=e._internalType,s=e._outputType,l=e._mimeType;e.on("data",(function(e,n){c.push(e),t&&t(n)})).on("error",(function(e){c=[],i(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",t),n);case"base64":return a.encode(t);default:return r.transformTo(e,t)}}(s,function(e,t){var n,r=0,i=null,c=0;for(n=0;n<t.length;n++)c+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(c),n=0;n<t.length;n++)i.set(t[n],r),r+=t[n].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(o,c),l);n(e)}catch(e){i(e)}c=[]})).resume()}))}(this,e)},on:function(e,t){var n=this;return this._worker.on(e,"data"===e?function(e){t.call(n,e.data,e.meta)}:function(){r.delay(t,arguments,n)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),n.blob=0===i.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),i=e("./support"),c=e("./nodejsUtils"),a=e("./stream/GenericWorker"),o=new Array(256),s=0;s<256;s++)o[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function l(){a.call(this,"utf-8 decode"),this.leftOver=null}function d(){a.call(this,"utf-8 encode")}o[254]=o[254]=1,n.utf8encode=function(e){return i.nodebuffer?c.newBufferFrom(e,"utf-8"):function(e){var t,n,r,c,a,o=e.length,s=0;for(c=0;c<o;c++)55296==(64512&(n=e.charCodeAt(c)))&&c+1<o&&56320==(64512&(r=e.charCodeAt(c+1)))&&(n=65536+(n-55296<<10)+(r-56320),c++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(s):new Array(s),c=a=0;a<s;c++)55296==(64512&(n=e.charCodeAt(c)))&&c+1<o&&56320==(64512&(r=e.charCodeAt(c+1)))&&(n=65536+(n-55296<<10)+(r-56320),c++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t}(e)},n.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,c,a=e.length,s=new Array(2*a);for(t=n=0;t<a;)if((i=e[t++])<128)s[n++]=i;else if(4<(c=o[i]))s[n++]=65533,t+=c-1;else{for(i&=2===c?31:3===c?15:7;1<c&&t<a;)i=i<<6|63&e[t++],c--;1<c?s[n++]=65533:i<65536?s[n++]=i:(s[n++]=55296|(i-=65536)>>10&1023,s[n++]=56320|1023&i)}return s.length!==n&&(s.subarray?s=s.subarray(0,n):s.length=n),r.applyFromCharCode(s)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(l,a),l.prototype.processChunk=function(e){var t=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var c=t;(t=new Uint8Array(c.length+this.leftOver.length)).set(this.leftOver,0),t.set(c,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var a=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+o[e[n]]>t?n:t}(t),s=t;a!==t.length&&(i.uint8array?(s=t.subarray(0,a),this.leftOver=t.subarray(a,t.length)):(s=t.slice(0,a),this.leftOver=t.slice(a,t.length))),this.push({data:n.utf8decode(s),meta:e.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=l,r.inherits(d,a),d.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var r=e("./support"),i=e("./base64"),c=e("./nodejsUtils"),a=e("./external");function o(e){return e}function s(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(t,r){n.checkSupport("blob");try{return new Blob([t],{type:r})}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(t),i.getBlob(r)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(e,t,n){var r=[],i=0,c=e.length;if(c<=n)return String.fromCharCode.apply(null,e);for(;i<c;)r.push(String.fromCharCode.apply(null,"array"===t||"nodebuffer"===t?e.slice(i,Math.min(i+n,c)):e.subarray(i,Math.min(i+n,c)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,c.allocBuffer(1)).length}catch(e){return!1}}()}};function d(e){var t=65536,r=n.getTypeOf(e),i=!0;if("uint8array"===r?i=l.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=l.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return l.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return l.stringifyByChar(e)}function u(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=d;var h={};h.string={string:o,array:function(e){return s(e,new Array(e.length))},arraybuffer:function(e){return h.string.uint8array(e).buffer},uint8array:function(e){return s(e,new Uint8Array(e.length))},nodebuffer:function(e){return s(e,c.allocBuffer(e.length))}},h.array={string:d,array:o,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return c.newBufferFrom(e)}},h.arraybuffer={string:function(e){return d(new Uint8Array(e))},array:function(e){return u(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:o,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return c.newBufferFrom(new Uint8Array(e))}},h.uint8array={string:d,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:o,nodebuffer:function(e){return c.newBufferFrom(e)}},h.nodebuffer={string:d,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return h.nodebuffer.uint8array(e).buffer},uint8array:function(e){return u(e,new Uint8Array(e.length))},nodebuffer:o},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return h[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++){var i=t[r];"."===i||""===i&&0!==r&&r!==t.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&c.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){setImmediate((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,c,o,l){return a.Promise.resolve(t).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new a.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(t){var d=n.getTypeOf(t);return d?("arraybuffer"===d?t=n.transformTo("uint8array",t):"string"===d&&(l?t=i.decode(t):c&&!0!==o&&(t=function(e){return s(e,r.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):a.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),c=e("./signature"),a=e("./zipEntry"),o=e("./support");function s(e){this.files=[],this.loadOptions=e}s.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=i.transformTo(o.uint8array?"uint8array":"array",e);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)this.reader.setIndex((t=this.files[e]).localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,c.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=s},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),c=e("./compressedObject"),a=e("./crc32"),o=e("./utf8"),s=e("./compressions"),l=e("./support");function d(e,t){this.options=e,this.loadOptions=t}d.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&s[t].magic===e)return s[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var c=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(c)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileName)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileComment)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null}},t.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=e("./stream/StreamHelper"),c=e("./stream/DataWorker"),a=e("./utf8"),o=e("./compressedObject"),s=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var c=!this._dataBinary;c&&!r&&(t=t.pipe(new a.Utf8EncodeWorker)),!c&&r&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new s("error")).error(e)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof o&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),o.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof s?this._data:new c(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<l.length;u++)r.prototype[l[u]]=d;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,n){(function(e){"use strict";var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var c=0,a=new i(d),o=e.document.createTextNode("");a.observe(o,{characterData:!0}),n=function(){o.data=c=++c%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){d(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(d,0)};else{var s=new e.MessageChannel;s.port1.onmessage=d,n=function(){s.port2.postMessage(0)}}var l=[];function d(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}t.exports=function(e){1!==l.push(e)||r||n()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function i(){}var c={},a=["REJECTED"],o=["FULFILLED"],s=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,e!==i&&f(this,e)}function d(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function u(e,t,n){r((function(){var r;try{r=t(n)}catch(r){return c.reject(e,r)}r===e?c.reject(e,new TypeError("Cannot resolve promise with itself")):c.resolve(e,r)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,c.reject(e,t))}function i(t){n||(n=!0,c.resolve(e,t))}var a=p((function(){t(i,r)}));"error"===a.status&&r(a.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=l).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===o||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(i);return this.state!==s?u(n,this.state===o?e:t,this.outcome):this.queue.push(new d(n,e,t)),n},d.prototype.callFulfilled=function(e){c.resolve(this.promise,e)},d.prototype.otherCallFulfilled=function(e){u(this.promise,this.onFulfilled,e)},d.prototype.callRejected=function(e){c.reject(this.promise,e)},d.prototype.otherCallRejected=function(e){u(this.promise,this.onRejected,e)},c.resolve=function(e,t){var n=p(h,t);if("error"===n.status)return c.reject(e,n.value);var r=n.value;if(r)f(e,r);else{e.state=o,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},c.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:c.resolve(new this(i),e)},l.reject=function(e){var t=new this(i);return c.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),o=0,s=-1,l=new this(i);++s<n;)d(e[s],s);return l;function d(e,i){t.resolve(e).then((function(e){a[i]=e,++o!==n||r||(r=!0,c.resolve(l,a))}),(function(e){r||(r=!0,c.reject(l,e))}))}},l.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var r=-1,a=new this(i);++r<t;)this.resolve(e[r]).then((function(e){n||(n=!0,c.resolve(a,e))}),(function(e){n||(n=!0,c.reject(a,e))}));return a}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),i=e("./utils/common"),c=e("./utils/strings"),a=e("./zlib/messages"),o=e("./zlib/zstream"),s=Object.prototype.toString;function l(e){if(!(this instanceof l))return new l(e);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(a[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var d;if(d="string"==typeof t.dictionary?c.string2buf(t.dictionary):"[object ArrayBuffer]"===s.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=r.deflateSetDictionary(this.strm,d)))throw new Error(a[n]);this._dict_set=!0}}function d(e,t){var n=new l(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}l.prototype.push=function(e,t){var n,a,o=this.strm,l=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,o.input="string"==typeof e?c.string2buf(e):"[object ArrayBuffer]"===s.call(e)?new Uint8Array(e):e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new i.Buf8(l),o.next_out=0,o.avail_out=l),1!==(n=r.deflate(o,a))&&0!==n)return this.onEnd(n),!(this.ended=!0);0!==o.avail_out&&(0!==o.avail_in||4!==a&&2!==a)||this.onData("string"===this.options.to?c.buf2binstring(i.shrinkBuf(o.output,o.next_out)):i.shrinkBuf(o.output,o.next_out))}while((0<o.avail_in||0===o.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==a||(this.onEnd(0),!(o.avail_out=0))},l.prototype.onData=function(e){this.chunks.push(e)},l.prototype.onEnd=function(e){0===e&&(this.result="string"===this.options.to?this.chunks.join(""):i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=l,n.deflate=d,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,d(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),i=e("./utils/common"),c=e("./utils/strings"),a=e("./zlib/constants"),o=e("./zlib/messages"),s=e("./zlib/zstream"),l=e("./zlib/gzheader"),d=Object.prototype.toString;function u(e){if(!(this instanceof u))return new u(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==a.Z_OK)throw new Error(o[n]);this.header=new l,r.inflateGetHeader(this.strm,this.header)}function h(e,t){var n=new u(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}u.prototype.push=function(e,t){var n,o,s,l,u,h,f=this.strm,p=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;o=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,f.input="string"==typeof e?c.binstring2buf(e):"[object ArrayBuffer]"===d.call(e)?new Uint8Array(e):e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new i.Buf8(p),f.next_out=0,f.avail_out=p),(n=r.inflate(f,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(h="string"==typeof m?c.string2buf(m):"[object ArrayBuffer]"===d.call(m)?new Uint8Array(m):m,n=r.inflateSetDictionary(this.strm,h)),n===a.Z_BUF_ERROR&&!0===g&&(n=a.Z_OK,g=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&n!==a.Z_STREAM_END&&(0!==f.avail_in||o!==a.Z_FINISH&&o!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(s=c.utf8border(f.output,f.next_out),l=f.next_out-s,u=c.buf2string(f.output,s),f.next_out=l,f.avail_out=p-l,l&&i.arraySet(f.output,f.output,s,l,0),this.onData(u)):this.onData(i.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((0<f.avail_in||0===f.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(o=a.Z_FINISH),o===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):o!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(f.avail_out=0))},u.prototype.onData=function(e){this.chunks.push(e)},u.prototype.onEnd=function(e){e===a.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=u,n.inflate=h,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},n.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var c=0;c<r;c++)e[i+c]=t[n+c]},flattenChunks:function(e){var t,n,r,i,c,a;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),t=i=0,n=e.length;t<n;t++)a.set(c=e[t],i),i+=c.length;return a}},c={arraySet:function(e,t,n,r,i){for(var c=0;c<r;c++)e[i+c]=t[n+c]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,c))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),i=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){c=!1}for(var a=new r.Buf8(256),o=0;o<256;o++)a[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;function s(e,t){if(t<65537&&(e.subarray&&c||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}a[254]=a[254]=1,n.string2buf=function(e){var t,n,i,c,a,o=e.length,s=0;for(c=0;c<o;c++)55296==(64512&(n=e.charCodeAt(c)))&&c+1<o&&56320==(64512&(i=e.charCodeAt(c+1)))&&(n=65536+(n-55296<<10)+(i-56320),c++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(s),c=a=0;a<s;c++)55296==(64512&(n=e.charCodeAt(c)))&&c+1<o&&56320==(64512&(i=e.charCodeAt(c+1)))&&(n=65536+(n-55296<<10)+(i-56320),c++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t},n.buf2binstring=function(e){return s(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,c,o=t||e.length,l=new Array(2*o);for(n=r=0;n<o;)if((i=e[n++])<128)l[r++]=i;else if(4<(c=a[i]))l[r++]=65533,n+=c-1;else{for(i&=2===c?31:3===c?15:7;1<c&&n<o;)i=i<<6|63&e[n++],c--;1<c?l[r++]=65533:i<65536?l[r++]=i:(l[r++]=55296|(i-=65536)>>10&1023,l[r++]=56320|1023&i)}return s(l,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var i=65535&e|0,c=e>>>16&65535|0,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;c=c+(i=i+t[r++]|0)|0,--a;);i%=65521,c%=65521}return i|c<<16|0}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var c=r,a=i+n;e^=-1;for(var o=i;o<a;o++)e=e>>>8^c[255&(e^t[o])];return-1^e}},{}],46:[function(e,t,n){"use strict";var r,i=e("../utils/common"),c=e("./trees"),a=e("./adler32"),o=e("./crc32"),s=e("./messages"),l=-2,d=258,u=262,h=113;function f(e,t){return e.msg=s[t],t}function p(e){return(e<<1)-(4<e?9:0)}function m(e){for(var t=e.length;0<=--t;)e[t]=0}function g(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function b(e,t){c._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,g(e.strm)}function v(e,t){e.pending_buf[e.pending++]=t}function _(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function C(e,t){var n,r,i=e.max_chain_length,c=e.strstart,a=e.prev_length,o=e.nice_match,s=e.strstart>e.w_size-u?e.strstart-(e.w_size-u):0,l=e.window,h=e.w_mask,f=e.prev,p=e.strstart+d,m=l[c+a-1],g=l[c+a];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(l[(n=t)+a]===g&&l[n+a-1]===m&&l[n]===l[c]&&l[++n]===l[c+1]){c+=2,n++;do{}while(l[++c]===l[++n]&&l[++c]===l[++n]&&l[++c]===l[++n]&&l[++c]===l[++n]&&l[++c]===l[++n]&&l[++c]===l[++n]&&l[++c]===l[++n]&&l[++c]===l[++n]&&c<p);if(r=d-(p-c),c=p-d,a<r){if(e.match_start=t,o<=(a=r))break;m=l[c+a-1],g=l[c+a]}}}while((t=f[t&h])>s&&0!=--i);return a<=e.lookahead?a:e.lookahead}function O(e){var t,n,r,c,s,l,d,h,f,p,m=e.w_size;do{if(c=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-u)){for(i.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=n=e.hash_size;r=e.head[--t],e.head[t]=m<=r?r-m:0,--n;);for(t=n=m;r=e.prev[--t],e.prev[t]=m<=r?r-m:0,--n;);c+=m}if(0===e.strm.avail_in)break;if(d=e.window,h=e.strstart+e.lookahead,p=void 0,(f=c)<(p=(l=e.strm).avail_in)&&(p=f),n=0===p?0:(l.avail_in-=p,i.arraySet(d,l.input,l.next_in,p,h),1===l.state.wrap?l.adler=a(l.adler,d,p,h):2===l.state.wrap&&(l.adler=o(l.adler,d,p,h)),l.next_in+=p,l.total_in+=p,p),e.lookahead+=n,e.lookahead+e.insert>=3)for(e.ins_h=e.window[s=e.strstart-e.insert],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+3-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<u&&0!==e.strm.avail_in)}function T(e,t){for(var n,r;;){if(e.lookahead<u){if(O(e),e.lookahead<u&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-u&&(e.match_length=C(e,n)),e.match_length>=3)if(r=c._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=c._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function y(e,t){for(var n,r,i;;){if(e.lookahead<u){if(O(e),e.lookahead<u&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-u&&(e.match_length=C(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-3,r=c._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(b(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=c._tr_tally(e,0,e.window[e.strstart-1]))&&b(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=c._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function E(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function L(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function I(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:h,e.adler=2===t.wrap?0:1,t.last_flush=0,c._tr_init(t),0):f(e,l)}function w(e){var t=I(e);return 0===t&&function(e){e.window_size=2*e.w_size,m(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0}(e.state),t}function A(e,t,n,r,c,a){if(!e)return l;var o=1;if(-1===t&&(t=6),r<0?(o=0,r=-r):15<r&&(o=2,r-=16),c<1||9<c||8!==n||r<8||15<r||t<0||9<t||a<0||4<a)return f(e,l);8===r&&(r=9);var s=new L;return(e.state=s).strm=e,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=c+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new i.Buf8(2*s.w_size),s.head=new i.Buf16(s.hash_size),s.prev=new i.Buf16(s.w_size),s.lit_bufsize=1<<c+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new i.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=a,s.method=n,w(e)}r=[new E(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(O(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,b(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-u&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&b(e,!1),1)})),new E(4,4,8,4,T),new E(4,5,16,8,T),new E(4,6,32,32,T),new E(4,4,16,16,y),new E(8,16,32,32,y),new E(8,16,128,128,y),new E(8,32,128,256,y),new E(32,128,258,1024,y),new E(32,258,258,4096,y)],n.deflateInit=function(e,t){return A(e,t,8,15,8,0)},n.deflateInit2=A,n.deflateReset=w,n.deflateResetKeep=I,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?l:(e.state.gzhead=t,0):l},n.deflate=function(e,t){var n,i,a,s;if(!e||!e.state||5<t||t<0)return e?f(e,l):l;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return f(e,0===e.avail_out?-5:l);if(i.strm=e,n=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,v(i,31),v(i,139),v(i,8),i.gzhead?(v(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),v(i,255&i.gzhead.time),v(i,i.gzhead.time>>8&255),v(i,i.gzhead.time>>16&255),v(i,i.gzhead.time>>24&255),v(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),v(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(v(i,255&i.gzhead.extra.length),v(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=o(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(v(i,0),v(i,0),v(i,0),v(i,0),v(i,0),v(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),v(i,3),i.status=h);else{var u=8+(i.w_bits-8<<4)<<8;u|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(u|=32),u+=31-u%31,i.status=h,_(i,u),0!==i.strstart&&(_(i,e.adler>>>16),_(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(e.adler=o(e.adler,i.pending_buf,i.pending-a,a)),g(e),a=i.pending,i.pending!==i.pending_buf_size));)v(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(e.adler=o(e.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=o(e.adler,i.pending_buf,i.pending-a,a)),g(e),a=i.pending,i.pending===i.pending_buf_size)){s=1;break}s=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,v(i,s)}while(0!==s);i.gzhead.hcrc&&i.pending>a&&(e.adler=o(e.adler,i.pending_buf,i.pending-a,a)),0===s&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=o(e.adler,i.pending_buf,i.pending-a,a)),g(e),a=i.pending,i.pending===i.pending_buf_size)){s=1;break}s=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,v(i,s)}while(0!==s);i.gzhead.hcrc&&i.pending>a&&(e.adler=o(e.adler,i.pending_buf,i.pending-a,a)),0===s&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&g(e),i.pending+2<=i.pending_buf_size&&(v(i,255&e.adler),v(i,e.adler>>8&255),e.adler=0,i.status=h)):i.status=h),0!==i.pending){if(g(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&p(t)<=p(n)&&4!==t)return f(e,-5);if(666===i.status&&0!==e.avail_in)return f(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&666!==i.status){var C=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(O(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=c._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var n,r,i,a,o=e.window;;){if(e.lookahead<=d){if(O(e),e.lookahead<=d&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(r=o[i=e.strstart-1])===o[++i]&&r===o[++i]&&r===o[++i]){a=e.strstart+d;do{}while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<a);e.match_length=d-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=c._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=c._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(i,t):r[i.level].func(i,t);if(3!==C&&4!==C||(i.status=666),1===C||3===C)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===C&&(1===t?c._tr_align(i):5!==t&&(c._tr_stored_block(i,0,0,!1),3===t&&(m(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),g(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(v(i,255&e.adler),v(i,e.adler>>8&255),v(i,e.adler>>16&255),v(i,e.adler>>24&255),v(i,255&e.total_in),v(i,e.total_in>>8&255),v(i,e.total_in>>16&255),v(i,e.total_in>>24&255)):(_(i,e.adler>>>16),_(i,65535&e.adler)),g(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?0:1)},n.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==h&&666!==t?f(e,l):(e.state=null,t===h?f(e,-3):0):l},n.deflateSetDictionary=function(e,t){var n,r,c,o,s,d,u,h,f=t.length;if(!e||!e.state)return l;if(2===(o=(n=e.state).wrap)||1===o&&42!==n.status||n.lookahead)return l;for(1===o&&(e.adler=a(e.adler,t,f,0)),n.wrap=0,f>=n.w_size&&(0===o&&(m(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new i.Buf8(n.w_size),i.arraySet(h,t,f-n.w_size,n.w_size,0),t=h,f=n.w_size),s=e.avail_in,d=e.next_in,u=e.input,e.avail_in=f,e.next_in=0,e.input=t,O(n);n.lookahead>=3;){for(r=n.strstart,c=n.lookahead-2;n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--c;);n.strstart=r,n.lookahead=2,O(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=d,e.input=u,e.avail_in=s,n.wrap=o,0},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i,c,a,o,s,l,d,u,h,f,p,m,g,b,v,_,C,O,T,y,E,L,I;L=e.input,i=(r=e.next_in)+(e.avail_in-5),I=e.output,a=(c=e.next_out)-(t-e.avail_out),o=c+(e.avail_out-257),s=(n=e.state).dmax,l=n.wsize,d=n.whave,u=n.wnext,h=n.window,f=n.hold,p=n.bits,m=n.lencode,g=n.distcode,b=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;e:do{p<15&&(f+=L[r++]<<p,f+=L[r++]<<(p+=8),p+=8),_=m[f&b];t:for(;;){if(f>>>=C=_>>>24,p-=C,0==(C=_>>>16&255))I[c++]=65535&_;else{if(!(16&C)){if(0==(64&C)){_=m[(65535&_)+(f&(1<<C)-1)];continue t}if(32&C){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}O=65535&_,(C&=15)&&(p<C&&(f+=L[r++]<<p,p+=8),O+=f&(1<<C)-1,f>>>=C,p-=C),p<15&&(f+=L[r++]<<p,f+=L[r++]<<(p+=8),p+=8),_=g[f&v];n:for(;;){if(f>>>=C=_>>>24,p-=C,!(16&(C=_>>>16&255))){if(0==(64&C)){_=g[(65535&_)+(f&(1<<C)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(T=65535&_,p<(C&=15)&&(f+=L[r++]<<p,(p+=8)<C&&(f+=L[r++]<<p,p+=8)),s<(T+=f&(1<<C)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=C,p-=C,(C=c-a)<T){if(d<(C=T-C)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(E=h,(y=0)===u){if(y+=l-C,C<O){for(O-=C;I[c++]=h[y++],--C;);y=c-T,E=I}}else if(u<C){if(y+=l+u-C,(C-=u)<O){for(O-=C;I[c++]=h[y++],--C;);if(y=0,u<O){for(O-=C=u;I[c++]=h[y++],--C;);y=c-T,E=I}}}else if(y+=u-C,C<O){for(O-=C;I[c++]=h[y++],--C;);y=c-T,E=I}for(;2<O;)I[c++]=E[y++],I[c++]=E[y++],I[c++]=E[y++],O-=3;O&&(I[c++]=E[y++],1<O&&(I[c++]=E[y++]))}else{for(y=c-T;I[c++]=I[y++],I[c++]=I[y++],I[c++]=I[y++],2<(O-=3););O&&(I[c++]=I[y++],1<O&&(I[c++]=I[y++]))}break}}break}}while(r<i&&c<o);r-=O=p>>3,f&=(1<<(p-=O<<3))-1,e.next_in=r,e.next_out=c,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=c<o?o-c+257:257-(c-o),n.hold=f,n.bits=p}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),i=e("./adler32"),c=e("./crc32"),a=e("./inffast"),o=e("./inftrees"),s=-2;function l(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function d(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function u(e){var t;return e&&e.state?(e.total_in=e.total_out=(t=e.state).total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):s}function h(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,u(e)):s}function f(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?s:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,h(e))):s}function p(e,t){var n,r;return e?(r=new d,(e.state=r).window=null,0!==(n=f(e,t))&&(e.state=null),n):s}var m,g,b=!0;function v(e){if(b){var t;for(m=new r.Buf32(512),g=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(1,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(2,e.lens,0,32,g,0,e.work,{bits:5}),b=!1}e.lencode=m,e.lenbits=9,e.distcode=g,e.distbits=5}function _(e,t,n,i){var c,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i<(c=a.wsize-a.wnext)&&(c=i),r.arraySet(a.window,t,n-i,c,a.wnext),(i-=c)?(r.arraySet(a.window,t,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=c,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=c))),0}n.inflateReset=h,n.inflateReset2=f,n.inflateResetKeep=u,n.inflateInit=function(e){return p(e,15)},n.inflateInit2=p,n.inflate=function(e,t){var n,d,u,h,f,p,m,g,b,C,O,T,y,E,L,I,w,A,k,P,S,x,N,R,F=0,D=new r.Buf8(4),M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return s;12===(n=e.state).mode&&(n.mode=13),f=e.next_out,u=e.output,h=e.next_in,d=e.input,g=n.hold,b=n.bits,C=p=e.avail_in,O=m=e.avail_out,x=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;b<16;){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}if(2&n.wrap&&35615===g){D[n.check=0]=255&g,D[1]=g>>>8&255,n.check=c(n.check,D,2,0),b=g=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&g)<<8)+(g>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&g)){e.msg="unknown compression method",n.mode=30;break}if(b-=4,S=8+(15&(g>>>=4)),0===n.wbits)n.wbits=S;else if(S>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<S,e.adler=n.check=1,n.mode=512&g?10:12,b=g=0;break;case 2:for(;b<16;){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}if(n.flags=g,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=g>>8&1),512&n.flags&&(D[0]=255&g,D[1]=g>>>8&255,n.check=c(n.check,D,2,0)),b=g=0,n.mode=3;case 3:for(;b<32;){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}n.head&&(n.head.time=g),512&n.flags&&(D[0]=255&g,D[1]=g>>>8&255,D[2]=g>>>16&255,D[3]=g>>>24&255,n.check=c(n.check,D,4,0)),b=g=0,n.mode=4;case 4:for(;b<16;){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}n.head&&(n.head.xflags=255&g,n.head.os=g>>8),512&n.flags&&(D[0]=255&g,D[1]=g>>>8&255,n.check=c(n.check,D,2,0)),b=g=0,n.mode=5;case 5:if(1024&n.flags){for(;b<16;){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}n.length=g,n.head&&(n.head.extra_len=g),512&n.flags&&(D[0]=255&g,D[1]=g>>>8&255,n.check=c(n.check,D,2,0)),b=g=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(p<(T=n.length)&&(T=p),T&&(n.head&&(S=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,d,h,T,S)),512&n.flags&&(n.check=c(n.check,d,T,h)),p-=T,h+=T,n.length-=T),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===p)break e;for(T=0;S=d[h+T++],n.head&&S&&n.length<65536&&(n.head.name+=String.fromCharCode(S)),S&&T<p;);if(512&n.flags&&(n.check=c(n.check,d,T,h)),p-=T,h+=T,S)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===p)break e;for(T=0;S=d[h+T++],n.head&&S&&n.length<65536&&(n.head.comment+=String.fromCharCode(S)),S&&T<p;);if(512&n.flags&&(n.check=c(n.check,d,T,h)),p-=T,h+=T,S)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;b<16;){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}if(g!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}b=g=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;b<32;){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}e.adler=n.check=l(g),b=g=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=f,e.avail_out=m,e.next_in=h,e.avail_in=p,n.hold=g,n.bits=b,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){g>>>=7&b,b-=7&b,n.mode=27;break}for(;b<3;){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}switch(n.last=1&g,b-=1,3&(g>>>=1)){case 0:n.mode=14;break;case 1:if(v(n),n.mode=20,6!==t)break;g>>>=2,b-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}g>>>=2,b-=2;break;case 14:for(g>>>=7&b,b-=7&b;b<32;){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}if((65535&g)!=(g>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&g,b=g=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(T=n.length){if(p<T&&(T=p),m<T&&(T=m),0===T)break e;r.arraySet(u,d,h,T,f),p-=T,h+=T,m-=T,f+=T,n.length-=T;break}n.mode=12;break;case 17:for(;b<14;){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}if(n.nlen=257+(31&g),b-=5,n.ndist=1+(31&(g>>>=5)),b-=5,n.ncode=4+(15&(g>>>=5)),g>>>=4,b-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;b<3;){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}n.lens[M[n.have++]]=7&g,g>>>=3,b-=3}for(;n.have<19;)n.lens[M[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,x=o(0,n.lens,0,19,n.lencode,0,n.work,N={bits:n.lenbits}),n.lenbits=N.bits,x){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;I=(F=n.lencode[g&(1<<n.lenbits)-1])>>>16&255,w=65535&F,!((L=F>>>24)<=b);){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}if(w<16)g>>>=L,b-=L,n.lens[n.have++]=w;else{if(16===w){for(R=L+2;b<R;){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}if(g>>>=L,b-=L,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}S=n.lens[n.have-1],T=3+(3&g),g>>>=2,b-=2}else if(17===w){for(R=L+3;b<R;){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}b-=L,S=0,T=3+(7&(g>>>=L)),g>>>=3,b-=3}else{for(R=L+7;b<R;){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}b-=L,S=0,T=11+(127&(g>>>=L)),g>>>=7,b-=7}if(n.have+T>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;T--;)n.lens[n.have++]=S}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,x=o(1,n.lens,0,n.nlen,n.lencode,0,n.work,N={bits:n.lenbits}),n.lenbits=N.bits,x){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,x=o(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,N={bits:n.distbits}),n.distbits=N.bits,x){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=p&&258<=m){e.next_out=f,e.avail_out=m,e.next_in=h,e.avail_in=p,n.hold=g,n.bits=b,a(e,O),f=e.next_out,u=e.output,m=e.avail_out,h=e.next_in,d=e.input,p=e.avail_in,g=n.hold,b=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;I=(F=n.lencode[g&(1<<n.lenbits)-1])>>>16&255,w=65535&F,!((L=F>>>24)<=b);){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}if(I&&0==(240&I)){for(A=L,k=I,P=w;I=(F=n.lencode[P+((g&(1<<A+k)-1)>>A)])>>>16&255,w=65535&F,!(A+(L=F>>>24)<=b);){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}g>>>=A,b-=A,n.back+=A}if(g>>>=L,b-=L,n.back+=L,n.length=w,0===I){n.mode=26;break}if(32&I){n.back=-1,n.mode=12;break}if(64&I){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&I,n.mode=22;case 22:if(n.extra){for(R=n.extra;b<R;){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}n.length+=g&(1<<n.extra)-1,g>>>=n.extra,b-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;I=(F=n.distcode[g&(1<<n.distbits)-1])>>>16&255,w=65535&F,!((L=F>>>24)<=b);){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}if(0==(240&I)){for(A=L,k=I,P=w;I=(F=n.distcode[P+((g&(1<<A+k)-1)>>A)])>>>16&255,w=65535&F,!(A+(L=F>>>24)<=b);){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}g>>>=A,b-=A,n.back+=A}if(g>>>=L,b-=L,n.back+=L,64&I){e.msg="invalid distance code",n.mode=30;break}n.offset=w,n.extra=15&I,n.mode=24;case 24:if(n.extra){for(R=n.extra;b<R;){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}n.offset+=g&(1<<n.extra)-1,g>>>=n.extra,b-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===m)break e;if(n.offset>(T=O-m)){if((T=n.offset-T)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}y=T>n.wnext?n.wsize-(T-=n.wnext):n.wnext-T,T>n.length&&(T=n.length),E=n.window}else E=u,y=f-n.offset,T=n.length;for(m<T&&(T=m),m-=T,n.length-=T;u[f++]=E[y++],--T;);0===n.length&&(n.mode=21);break;case 26:if(0===m)break e;u[f++]=n.length,m--,n.mode=21;break;case 27:if(n.wrap){for(;b<32;){if(0===p)break e;p--,g|=d[h++]<<b,b+=8}if(e.total_out+=O-=m,n.total+=O,O&&(e.adler=n.check=n.flags?c(n.check,u,O,f-O):i(n.check,u,O,f-O)),O=m,(n.flags?g:l(g))!==n.check){e.msg="incorrect data check",n.mode=30;break}b=g=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;b<32;){if(0===p)break e;p--,g+=d[h++]<<b,b+=8}if(g!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}b=g=0}n.mode=29;case 29:x=1;break e;case 30:x=-3;break e;case 31:return-4;case 32:default:return s}return e.next_out=f,e.avail_out=m,e.next_in=h,e.avail_in=p,n.hold=g,n.bits=b,(n.wsize||O!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&_(e,e.output,e.next_out,O-e.avail_out)?(n.mode=31,-4):(O-=e.avail_out,e.total_in+=C-=e.avail_in,e.total_out+=O,n.total+=O,n.wrap&&O&&(e.adler=n.check=n.flags?c(n.check,u,O,e.next_out-O):i(n.check,u,O,e.next_out-O)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==C&&0===O||4===t)&&0===x&&(x=-5),x)},n.inflateEnd=function(e){if(!e||!e.state)return s;var t=e.state;return t.window&&(t.window=null),e.state=null,0},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?s:((n.head=t).done=!1,0):s},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?s:11===n.mode&&i(1,t,r,0)!==n.check?-3:_(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):s},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,s,l,d,u,h){var f,p,m,g,b,v,_,C,O,T=h.bits,y=0,E=0,L=0,I=0,w=0,A=0,k=0,P=0,S=0,x=0,N=null,R=0,F=new r.Buf16(16),D=new r.Buf16(16),M=null,j=0;for(y=0;y<=15;y++)F[y]=0;for(E=0;E<s;E++)F[t[n+E]]++;for(w=T,I=15;1<=I&&0===F[I];I--);if(I<w&&(w=I),0===I)return l[d++]=20971520,l[d++]=20971520,h.bits=1,0;for(L=1;L<I&&0===F[L];L++);for(w<L&&(w=L),y=P=1;y<=15;y++)if(P<<=1,(P-=F[y])<0)return-1;if(0<P&&(0===e||1!==I))return-1;for(D[1]=0,y=1;y<15;y++)D[y+1]=D[y]+F[y];for(E=0;E<s;E++)0!==t[n+E]&&(u[D[t[n+E]]++]=E);if(v=0===e?(N=M=u,19):1===e?(N=i,R-=257,M=c,j-=257,256):(N=a,M=o,-1),y=L,b=d,k=E=x=0,m=-1,g=(S=1<<(A=w))-1,1===e&&852<S||2===e&&592<S)return 1;for(;;){for(_=y-k,O=u[E]<v?(C=0,u[E]):u[E]>v?(C=M[j+u[E]],N[R+u[E]]):(C=96,0),f=1<<y-k,L=p=1<<A;l[b+(x>>k)+(p-=f)]=_<<24|C<<16|O|0,0!==p;);for(f=1<<y-1;x&f;)f>>=1;if(0!==f?(x&=f-1,x+=f):x=0,E++,0==--F[y]){if(y===I)break;y=t[n+u[E]]}if(w<y&&(x&g)!==m){for(0===k&&(k=w),b+=L,P=1<<(A=y-k);A+k<I&&!((P-=F[A+k])<=0);)A++,P<<=1;if(S+=1<<A,1===e&&852<S||2===e&&592<S)return 1;l[m=x&g]=w<<24|A<<16|b-d|0}}return 0!==x&&(l[b+x]=y-k<<24|64<<16|0),h.bits=w,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common");function i(e){for(var t=e.length;0<=--t;)e[t]=0}var c=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],a=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],s=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],l=new Array(576);i(l);var d=new Array(60);i(d);var u=new Array(512);i(u);var h=new Array(256);i(h);var f=new Array(29);i(f);var p,m,g,b=new Array(30);function v(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function _(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function C(e){return e<256?u[e]:u[256+(e>>>7)]}function O(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function T(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,O(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function y(e,t,n){T(e,n[2*t],n[2*t+1])}function E(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function L(e,t,n){var r,i,c=new Array(16),a=0;for(r=1;r<=15;r++)c[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var o=e[2*i+1];0!==o&&(e[2*i]=E(c[o]++,o))}}function I(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function w(e){8<e.bi_valid?O(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function A(e,t,n,r){var i=2*t,c=2*n;return e[i]<e[c]||e[i]===e[c]&&r[t]<=r[n]}function k(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&A(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!A(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function P(e,t,n){var r,i,o,s,l=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0===r?y(e,i,t):(y(e,(o=h[i])+256+1,t),0!==(s=c[o])&&T(e,i-=f[o],s),y(e,o=C(--r),n),0!==(s=a[o])&&T(e,r-=b[o],s)),l<e.last_lit;);y(e,256,t)}function S(e,t){var n,r,i,c=t.dyn_tree,a=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<s;n++)0!==c[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):c[2*n+1]=0;for(;e.heap_len<2;)c[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,o&&(e.static_len-=a[2*i+1]);for(t.max_code=l,n=e.heap_len>>1;1<=n;n--)k(e,c,n);for(i=s;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],k(e,c,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,c[2*i]=c[2*n]+c[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,c[2*n+1]=c[2*r+1]=i,e.heap[1]=i++,k(e,c,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,c,a,o,s=t.dyn_tree,l=t.max_code,d=t.stat_desc.static_tree,u=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(c=0;c<=15;c++)e.bl_count[c]=0;for(s[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)p<(c=s[2*s[2*(r=e.heap[n])+1]+1]+1)&&(c=p,m++),s[2*r+1]=c,l<r||(e.bl_count[c]++,a=0,f<=r&&(a=h[r-f]),e.opt_len+=(o=s[2*r])*(c+a),u&&(e.static_len+=o*(d[2*r+1]+a)));if(0!==m){do{for(c=p-1;0===e.bl_count[c];)c--;e.bl_count[c]--,e.bl_count[c+1]+=2,e.bl_count[p]--,m-=2}while(0<m);for(c=p;0!==c;c--)for(r=e.bl_count[c];0!==r;)l<(i=e.heap[--n])||(s[2*i+1]!==c&&(e.opt_len+=(c-s[2*i+1])*s[2*i],s[2*i+1]=c),r--)}}(e,t),L(c,l,e.bl_count)}function x(e,t,n){var r,i,c=-1,a=t[1],o=0,s=7,l=4;for(0===a&&(s=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++o<s&&i===a||(o<l?e.bl_tree[2*i]+=o:0!==i?(i!==c&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,c=i,l=(o=0)===a?(s=138,3):i===a?(s=6,3):(s=7,4))}function N(e,t,n){var r,i,c=-1,a=t[1],o=0,s=7,l=4;for(0===a&&(s=138,l=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++o<s&&i===a)){if(o<l)for(;y(e,i,e.bl_tree),0!=--o;);else 0!==i?(i!==c&&(y(e,i,e.bl_tree),o--),y(e,16,e.bl_tree),T(e,o-3,2)):o<=10?(y(e,17,e.bl_tree),T(e,o-3,3)):(y(e,18,e.bl_tree),T(e,o-11,7));c=i,l=(o=0)===a?(s=138,3):i===a?(s=6,3):(s=7,4)}}i(b);var R=!1;function F(e,t,n,i){T(e,0+(i?1:0),3),function(e,t,n,i){w(e),O(e,n),O(e,~n),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}n._tr_init=function(e){R||(function(){var e,t,n,r,i,s=new Array(16);for(r=n=0;r<28;r++)for(f[r]=n,e=0;e<1<<c[r];e++)h[n++]=r;for(h[n-1]=r,r=i=0;r<16;r++)for(b[r]=i,e=0;e<1<<a[r];e++)u[i++]=r;for(i>>=7;r<30;r++)for(b[r]=i<<7,e=0;e<1<<a[r]-7;e++)u[256+i++]=r;for(t=0;t<=15;t++)s[t]=0;for(e=0;e<=143;)l[2*e+1]=8,e++,s[8]++;for(;e<=255;)l[2*e+1]=9,e++,s[9]++;for(;e<=279;)l[2*e+1]=7,e++,s[7]++;for(;e<=287;)l[2*e+1]=8,e++,s[8]++;for(L(l,287,s),e=0;e<30;e++)d[2*e+1]=5,d[2*e]=E(e,5);p=new v(l,c,257,286,15),m=new v(d,a,0,30,15),g=new v(new Array(0),o,0,19,7)}(),R=!0),e.l_desc=new _(e.dyn_ltree,p),e.d_desc=new _(e.dyn_dtree,m),e.bl_desc=new _(e.bl_tree,g),e.bi_buf=0,e.bi_valid=0,I(e)},n._tr_stored_block=F,n._tr_flush_block=function(e,t,n,r){var i,c,a=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),S(e,e.l_desc),S(e,e.d_desc),a=function(e){var t;for(x(e,e.dyn_ltree,e.l_desc.max_code),x(e,e.dyn_dtree,e.d_desc.max_code),S(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*s[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),(c=e.static_len+3+7>>>3)<=(i=e.opt_len+3+7>>>3)&&(i=c)):i=c=n+5,n+4<=i&&-1!==t?F(e,t,n,r):4===e.strategy||c===i?(T(e,2+(r?1:0),3),P(e,l,d)):(T(e,4+(r?1:0),3),function(e,t,n,r){var i;for(T(e,t-257,5),T(e,n-1,5),T(e,r-4,4),i=0;i<r;i++)T(e,e.bl_tree[2*s[i]+1],3);N(e,e.dyn_ltree,t-1),N(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),P(e,e.dyn_ltree,e.dyn_dtree)),I(e),r&&w(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(h[n]+256+1)]++,e.dyn_dtree[2*C(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){T(e,2,3),y(e,256,l),function(e){16===e.bi_valid?(O(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,n){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var n,r,i,c,a=1,o={},s=!1,l=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,n="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){h(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(c="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",f,!1):e.attachEvent("onmessage",f),function(t){e.postMessage(c+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){h(e.data)},function(e){i.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(r=l.documentElement,function(e){var t=l.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(h,0,e)},d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];return o[a]={callback:e,args:t},n(a),a++},d.clearImmediate=u}function u(e){delete o[e]}function h(e){if(s)setTimeout(h,0,e);else{var t=o[e];if(t){s=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{u(e),s=!1}}}}function f(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(c)&&h(+t.data.slice(c.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)}}]);