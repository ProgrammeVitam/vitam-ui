!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,i)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function i(){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var r=n(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:i):a.value}}).apply(this,arguments)}function n(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}function r(e,t,i){return t=a(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,i||[],a(e).constructor):t.apply(e,i))}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function u(e,t,i){return t&&l(e.prototype,t),i&&l(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{t9wn:function(t,n,c){"use strict";c.r(n),c.d(n,"HierarchyModule",(function(){return He}));var l,s,f,p,d,m=c("2kYt"),v=c("nIj0"),h=c("jdnZ"),S=c("66mq"),O=c("lQ7A"),y=c("OWX3"),I=c("PCNd"),T=c("OZ4H"),g=c("29Wa"),R=c("Cd2c"),E=c("R7+U"),C=c("W1gw"),k=c("EM62"),A=((l=u((function e(){b(this,e)}))).\u0275mod=k.Lb({type:l}),l.\u0275inj=k.Kb({factory:function(e){return new(e||l)},imports:[[m.c,y.xb,I.a,h.c,g.d,R.c,S.b,E.b,C.c,v.v,T.f]]}),l),N=c("Jb3d"),P=c("KZIX"),B=c("Y2X+"),j=((s=u((function e(){b(this,e)}))).\u0275mod=k.Lb({type:s}),s.\u0275inj=k.Kb({factory:function(e){return new(e||s)},imports:[[m.c,I.a,N.b,P.c,B.b,v.v,y.xb]]}),s),M=c("csyo"),H=((f=u((function e(){b(this,e)}))).\u0275mod=k.Lb({type:f}),f.\u0275inj=k.Kb({factory:function(e){return new(e||f)},imports:[[m.c,I.a,M.a,y.xb]]}),f),w=c("sEIs"),L=c("vobO"),x=c("ZTXN"),_=c("8j5Y"),D=((p=function(e){function t(e,i){var n;return b(this,t),(n=r(this,t,[e,"ALL"])).profileApi=e,n.snackBarService=i,n.updated=new x.a,n}return o(t,e),u(t,[{key:"setTenantId",value:function(e){this.headers=new L.f({"X-Tenant-Id":e.toString()})}},{key:"getAllByParams",value:function(e,t){var i=(new L.g).set("criteria",JSON.stringify(e));return this.profileApi.getAllByParams(i,t)}},{key:"get",value:function(e){return this.profileApi.getOneWithEmbedded(e,"ALL",this.headers)}},{key:"exists",value:function(e,t,i,n){var r=[];r.push({key:"name",value:n,operator:y.W.equalsIgnoreCase},{key:"tenantIdentifier",value:e,operator:y.W.equals},{key:"level",value:t,operator:y.W.equals},{key:"applicationName",value:i,operator:y.W.equals});var a=[{key:"criteria",value:JSON.stringify({criteria:r})}];return this.profileApi.checkExistsByParam(a,this.headers)}},{key:"patch",value:function(e){var t=this;return this.profileApi.patch(e,this.headers).pipe(Object(_.a)((function(e){return t.updated.next(e)})),Object(_.a)((function(e){t.snackBarService.open({message:"SHARED.SNACKBAR.PROFILE_UPDATE",translateParams:{param1:e.name}})}),(function(e){t.snackBarService.open({message:e.error.message,translate:!1})})))}},{key:"create",value:function(e){var t=this;return this.profileApi.create(e,this.headers).pipe(Object(_.a)((function(e){t.snackBarService.open({message:"SHARED.SNACKBAR.PROFILE_CREATE_ERROR",translateParams:{param1:e.name}})}),(function(e){t.snackBarService.open({message:e.error.message,translate:!1})})))}}]),t}(y.jb)).\u0275fac=function(e){return new(e||p)(k.bc(y.ab),k.bc(y.Ab))},p.\u0275prov=k.Jb({token:p,factory:p.\u0275fac,providedIn:"root"}),p),F=c("g6G6"),V=c("ROBh"),U=c("mWib"),Y=c("YtkY"),W=c("xVbo"),q=c("TLy2"),K=c("4e/d"),J=c("6WTZ"),G=c("8lHc"),z=c("J+dc"),X=((d=u((function e(t){var i=this;b(this,e),this.rngProfileService=t,this.debounceTime=400,this.nameExists=function(e,t,n,r){return function(a){return Object(G.a)(i.debounceTime).pipe(Object(q.a)((function(){return a.value!==r?i.rngProfileService.exists(e,t,n,a.value):Object(V.a)(!1)})),Object(z.a)(1),Object(Y.a)((function(e){return e?{nameExists:!0}:null})))}}}))).\u0275fac=function(e){return new(e||d)(k.bc(D))},d.\u0275prov=k.Jb({token:d,factory:d.\u0275fac,providedIn:"root"}),d),Q=c("s2Ay");function Z(e,t){1&e&&(k.Tb(0,"span"),k.Oc(1),k.jc(2,"translate"),k.Sb()),2&e&&(k.Bb(1),k.Pc(k.kc(2,1,"HIERARCHY.INFORMATIONS.INACTIVE_SWITCH")))}function $(e,t){1&e&&(k.Tb(0,"span"),k.Oc(1),k.jc(2,"translate"),k.Sb()),2&e&&(k.Bb(1),k.Pc(k.kc(2,1,"HIERARCHY.INFORMATIONS.ACTIVE_SWITCH")))}var ee,te,ie,ne,re=((ne=function(){function e(t,i,n,r){var a=this;b(this,e),this.formBuilder=t,this.hierarchyService=i,this.profileValidators=n,this.authService=r,this.userLevel=this.authService.user.level,this.form=this.formBuilder.group({name:[null,v.x.required],identifier:[{value:null,disabled:!0},v.x.required],description:[null,v.x.required],level:[null,Object(y.Gb)(this.authService.user)],enabled:null}),this.updateSub=Object(F.a)(this.form.valueChanges,this.form.statusChanges).pipe(Object(U.a)(400),Object(Y.a)((function(){return Object(y.Ib)(a.form.value,a.previousValue)})),Object(W.a)((function(e){return!Object(J.c)(e)})),Object(Y.a)((function(e){return Object(J.a)({id:a.profile.id,customerId:a.profile.customerId,tenantIdentifier:a.profile.tenantIdentifier},e)})),Object(q.a)((function(e){return a.hierarchyService.patch(e).pipe(Object(K.a)((function(){return Object(V.a)(null)})))}))).subscribe((function(e){return a.resetForm(a.form,e,a.readOnly)}))}return u(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.updateSub.unsubscribe()}},{key:"ngOnChanges",value:function(e){(e.hasOwnProperty("profile")||e.hasOwnProperty("readOnly"))&&this.profile&&(this.resetForm(this.form,this.profile,this.readOnly),this.previousValue=this.form.value)}},{key:"resetForm",value:function(e,t,i){e.reset(t,{emitEvent:!1}),this.initFormValidators(e,t),this.initFormActivationState(e,t,i),e.updateValueAndValidity({emitEvent:!1})}},{key:"initFormValidators",value:function(e,t){e.get("name").setAsyncValidators(this.profileValidators.nameExists(t.tenantIdentifier,t.level,t.applicationName,t.name))}},{key:"initFormActivationState",value:function(e,t,i){i?e.disable({emitEvent:!1}):(e.enable({emitEvent:!1}),e.get("identifier").disable({emitEvent:!1}),t.groupsCount&&t.groupsCount>0&&(e.get("enabled").disable({emitEvent:!1}),e.get("level").disable({emitEvent:!1})))}}]),e}()).\u0275fac=function(e){return new(e||ne)(k.Nb(v.d),k.Nb(D),k.Nb(X),k.Nb(y.k))},ne.\u0275cmp=k.Hb({type:ne,selectors:[["app-information-tab"]],inputs:{profile:"profile",readOnly:"readOnly"},features:[k.zb],decls:44,vars:49,consts:[[3,"formGroup"],["formControlName","enabled","matTooltipClass","vitamui-tooltip",3,"matTooltip","matTooltipDisabled"],[4,"ngIf"],[1,"row"],[1,"col-12"],["formControlName","identifier","maxlength","12",3,"label","validator","asyncValidator"],[1,"col-8"],["formControlName","name","maxlength","100",3,"label","validator","asyncValidator"],["errorKey","required"],["errorKey","nameExists"],[1,"col-5"],[1,"read-only-field"],["matTooltipClass","vitamui-tooltip",1,"col-5",3,"matTooltip","matTooltipDisabled"],["formControlName","level","maxlength","250",3,"prefix","label","validator"],["formControlName","description","maxlength","250",3,"label","validator"]],template:function(e,t){if(1&e&&(k.Tb(0,"form",0),k.Tb(1,"vitamui-common-slide-toggle",1),k.jc(2,"translate"),k.Mc(3,Z,3,3,"span",2),k.Mc(4,$,3,3,"span",2),k.Sb(),k.Tb(5,"div",3),k.Tb(6,"div",4),k.Ob(7,"vitamui-common-editable-input",5),k.jc(8,"translate"),k.Sb(),k.Sb(),k.Tb(9,"div",3),k.Tb(10,"div",6),k.Tb(11,"vitamui-common-editable-input",7),k.jc(12,"translate"),k.Tb(13,"vitamui-common-field-error",8),k.Oc(14),k.jc(15,"translate"),k.Sb(),k.Tb(16,"vitamui-common-field-error",9),k.Oc(17),k.jc(18,"translate"),k.Sb(),k.Sb(),k.Sb(),k.Sb(),k.Tb(19,"div",3),k.Tb(20,"div",10),k.Tb(21,"div",11),k.Tb(22,"label"),k.Oc(23),k.jc(24,"translate"),k.Sb(),k.Tb(25,"div"),k.Oc(26),k.Sb(),k.Sb(),k.Sb(),k.Tb(27,"div",12),k.jc(28,"translate"),k.Tb(29,"vitamui-common-editable-level-input",13),k.jc(30,"translate"),k.Tb(31,"vitamui-common-field-error",8),k.Oc(32),k.jc(33,"translate"),k.Sb(),k.Tb(34,"vitamui-common-field-error",9),k.Oc(35),k.jc(36,"translate"),k.Sb(),k.Sb(),k.Sb(),k.Sb(),k.Tb(37,"div",3),k.Tb(38,"div",4),k.Tb(39,"vitamui-common-editable-textarea",14),k.jc(40,"translate"),k.Tb(41,"vitamui-common-field-error",8),k.Oc(42),k.jc(43,"translate"),k.Sb(),k.Sb(),k.Sb(),k.Sb(),k.Sb()),2&e){var i=null,n=null,r=null,a=null,o=null,c=null;k.oc("formGroup",t.form),k.Bb(1),k.oc("matTooltip",k.kc(2,25,"HIERARCHY.INFORMATIONS.ACTIVE_SWITCH_TOOLTIP"))("matTooltipDisabled",0==(null==t.profile?null:t.profile.groupsCount)),k.Bb(2),k.oc("ngIf",!(null!=t.form&&t.form.get("enabled").value)),k.Bb(1),k.oc("ngIf",null==t.form?null:t.form.get("enabled").value),k.Bb(3),k.oc("label",k.kc(8,27,"COMMON.ID"))("validator",null==t.form||null==(i=t.form.get("identifier"))?null:i.validator)("asyncValidator",null==t.form||null==(n=t.form.get("identifier"))?null:n.asyncValidator),k.Bb(4),k.oc("label",k.kc(12,29,"HIERARCHY.INFORMATIONS.NAME"))("validator",null==t.form||null==(r=t.form.get("name"))?null:r.validator)("asyncValidator",null==t.form||null==(a=t.form.get("name"))?null:a.asyncValidator),k.Bb(3),k.Pc(k.kc(15,31,"COMMON.ERROR.REQUIRED")),k.Bb(3),k.Pc(k.kc(18,33,"HIERARCHY.INFORMATIONS.EXISTING_NAME")),k.Bb(6),k.Pc(k.kc(24,35,"HIERARCHY.INFORMATIONS.LEVEL")),k.Bb(3),k.Pc(t.userLevel),k.Bb(1),k.oc("matTooltip",k.kc(28,37,"HIERARCHY.INFORMATIONS.SUBLEVEL_TOOLTIP"))("matTooltipDisabled",0==(null==t.profile?null:t.profile.groupsCount)),k.Bb(2),k.oc("prefix",t.userLevel)("label",k.kc(30,39,"HIERARCHY.INFORMATIONS.SUBLEVEL"))("validator",null==t.form||null==(o=t.form.get("level"))?null:o.validator),k.Bb(3),k.Pc(k.kc(33,41,"COMMON.ERROR.REQUIRED")),k.Bb(3),k.Pc(k.kc(36,43,"HIERARCHY.INFORMATIONS.WRONG_FORMAT")),k.Bb(4),k.oc("label",k.kc(40,45,"HIERARCHY.INFORMATIONS.DESCRIPTION"))("validator",null==t.form||null==(c=t.form.get("description"))?null:c.validator),k.Bb(3),k.Pc(k.kc(43,47,"COMMON.ERROR.REQUIRED"))}},directives:[v.y,v.r,v.i,y.ac,v.q,v.g,B.a,m.p,y.F,v.l,y.zb,y.G,y.J],pipes:[Q.d],styles:[""]}),ne),ae=((ie=function(){function e(t,i,n){b(this,e),this.hierarchyService=t,this.authService=i,this.startupService=n,this.previewClose=new k.n}return u(e,[{key:"id",set:function(e){var t=this;this.hierarchyService.get(e).subscribe((function(e){return t.profile=e}))}},{key:"ngOnInit",value:function(){var e=this;this.profileUpdateSub=this.hierarchyService.updated.subscribe((function(t){t&&(e.profile=t)}))}},{key:"ngOnDestroy",value:function(){this.profileUpdateSub.unsubscribe()}},{key:"openPopup",value:function(){window.open(this.startupService.getConfigStringValue("UI_URL")+"/profile-hierarchy/"+this.profile.id,"detailPopup","width=584, height=713, resizable=no, location=no"),this.emitClose()}},{key:"emitClose",value:function(){this.previewClose.emit()}},{key:"levelNotAllowed",value:function(){if(this.profile)return!Object(y.Kb)(this.authService.user,this.profile.level)}},{key:"filterEvents",value:function(e){return e.outDetail&&(e.outDetail.includes("EXT_VITAMUI_CREATE_PROFILE")||e.outDetail.includes("EXT_VITAMUI_UPDATE_PROFILE"))}}]),e}()).\u0275fac=function(e){return new(e||ie)(k.Nb(D),k.Nb(y.k),k.Nb(y.lb))},ie.\u0275cmp=k.Hb({type:ie,selectors:[["app-hierarchy-detail"]],inputs:{id:"id",profile:"profile",isPopup:"isPopup"},outputs:{previewClose:"previewClose"},decls:9,vars:15,consts:[[3,"title","subtitle","icon","badge","onclose"],[1,"vitamui-sidepanel-body"],[1,"preview-tab-group"],[3,"label"],[3,"profile","readOnly"],["collectionName","profiles",3,"id","identifier","filter"]],template:function(e,t){1&e&&(k.Tb(0,"vitamui-common-sidenav-header",0),k.ec("onclose",(function(){return t.emitClose()})),k.Sb(),k.Tb(1,"div",1),k.Tb(2,"mat-tab-group",2),k.Tb(3,"mat-tab",3),k.jc(4,"translate"),k.Ob(5,"app-information-tab",4),k.Sb(),k.Tb(6,"mat-tab",3),k.jc(7,"translate"),k.Ob(8,"vitamui-common-operation-history-tab",5),k.Sb(),k.Sb(),k.Sb()),2&e&&(k.oc("title",null==t.profile?null:t.profile.name)("subtitle","("+(null==t.profile?null:t.profile.identifier)+")")("icon","vitamui-icon-admin-key")("badge",null!=t.profile&&t.profile.enabled?"green":"grey"),k.Bb(3),k.oc("label",k.kc(4,11,"HIERARCHY.TAB.INFORMATIONS")),k.Bb(2),k.oc("profile",t.profile)("readOnly",t.isPopup||(null==t.profile?null:t.profile.readonly)||t.levelNotAllowed()),k.Bb(1),k.oc("label",k.kc(7,13,"HIERARCHY.TAB.HISTORY")),k.Bb(2),k.oc("id",null==t.profile?null:t.profile.id)("identifier",null==t.profile?null:t.profile.identifier)("filter",t.filterEvents))},directives:[y.mc,P.b,P.a,re,y.Xb],pipes:[Q.d],styles:[""]}),ie),oe=((te=function(){function e(t){b(this,e),this.route=t,this.profile=this.route.snapshot.data.profile}return u(e,[{key:"ngOnInit",value:function(){}},{key:"closePopup",value:function(){window.close()}}]),e}()).\u0275fac=function(e){return new(e||te)(k.Nb(w.a))},te.\u0275cmp=k.Hb({type:te,selectors:[["app-hierarchy-popup"]],decls:1,vars:2,consts:[[3,"profile","isPopup","previewClose"]],template:function(e,t){1&e&&(k.Tb(0,"app-hierarchy-detail",0),k.ec("previewClose",(function(){return t.closePopup()})),k.Sb()),2&e&&k.oc("profile",t.profile)("isPopup",!0)},directives:[ae],encapsulation:2}),te),ce=((ee=function(){function e(t,i){b(this,e),this.hierarchyService=t,this.router=i}return u(e,[{key:"resolve",value:function(e){var t=this,i=e.paramMap.get("id");return this.hierarchyService.get(i).pipe(Object(z.a)(1),Object(Y.a)((function(e){return e||(t.router.navigate(["/"]),null)})))}}]),e}()).\u0275fac=function(e){return new(e||ee)(k.bc(D),k.bc(w.d))},ee.\u0275prov=k.Jb({token:ee,factory:ee.\u0275fac,providedIn:"root"}),ee),le=c("P4Xx"),ue=c("nrt1");function se(e,t){1&e&&(k.Tb(0,"span"),k.Oc(1),k.jc(2,"translate"),k.Sb()),2&e&&(k.Bb(1),k.Pc(k.kc(2,1,"HIERARCHY.INFORMATIONS.INACTIVE_SWITCH")))}function be(e,t){1&e&&(k.Tb(0,"span"),k.Oc(1),k.jc(2,"translate"),k.Sb()),2&e&&(k.Bb(1),k.Pc(k.kc(2,1,"HIERARCHY.INFORMATIONS.ACTIVE_SWITCH")))}function fe(e,t){1&e&&(k.Tb(0,"vitamui-common-input-error"),k.Oc(1),k.jc(2,"translate"),k.Sb()),2&e&&(k.Bb(1),k.Qc(" ",k.kc(2,1,"COMMON.ERROR.REQUIRED")," "))}function pe(e,t){1&e&&(k.Tb(0,"vitamui-common-input-error"),k.Oc(1),k.jc(2,"translate"),k.Sb()),2&e&&(k.Bb(1),k.Qc(" ",k.kc(2,1,"HIERARCHY.INFORMATIONS.MODAL.WRONG_FORMAT")," "))}var de,me=function(){return["USERS_APP","ARCHIVE_APP"]},ve=((de=function(){function e(t,i,n,r,a,o){b(this,e),this.dialogRef=t,this.data=i,this.authService=n,this.formBuilder=r,this.hierarchyService=a,this.confirmDialogService=o,this.stepIndex=0}return u(e,[{key:"ngOnInit",value:function(){var e=this;this.form=this.formBuilder.group({enabled:[!0],level:["",Object(y.Gb)(this.authService.user)],profileIds:[null,v.x.required],customerId:[this.authService.user.customerId]}),this.keyPressSubscription=this.confirmDialogService.listenToEscapeKeyPress(this.dialogRef).subscribe((function(){return e.onCancel()}))}},{key:"ngOnDestroy",value:function(){this.keyPressSubscription.unsubscribe()}},{key:"onCancel",value:function(){this.form.dirty?this.confirmDialogService.confirmBeforeClosing(this.dialogRef):this.dialogRef.close()}},{key:"onSubmit",value:function(){var e=this;if(!this.form.invalid){var t=this.form.getRawValue(),i=[];this.hierarchyService.getAllByParams({criteria:[{key:"id",value:t.profileIds,operator:y.W.in}]}).subscribe((function(n){n.forEach((function(n){n.id=null,n.identifier=null,n.level=t.level,n.enabled=t.enabled,n.readonly=!1,i.push(e.hierarchyService.create(n))})),Object(le.a)(i).subscribe((function(){return e.dialogRef.close(!0)}),(function(){return e.dialogRef.close()}))}))}}},{key:"formValid",value:function(){return this.form.pending||this.form.invalid}}]),e}()).\u0275fac=function(e){return new(e||de)(k.Nb(T.g),k.Nb(T.a),k.Nb(y.k),k.Nb(v.d),k.Nb(D),k.Nb(y.t))},de.\u0275cmp=k.Hb({type:de,selectors:[["app-hierarchy-create"]],decls:33,vars:28,consts:[[1,"header"],[3,"index","count"],[3,"formGroup","ngSubmit"],[1,"content"],[1,"text","large","bold"],[1,"d-flex","justify-content-between"],[1,"mt-2"],["formControlName","enabled"],[4,"ngIf"],[1,"d-flex"],[1,"mr-4","mt-2"],[1,"text","normal","light"],[1,"text","medium","bold"],["formControlName","level",3,"prefix"],[1,"text","medium","bold","mb-3"],["formControlName","profileIds","showLevel","true",3,"tenantIdentifier","applicationNameExclude"],[1,"actions"],["type","submit",1,"btn","primary",3,"disabled"],["type","button",1,"btn","cancel","link",3,"click"]],template:function(e,t){if(1&e&&(k.Tb(0,"div",0),k.Ob(1,"vitamui-common-progress-bar",1),k.Sb(),k.Tb(2,"form",2),k.ec("ngSubmit",(function(){return t.onSubmit()})),k.Tb(3,"div",3),k.Tb(4,"div",4),k.Oc(5),k.jc(6,"translate"),k.Sb(),k.Tb(7,"div",5),k.Tb(8,"div",6),k.Tb(9,"vitamui-common-slide-toggle",7),k.Mc(10,se,3,3,"span",8),k.Mc(11,be,3,3,"span",8),k.Sb(),k.Sb(),k.Tb(12,"div",9),k.Tb(13,"div",10),k.Tb(14,"div",11),k.Oc(15),k.jc(16,"translate"),k.Sb(),k.Tb(17,"div",12),k.Oc(18),k.Sb(),k.Sb(),k.Tb(19,"vitamui-common-level-input",13),k.Mc(20,fe,3,3,"vitamui-common-input-error",8),k.Mc(21,pe,3,3,"vitamui-common-input-error",8),k.Sb(),k.Sb(),k.Sb(),k.Tb(22,"div",14),k.Oc(23),k.jc(24,"translate"),k.Sb(),k.Ob(25,"app-profiles-form",15),k.Tb(26,"div",16),k.Tb(27,"button",17),k.Oc(28),k.jc(29,"translate"),k.Sb(),k.Tb(30,"button",18),k.ec("click",(function(){return t.onCancel()})),k.Oc(31),k.jc(32,"translate"),k.Sb(),k.Sb(),k.Sb(),k.Sb()),2&e){var i=null,n=null;k.Bb(1),k.oc("index",t.stepIndex)("count",1),k.Bb(1),k.oc("formGroup",t.form),k.Bb(3),k.Pc(k.kc(6,17,"HIERARCHY.INFORMATIONS.MODAL.TITLE")),k.Bb(5),k.oc("ngIf",!(null!=t.form&&t.form.get("enabled").value)),k.Bb(1),k.oc("ngIf",null==t.form?null:t.form.get("enabled").value),k.Bb(4),k.Pc(k.kc(16,19,"HIERARCHY.INFORMATIONS.LEVEL")),k.Bb(3),k.Pc(t.authService.user.level),k.Bb(1),k.oc("prefix",t.authService.user.level),k.Bb(1),k.oc("ngIf",(null==t.form||null==(i=t.form.get("level"))?null:i.touched)&&(null==t.form||null==(i=t.form.get("level"))?null:i.hasError("required"))),k.Bb(1),k.oc("ngIf",(null==t.form||null==(n=t.form.get("level"))?null:n.touched)&&(null==t.form||null==(n=t.form.get("level"))?null:n.hasError("pattern"))),k.Bb(2),k.Pc(k.kc(24,21,"HIERARCHY.INFORMATIONS.MODAL.DUPLICATE_PROFILE")),k.Bb(2),k.oc("tenantIdentifier",t.data.tenantId)("applicationNameExclude",k.sc(27,me)),k.Bb(2),k.oc("disabled",t.formValid()),k.Bb(1),k.Pc(k.kc(29,23,"COMMON.SUBMIT")),k.Bb(3),k.Pc(k.kc(32,25,"COMMON.UNDO"))}},directives:[y.dc,v.y,v.r,v.i,y.ac,v.q,v.g,m.p,y.R,ue.a,y.Rb],pipes:[Q.d],styles:[""],data:{animation:[y.Hb,y.Ob]}}),de),he=c("Ohay"),Se=c("O4oY");function Oe(e,t){if(1&e){var i=k.Ub();k.Tb(0,"div",13),k.ec("click",(function(){k.Dc(i);var e=t.$implicit;return k.ic().profileClick.emit(e)})),k.Tb(1,"div",14),k.Tb(2,"div",3),k.Ob(3,"i",15),k.Sb(),k.Tb(4,"div",16),k.Oc(5),k.Sb(),k.Tb(6,"div",17),k.Oc(7),k.jc(8,"translate"),k.Sb(),k.Tb(9,"div",16),k.Oc(10),k.jc(11,"truncate"),k.Sb(),k.Tb(12,"div",18),k.Oc(13),k.Sb(),k.Tb(14,"div",18),k.Oc(15),k.Sb(),k.Tb(16,"div",18),k.Oc(17),k.Sb(),k.Sb(),k.Sb()}if(2&e){var n=t.$implicit;k.Bb(3),k.Jc("font-size",30,"px"),k.oc("ngClass",null!=n&&n.enabled?"status-badge-green":"status-badge-grey"),k.Bb(2),k.Pc(n.name),k.Bb(2),k.Pc(k.kc(8,9,"APPLICATION."+n.applicationName+".NAME")),k.Bb(3),k.Pc(k.lc(11,11,n.description,50)),k.Bb(3),k.Pc(n.level),k.Bb(2),k.Pc(n.identifier),k.Bb(2),k.Pc(n.usersCount)}}function ye(e,t){1&e&&k.Ob(0,"div")}function Ie(e,t){1&e&&k.Ob(0,"div")}function Te(e,t){1&e&&k.Ob(0,"div")}function ge(e,t){1&e&&(k.Tb(0,"div",19),k.Oc(1),k.jc(2,"translate"),k.Sb()),2&e&&(k.Bb(1),k.Pc(k.kc(2,1,"COMMON.NO_RESULT")))}function Re(e,t){if(1&e){var i=k.Ub();k.Tb(0,"div",20),k.ec("click",(function(){return k.Dc(i),k.ic().hierarchyService.loadMore()})),k.Tb(1,"span",21),k.Oc(2),k.jc(3,"translate"),k.Sb(),k.Sb()}2&e&&(k.Bb(2),k.Pc(k.kc(3,1,"COMMON.SHOW_MORE_RESULTS")))}function Ee(e,t){1&e&&(k.Tb(0,"div",22),k.Ob(1,"mat-spinner",23),k.Sb())}var Ce,ke=((Ce=function(t){function n(e,t){var i;return b(this,n),(i=r(this,n,[e])).hierarchyService=e,i.route=t,i.profileClick=new k.n,i.filterChange=new x.a,i.searchChange=new x.a,i.orderChange=new x.a,i.searchKeys=["name","description","identifier"],i.updatedProfileSub=i.hierarchyService.updated.subscribe((function(e){var t=i.dataSource.findIndex((function(t){return e.id===t.id}));t>-1&&(i.dataSource[t]={id:i.dataSource[t].id,enabled:e.enabled,name:e.name,level:e.level,customerId:i.dataSource[t].customerId,groupsCount:i.dataSource[t].groupsCount,description:e.description,usersCount:i.dataSource[t].usersCount,tenantName:i.dataSource[t].tenantName,tenantIdentifier:i.dataSource[t].tenantIdentifier,applicationName:i.dataSource[t].applicationName,roles:i.dataSource[t].roles,readonly:i.dataSource[t].readonly,externalParamId:i.dataSource[t].externalParamId})})),i}return o(n,t),u(n,[{key:"searchText",set:function(e){this._searchText=e,this.searchChange.next(e)}},{key:"ngOnInit",value:function(){var e=this,t=this.route.paramMap.pipe(Object(W.a)((function(e){return!!e.get("tenantIdentifier")})),Object(Y.a)((function(e){return+e.get("tenantIdentifier")})),Object(he.a)(),Object(_.a)((function(t){e.tenantIdentifier=t,e.hierarchyService.setTenantId(t)})));Object(F.a)(t,this.searchChange,this.filterChange,this.orderChange).pipe(Object(U.a)(400)).subscribe((function(){return e.search()}))}},{key:"ngOnDestroy",value:function(){this.updatedProfileSub.unsubscribe()}},{key:"search",value:function(){var t={criteria:[{key:"applicationName",value:[y.h.USERS_APP],operator:y.W.notin},{key:"externalParamId",value:null,operator:y.W.equals},{key:"tenantIdentifier",value:this.tenantIdentifier,operator:y.W.equals}].concat(e(Object(y.Fb)(this._searchText,this.searchKeys)))};i(a(n.prototype),"search",this).call(this,new y.Z(0,Se.b,"name",y.x.ASCENDANT,JSON.stringify(t)))}}]),n}(y.O)).\u0275fac=function(e){return new(e||Ce)(k.Nb(D),k.Nb(w.a))},Ce.\u0275cmp=k.Hb({type:Ce,selectors:[["app-hierarchy-list"]],inputs:{searchText:["search","searchText"]},outputs:{profileClick:"profileClick"},features:[k.yb],decls:34,vars:27,consts:[["vitamuiCommonInfiniteScroll","",3,"vitamuiScroll"],[1,"vitamui-table"],[1,"vitamui-table-head"],[1,"col-1"],[1,"vitamui-icon","vitamui-icon-admin-key"],[1,"col-3"],[1,"col-2"],[1,"vitamui-table-body"],["class","vitamui-table-rows",3,"click",4,"ngFor","ngForOf"],[4,"ngIf","ngIfThen"],["noResults",""],["loadMore",""],["loadingSpinner",""],[1,"vitamui-table-rows",3,"click"],[1,"vitamui-row","d-flex","align-items-center","clickable"],[1,"vitamui-icon","vitamui-icon-admin-key",3,"ngClass"],["vitamuiCommonEllipsis","",1,"col-3"],["vitamuiCommonEllipsis","",1,"col-2"],["vitamuiCommonEllipsis","",1,"col-1"],[1,"vitamui-min-content","vitamui-table-message"],[1,"vitamui-min-content","vitamui-table-message",3,"click"],[1,"clickable"],[1,"vitamui-min-content"],[1,"vitamui-spinner","medium"]],template:function(e,t){if(1&e&&(k.Tb(0,"div",0),k.ec("vitamuiScroll",(function(){return t.onScroll()})),k.Tb(1,"div",1),k.Tb(2,"div",2),k.Tb(3,"div",3),k.Ob(4,"i",4),k.Sb(),k.Tb(5,"div",5),k.Oc(6),k.jc(7,"translate"),k.Sb(),k.Tb(8,"div",6),k.Oc(9),k.jc(10,"translate"),k.Sb(),k.Tb(11,"div",5),k.Oc(12),k.jc(13,"translate"),k.Sb(),k.Tb(14,"div",3),k.Oc(15),k.jc(16,"translate"),k.Sb(),k.Tb(17,"div",3),k.Oc(18),k.jc(19,"translate"),k.Sb(),k.Tb(20,"div",3),k.Oc(21),k.jc(22,"translate"),k.Sb(),k.Sb(),k.Tb(23,"div",7),k.Mc(24,Oe,18,14,"div",8),k.Sb(),k.Sb(),k.Mc(25,ye,1,0,"div",9),k.Mc(26,Ie,1,0,"div",9),k.Mc(27,Te,1,0,"div",9),k.Sb(),k.Mc(28,ge,3,3,"ng-template",null,10,k.Nc),k.Mc(30,Re,4,3,"ng-template",null,11,k.Nc),k.Mc(32,Ee,2,0,"ng-template",null,12,k.Nc)),2&e){var i=k.zc(29),n=k.zc(31),r=k.zc(33);k.Bb(4),k.Jc("font-size",30,"px"),k.Bb(2),k.Pc(k.kc(7,15,"HIERARCHY.HOME.RESULTS_TABLE.NAME")),k.Bb(3),k.Pc(k.kc(10,17,"HIERARCHY.HOME.RESULTS_TABLE.APP")),k.Bb(3),k.Pc(k.kc(13,19,"HIERARCHY.HOME.RESULTS_TABLE.DESCRIPTION")),k.Bb(3),k.Pc(k.kc(16,21,"HIERARCHY.HOME.RESULTS_TABLE.LEVEL")),k.Bb(3),k.Pc(k.kc(19,23,"COMMON.ID")),k.Bb(3),k.Pc(k.kc(22,25,"HIERARCHY.HOME.RESULTS_TABLE.USERS_NUMBER")),k.Bb(3),k.oc("ngForOf",t.dataSource),k.Bb(1),k.oc("ngIf",!t.dataSource||t.pending)("ngIfThen",r),k.Bb(1),k.oc("ngIf",!t.pending&&0===(null==t.dataSource?null:t.dataSource.length))("ngIfThen",i),k.Bb(1),k.oc("ngIf",t.infiniteScrollDisabled&&t.hierarchyService.canLoadMore&&!t.pending)("ngIfThen",n)}},directives:[y.N,m.o,m.p,m.n,y.Zb,M.b],pipes:[Q.d,y.qc],styles:[""]}),Ce);function Ae(e,t){if(1&e){var i=k.Ub();k.Tb(0,"app-hierarchy-detail",9),k.ec("previewClose",(function(){return k.Dc(i),k.ic().closePanel()})),k.Sb()}if(2&e){var n=k.ic();k.oc("id",null==n.openedItem?null:n.openedItem.id)}}var Ne,Pe,Be,je=[{path:"",redirectTo:"tenant",pathMatch:"full"},{path:"tenant",component:y.Bb,canActivate:[y.tb],pathMatch:"full"},{path:"tenant/:tenantIdentifier",component:(Ne=function(e){function t(e,i,n){var a;return b(this,t),(a=r(this,t,[i,n])).dialog=e,a.route=i,a.globalEventService=n,a}return o(t,e),u(t,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.subscribe((function(t){e.tenantIdentifier=+t.get("tenantIdentifier")}))}},{key:"openHierarchyDuplicateDialog",value:function(){var e=this;this.dialog.open(ve,{panelClass:"vitamui-modal",disableClose:!0,data:{tenantId:this.tenantIdentifier}}).afterClosed().subscribe((function(t){t&&e.refreshList()}))}},{key:"onSearchSubmit",value:function(e){this.search=e}},{key:"refreshList",value:function(){this.hierarchyListComponent&&this.hierarchyListComponent.search()}}]),t}(y.kb),Ne.\u0275fac=function(e){return new(e||Ne)(k.Nb(T.b),k.Nb(w.a),k.Nb(y.M))},Ne.\u0275cmp=k.Hb({type:Ne,selectors:[["app-hierarchy"]],viewQuery:function(e,t){var i;1&e&&k.Ic(ke,!0),2&e&&k.yc(i=k.fc())&&(t.hierarchyListComponent=i.first)},features:[k.yb],decls:17,vars:14,consts:[[3,"autosize","hasBackdrop"],["mode","side","position","end",3,"fixedInViewport"],["panel",""],[3,"id","previewClose",4,"ngIf"],[1,"vitamui-heading"],[3,"searchbarPlaceholder","search"],[1,"btn","primary","ml-5",3,"click"],[1,"vitamui-content"],[3,"search","profileClick"],[3,"id","previewClose"]],template:function(e,t){1&e&&(k.Tb(0,"mat-sidenav-container",0),k.Tb(1,"mat-sidenav",1,2),k.Mc(3,Ae,1,1,"app-hierarchy-detail",3),k.Sb(),k.Tb(4,"mat-sidenav-content"),k.Tb(5,"div",4),k.Tb(6,"vitamui-common-title-breadcrumb"),k.Oc(7),k.jc(8,"translate"),k.Sb(),k.Tb(9,"vitamui-common-banner",5),k.ec("search",(function(e){return t.onSearchSubmit(e)})),k.jc(10,"translate"),k.Tb(11,"button",6),k.ec("click",(function(){return t.openHierarchyDuplicateDialog()})),k.Tb(12,"span"),k.Oc(13),k.jc(14,"translate"),k.Sb(),k.Sb(),k.Sb(),k.Sb(),k.Tb(15,"div",7),k.Tb(16,"app-hierarchy-list",8),k.ec("profileClick",(function(e){return t.openPanel(e)})),k.Sb(),k.Sb(),k.Sb(),k.Sb()),2&e&&(k.oc("autosize",!0)("hasBackdrop",!1),k.Bb(1),k.oc("fixedInViewport",!0),k.Bb(2),k.oc("ngIf",t.openedItem),k.Bb(4),k.Qc(" ",k.kc(8,8,"APPLICATION.HIERARCHY_PROFILE_APP.NAME")," "),k.Bb(2),k.oc("searchbarPlaceholder",k.kc(10,10,"HIERARCHY.HOME.TITLE_PLACEHOLDER")),k.Bb(4),k.Pc(k.kc(14,12,"HIERARCHY.HOME.ACTION_BUTTON")),k.Bb(3),k.oc("search",t.search))},directives:[O.b,O.a,m.p,O.c,y.cc,y.jc,ke,ae],pipes:[Q.d],styles:[""]}),Ne),canActivate:[y.c]},{path:":id",component:oe,resolve:{profile:ce},data:{isPopup:!0,appId:"HIERARCHY_PROFILE_APP"}}],Me=((Be=u((function e(){b(this,e)}))).\u0275mod=k.Lb({type:Be}),Be.\u0275inj=k.Kb({factory:function(e){return new(e||Be)},imports:[[m.c,w.g.forChild(je)],w.g]}),Be),He=((Pe=u((function e(){b(this,e)}))).\u0275mod=k.Lb({type:Pe}),Pe.\u0275inj=k.Kb({factory:function(e){return new(e||Pe)},imports:[[m.c,y.xb,I.a,H,j,A,h.c,S.b,v.v,O.d,Me]]}),Pe)}}])}();