(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{d7gL:function(e,t,i){"use strict";i.r(t),i.d(t,"CustomerModule",(function(){return sr}));var o=i("2kYt"),n=i("OZ4H"),r=i("Jb3d"),a=i("lQ7A"),c=i("OWX3"),s=i("PCNd"),l=i("nIj0"),u=i("jdnZ"),d=i("29Wa"),b=i("Cd2c"),m=i("R7+U"),p=i("W1gw"),h=i("66mq"),g=i("csyo"),f=i("KZIX"),v=i("Y2X+"),O=i("sEIs"),S=i("2J8+"),T=i("EM62");const C=["dialogPopup"],M=["hueSlider"],A=["alphaSlider"];function E(e,t){if(1&e&&T.Ob(0,"div"),2&e){const e=T.ic();T.Eb("arrow arrow-",e.cpUsePosition,""),T.Jc("top",e.arrowTop,"px")}}function R(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",26),T.ec("newValue",(function(t){return T.Dc(e),T.ic().onColorChange(t)}))("dragStart",(function(){return T.Dc(e),T.ic().onDragStart("saturation-lightness")}))("dragEnd",(function(){return T.Dc(e),T.ic().onDragEnd("saturation-lightness")})),T.Ob(1,"div",13),T.Sb()}if(2&e){const e=T.ic();T.Jc("background-color",e.hueSliderColor),T.oc("rgX",1)("rgY",1),T.Bb(1),T.Jc("top",null==e.slider?null:e.slider.v,"px")("left",null==e.slider?null:e.slider.s,"px")}}function I(e,t){if(1&e){const e=T.Ub();T.Tb(0,"button",27),T.ec("click",(function(t){T.Dc(e);const i=T.ic();return i.onAddPresetColor(t,i.selectedColor)})),T.Oc(1),T.Sb()}if(2&e){const e=T.ic();T.Db(e.cpAddColorButtonClass),T.oc("disabled",e.cpPresetColors&&e.cpPresetColors.length>=e.cpMaxPresetColorsLength),T.Bb(1),T.Qc(" ",e.cpAddColorButtonText," ")}}function y(e,t){1&e&&T.Ob(0,"div",28)}function k(e,t){if(1&e){const e=T.Ub();T.Tb(0,"input",34),T.ec("keyup.enter",(function(t){return T.Dc(e),T.ic(2).onAcceptColor(t)}))("newValue",(function(t){return T.Dc(e),T.ic(2).onAlphaInput(t)})),T.Sb()}if(2&e){const e=T.ic(2);T.oc("rg",1)("value",null==e.cmykText?null:e.cmykText.a)}}function B(e,t){1&e&&(T.Tb(0,"div"),T.Oc(1,"A"),T.Sb())}function N(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",29),T.Tb(1,"div",30),T.Tb(2,"input",31),T.ec("keyup.enter",(function(t){return T.Dc(e),T.ic().onAcceptColor(t)}))("newValue",(function(t){return T.Dc(e),T.ic().onCyanInput(t)})),T.Sb(),T.Tb(3,"input",31),T.ec("keyup.enter",(function(t){return T.Dc(e),T.ic().onAcceptColor(t)}))("newValue",(function(t){return T.Dc(e),T.ic().onMagentaInput(t)})),T.Sb(),T.Tb(4,"input",31),T.ec("keyup.enter",(function(t){return T.Dc(e),T.ic().onAcceptColor(t)}))("newValue",(function(t){return T.Dc(e),T.ic().onYellowInput(t)})),T.Sb(),T.Tb(5,"input",31),T.ec("keyup.enter",(function(t){return T.Dc(e),T.ic().onAcceptColor(t)}))("newValue",(function(t){return T.Dc(e),T.ic().onBlackInput(t)})),T.Sb(),T.Mc(6,k,1,2,"input",32),T.Sb(),T.Tb(7,"div",30),T.Tb(8,"div"),T.Oc(9,"C"),T.Sb(),T.Tb(10,"div"),T.Oc(11,"M"),T.Sb(),T.Tb(12,"div"),T.Oc(13,"Y"),T.Sb(),T.Tb(14,"div"),T.Oc(15,"K"),T.Sb(),T.Mc(16,B,2,0,"div",33),T.Sb(),T.Sb()}if(2&e){const e=T.ic();T.Jc("display",3!==e.format?"none":"block"),T.Bb(2),T.oc("rg",100)("value",null==e.cmykText?null:e.cmykText.c),T.Bb(1),T.oc("rg",100)("value",null==e.cmykText?null:e.cmykText.m),T.Bb(1),T.oc("rg",100)("value",null==e.cmykText?null:e.cmykText.y),T.Bb(1),T.oc("rg",100)("value",null==e.cmykText?null:e.cmykText.k),T.Bb(1),T.oc("ngIf","disabled"!==e.cpAlphaChannel),T.Bb(10),T.oc("ngIf","disabled"!==e.cpAlphaChannel)}}function w(e,t){if(1&e){const e=T.Ub();T.Tb(0,"input",34),T.ec("keyup.enter",(function(t){return T.Dc(e),T.ic(2).onAcceptColor(t)}))("newValue",(function(t){return T.Dc(e),T.ic(2).onAlphaInput(t)})),T.Sb()}if(2&e){const e=T.ic(2);T.oc("rg",1)("value",null==e.hslaText?null:e.hslaText.a)}}function x(e,t){1&e&&(T.Tb(0,"div"),T.Oc(1,"A"),T.Sb())}function P(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",35),T.Tb(1,"div",30),T.Tb(2,"input",36),T.ec("keyup.enter",(function(t){return T.Dc(e),T.ic().onAcceptColor(t)}))("newValue",(function(t){return T.Dc(e),T.ic().onHueInput(t)})),T.Sb(),T.Tb(3,"input",31),T.ec("keyup.enter",(function(t){return T.Dc(e),T.ic().onAcceptColor(t)}))("newValue",(function(t){return T.Dc(e),T.ic().onSaturationInput(t)})),T.Sb(),T.Tb(4,"input",31),T.ec("keyup.enter",(function(t){return T.Dc(e),T.ic().onAcceptColor(t)}))("newValue",(function(t){return T.Dc(e),T.ic().onLightnessInput(t)})),T.Sb(),T.Mc(5,w,1,2,"input",32),T.Sb(),T.Tb(6,"div",30),T.Tb(7,"div"),T.Oc(8,"H"),T.Sb(),T.Tb(9,"div"),T.Oc(10,"S"),T.Sb(),T.Tb(11,"div"),T.Oc(12,"L"),T.Sb(),T.Mc(13,x,2,0,"div",33),T.Sb(),T.Sb()}if(2&e){const e=T.ic();T.Jc("display",2!==e.format?"none":"block"),T.Bb(2),T.oc("rg",360)("value",null==e.hslaText?null:e.hslaText.h),T.Bb(1),T.oc("rg",100)("value",null==e.hslaText?null:e.hslaText.s),T.Bb(1),T.oc("rg",100)("value",null==e.hslaText?null:e.hslaText.l),T.Bb(1),T.oc("ngIf","disabled"!==e.cpAlphaChannel),T.Bb(8),T.oc("ngIf","disabled"!==e.cpAlphaChannel)}}function D(e,t){if(1&e){const e=T.Ub();T.Tb(0,"input",34),T.ec("keyup.enter",(function(t){return T.Dc(e),T.ic(2).onAcceptColor(t)}))("newValue",(function(t){return T.Dc(e),T.ic(2).onAlphaInput(t)})),T.Sb()}if(2&e){const e=T.ic(2);T.oc("rg",1)("value",null==e.rgbaText?null:e.rgbaText.a)}}function U(e,t){1&e&&(T.Tb(0,"div"),T.Oc(1,"A"),T.Sb())}function j(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",37),T.Tb(1,"div",30),T.Tb(2,"input",38),T.ec("keyup.enter",(function(t){return T.Dc(e),T.ic().onAcceptColor(t)}))("newValue",(function(t){return T.Dc(e),T.ic().onRedInput(t)})),T.Sb(),T.Tb(3,"input",38),T.ec("keyup.enter",(function(t){return T.Dc(e),T.ic().onAcceptColor(t)}))("newValue",(function(t){return T.Dc(e),T.ic().onGreenInput(t)})),T.Sb(),T.Tb(4,"input",38),T.ec("keyup.enter",(function(t){return T.Dc(e),T.ic().onAcceptColor(t)}))("newValue",(function(t){return T.Dc(e),T.ic().onBlueInput(t)})),T.Sb(),T.Mc(5,D,1,2,"input",32),T.Sb(),T.Tb(6,"div",30),T.Tb(7,"div"),T.Oc(8,"R"),T.Sb(),T.Tb(9,"div"),T.Oc(10,"G"),T.Sb(),T.Tb(11,"div"),T.Oc(12,"B"),T.Sb(),T.Mc(13,U,2,0,"div",33),T.Sb(),T.Sb()}if(2&e){const e=T.ic();T.Jc("display",1!==e.format?"none":"block"),T.Bb(2),T.oc("rg",255)("value",null==e.rgbaText?null:e.rgbaText.r),T.Bb(1),T.oc("rg",255)("value",null==e.rgbaText?null:e.rgbaText.g),T.Bb(1),T.oc("rg",255)("value",null==e.rgbaText?null:e.rgbaText.b),T.Bb(1),T.oc("ngIf","disabled"!==e.cpAlphaChannel),T.Bb(8),T.oc("ngIf","disabled"!==e.cpAlphaChannel)}}function F(e,t){if(1&e){const e=T.Ub();T.Tb(0,"input",34),T.ec("keyup.enter",(function(t){return T.Dc(e),T.ic(2).onAcceptColor(t)}))("newValue",(function(t){return T.Dc(e),T.ic(2).onAlphaInput(t)})),T.Sb()}if(2&e){const e=T.ic(2);T.oc("rg",1)("value",e.hexAlpha)}}function L(e,t){1&e&&(T.Tb(0,"div"),T.Oc(1,"A"),T.Sb())}function V(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",39),T.Tb(1,"div",30),T.Tb(2,"input",40),T.ec("blur",(function(){return T.Dc(e),T.ic().onHexInput(null)}))("keyup.enter",(function(t){return T.Dc(e),T.ic().onAcceptColor(t)}))("newValue",(function(t){return T.Dc(e),T.ic().onHexInput(t)})),T.Sb(),T.Mc(3,F,1,2,"input",32),T.Sb(),T.Tb(4,"div",30),T.Tb(5,"div"),T.Oc(6,"Hex"),T.Sb(),T.Mc(7,L,2,0,"div",33),T.Sb(),T.Sb()}if(2&e){const e=T.ic();T.Jc("display",0!==e.format?"none":"block"),T.Fb("hex-alpha","forced"===e.cpAlphaChannel),T.Bb(2),T.oc("value",e.hexText),T.Bb(1),T.oc("ngIf","forced"===e.cpAlphaChannel),T.Bb(4),T.oc("ngIf","forced"===e.cpAlphaChannel)}}function q(e,t){if(1&e){const e=T.Ub();T.Tb(0,"input",34),T.ec("keyup.enter",(function(t){return T.Dc(e),T.ic(2).onAcceptColor(t)}))("newValue",(function(t){return T.Dc(e),T.ic(2).onAlphaInput(t)})),T.Sb()}if(2&e){const e=T.ic(2);T.oc("rg",1)("value",null==e.hslaText?null:e.hslaText.a)}}function _(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",41),T.Tb(1,"div",30),T.Tb(2,"input",31),T.ec("keyup.enter",(function(t){return T.Dc(e),T.ic().onAcceptColor(t)}))("newValue",(function(t){return T.Dc(e),T.ic().onValueInput(t)})),T.Sb(),T.Mc(3,q,1,2,"input",32),T.Sb(),T.Tb(4,"div",30),T.Tb(5,"div"),T.Oc(6,"V"),T.Sb(),T.Tb(7,"div"),T.Oc(8,"A"),T.Sb(),T.Sb(),T.Sb()}if(2&e){const e=T.ic();T.Bb(2),T.oc("rg",100)("value",null==e.hslaText?null:e.hslaText.l),T.Bb(1),T.oc("ngIf","disabled"!==e.cpAlphaChannel)}}function G(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",42),T.Tb(1,"span",43),T.ec("click",(function(){return T.Dc(e),T.ic().onFormatToggle(-1)})),T.Sb(),T.Tb(2,"span",43),T.ec("click",(function(){return T.Dc(e),T.ic().onFormatToggle(1)})),T.Sb(),T.Sb()}}function H(e,t){if(1&e){const e=T.Ub();T.Tb(0,"span",50),T.ec("click",(function(t){T.Dc(e);const i=T.ic().$implicit;return T.ic(3).onRemovePresetColor(t,i)})),T.Sb()}if(2&e){const e=T.ic(4);T.Db(e.cpRemoveColorButtonClass)}}function K(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",48),T.ec("click",(function(){T.Dc(e);const i=t.$implicit;return T.ic(3).setColorFromString(i)})),T.Mc(1,H,1,3,"span",49),T.Sb()}if(2&e){const e=t.$implicit,i=T.ic(3);T.Jc("background-color",e),T.Bb(1),T.oc("ngIf",i.cpAddColorButton)}}function W(e,t){if(1&e&&(T.Tb(0,"div"),T.Mc(1,K,2,3,"div",47),T.Sb()),2&e){const e=T.ic(2);T.Db(e.cpPresetColorsClass),T.Bb(1),T.oc("ngForOf",e.cpPresetColors)}}function Y(e,t){if(1&e&&(T.Tb(0,"div"),T.Oc(1),T.Sb()),2&e){const e=T.ic(2);T.Db(e.cpPresetEmptyMessageClass),T.Bb(1),T.Pc(e.cpPresetEmptyMessage)}}function z(e,t){if(1&e&&(T.Tb(0,"div",44),T.Ob(1,"hr"),T.Tb(2,"div",45),T.Oc(3),T.Sb(),T.Mc(4,W,2,4,"div",46),T.Mc(5,Y,2,4,"div",46),T.Sb()),2&e){const e=T.ic();T.Bb(3),T.Pc(e.cpPresetLabel),T.Bb(1),T.oc("ngIf",null==e.cpPresetColors?null:e.cpPresetColors.length),T.Bb(1),T.oc("ngIf",!(null!=e.cpPresetColors&&e.cpPresetColors.length)&&e.cpAddColorButton)}}function Q(e,t){if(1&e){const e=T.Ub();T.Tb(0,"button",53),T.ec("click",(function(t){return T.Dc(e),T.ic(2).onCancelColor(t)})),T.Oc(1),T.Sb()}if(2&e){const e=T.ic(2);T.Db(e.cpCancelButtonClass),T.Bb(1),T.Pc(e.cpCancelButtonText)}}function X(e,t){if(1&e){const e=T.Ub();T.Tb(0,"button",53),T.ec("click",(function(t){return T.Dc(e),T.ic(2).onAcceptColor(t)})),T.Oc(1),T.Sb()}if(2&e){const e=T.ic(2);T.Db(e.cpOKButtonClass),T.Bb(1),T.Pc(e.cpOKButtonText)}}function J(e,t){if(1&e&&(T.Tb(0,"div",51),T.Mc(1,Q,2,4,"button",52),T.Mc(2,X,2,4,"button",52),T.Sb()),2&e){const e=T.ic();T.Bb(1),T.oc("ngIf",e.cpCancelButton),T.Bb(1),T.oc("ngIf",e.cpOKButton)}}var Z=function(e){return e[e.HEX=0]="HEX",e[e.RGBA=1]="RGBA",e[e.HSLA=2]="HSLA",e[e.CMYK=3]="CMYK",e}({});class ${constructor(e,t,i,o){this.r=e,this.g=t,this.b=i,this.a=o}}class ee{constructor(e,t,i,o){this.h=e,this.s=t,this.v=i,this.a=o}}class te{constructor(e,t,i,o){this.h=e,this.s=t,this.l=i,this.a=o}}class ie{constructor(e,t,i,o,n=1){this.c=e,this.m=t,this.y=i,this.k=o,this.a=n}}let oe=(()=>{class e{constructor(){this.newValue=new T.n}inputChange(e){const t=e.target.value;if(void 0===this.rg)this.newValue.emit(t);else{const e=parseFloat(t);this.newValue.emit({v:e,rg:this.rg})}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=T.Ib({type:e,selectors:[["","text",""]],hostBindings:function(e,t){1&e&&T.ec("input",(function(e){return t.inputChange(e)}))},inputs:{rg:"rg",text:"text"},outputs:{newValue:"newValue"}}),e})(),ne=(()=>{class e{constructor(e){this.elRef=e,this.dragEnd=new T.n,this.dragStart=new T.n,this.newValue=new T.n,this.listenerMove=e=>this.move(e),this.listenerStop=()=>this.stop()}mouseDown(e){this.start(e)}touchStart(e){this.start(e)}move(e){e.preventDefault(),this.setCursor(e)}start(e){this.setCursor(e),e.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(e){const t=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==e.pageX?e.pageX:e.touches[0].pageX)-t.left-window.pageXOffset}getY(e){const t=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==e.pageY?e.pageY:e.touches[0].pageY)-t.top-window.pageYOffset}setCursor(e){const t=this.elRef.nativeElement.offsetWidth,i=this.elRef.nativeElement.offsetHeight,o=Math.max(0,Math.min(this.getX(e),t)),n=Math.max(0,Math.min(this.getY(e),i));void 0!==this.rgX&&void 0!==this.rgY?this.newValue.emit({s:o/t,v:1-n/i,rgX:this.rgX,rgY:this.rgY}):void 0===this.rgX&&void 0!==this.rgY?this.newValue.emit({v:n/i,rgY:this.rgY}):void 0!==this.rgX&&void 0===this.rgY&&this.newValue.emit({v:o/t,rgX:this.rgX})}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(T.l))},e.\u0275dir=T.Ib({type:e,selectors:[["","slider",""]],hostBindings:function(e,t){1&e&&T.ec("mousedown",(function(e){return t.mouseDown(e)}))("touchstart",(function(e){return t.touchStart(e)}))},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),e})();class re{constructor(e,t,i,o){this.h=e,this.s=t,this.v=i,this.a=o}}class ae{constructor(e,t,i,o){this.h=e,this.s=t,this.v=i,this.a=o}}let ce=(()=>{class e{constructor(){this.active=null}setActive(e){this.active&&this.active!==e&&"inline"!==this.active.cpDialogDisplay&&this.active.closeDialog(),this.active=e}hsva2hsla(e){const t=e.h,i=e.s,o=e.v,n=e.a;if(0===o)return new te(t,0,0,n);if(0===i&&1===o)return new te(t,1,1,n);{const e=o*(2-i)/2;return new te(t,o*i/(1-Math.abs(2*e-1)),e,n)}}hsla2hsva(e){const t=Math.min(e.h,1),i=Math.min(e.s,1),o=Math.min(e.l,1),n=Math.min(e.a,1);if(0===o)return new ee(t,0,0,n);{const e=o+i*(1-Math.abs(2*o-1))/2;return new ee(t,2*(e-o)/e,e,n)}}hsvaToRgba(e){let t,i,o;const n=e.h,r=e.s,a=e.v,c=e.a,s=Math.floor(6*n),l=6*n-s,u=a*(1-r),d=a*(1-l*r),b=a*(1-(1-l)*r);switch(s%6){case 0:t=a,i=b,o=u;break;case 1:t=d,i=a,o=u;break;case 2:t=u,i=a,o=b;break;case 3:t=u,i=d,o=a;break;case 4:t=b,i=u,o=a;break;case 5:t=a,i=u,o=d;break;default:t=0,i=0,o=0}return new $(t,i,o,c)}cmykToRgb(e){return new $((1-e.c)*(1-e.k),(1-e.m)*(1-e.k),(1-e.y)*(1-e.k),e.a)}rgbaToCmyk(e){const t=1-Math.max(e.r,e.g,e.b);return 1===t?new ie(0,0,0,1,e.a):new ie((1-e.r-t)/(1-t),(1-e.g-t)/(1-t),(1-e.b-t)/(1-t),t,e.a)}rgbaToHsva(e){let t,i;const o=Math.min(e.r,1),n=Math.min(e.g,1),r=Math.min(e.b,1),a=Math.min(e.a,1),c=Math.max(o,n,r),s=Math.min(o,n,r),l=c,u=c-s;if(i=0===c?0:u/c,c===s)t=0;else{switch(c){case o:t=(n-r)/u+(n<r?6:0);break;case n:t=(r-o)/u+2;break;case r:t=(o-n)/u+4;break;default:t=0}t/=6}return new ee(t,i,l,a)}rgbaToHex(e,t){let i="#"+(1<<24|e.r<<16|e.g<<8|e.b).toString(16).substr(1);return t&&(i+=(256|Math.round(255*e.a)).toString(16).substr(1)),i}normalizeCMYK(e){return new ie(e.c/100,e.m/100,e.y/100,e.k/100,e.a)}denormalizeCMYK(e){return new ie(Math.floor(100*e.c),Math.floor(100*e.m),Math.floor(100*e.y),Math.floor(100*e.k),e.a)}denormalizeRGBA(e){return new $(Math.round(255*e.r),Math.round(255*e.g),Math.round(255*e.b),e.a)}stringToHsva(e="",t=!1){let i=null;e=(e||"").toLowerCase();const o=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return new $(parseInt(e[2],10)/255,parseInt(e[3],10)/255,parseInt(e[4],10)/255,isNaN(parseFloat(e[5]))?1:parseFloat(e[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return new te(parseInt(e[2],10)/360,parseInt(e[3],10)/100,parseInt(e[4],10)/100,isNaN(parseFloat(e[5]))?1:parseFloat(e[5]))}}];o.push(t?{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(e){return new $(parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255,parseInt(e[4]||"FF",16)/255)}}:{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(e){return new $(parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255,1)}}),o.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(e){return new $(parseInt(e[1]+e[1],16)/255,parseInt(e[2]+e[2],16)/255,parseInt(e[3]+e[3],16)/255,1)}});for(const n in o)if(o.hasOwnProperty(n)){const t=o[n],r=t.re.exec(e),a=r&&t.parse(r);if(a)return a instanceof $?i=this.rgbaToHsva(a):a instanceof te&&(i=this.hsla2hsva(a)),i}return i}outputFormat(e,t,i){switch("auto"===t&&(t=e.a<1?"rgba":"hex"),t){case"hsla":const t=this.hsva2hsla(e),o=new te(Math.round(360*t.h),Math.round(100*t.s),Math.round(100*t.l),Math.round(100*t.a)/100);return e.a<1||"always"===i?"hsla("+o.h+","+o.s+"%,"+o.l+"%,"+o.a+")":"hsl("+o.h+","+o.s+"%,"+o.l+"%)";case"rgba":const n=this.denormalizeRGBA(this.hsvaToRgba(e));return e.a<1||"always"===i?"rgba("+n.r+","+n.g+","+n.b+","+Math.round(100*n.a)/100+")":"rgb("+n.r+","+n.g+","+n.b+")";default:const r="always"===i||"forced"===i;return this.rgbaToHex(this.denormalizeRGBA(this.hsvaToRgba(e)),r)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=T.Jb({token:e,factory:e.\u0275fac}),e})(),se=(()=>{class e{constructor(e,t,i){this.elRef=e,this.cdRef=t,this.service=i,this.isIE10=!1,this.dialogArrowSize=10,this.dialogArrowOffset=15,this.dialogInputFields=[Z.HEX,Z.RGBA,Z.HSLA,Z.CMYK],this.useRootViewContainer=!1}handleEsc(e){this.show&&"popup"===this.cpDialogDisplay&&this.onCancelColor(e)}handleEnter(e){this.show&&"popup"===this.cpDialogDisplay&&this.onAcceptColor(e)}ngOnInit(){this.slider=new re(0,0,0,0),this.sliderDimMax=new ae(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.format=this.cpCmykEnabled?Z.CMYK:"rgba"===this.cpOutputFormat?Z.RGBA:"hsla"===this.cpOutputFormat?Z.HSLA:Z.HEX,this.listenerMouseDown=e=>{this.onMouseDown(e)},this.listenerResize=()=>{this.onResize()},this.openDialog(this.initialColor,!1)}ngOnDestroy(){this.closeDialog()}ngAfterViewInit(){230===this.cpWidth&&"inline"!==this.cpDialogDisplay||(this.sliderDimMax=new ae(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.updateColorPicker(!1),this.cdRef.detectChanges())}openDialog(e,t=!0){this.service.setActive(this),this.width||(this.cpWidth=this.directiveElementRef.nativeElement.offsetWidth),this.height||(this.height=320),this.setInitialColor(e),this.setColorFromString(e,t),this.openColorPicker()}closeDialog(){this.closeColorPicker()}setupDialog(e,t,i,o,n,r,a,c,s,l,u,d,b,m,p,h,g,f,v,O,S,T,C,M,A,E,R,I,y,k,B,N,w,x,P){this.setInitialColor(i),this.setColorMode(c),this.isIE10=10===function(){let e="";"undefined"!=typeof navigator&&(e=navigator.userAgent.toLowerCase());const t=e.indexOf("msie ");return t>0&&parseInt(e.substring(t+5,e.indexOf(".",t)),10)}(),this.directiveInstance=e,this.directiveElementRef=t,this.cpDisableInput=d,this.cpCmykEnabled=s,this.cpAlphaChannel=l,this.cpOutputFormat=u,this.cpDialogDisplay=r,this.cpIgnoredElements=b,this.cpSaveClickOutside=m,this.cpCloseClickOutside=p,this.useRootViewContainer=h,this.width=this.cpWidth=parseInt(o,10),this.height=this.cpHeight=parseInt(n,10),this.cpPosition=g,this.cpPositionOffset=parseInt(f,10),this.cpOKButton=E,this.cpOKButtonText=I,this.cpOKButtonClass=R,this.cpCancelButton=y,this.cpCancelButtonText=B,this.cpCancelButtonClass=k,this.fallbackColor=a||"#fff",this.setPresetConfig(O,S),this.cpPresetColorsClass=T,this.cpMaxPresetColorsLength=C,this.cpPresetEmptyMessage=M,this.cpPresetEmptyMessageClass=A,this.cpAddColorButton=N,this.cpAddColorButtonText=x,this.cpAddColorButtonClass=w,this.cpRemoveColorButtonClass=P,v||(this.dialogArrowOffset=0),"inline"===r&&(this.dialogArrowSize=0,this.dialogArrowOffset=0),"hex"===u&&"always"!==l&&"forced"!==l&&(this.cpAlphaChannel="disabled")}setColorMode(e){switch(e.toString().toUpperCase()){case"1":case"C":case"COLOR":this.cpColorMode=1;break;case"2":case"G":case"GRAYSCALE":this.cpColorMode=2;break;case"3":case"P":case"PRESETS":this.cpColorMode=3;break;default:this.cpColorMode=1}}setInitialColor(e){this.initialColor=e}setPresetConfig(e,t){this.cpPresetLabel=e,this.cpPresetColors=t}setColorFromString(e,t=!0,i=!0){let o;"always"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel?(o=this.service.stringToHsva(e,!0),o||this.hsva||(o=this.service.stringToHsva(e,!1))):o=this.service.stringToHsva(e,!1),o||this.hsva||(o=this.service.stringToHsva(this.fallbackColor,!1)),o&&(this.hsva=o,this.sliderH=this.hsva.h,"hex"===this.cpOutputFormat&&"disabled"===this.cpAlphaChannel&&(this.hsva.a=1),this.updateColorPicker(t,i))}onResize(){"fixed"===this.position?this.setDialogPosition():"inline"!==this.cpDialogDisplay&&this.closeColorPicker()}onDragEnd(e){this.directiveInstance.sliderDragEnd({slider:e,color:this.outputColor})}onDragStart(e){this.directiveInstance.sliderDragStart({slider:e,color:this.outputColor})}onMouseDown(e){!this.show||this.isIE10||"popup"!==this.cpDialogDisplay||e.target===this.directiveElementRef.nativeElement||this.isDescendant(this.elRef.nativeElement,e.target)||this.isDescendant(this.directiveElementRef.nativeElement,e.target)||0!==this.cpIgnoredElements.filter(t=>t===e.target).length||(this.cpSaveClickOutside?this.directiveInstance.colorSelected(this.outputColor):(this.hsva=null,this.setColorFromString(this.initialColor,!1),this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor),this.directiveInstance.colorCanceled()),this.cpCloseClickOutside&&this.closeColorPicker())}onAcceptColor(e){e.stopPropagation(),this.outputColor&&this.directiveInstance.colorSelected(this.outputColor),"popup"===this.cpDialogDisplay&&this.closeColorPicker()}onCancelColor(e){this.hsva=null,e.stopPropagation(),this.directiveInstance.colorCanceled(),this.setColorFromString(this.initialColor,!0),"popup"===this.cpDialogDisplay&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor,!0),this.closeColorPicker())}onFormatToggle(e){const t=this.dialogInputFields.length-(this.cpCmykEnabled?0:1),i=((this.dialogInputFields.indexOf(this.format)+e)%t+t)%t;this.format=this.dialogInputFields[i]}onColorChange(e){this.hsva.s=e.s/e.rgX,this.hsva.v=e.v/e.rgY,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"lightness",value:this.hsva.v,color:this.outputColor}),this.directiveInstance.sliderChanged({slider:"saturation",value:this.hsva.s,color:this.outputColor})}onHueChange(e){this.hsva.h=e.v/e.rgX,this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"hue",value:this.hsva.h,color:this.outputColor})}onValueChange(e){this.hsva.v=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"value",value:this.hsva.v,color:this.outputColor})}onAlphaChange(e){this.hsva.a=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"alpha",value:this.hsva.a,color:this.outputColor})}onHexInput(e){if(null===e)this.updateColorPicker();else{e&&"#"!==e[0]&&(e="#"+e);let t=/^#([a-f0-9]{3}|[a-f0-9]{6})$/gi;"always"===this.cpAlphaChannel&&(t=/^#([a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})$/gi);const i=t.test(e);i&&(e.length<5&&(e="#"+e.substring(1).split("").map(e=>e+e).join("")),"forced"===this.cpAlphaChannel&&(e+=Math.round(255*this.hsva.a).toString(16)),this.setColorFromString(e,!0,!1)),this.directiveInstance.inputChanged({input:"hex",valid:i,value:e,color:this.outputColor})}}onRedInput(e){const t=this.service.hsvaToRgba(this.hsva),i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(t.r=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"red",valid:i,value:t.r,color:this.outputColor})}onBlueInput(e){const t=this.service.hsvaToRgba(this.hsva),i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(t.b=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"blue",valid:i,value:t.b,color:this.outputColor})}onGreenInput(e){const t=this.service.hsvaToRgba(this.hsva),i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(t.g=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"green",valid:i,value:t.g,color:this.outputColor})}onHueInput(e){const t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.h=e.v/e.rg,this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"hue",valid:t,value:this.hsva.h,color:this.outputColor})}onValueInput(e){const t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.v=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"value",valid:t,value:this.hsva.v,color:this.outputColor})}onAlphaInput(e){const t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.a=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"alpha",valid:t,value:this.hsva.a,color:this.outputColor})}onLightnessInput(e){const t=this.service.hsva2hsla(this.hsva),i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(t.l=e.v/e.rg,this.hsva=this.service.hsla2hsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"lightness",valid:i,value:t.l,color:this.outputColor})}onSaturationInput(e){const t=this.service.hsva2hsla(this.hsva),i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(t.s=e.v/e.rg,this.hsva=this.service.hsla2hsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"saturation",valid:i,value:t.s,color:this.outputColor})}onCyanInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.c=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"cyan",valid:!0,value:this.cmyk.c,color:this.outputColor})}onMagentaInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.m=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"magenta",valid:!0,value:this.cmyk.m,color:this.outputColor})}onYellowInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.y=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"yellow",valid:!0,value:this.cmyk.y,color:this.outputColor})}onBlackInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.k=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"black",valid:!0,value:this.cmyk.k,color:this.outputColor})}onAddPresetColor(e,t){e.stopPropagation(),this.cpPresetColors.filter(e=>e===t).length||(this.cpPresetColors=this.cpPresetColors.concat(t),this.directiveInstance.presetColorsChanged(this.cpPresetColors))}onRemovePresetColor(e,t){e.stopPropagation(),this.cpPresetColors=this.cpPresetColors.filter(e=>e!==t),this.directiveInstance.presetColorsChanged(this.cpPresetColors)}openColorPicker(){this.show||(this.show=!0,this.hidden=!0,setTimeout(()=>{this.hidden=!1,this.setDialogPosition(),this.cdRef.detectChanges()},0),this.directiveInstance.stateChanged(!0),this.isIE10||(document.addEventListener("mousedown",this.listenerMouseDown),document.addEventListener("touchstart",this.listenerMouseDown)),window.addEventListener("resize",this.listenerResize))}closeColorPicker(){this.show&&(this.show=!1,this.directiveInstance.stateChanged(!1),this.isIE10||(document.removeEventListener("mousedown",this.listenerMouseDown),document.removeEventListener("touchstart",this.listenerMouseDown)),window.removeEventListener("resize",this.listenerResize),this.cdRef.destroyed||this.cdRef.detectChanges())}updateColorPicker(e=!0,t=!0,i=!1){if(this.sliderDimMax){let o,n,r;2===this.cpColorMode&&(this.hsva.s=0);const a=this.outputColor;if(n=this.service.hsva2hsla(this.hsva),this.cpCmykEnabled?(i?(r=this.service.cmykToRgb(this.service.normalizeCMYK(this.cmyk)),this.hsva=this.service.rgbaToHsva(r)):(r=this.service.hsvaToRgba(this.hsva),this.cmyk=this.service.denormalizeCMYK(this.service.rgbaToCmyk(r))),r=this.service.denormalizeRGBA(r),this.sliderH=this.hsva.h):r=this.service.denormalizeRGBA(this.service.hsvaToRgba(this.hsva)),o=this.service.denormalizeRGBA(this.service.hsvaToRgba(new ee(this.sliderH||this.hsva.h,1,1,1))),t&&(this.hslaText=new te(Math.round(360*n.h),Math.round(100*n.s),Math.round(100*n.l),Math.round(100*n.a)/100),this.rgbaText=new $(r.r,r.g,r.b,Math.round(100*r.a)/100),this.cpCmykEnabled&&(this.cmykText=new ie(this.cmyk.c,this.cmyk.m,this.cmyk.y,this.cmyk.k,Math.round(100*this.cmyk.a)/100)),this.hexText=this.service.rgbaToHex(r,"always"===this.cpAlphaChannel),this.hexAlpha=this.rgbaText.a),"auto"===this.cpOutputFormat&&this.format!==Z.RGBA&&this.format!==Z.CMYK&&this.hsva.a<1&&(this.format=this.hsva.a<1?Z.RGBA:Z.HEX),this.hueSliderColor="rgb("+o.r+","+o.g+","+o.b+")",this.alphaSliderColor="rgb("+r.r+","+r.g+","+r.b+")",this.outputColor=this.service.outputFormat(this.hsva,this.cpOutputFormat,this.cpAlphaChannel),this.selectedColor=this.service.outputFormat(this.hsva,"rgba",null),this.format!==Z.CMYK)this.cmykColor="";else if("always"===this.cpAlphaChannel||"enabled"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel){const e=Math.round(100*this.cmyk.a)/100;this.cmykColor=`cmyka(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k},${e})`}else this.cmykColor=`cmyk(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k})`;this.slider=new re((this.sliderH||this.hsva.h)*this.sliderDimMax.h-8,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-8),e&&a!==this.outputColor&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.outputColor))}}setDialogPosition(){if("inline"===this.cpDialogDisplay)this.position="relative";else{let e,t="static",i="",o=null,n=null,r=this.directiveElementRef.nativeElement.parentNode;const a=this.dialogElement.nativeElement.offsetHeight;for(;null!==r&&"HTML"!==r.tagName;){if(e=window.getComputedStyle(r),t=e.getPropertyValue("position"),i=e.getPropertyValue("transform"),"static"!==t&&null===o&&(o=r),i&&"none"!==i&&null===n&&(n=r),"fixed"===t){o=n;break}r=r.parentNode}const c=this.createDialogBox(this.directiveElementRef.nativeElement,"fixed"!==t);if(this.useRootViewContainer||"fixed"===t&&(!o||o instanceof HTMLUnknownElement))this.top=c.top,this.left=c.left;else{null===o&&(o=r);const e=this.createDialogBox(o,"fixed"!==t);this.top=c.top-e.top,this.left=c.left-e.left}"fixed"===t&&(this.position="fixed");let s=this.cpPosition;"auto"===this.cpPosition&&(s=function(e){let t="right",i="bottom";const{height:o,width:n,top:r,bottom:a,left:c,right:s}=e,l=r-o<0,u=a+o>(window.innerHeight||document.documentElement.clientHeight),d=c-n<0,b=s+n>(window.innerWidth||document.documentElement.clientWidth);return u&&(i="top"),l&&(i="bottom"),d&&(t="right"),b&&(t="left"),l&&u&&d&&b?["left","right","top","bottom"].reduce((t,i)=>e[t]>e[i]?t:i):d&&b?l?"bottom":u||r>a?"top":"bottom":l&&u?d?"right":b||c>s?"left":"right":`${i}-${t}`}(this.dialogElement.nativeElement.getBoundingClientRect())),"top"===s?(this.arrowTop=a-1,this.top-=a+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*c.width-this.dialogArrowOffset):"bottom"===s?(this.top+=c.height+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*c.width-this.dialogArrowOffset):"top-left"===s||"left-top"===s?(this.top-=a-c.height+c.height*this.cpPositionOffset/100,this.left-=this.cpWidth+this.dialogArrowSize-2-this.dialogArrowOffset):"top-right"===s||"right-top"===s?(this.top-=a-c.height+c.height*this.cpPositionOffset/100,this.left+=c.width+this.dialogArrowSize-2-this.dialogArrowOffset):"left"===s||"bottom-left"===s||"left-bottom"===s?(this.top+=c.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left-=this.cpWidth+this.dialogArrowSize-2):(this.top+=c.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left+=c.width+this.dialogArrowSize-2)}}isDescendant(e,t){let i=t.parentNode;for(;null!==i;){if(i===e)return!0;i=i.parentNode}return!1}createDialogBox(e,t){return{top:e.getBoundingClientRect().top+(t?window.pageYOffset:0),left:e.getBoundingClientRect().left+(t?window.pageXOffset:0),width:e.offsetWidth,height:e.offsetHeight}}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(T.l),T.Nb(T.h),T.Nb(ce))},e.\u0275cmp=T.Hb({type:e,selectors:[["color-picker"]],viewQuery:function(e,t){var i;1&e&&(T.Ic(C,!0),T.Ic(M,!0),T.Ic(A,!0)),2&e&&(T.yc(i=T.fc())&&(t.dialogElement=i.first),T.yc(i=T.fc())&&(t.hueSlider=i.first),T.yc(i=T.fc())&&(t.alphaSlider=i.first))},hostBindings:function(e,t){1&e&&T.ec("keyup.esc",(function(e){return t.handleEsc(e)}),!1,T.Bc)("keyup.enter",(function(e){return t.handleEnter(e)}),!1,T.Bc)},decls:28,vars:47,consts:[[1,"color-picker",3,"click"],["dialogPopup",""],[3,"class","top",4,"ngIf"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue","dragStart","dragEnd",4,"ngIf"],[1,"hue-alpha","box"],[1,"left"],[1,"selected-color-background"],[1,"selected-color"],["type","button",3,"class","disabled","click",4,"ngIf"],[1,"right"],["style","height: 16px;",4,"ngIf"],[1,"hue",3,"slider","rgX","newValue","dragStart","dragEnd"],["hueSlider",""],[1,"cursor"],[1,"value",3,"slider","rgX","newValue","dragStart","dragEnd"],["valueSlider",""],[1,"alpha",3,"slider","rgX","newValue","dragStart","dragEnd"],["alphaSlider",""],["class","cmyk-text",3,"display",4,"ngIf"],["class","hsla-text",3,"display",4,"ngIf"],["class","rgba-text",3,"display",4,"ngIf"],["class","hex-text",3,"hex-alpha","display",4,"ngIf"],["class","value-text",4,"ngIf"],["class","type-policy",4,"ngIf"],["class","preset-area",4,"ngIf"],["class","button-area",4,"ngIf"],[1,"saturation-lightness",3,"slider","rgX","rgY","newValue","dragStart","dragEnd"],["type","button",3,"disabled","click"],[2,"height","16px"],[1,"cmyk-text"],[1,"box"],["type","number","pattern","[0-9]*","min","0","max","100",3,"text","rg","value","keyup.enter","newValue"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue",4,"ngIf"],[4,"ngIf"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue"],[1,"hsla-text"],["type","number","pattern","[0-9]*","min","0","max","360",3,"text","rg","value","keyup.enter","newValue"],[1,"rgba-text"],["type","number","pattern","[0-9]*","min","0","max","255",3,"text","rg","value","keyup.enter","newValue"],[1,"hex-text"],[3,"text","value","blur","keyup.enter","newValue"],[1,"value-text"],[1,"type-policy"],[1,"type-policy-arrow",3,"click"],[1,"preset-area"],[1,"preset-label"],[3,"class",4,"ngIf"],["class","preset-color",3,"backgroundColor","click",4,"ngFor","ngForOf"],[1,"preset-color",3,"click"],[3,"class","click",4,"ngIf"],[3,"click"],[1,"button-area"],["type","button",3,"class","click",4,"ngIf"],["type","button",3,"click"]],template:function(e,t){1&e&&(T.Tb(0,"div",0,1),T.ec("click",(function(e){return e.stopPropagation()})),T.Mc(2,E,1,5,"div",2),T.Mc(3,R,2,8,"div",3),T.Tb(4,"div",4),T.Tb(5,"div",5),T.Ob(6,"div",6),T.Ob(7,"div",7),T.Mc(8,I,2,5,"button",8),T.Sb(),T.Tb(9,"div",9),T.Mc(10,y,1,0,"div",10),T.Tb(11,"div",11,12),T.ec("newValue",(function(e){return t.onHueChange(e)}))("dragStart",(function(){return t.onDragStart("hue")}))("dragEnd",(function(){return t.onDragEnd("hue")})),T.Ob(13,"div",13),T.Sb(),T.Tb(14,"div",14,15),T.ec("newValue",(function(e){return t.onValueChange(e)}))("dragStart",(function(){return t.onDragStart("value")}))("dragEnd",(function(){return t.onDragEnd("value")})),T.Ob(16,"div",13),T.Sb(),T.Tb(17,"div",16,17),T.ec("newValue",(function(e){return t.onAlphaChange(e)}))("dragStart",(function(){return t.onDragStart("alpha")}))("dragEnd",(function(){return t.onDragEnd("alpha")})),T.Ob(19,"div",13),T.Sb(),T.Sb(),T.Sb(),T.Mc(20,N,17,12,"div",18),T.Mc(21,P,14,10,"div",19),T.Mc(22,j,14,10,"div",20),T.Mc(23,V,8,7,"div",21),T.Mc(24,_,9,3,"div",22),T.Mc(25,G,3,0,"div",23),T.Mc(26,z,6,3,"div",24),T.Mc(27,J,3,2,"div",25),T.Sb()),2&e&&(T.Jc("display",t.show?"block":"none")("visibility",t.hidden?"hidden":"visible")("top",t.top,"px")("left",t.left,"px")("position",t.position)("height",t.cpHeight,"px")("width",t.cpWidth,"px"),T.Fb("open",t.show),T.Bb(2),T.oc("ngIf","popup"==t.cpDialogDisplay),T.Bb(1),T.oc("ngIf",1===(t.cpColorMode||1)),T.Bb(4),T.Jc("background-color",t.selectedColor),T.Bb(1),T.oc("ngIf",t.cpAddColorButton),T.Bb(2),T.oc("ngIf","disabled"===t.cpAlphaChannel),T.Bb(1),T.Jc("display",1===(t.cpColorMode||1)?"block":"none"),T.oc("rgX",1),T.Bb(2),T.Jc("left",null==t.slider?null:t.slider.h,"px"),T.Bb(1),T.Jc("display",2===(t.cpColorMode||1)?"block":"none"),T.oc("rgX",1),T.Bb(2),T.Jc("right",null==t.slider?null:t.slider.v,"px"),T.Bb(1),T.Jc("display","disabled"===t.cpAlphaChannel?"none":"block")("background-color",t.alphaSliderColor),T.oc("rgX",1),T.Bb(2),T.Jc("left",null==t.slider?null:t.slider.a,"px"),T.Bb(1),T.oc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),T.Bb(1),T.oc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),T.Bb(1),T.oc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),T.Bb(1),T.oc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),T.Bb(1),T.oc("ngIf",!t.cpDisableInput&&2===(t.cpColorMode||1)),T.Bb(1),T.oc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),T.Bb(1),T.oc("ngIf",(null==t.cpPresetColors?null:t.cpPresetColors.length)||t.cpAddColorButton),T.Bb(1),T.oc("ngIf",t.cpOKButton||t.cpCancelButton))},directives:[o.p,ne,oe,o.o],styles:['.color-picker{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;background-color:#fff;border:1px solid #777;cursor:default;height:auto;position:absolute;user-select:none;width:230px;z-index:1000}.color-picker *{box-sizing:border-box;font-size:11px;margin:0}.color-picker input{color:#000;font-size:13px;height:26px;min-width:0;text-align:center;width:0}.color-picker input:-moz-submit-invalid,.color-picker input:-moz-ui-invalid,.color-picker input:invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.color-picker .arrow{border-style:solid;height:0;position:absolute;width:0;z-index:999999}.color-picker .arrow.arrow-top{border-color:#777 transparent transparent;border-width:10px 5px;left:8px}.color-picker .arrow.arrow-bottom{border-color:transparent transparent #777;border-width:10px 5px;left:8px;top:-20px}.color-picker .arrow.arrow-left-top,.color-picker .arrow.arrow-top-left{border-color:transparent transparent transparent #777;border-width:5px 10px;bottom:8px;right:-21px}.color-picker .arrow.arrow-right-top,.color-picker .arrow.arrow-top-right{border-color:transparent #777 transparent transparent;border-width:5px 10px;bottom:8px;left:-20px}.color-picker .arrow.arrow-bottom-left,.color-picker .arrow.arrow-left,.color-picker .arrow.arrow-left-bottom{border-color:transparent transparent transparent #777;border-width:5px 10px;right:-21px;top:8px}.color-picker .arrow.arrow-bottom-right,.color-picker .arrow.arrow-right,.color-picker .arrow.arrow-right-bottom{border-color:transparent #777 transparent transparent;border-width:5px 10px;left:-20px;top:8px}.color-picker .cursor{border:2px solid #222;border-radius:50%;cursor:default;height:16px;position:relative;width:16px}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{padding:16px 8px;position:relative}.color-picker .right{flex:1 1 auto;padding:12px 8px}.color-picker .button-area{padding:0 16px 16px;text-align:right}.color-picker .button-area button{margin-left:8px}.color-picker .preset-area{padding:4px 15px}.color-picker .preset-area .preset-label{color:#555;font-size:11px;overflow:hidden;padding:4px;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%}.color-picker .preset-area .preset-color{border:1px solid #a9a9a9;border-radius:25%;cursor:pointer;display:inline-block;height:18px;margin:4px 6px 8px;position:relative;width:18px}.color-picker .preset-area .preset-empty-message{font-style:italic;margin-bottom:8px;margin-top:4px;min-height:18px;text-align:center}.color-picker .hex-text{font-size:11px;padding:4px 8px;width:100%}.color-picker .hex-text .box{padding:0 24px 8px 8px}.color-picker .hex-text .box div{clear:left;color:#555;flex:1 1 auto;float:left;text-align:center}.color-picker .hex-text .box input{border:1px solid #a9a9a9;flex:1 1 auto;padding:1px}.color-picker .hex-alpha .box div:first-child,.color-picker .hex-alpha .box input:first-child{flex-grow:3;margin-right:8px}.color-picker .cmyk-text,.color-picker .hsla-text,.color-picker .rgba-text,.color-picker .value-text{font-size:11px;padding:4px 8px;width:100%}.color-picker .cmyk-text .box,.color-picker .hsla-text .box,.color-picker .rgba-text .box{padding:0 24px 8px 8px}.color-picker .value-text .box{padding:0 8px 8px}.color-picker .cmyk-text .box div,.color-picker .hsla-text .box div,.color-picker .rgba-text .box div,.color-picker .value-text .box div{color:#555;flex:1 1 auto;margin-right:8px;text-align:center}.color-picker .cmyk-text .box div:last-child,.color-picker .hsla-text .box div:last-child,.color-picker .rgba-text .box div:last-child,.color-picker .value-text .box div:last-child{margin-right:0}.color-picker .cmyk-text .box input,.color-picker .hsla-text .box input,.color-picker .rgba-text .box input,.color-picker .value-text .box input{border:1px solid #a9a9a9;flex:1;float:left;margin:0 8px 0 0;padding:1px}.color-picker .cmyk-text .box input:last-child,.color-picker .hsla-text .box input:last-child,.color-picker .rgba-text .box input:last-child,.color-picker .value-text .box input:last-child{margin-right:0}.color-picker .hue-alpha{align-items:center;margin-bottom:3px}.color-picker .hue{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwkUFWbCCAAAAFxJREFUaN7t0kEKg0AQAME2x83/n2qu5qCgD1iDhCoYdpnbQC9bbY1qVO/jvc6k3ad91s7/7F1/csgPrujuQ17BDYSFsBAWwgJhISyEBcJCWAgLhIWwEBYIi2f7Ar/1TCgFH2X9AAAAAElFTkSuQmCC");direction:ltr}.color-picker .hue,.color-picker .value{background-size:100% 100%;border:none;cursor:pointer;height:16px;margin-bottom:16px;width:100%}.color-picker .value{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAACTklEQVR42u3SYUcrABhA4U2SkmRJMmWSJklKJiWZZpKUJJskKUmaTFImKZOUzMySpGRmliRNJilJSpKSJEtmSpIpmWmSdO736/6D+x7OP3gUCoWCv1cqlSQlJZGcnExKSgqpqamkpaWRnp5ORkYGmZmZqFQqsrKyyM7OJicnh9zcXNRqNXl5eeTn56PRaCgoKKCwsJCioiK0Wi3FxcWUlJRQWlpKWVkZ5eXlVFRUUFlZiU6no6qqiurqampqaqitraWurg69Xk99fT0GgwGj0UhDQwONjY00NTXR3NxMS0sLra2ttLW10d7ejslkwmw209HRQWdnJ11dXXR3d9PT00Nvby99fX309/czMDDA4OAgFouFoaEhrFYrw8PDjIyMMDo6ytjYGDabjfHxcSYmJpicnGRqagq73c709DQzMzPMzs4yNzfH/Pw8DocDp9OJy+XC7XazsLDA4uIiS0tLLC8vs7KywurqKmtra3g8HrxeLz6fD7/fz/r6OhsbG2xubrK1tcX29jaBQICdnR2CwSC7u7vs7e2xv7/PwcEBh4eHHB0dcXx8zMnJCaenp5ydnXF+fs7FxQWXl5dcXV1xfX3Nzc0Nt7e33N3dEQqFuL+/5+HhgXA4TCQS4fHxkaenJ56fn3l5eeH19ZVoNMrb2xvv7+98fHwQi8WIx+N8fn6SSCT4+vri+/ubn58ffn9/+VcKgSWwBJbAElgCS2AJLIElsASWwBJYAktgCSyBJbAElsASWAJLYAksgSWwBJbAElgCS2AJLIElsP4/WH8AmJ5Z6jHS4h8AAAAASUVORK5CYII=");direction:rtl}.color-picker .alpha{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwYQlZMa3gAAAWVJREFUaN7tmEGO6jAQRCsOArHgBpyAJYGjcGocxAm4A2IHpmoWE0eBH+ezmFlNvU06shJ3W6VEelWMUQAIIF9f6qZpimsA1LYtS2uF51/u27YVAFZVRUkEoGHdPV/sIcbIEIIkUdI/9Xa7neyv61+SWFUVAVCSct00TWn2fv6u3+Ecfd3tXzy/0+nEUu+SPjo/kqzrmiQpScN6v98XewfA8/lMkiLJ2WxGSUopcT6fM6U0NX9/frfbjev1WtfrlZfLhYfDQQHG/AIOlnGwjINlHCxjHCzjYJm/TJWdCwquJXseFFzGwDNNeiKMOJTO8xQdDQaeB29+K9efeLaBo9J7vdvtJj1RjFFjfiv7qv95tjx/7leSQgh93e1ffMeIp6O+YQjho/N791t1XVOSSI7N//K+4/GoxWLBx+PB5/Op5XLJ+/3OlJJWqxU3m83ovv5iGf8KjYNlHCxjHCzjYBkHy5gf5gusvQU7U37jTAAAAABJRU5ErkJggg==");background-size:100% 100%;border:none;cursor:pointer;direction:ltr;height:16px;width:100%}.color-picker .type-policy{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACewAAAnsB01CO3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIASURBVEiJ7ZY9axRRFIafsxMStrLQJpAgpBFhi+C9w1YSo00I6RZ/g9vZpBf/QOr4GyRgkSKNSrAadsZqQGwCkuAWyRZJsySwvhZ7N/vhzrgbLH3Ld8597jlzz50zJokyxXH8DqDVar0qi6v8BbItqSGpEcfxdlmsFWXkvX8AfAVWg3UKPEnT9GKujMzsAFgZsVaCN1VTQd77XUnrgE1kv+6935268WRpzrnHZvYRWC7YvC3pRZZl3wozqtVqiyH9IgjAspkd1Gq1xUJQtVrdB9ZKIAOthdg/Qc65LUk7wNIMoCVJO865rYFhkqjX6/d7vV4GPJwBMqofURS5JEk6FYBer/eeYb/Mo9WwFnPOvQbeAvfuAAK4BN4sAJtAG/gJIElmNuiJyba3EGNmZiPeZuEVmVell/Y/6N+CzDn3AXhEOOo7Hv/3BeAz8IzQkMPnJbuPx1wC+yYJ7/0nYIP5S/0FHKdp+rwCEEXRS/rf5Hl1Gtb2M0iSpCOpCZzPATmX1EySpHMLAsiy7MjMDoHrGSDXZnaYZdnRwBh7J91utwmczAA6CbG3GgPleX4jqUH/a1CktqRGnuc3hSCAMB32gKspkCtgb3KCQMmkjeP4WNJThrNNZval1WptTIsv7JtQ4tmIdRa8qSoEpWl6YWZNoAN0zKxZNPehpLSBZv2t+Q0CJ9lLnARQLAAAAABJRU5ErkJggg==");background-position:50%;background-repeat:no-repeat;background-size:8px 16px;height:24px;position:absolute;right:12px;top:218px;width:16px}.color-picker .type-policy .type-policy-arrow{display:block;height:50%;width:100%}.color-picker .selected-color{border:1px solid #a9a9a9;border-radius:50%;height:40px;left:8px;position:absolute;top:16px;width:40px}.color-picker .selected-color-background{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAh0lEQVRYR+2W0QlAMQgD60zdfwOdqa8TmI/wQMr5K0I5bZLIzLOa2nt37VVVbd+dDx5obgCC3KBLwJ2ff4PnVidkf+ucIhw80HQaCLo3DMH3CRK3iFsmAWVl6hPNDwt8EvNE5q+YuEXcMgkonVM6SdyCoEvAnZ8v1Hjx817MilmxSUB5rdLJDycZgUAZUch/AAAAAElFTkSuQmCC");border-radius:50%;height:40px;width:40px}.color-picker .saturation-lightness{background-image:url("data:image/png;base64,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");background-size:100% 100%;border:none;cursor:pointer;direction:ltr;height:130px;touch-action:manipulation;width:100%}.color-picker .cp-add-color-button-class{background:transparent;border:0;cursor:pointer;display:inline;margin:3px -3px;padding:0;position:absolute}.color-picker .cp-add-color-button-class:hover{text-decoration:underline}.color-picker .cp-add-color-button-class:disabled{color:#999;cursor:not-allowed}.color-picker .cp-add-color-button-class:disabled:hover{text-decoration:none}.color-picker .cp-remove-color-button-class{background:#fff;border-radius:50%;box-shadow:1px 1px 5px #333;cursor:pointer;display:block;height:10px;position:absolute;right:-5px;text-align:center;top:-5px;width:10px}.color-picker .cp-remove-color-button-class:before{bottom:3.5px;content:"x";display:inline-block;font-size:10px;position:relative}'],encapsulation:2}),e})(),le=(()=>{class e{constructor(e,t,i,o,n,r){this.injector=e,this.cfr=t,this.appRef=i,this.vcRef=o,this.elRef=n,this._service=r,this.dialogCreated=!1,this.ignoreChanges=!1,this.viewAttachedToAppRef=!1,this.cpWidth="230px",this.cpHeight="auto",this.cpToggle=!1,this.cpDisabled=!1,this.cpIgnoredElements=[],this.cpFallbackColor="",this.cpColorMode="color",this.cpCmykEnabled=!1,this.cpOutputFormat="auto",this.cpAlphaChannel="enabled",this.cpDisableInput=!1,this.cpDialogDisplay="popup",this.cpSaveClickOutside=!0,this.cpCloseClickOutside=!0,this.cpUseRootViewContainer=!1,this.cpPosition="auto",this.cpPositionOffset="0%",this.cpPositionRelativeToArrow=!1,this.cpOKButton=!1,this.cpOKButtonText="OK",this.cpOKButtonClass="cp-ok-button-class",this.cpCancelButton=!1,this.cpCancelButtonText="Cancel",this.cpCancelButtonClass="cp-cancel-button-class",this.cpPresetLabel="Preset colors",this.cpPresetColorsClass="cp-preset-colors-class",this.cpMaxPresetColorsLength=6,this.cpPresetEmptyMessage="No colors added",this.cpPresetEmptyMessageClass="preset-empty-message",this.cpAddColorButton=!1,this.cpAddColorButtonText="Add color",this.cpAddColorButtonClass="cp-add-color-button-class",this.cpRemoveColorButtonClass="cp-remove-color-button-class",this.cpInputChange=new T.n(!0),this.cpToggleChange=new T.n(!0),this.cpSliderChange=new T.n(!0),this.cpSliderDragEnd=new T.n(!0),this.cpSliderDragStart=new T.n(!0),this.colorPickerOpen=new T.n(!0),this.colorPickerClose=new T.n(!0),this.colorPickerCancel=new T.n(!0),this.colorPickerSelect=new T.n(!0),this.colorPickerChange=new T.n(!1),this.cpCmykColorChange=new T.n(!0),this.cpPresetColorsChange=new T.n(!0)}handleClick(){this.inputFocus()}handleFocus(){this.inputFocus()}handleInput(e){this.inputChange(e)}ngOnDestroy(){null!=this.cmpRef&&(this.viewAttachedToAppRef&&this.appRef.detachView(this.cmpRef.hostView),this.cmpRef.destroy(),this.cmpRef=null,this.dialog=null)}ngOnChanges(e){e.cpToggle&&!this.cpDisabled&&(e.cpToggle.currentValue?this.openDialog():e.cpToggle.currentValue||this.closeDialog()),e.colorPicker&&(this.dialog&&!this.ignoreChanges&&("inline"===this.cpDialogDisplay&&this.dialog.setInitialColor(e.colorPicker.currentValue),this.dialog.setColorFromString(e.colorPicker.currentValue,!1),this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay&&this.cmpRef.changeDetectorRef.detectChanges()),this.ignoreChanges=!1),(e.cpPresetLabel||e.cpPresetColors)&&this.dialog&&this.dialog.setPresetConfig(this.cpPresetLabel,this.cpPresetColors)}openDialog(){if(this.dialogCreated)this.dialog&&this.dialog.openDialog(this.colorPicker);else{let e=this.vcRef;if(this.dialogCreated=!0,this.viewAttachedToAppRef=!1,this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay){const t=this.injector.get(this.appRef.componentTypes[0],T.s.NULL);t!==T.s.NULL?(e=t.vcRef||t.viewContainerRef||this.vcRef,e===this.vcRef&&console.warn("You are using cpUseRootViewContainer, but the root component is not exposing viewContainerRef!Please expose it by adding 'public vcRef: ViewContainerRef' to the constructor.")):this.viewAttachedToAppRef=!0}const t=this.cfr.resolveComponentFactory(se);if(this.viewAttachedToAppRef)this.cmpRef=t.create(this.injector),this.appRef.attachView(this.cmpRef.hostView),document.body.appendChild(this.cmpRef.hostView.rootNodes[0]);else{const i=T.F.fromResolvedProviders([],e.parentInjector);this.cmpRef=e.createComponent(t,0,i,[])}this.cmpRef.instance.setupDialog(this,this.elRef,this.colorPicker,this.cpWidth,this.cpHeight,this.cpDialogDisplay,this.cpFallbackColor,this.cpColorMode,this.cpCmykEnabled,this.cpAlphaChannel,this.cpOutputFormat,this.cpDisableInput,this.cpIgnoredElements,this.cpSaveClickOutside,this.cpCloseClickOutside,this.cpUseRootViewContainer,this.cpPosition,this.cpPositionOffset,this.cpPositionRelativeToArrow,this.cpPresetLabel,this.cpPresetColors,this.cpPresetColorsClass,this.cpMaxPresetColorsLength,this.cpPresetEmptyMessage,this.cpPresetEmptyMessageClass,this.cpOKButton,this.cpOKButtonClass,this.cpOKButtonText,this.cpCancelButton,this.cpCancelButtonClass,this.cpCancelButtonText,this.cpAddColorButton,this.cpAddColorButtonClass,this.cpAddColorButtonText,this.cpRemoveColorButtonClass),this.dialog=this.cmpRef.instance,this.vcRef!==e&&this.cmpRef.changeDetectorRef.detectChanges()}}closeDialog(){this.dialog&&"popup"===this.cpDialogDisplay&&this.dialog.closeDialog()}cmykChanged(e){this.cpCmykColorChange.emit(e)}stateChanged(e){this.cpToggleChange.emit(e),e?this.colorPickerOpen.emit(this.colorPicker):this.colorPickerClose.emit(this.colorPicker)}colorChanged(e,t=!0){this.ignoreChanges=t,this.colorPickerChange.emit(e)}colorSelected(e){this.colorPickerSelect.emit(e)}colorCanceled(){this.colorPickerCancel.emit()}inputFocus(){const e=this.elRef.nativeElement,t=this.cpIgnoredElements.filter(t=>t===e);this.cpDisabled||t.length||("undefined"!=typeof document&&e===document.activeElement?this.openDialog():this.dialog&&this.dialog.show?this.closeDialog():this.openDialog())}inputChange(e){this.dialog?this.dialog.setColorFromString(e.target.value,!0):(this.colorPicker=e.target.value,this.colorPickerChange.emit(this.colorPicker))}inputChanged(e){this.cpInputChange.emit(e)}sliderChanged(e){this.cpSliderChange.emit(e)}sliderDragEnd(e){this.cpSliderDragEnd.emit(e)}sliderDragStart(e){this.cpSliderDragStart.emit(e)}presetColorsChanged(e){this.cpPresetColorsChange.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(T.s),T.Nb(T.j),T.Nb(T.g),T.Nb(T.R),T.Nb(T.l),T.Nb(ce))},e.\u0275dir=T.Ib({type:e,selectors:[["","colorPicker",""]],hostBindings:function(e,t){1&e&&T.ec("click",(function(){return t.handleClick()}))("focus",(function(){return t.handleFocus()}))("input",(function(e){return t.handleInput(e)}))},inputs:{cpWidth:"cpWidth",cpHeight:"cpHeight",cpToggle:"cpToggle",cpDisabled:"cpDisabled",cpIgnoredElements:"cpIgnoredElements",cpFallbackColor:"cpFallbackColor",cpColorMode:"cpColorMode",cpCmykEnabled:"cpCmykEnabled",cpOutputFormat:"cpOutputFormat",cpAlphaChannel:"cpAlphaChannel",cpDisableInput:"cpDisableInput",cpDialogDisplay:"cpDialogDisplay",cpSaveClickOutside:"cpSaveClickOutside",cpCloseClickOutside:"cpCloseClickOutside",cpUseRootViewContainer:"cpUseRootViewContainer",cpPosition:"cpPosition",cpPositionOffset:"cpPositionOffset",cpPositionRelativeToArrow:"cpPositionRelativeToArrow",cpOKButton:"cpOKButton",cpOKButtonText:"cpOKButtonText",cpOKButtonClass:"cpOKButtonClass",cpCancelButton:"cpCancelButton",cpCancelButtonText:"cpCancelButtonText",cpCancelButtonClass:"cpCancelButtonClass",cpPresetLabel:"cpPresetLabel",cpPresetColorsClass:"cpPresetColorsClass",cpMaxPresetColorsLength:"cpMaxPresetColorsLength",cpPresetEmptyMessage:"cpPresetEmptyMessage",cpPresetEmptyMessageClass:"cpPresetEmptyMessageClass",cpAddColorButton:"cpAddColorButton",cpAddColorButtonText:"cpAddColorButtonText",cpAddColorButtonClass:"cpAddColorButtonClass",cpRemoveColorButtonClass:"cpRemoveColorButtonClass",colorPicker:"colorPicker",cpPresetColors:"cpPresetColors"},outputs:{cpInputChange:"cpInputChange",cpToggleChange:"cpToggleChange",cpSliderChange:"cpSliderChange",cpSliderDragEnd:"cpSliderDragEnd",cpSliderDragStart:"cpSliderDragStart",colorPickerOpen:"colorPickerOpen",colorPickerClose:"colorPickerClose",colorPickerCancel:"colorPickerCancel",colorPickerSelect:"colorPickerSelect",colorPickerChange:"colorPickerChange",cpCmykColorChange:"cpCmykColorChange",cpPresetColorsChange:"cpPresetColorsChange"},exportAs:["ngxColorPicker"],features:[T.zb]}),e})(),ue=(()=>{class e{}return e.\u0275mod=T.Lb({type:e}),e.\u0275inj=T.Kb({factory:function(t){return new(t||e)},providers:[ce],imports:[[o.c]]}),e})(),de=(()=>{class e{}return e.\u0275mod=T.Lb({type:e}),e.\u0275inj=T.Kb({factory:function(t){return new(t||e)},imports:[[o.c,d.d,m.b,l.v,c.xb]]}),e})(),be=(()=>{class e{}return e.\u0275mod=T.Lb({type:e}),e.\u0275inj=T.Kb({factory:function(t){return new(t||e)},imports:[[o.c,s.a,u.c,d.d,b.c,h.b,m.b,p.c,l.v,de,c.xb,ue]]}),e})(),me=(()=>{class e{}return e.\u0275mod=T.Lb({type:e}),e.\u0275inj=T.Kb({factory:function(t){return new(t||e)},imports:[[o.c,be,s.a,O.g,n.f,r.b,f.c,m.b,u.c,l.v,h.b,v.b,g.a,c.xb,S.a]]}),e})(),pe=(()=>{class e{}return e.\u0275mod=T.Lb({type:e}),e.\u0275inj=T.Kb({factory:function(t){return new(t||e)},imports:[[o.c,be,s.a,u.c,d.d,b.c,m.b,p.c,l.v,de,c.xb,me,n.f]]}),e})();var he=i("mFH5");let ge=(()=>{class e{}return e.\u0275mod=T.Lb({type:e}),e.\u0275inj=T.Kb({factory:function(t){return new(t||e)},imports:[[o.c,s.a,O.g,he.q,n.f,g.a,v.b,c.xb]]}),e})();var fe=i("O4oY"),ve=i("g6G6"),Oe=i("ROBh"),Se=i("mWib"),Te=i("xVbo"),Ce=i("YtkY"),Me=i("TLy2"),Ae=i("4e/d"),Ee=i("6WTZ"),Re=i("8lHc"),Ie=i("J+dc");const ye=/^[a-zA-Z0-9]*$/;let ke=(()=>{class e{constructor(e){this.customerService=e,this.debounceTime=400,this.uniqueCode=e=>t=>Object(Re.a)(this.debounceTime).pipe(Object(Me.a)(()=>t.value!==e?this.customerService.exists({code:t.value}):Object(Oe.a)(!1)),Object(Ie.a)(1),Object(Ce.a)(e=>e?{uniqueCode:!0}:null)),this.uniqueDomain=e=>Object(Re.a)(this.debounceTime).pipe(Object(Me.a)(()=>this.customerService.exists({domain:e.value})),Object(Ie.a)(1),Object(Ce.a)(e=>e?{uniqueDomain:!0}:null))}}return e.\u0275fac=function(t){return new(t||e)(T.bc(fe.a))},e.\u0275prov=T.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Be=i("HYj3"),Ne=i("fAiE"),we=i("s2Ay");function xe(e,t){if(1&e&&T.Ob(0,"mat-spinner",10),2&e){const e=T.ic();T.oc("diameter",e.spinnerDiameter)}}function Pe(e,t){1&e&&(T.Tb(0,"div"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"SHARED.DOMAIN_INPUT.WRONG_FORMAT")))}function De(e,t){1&e&&(T.Tb(0,"div"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"SHARED.DOMAIN_INPUT.DOMAIN_ALREADY_EXIST")))}function Ue(e,t){1&e&&(T.Tb(0,"div"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"SHARED.DOMAIN_INPUT.DOMAIN_ALREADY_USED")))}function je(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",11),T.ec("click",(function(){T.Dc(e);const i=t.$implicit;return T.ic().setSelected(i)})),T.Tb(1,"div",12),T.Oc(2),T.Sb(),T.Tb(3,"div",13),T.ec("click",(function(){T.Dc(e);const i=t.$implicit;return T.ic().remove(i)})),T.Tb(4,"i",14),T.Oc(5,"clear"),T.Sb(),T.Sb(),T.Sb()}if(2&e){const e=t.$implicit,i=T.ic();T.Fb("active",e===i.selected),T.Bb(2),T.Pc(e)}}const Fe={provide:l.o,useExisting:Object(T.V)(()=>Le),multi:!0};let Le=(()=>{class e{constructor(){this.spinnerDiameter=25,this.selectedChange=new T.n,this.domains=[],this.separatorKeysCodes=[Ne.e],this.control=new l.e(null,[l.x.required,l.x.pattern(/^\s*([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}\s*$/)],null)}writeValue(e){this.domains=(e||[]).slice()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}add(){if(this.control.invalid||this.control.pending)return;const e=this.control.value.trim();this.domains.includes(e)||(this.domains.push(e),this.onChange(this.domains),this.control.reset(),this.selected||this.setSelected(e))}remove(e){const t=this.domains.indexOf(e);t>=0&&(e===this.selected&&this.setSelected(null),this.domains.splice(t,1),this.onChange(this.domains))}setSelected(e){this.selected=e,this.selectedChange.emit(this.selected)}buttonAddDisabled(){return this.control.pending||this.control.invalid||this.domainExists}get domainExists(){return this.domains.includes((this.control.value||"").trim())}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=T.Hb({type:e,selectors:[["app-domains-input"]],inputs:{placeholder:"placeholder",selected:"selected",spinnerDiameter:"spinnerDiameter"},outputs:{selectedChange:"selectedChange"},features:[T.Ab([Fe])],decls:16,vars:13,consts:[[1,"domain-input-control","d-flex","align-items-center"],[1,"domain-input-wrapper","d-flex","align-items-center"],[1,"mr-3","light"],["type","text","size","10",1,"vitamui-input",3,"formControl","blur","keydown.enter"],["class","ml-2",3,"diameter",4,"ngIf"],["type","button",1,"btn","primary","ml-2",3,"disabled","click"],[1,"vitamui-input-errors"],[4,"ngIf"],[1,"vitamui-chip-list","ml-4"],["class","vitamui-chip",3,"active","click",4,"ngFor","ngForOf"],[1,"ml-2",3,"diameter"],[1,"vitamui-chip",3,"click"],[1,"vitamui-chip-content"],[1,"vitamui-remove-chip",3,"click"],[1,"material-icons"]],template:function(e,t){1&e&&(T.Tb(0,"div",0),T.Tb(1,"div",1),T.Tb(2,"h4",2),T.Oc(3,"@"),T.Sb(),T.Tb(4,"input",3),T.ec("blur",(function(){return t.onTouched()}))("keydown.enter",(function(){return t.add()})),T.Sb(),T.Mc(5,xe,1,1,"mat-spinner",4),T.Sb(),T.Tb(6,"div"),T.Tb(7,"button",5),T.ec("click",(function(){return t.add()})),T.Oc(8),T.jc(9,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(10,"div",6),T.Mc(11,Pe,3,3,"div",7),T.Mc(12,De,3,3,"div",7),T.Mc(13,Ue,3,3,"div",7),T.Sb(),T.Tb(14,"div",8),T.Mc(15,je,6,3,"div",9),T.Sb()),2&e&&(T.Bb(4),T.Jc("width",280,"px"),T.oc("formControl",t.control),T.Cb("placeholder",t.placeholder),T.Bb(1),T.oc("ngIf",t.control.pending),T.Bb(2),T.oc("disabled",t.buttonAddDisabled()),T.Bb(1),T.Pc(T.kc(9,11,"COMMON.ADD")),T.Bb(3),T.oc("ngIf",null==t.control?null:t.control.hasError("pattern")),T.Bb(1),T.oc("ngIf",t.domainExists),T.Bb(1),T.oc("ngIf",!t.domainExists&&(null==t.control?null:t.control.hasError("uniqueDomain"))),T.Bb(2),T.oc("ngForOf",t.domains))},directives:[l.c,l.q,l.f,o.p,o.o,g.b],pipes:[we.d],styles:[""]}),e})();function Ve(e,t){1&e&&(T.Rb(0),T.Oc(1),T.jc(2,"translate"),T.Qb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"SHARED.DOMAIN_INPUT.DEFAULT_DOMAIN")))}function qe(e,t){if(1&e&&(T.Tb(0,"div"),T.Oc(1),T.Mc(2,Ve,3,3,"ng-container",0),T.Sb()),2&e){const e=t.$implicit,i=T.ic(2);T.Bb(1),T.Qc(" ",e," "),T.Bb(1),T.oc("ngIf",e===i.defaultDomain)}}function _e(e,t){1&e&&(T.Tb(0,"i",13),T.Oc(1,"edit"),T.Sb())}function Ge(e,t){1&e&&(T.Tb(0,"div"),T.Ob(1,"mat-spinner",14),T.Sb())}function He(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",15),T.Tb(1,"button",16),T.ec("click",(function(){return T.Dc(e),T.ic(2).confirm()})),T.Tb(2,"i",17),T.Oc(3,"check"),T.Sb(),T.Sb(),T.Tb(4,"button",18),T.ec("click",(function(){return T.Dc(e),T.ic(2).cancel()})),T.Tb(5,"i",17),T.Oc(6,"clear"),T.Sb(),T.Sb(),T.Sb()}if(2&e){const e=T.ic(2);T.Bb(1),T.oc("disabled",!e.canConfirm)}}const Ke=function(e){return{"margin-top":e}};function We(e,t){if(1&e){const e=T.Ub();T.Rb(0),T.Tb(1,"div",2,3),T.Tb(3,"div",4),T.ec("click",(function(){return T.Dc(e),T.ic().enterEditMode()})),T.Tb(4,"div",5),T.Tb(5,"label"),T.Oc(6),T.Sb(),T.Tb(7,"span",6),T.Mc(8,qe,3,2,"div",7),T.Sb(),T.Tb(9,"div",8),T.Tb(10,"app-domains-input",9),T.ec("selectedChange",(function(t){return T.Dc(e),T.ic().selected=t}))("click",(function(){return T.Dc(e),T.ic().onDomainInputClick()})),T.jc(11,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Mc(12,_e,2,0,"i",10),T.Mc(13,Ge,2,0,"div",0),T.Sb(),T.Sb(),T.Ob(14,"div",11),T.Mc(15,He,7,1,"ng-template",12),T.Qb()}if(2&e){const e=T.zc(2),t=T.ic();T.Bb(3),T.Fb("edit-mode",t.editMode),T.Bb(3),T.Pc(t.label),T.Bb(2),T.oc("ngForOf",t.control.value),T.Bb(1),T.oc("ngStyle",T.tc(17,Ke,t.label?"15px":"0")),T.Bb(1),T.Jc("width",100,"%"),T.oc("formControl",t.control)("selected",t.selected)("placeholder",T.kc(11,15,"CUSTOMER.INFORMATIONS.MODAL.DOMAINS_PLACEHOLDER")),T.Bb(2),T.oc("ngIf",!t.showSpinner&&!t.editMode),T.Bb(1),T.oc("ngIf",t.showSpinner),T.Bb(2),T.oc("cdkConnectedOverlayOpen",t.editMode)("cdkConnectedOverlayOrigin",e)("cdkConnectedOverlayPositions",t.positions)}}function Ye(e,t){1&e&&(T.Rb(0),T.Oc(1),T.jc(2,"translate"),T.Qb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"SHARED.DOMAIN_INPUT.DEFAULT_DOMAIN")))}function ze(e,t){if(1&e&&(T.Tb(0,"div"),T.Oc(1),T.Mc(2,Ye,3,3,"ng-container",0),T.Sb()),2&e){const e=t.$implicit,i=T.ic(2);T.Bb(1),T.Qc(" ",e," "),T.Bb(1),T.oc("ngIf",e===i.defaultDomain)}}function Qe(e,t){if(1&e&&(T.Tb(0,"div",19),T.Tb(1,"label"),T.Oc(2),T.Sb(),T.Mc(3,ze,3,2,"div",7),T.Sb()),2&e){const e=T.ic();T.Bb(2),T.Pc(e.label),T.Bb(1),T.oc("ngForOf",null==e.control?null:e.control.value)}}const Xe={provide:l.o,useExisting:Object(T.V)(()=>Je),multi:!0};let Je=(()=>{class e extends c.D{constructor(e){super(e),this.defaultDomainChange=new T.n,this.domainInputClicked=!1}set defaultDomain(e){this._defaultDomain=e,this.selected=e}get defaultDomain(){return this._defaultDomain}get canConfirm(){return this.editMode&&!this.control.pending&&this.control.valid&&(this.control.dirty||this.selected!==this.defaultDomain)}confirm(){this.canConfirm&&(super.confirm(),this.defaultDomain=this.selected,this.defaultDomainChange.emit(this.defaultDomain))}cancel(){super.cancel(),this.selected=this.defaultDomain}onClick(e){if(!this.editMode)return;if(this.domainInputClicked)return void(this.domainInputClicked=!1);const t=this.cdkConnectedOverlay.overlayRef;this.isInside(e,this.elementRef.nativeElement)||this.isInside(e,t.hostElement)||this.cancel()}onDomainInputClick(){this.domainInputClicked=!0}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(T.l))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-editable-domain-input"]],inputs:{defaultDomain:"defaultDomain"},outputs:{defaultDomainChange:"defaultDomainChange"},features:[T.Ab([Xe]),T.yb],decls:2,vars:2,consts:[[4,"ngIf"],["class","read-only-field disabled-input",4,"ngIf"],["cdkOverlayOrigin",""],["origin","cdkOverlayOrigin"],[1,"vitamui-input","editable-field",3,"click"],[1,"editable-field-content"],[1,"editable-field-text-content"],[4,"ngFor","ngForOf"],[1,"editable-field-control",3,"ngStyle"],["spinnerDiameter","18",3,"formControl","selected","placeholder","selectedChange","click"],["class","material-icons edit-icon",4,"ngIf"],[1,"vitamui-input-errors"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions"],[1,"material-icons","edit-icon"],[1,"vitamui-spinner","small"],[1,"editable-field-actions"],["type","button",1,"editable-field-confirm",3,"disabled","click"],[1,"material-icons"],["type","button",1,"editable-field-cancel",3,"click"],[1,"read-only-field","disabled-input"]],template:function(e,t){1&e&&(T.Mc(0,We,16,19,"ng-container",0),T.Mc(1,Qe,4,2,"div",1)),2&e&&(T.oc("ngIf",!t.disabled),T.Bb(1),T.oc("ngIf",t.disabled))},directives:[o.p,Be.b,o.o,o.q,Le,l.q,l.f,Be.a,g.b],pipes:[we.d],encapsulation:2}),e})();function Ze(e,t){if(1&e&&T.Ob(0,"vitamui-common-editable-option",24),2&e){const e=t.$implicit;T.oc("value",e.code)("content",e.name)}}function $e(e,t){if(1&e&&(T.Tb(0,"div",1),T.Tb(1,"div",13),T.Tb(2,"vitamui-common-editable-input",33),T.Zb(3,34),T.Tb(4,"vitamui-common-field-error",4),T.Xb(5,35),T.Sb(),T.Tb(6,"vitamui-common-field-error",5),T.Xb(7,36),T.Sb(),T.Tb(8,"vitamui-common-field-error",37),T.Xb(9,38),T.Sb(),T.Sb(),T.Sb(),T.Sb()),2&e){const e=T.ic();var i=null,o=null,n=null;T.Bb(2),T.oc("disabled",e.gdprReadOnlyStatus&&!(null!=e.form&&null!=(i=e.form.get("gdprAlert"))&&i.value))("validator",null==e.form||null==(o=e.form.get("gdprAlertDelay"))?null:o.validator)("asyncValidator",null==e.form||null==(n=e.form.get("gdprAlertDelay"))?null:n.asyncValidator)}}const et=function(e){return{max:e}};let tt=(()=>{class e{constructor(e,t,i,o,n){this.formBuilder=e,this.customerService=t,this.customerCreateValidators=i,this.countryService=o,this.startupService=n,this.customerCodeMaxLength=15,this.maxStreetLength=this.startupService.getConfigNumberValue("MAX_STREET_LENGTH"),this.form=this.formBuilder.group({id:[null,l.x.required],identifier:[{value:null,disabled:!0},l.x.required],code:[null,[l.x.required,l.x.pattern(ye),l.x.maxLength(this.customerCodeMaxLength)],this.customerCreateValidators.uniqueCode()],name:[null,l.x.required],companyName:[null,l.x.required],passwordRevocationDelay:[null,l.x.required],otp:[null],address:this.formBuilder.group({street:[null,[l.x.required,l.x.maxLength(this.maxStreetLength)]],zipCode:[null,l.x.required],city:[null,l.x.required],country:[null,l.x.required]}),internalCode:[null],language:[null,l.x.required],emailDomains:[null,l.x.required],defaultEmailDomain:[null,l.x.required],gdprAlert:!1,gdprAlertDelay:[72,[l.x.required,l.x.min(1),l.x.pattern(/^[0-9]{1,20}$/)]]})}set customer(e){this._customer=e,this.resetForm(this.customer)}get customer(){return this._customer}get gdprReadOnlyStatus(){return this._gdprReadOnlyStatus}set readOnly(e){e&&this.form.enabled?this.form.disable({emitEvent:!1}):this.form.disabled&&(this.form.enable({emitEvent:!1}),this._gdprReadOnlyStatus&&(this.form.get("gdprAlertDelay").disable({emitEvent:!1}),this.form.get("gdprAlert").disable({emitEvent:!1}),this.form.get("identifier").disable({emitEvent:!1})))}set gdprReadOnlyStatus(e){this._gdprReadOnlyStatus=e,e&&(this.form.get("gdprAlertDelay").disable({emitEvent:!1}),this.form.get("gdprAlert").disable({emitEvent:!1}))}ngOnInit(){this.sub=Object(ve.a)(this.form.statusChanges,this.form.valueChanges).pipe(Object(Se.a)(200),Object(Te.a)(()=>this.form.valid),Object(Ce.a)(()=>Object(c.Ib)(this.form.value,this.previousValue)),Object(Te.a)(e=>!Object(Ee.c)(e)),Object(Ce.a)(e=>Object(Ee.a)({id:this.customer.id},e)),Object(Me.a)(e=>this.customerService.patch(e).pipe(Object(Ae.a)(()=>Object(Oe.a)(null))))).subscribe(e=>this.resetForm(e)),this.countryService.getAvailableCountries().subscribe(e=>{this.countries=e})}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}resetForm(e){e&&this.form.get("code").setAsyncValidators(this.customerCreateValidators.uniqueCode(e.code)),this.form.reset(e,{emitEvent:!1}),this.previousValue=this.form.value}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(l.d),T.Nb(fe.a),T.Nb(ke),T.Nb(c.u),T.Nb(c.lb))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-information-tab"]],inputs:{customer:"customer",readOnly:"readOnly",gdprReadOnlyStatus:"gdprReadOnlyStatus"},decls:102,vars:130,consts:function(){return[[3,"formGroup"],[1,"row"],[1,"col-6","form-control"],["formControlName","code",3,"label","validator","asyncValidator"],["errorKey","required"],["errorKey","pattern"],["errorKey","maxlength"],["errorKey","uniqueCode"],[1,"col-6"],["formControlName","identifier","maxlength","12",3,"label","validator","asyncValidator"],["formControlName","name","maxlength","100",3,"label","validator","asyncValidator"],["formControlName","companyName","maxlength","250",3,"label","validator","asyncValidator"],["formGroupName","address"],[1,"col-12","form-control"],["formControlName","street",3,"maxlength","label","validator","asyncValidator"],["formControlName","zipCode","maxlength","10",3,"label","validator","asyncValidator"],["formControlName","city","maxlength","100",3,"label","validator","asyncValidator"],["formControlName","country",3,"label","validator","asyncValidator"],[3,"value","content",4,"ngFor","ngForOf"],["formControlName","internalCode","maxlength","20",3,"label"],["formControlName","language",3,"label","validator","asyncValidator"],["value","ENGLISH",3,"content"],["value","FRENCH",3,"content"],["formControlName","passwordRevocationDelay",3,"label","validator","asyncValidator"],[3,"value","content"],["formControlName","otp",3,"label","validator","asyncValidator"],["value","DISABLED",3,"content"],["value","OPTIONAL",3,"content"],["value","MANDATORY",3,"content"],["formControlName","emailDomains",3,"label","validator","asyncValidator","defaultDomain","defaultDomainChange"],["formControlName","gdprAlert",3,"disabled"],$localize`:gdprAlert Account@@accountgdprAlertToggleLabelfef8b7e7e612dc909f0c857e6c8f471fb2c9dabc9046380844444205031: Alerte sur les utilisateurs inactifs `,["class","row",4,"ngIf"],["formControlName","gdprAlertDelay",3,"disabled","validator","asyncValidator",6,"label"],["label",$localize`:gdprAlertDelay@@CustomerDetailLabelgdprAlertDelay9d2c4acce4ab9cbe94c7666eb7e859cc524ce2353570467827955734463:Dure d'alerte sur les utilisateurs inactifs (mois)`],$localize`:Required field error hint@@formErrorRequiredFieldAndMinValuedd5c3f479773a9f5e40443185ec849b8ddeeb741572853113484173122:Champ obligatoire et il faut une valeur suprieure  0 `,$localize`:Wrong format error hint@@formErrorFormatFieldc7444ff7ebfc17980e6acf35929818051c7b0e6b8276310730326317481:Format incorrecte `,["errorKey","min"],$localize`:Required a min value error hint@@formErrorRequiredMinValued275ed6117f6bf6ea984fa3c8dec0dd302886ed34728329757513770159:Il faut une valeur suprieure  0 `]},template:function(e,t){if(1&e&&(T.Tb(0,"form",0),T.Tb(1,"div",1),T.Tb(2,"div",2),T.Tb(3,"vitamui-common-editable-input",3),T.jc(4,"translate"),T.Tb(5,"vitamui-common-field-error",4),T.Oc(6),T.jc(7,"translate"),T.Sb(),T.Tb(8,"vitamui-common-field-error",5),T.Oc(9),T.jc(10,"translate"),T.Sb(),T.Tb(11,"vitamui-common-field-error",6),T.Oc(12),T.jc(13,"translate"),T.Sb(),T.Tb(14,"vitamui-common-field-error",7),T.Oc(15),T.jc(16,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(17,"div",8),T.Ob(18,"vitamui-common-editable-input",9),T.jc(19,"translate"),T.Sb(),T.Sb(),T.Tb(20,"div",1),T.Tb(21,"div",2),T.Tb(22,"vitamui-common-editable-input",10),T.jc(23,"translate"),T.Tb(24,"vitamui-common-field-error",4),T.Oc(25),T.jc(26,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(27,"div",2),T.Tb(28,"vitamui-common-editable-input",11),T.jc(29,"translate"),T.Tb(30,"vitamui-common-field-error",4),T.Oc(31),T.jc(32,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Rb(33,12),T.Tb(34,"div",1),T.Tb(35,"div",13),T.Tb(36,"vitamui-common-editable-input",14),T.jc(37,"translate"),T.Tb(38,"vitamui-common-field-error",4),T.Oc(39),T.jc(40,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(41,"div",1),T.Tb(42,"div",2),T.Tb(43,"vitamui-common-editable-input",15),T.jc(44,"translate"),T.Tb(45,"vitamui-common-field-error",4),T.Oc(46),T.jc(47,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(48,"div",2),T.Tb(49,"vitamui-common-editable-input",16),T.jc(50,"translate"),T.Tb(51,"vitamui-common-field-error",4),T.Oc(52),T.jc(53,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(54,"div",1),T.Tb(55,"div",13),T.Tb(56,"vitamui-common-editable-select",17),T.jc(57,"translate"),T.Mc(58,Ze,1,2,"vitamui-common-editable-option",18),T.Sb(),T.Sb(),T.Sb(),T.Qb(),T.Tb(59,"div",1),T.Tb(60,"div",13),T.Ob(61,"vitamui-common-editable-input",19),T.jc(62,"translate"),T.Sb(),T.Sb(),T.Tb(63,"div",1),T.Tb(64,"div",13),T.Tb(65,"vitamui-common-editable-select",20),T.jc(66,"translate"),T.Ob(67,"vitamui-common-editable-option",21),T.jc(68,"translate"),T.Ob(69,"vitamui-common-editable-option",22),T.jc(70,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(71,"div",1),T.Tb(72,"div",13),T.Tb(73,"vitamui-common-editable-select",23),T.jc(74,"translate"),T.Ob(75,"vitamui-common-editable-option",24),T.jc(76,"translate"),T.Ob(77,"vitamui-common-editable-option",24),T.jc(78,"translate"),T.Ob(79,"vitamui-common-editable-option",24),T.jc(80,"translate"),T.Ob(81,"vitamui-common-editable-option",24),T.jc(82,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(83,"div",1),T.Tb(84,"div",13),T.Tb(85,"vitamui-common-editable-toggle-group",25),T.jc(86,"translate"),T.Ob(87,"vitamui-common-editable-button-toggle",26),T.jc(88,"translate"),T.Ob(89,"vitamui-common-editable-button-toggle",27),T.jc(90,"translate"),T.Ob(91,"vitamui-common-editable-button-toggle",28),T.jc(92,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(93,"div",1),T.Tb(94,"div",13),T.Tb(95,"app-editable-domain-input",29),T.ec("defaultDomainChange",(function(e){return t.form.get("defaultEmailDomain").setValue(e)})),T.jc(96,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(97,"div",1),T.Tb(98,"div",13),T.Tb(99,"vitamui-common-slide-toggle",30),T.Xb(100,31),T.Sb(),T.Sb(),T.Sb(),T.Mc(101,$e,10,3,"div",32),T.Sb()),2&e){var i=null,o=null,n=null,r=null,a=null,c=null,s=null,l=null,u=null,d=null,b=null,m=null,p=null,h=null,g=null,f=null,v=null,O=null,S=null,C=null,M=null,A=null,E=null,R=null,I=null;T.oc("formGroup",t.form),T.Bb(3),T.oc("label",T.kc(4,65,"CUSTOMER.INFORMATIONS.CODE"))("validator",null==t.form||null==(i=t.form.get("code"))?null:i.validator)("asyncValidator",null==t.form||null==(o=t.form.get("code"))?null:o.asyncValidator),T.Bb(3),T.Pc(T.kc(7,67,"COMMON.ERROR.REQUIRED")),T.Bb(3),T.Pc(T.kc(10,69,"COMMON.ERROR.WRONG_FORMAT")),T.Bb(3),T.Pc(T.lc(13,71,"COMMON.ERROR.STRING_MAX_LENGTH",T.tc(128,et,t.customerCodeMaxLength))),T.Bb(3),T.Pc(T.kc(16,74,"CUSTOMER.INFORMATIONS.CODE_ALREADY_EXIST")),T.Bb(3),T.oc("label",T.kc(19,76,"COMMON.ID"))("validator",null==t.form||null==(n=t.form.get("identifier"))?null:n.validator)("asyncValidator",null==t.form||null==(r=t.form.get("identifier"))?null:r.asyncValidator),T.Bb(4),T.oc("label",T.kc(23,78,"CUSTOMER.INFORMATIONS.NAME"))("validator",null==t.form||null==(a=t.form.get("name"))?null:a.validator)("asyncValidator",null==t.form||null==(c=t.form.get("name"))?null:c.asyncValidator),T.Bb(3),T.Qc("",T.kc(26,80,"COMMON.ERROR.REQUIRED")," "),T.Bb(3),T.oc("label",T.kc(29,82,"CUSTOMER.INFORMATIONS.SOCIAL_REASON"))("validator",null==t.form||null==(s=t.form.get("companyName"))?null:s.validator)("asyncValidator",null==t.form||null==(l=t.form.get("companyName"))?null:l.asyncValidator),T.Bb(3),T.Qc("",T.kc(32,84,"COMMON.ERROR.REQUIRED")," "),T.Bb(5),T.pc("maxlength",t.maxStreetLength),T.oc("label",T.kc(37,86,"COMMON.ADRESS.STREET"))("validator",null==t.form||null==(u=t.form.get("address.street"))?null:u.validator)("asyncValidator",null==t.form||null==(d=t.form.get("address.street"))?null:d.asyncValidator),T.Bb(3),T.Qc("",T.kc(40,88,"COMMON.ERROR.REQUIRED")," "),T.Bb(4),T.oc("label",T.kc(44,90,"COMMON.ADRESS.ZIPCODE"))("validator",null==t.form||null==(b=t.form.get("address.zipCode"))?null:b.validator)("asyncValidator",null==t.form||null==(m=t.form.get("address.zipCode"))?null:m.asyncValidator),T.Bb(3),T.Qc("",T.kc(47,92,"COMMON.ERROR.REQUIRED")," "),T.Bb(3),T.oc("label",T.kc(50,94,"COMMON.ADRESS.CITY"))("validator",null==t.form||null==(p=t.form.get("address.city"))?null:p.validator)("asyncValidator",null==t.form||null==(h=t.form.get("address.city"))?null:h.asyncValidator),T.Bb(3),T.Qc("",T.kc(53,96,"COMMON.ERROR.REQUIRED")," "),T.Bb(4),T.oc("label",T.kc(57,98,"COMMON.ADRESS.COUNTRY"))("validator",null==t.form||null==(g=t.form.get("address.country"))?null:g.validator)("asyncValidator",null==t.form||null==(f=t.form.get("address.country"))?null:f.asyncValidator),T.Bb(2),T.oc("ngForOf",t.countries),T.Bb(3),T.oc("label",T.kc(62,100,"CUSTOMER.INFORMATIONS.INTERNAL_CODE")),T.Bb(4),T.oc("label",T.kc(66,102,"CUSTOMER.INFORMATIONS.DEFAULT_LANGUAGE"))("validator",null==t.form||null==(v=t.form.get("language"))?null:v.validator)("asyncValidator",null==t.form||null==(O=t.form.get("language"))?null:O.asyncValidator),T.Bb(2),T.oc("content",T.kc(68,104,"COMMON.LANGUAGE.ENGLISH")),T.Bb(2),T.oc("content",T.kc(70,106,"COMMON.LANGUAGE.FRENCH")),T.Bb(4),T.oc("label",T.kc(74,108,"CUSTOMER.INFORMATIONS.PASSWORD_DURATION"))("validator",null==t.form||null==(S=t.form.get("passwordRevocationDelay"))?null:S.validator)("asyncValidator",null==t.form||null==(C=t.form.get("passwordRevocationDelay"))?null:C.asyncValidator),T.Bb(2),T.oc("value",3)("content",T.kc(76,110,"CUSTOMER.INFORMATIONS.PWD_REVOCATION_THREE")),T.Bb(2),T.oc("value",6)("content",T.kc(78,112,"CUSTOMER.INFORMATIONS.PWD_REVOCATION_SIX")),T.Bb(2),T.oc("value",9)("content",T.kc(80,114,"CUSTOMER.INFORMATIONS.PWD_REVOCATION_NINE")),T.Bb(2),T.oc("value",12)("content",T.kc(82,116,"CUSTOMER.INFORMATIONS.PWD_REVOCATION_TWELVE")),T.Bb(4),T.oc("label",T.kc(86,118,"CUSTOMER.INFORMATIONS.VALIDATIONS"))("validator",null==t.form||null==(M=t.form.get("otp"))?null:M.validator)("asyncValidator",null==t.form||null==(A=t.form.get("otp"))?null:A.asyncValidator),T.Bb(2),T.oc("content",T.kc(88,120,"CUSTOMER.INFORMATIONS.OTP_DISABLED")),T.Bb(2),T.oc("content",T.kc(90,122,"CUSTOMER.INFORMATIONS.OTP_OPTIONAL")),T.Bb(2),T.oc("content",T.kc(92,124,"CUSTOMER.INFORMATIONS.OTP_MANDATORY")),T.Bb(4),T.oc("label",T.kc(96,126,"CUSTOMER.INFORMATIONS.DOMAINS"))("validator",null==t.form||null==(E=t.form.get("emailDomains"))?null:E.validator)("asyncValidator",null==t.form||null==(R=t.form.get("emailDomains"))?null:R.asyncValidator)("defaultDomain",t.form.get("defaultEmailDomain").value),T.Bb(4),T.oc("disabled",t.gdprReadOnlyStatus),T.Bb(2),T.oc("ngIf",null==t.form||null==(I=t.form.get("gdprAlert"))?null:I.value)}},directives:[l.y,l.r,l.i,c.F,l.q,l.g,c.zb,l.l,l.j,c.I,o.o,c.H,c.K,c.B,Je,c.ac,o.p],pipes:[we.d],styles:[""]}),e})();var it=i("f7+R"),ot=i("ZTXN"),nt=i("8j5Y"),rt=i("vobO");let at=(()=>{class e extends c.o{constructor(e,t){super(e,t+"/providers")}create(e,t){const i=new FormData;return e.keystore&&e.idpMetadata&&(i.append("keystore",e.keystore,e.keystore.name),i.append("idpMetadata",e.idpMetadata,e.idpMetadata.name)),i.append("provider",JSON.stringify({protocoleType:e.protocoleType,customerId:e.customerId,name:e.name,internal:e.internal,keystorePassword:e.keystorePassword,patterns:e.patterns,enabled:e.enabled,mailAttribute:e.mailAttribute,identifierAttribute:e.identifierAttribute,authnRequestBinding:e.authnRequestBinding,authnRequestSigned:e.authnRequestSigned,wantsAssertionsSigned:e.wantsAssertionsSigned,propagateLogout:e.propagateLogout,maximumAuthenticationLifetime:e.maximumAuthenticationLifetime,autoProvisioningEnabled:e.autoProvisioningEnabled,clientId:e.clientId,clientSecret:e.clientSecret,discoveryUrl:e.discoveryUrl,scope:e.scope,preferredJwsAlgorithm:e.preferredJwsAlgorithm,customParams:e.customParams,useState:e.useState,useNonce:e.useNonce,usePkce:e.usePkce})),this.http.post(this.apiUrl,i,{headers:t})}patch(e,t){return super.patch(e,t)}patchProviderIdpMetadata(e,t,i){const o=new FormData;return o.append("idpMetadata",t,t.name),o.append("provider",JSON.stringify({id:e})),this.http.patch(this.apiUrl+"/"+e+"/idpMetadata",o,{headers:i})}patchProviderSpMetadata(e,t,i){const o=new FormData;return o.append("spMetadata",t,t.name),o.append("provider",JSON.stringify({id:e})),this.http.patch(this.apiUrl+"/"+e+"/spMetadata",o,{headers:i})}patchProviderKeystore(e,t,i,o){const n=new FormData;return n.append("keystore",t,t.name),n.append("provider",JSON.stringify({id:e,keystorePassword:i})),this.http.patch(this.apiUrl+"/"+e+"/keystore",n,{headers:o})}getAll(e,t){return this.http.get(this.apiUrl,{params:e,headers:t})}getFileByUrl(e){return this.http.get(e,{observe:"response",responseType:"blob"})}buildMetadataUrl(e){return this.apiUrl+`/${e}/idpMetadata`}buildSpMetadataUrl(e){return this.apiUrl+`/${e}/spMetadata`}}return e.\u0275fac=function(t){return new(t||e)(T.bc(rt.c),T.bc(c.n))},e.\u0275prov=T.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ct=(()=>{class e{constructor(e,t){this.providerApi=e,this.snackBarService=t,this.updated=new ot.a}create(e){return this.providerApi.create(e).pipe(Object(Ce.a)(e=>this.addMetadataUrl(e)),Object(Ce.a)(e=>this.addSpMetadataUrl(e)),Object(nt.a)(e=>{this.snackBarService.open({message:"SHARED.SNACKBAR.PROVIDER_CREATE",translateParams:{param1:e.name}})},e=>{this.snackBarService.open({message:e.error.message,translate:!1})}))}patch(e){return this.providerApi.patch(e).pipe(Object(Ce.a)(e=>this.addMetadataUrl(e)),Object(Ce.a)(e=>this.addSpMetadataUrl(e)),Object(nt.a)(e=>this.updated.next(e)),Object(nt.a)(e=>{this.snackBarService.open({message:"SHARED.SNACKBAR.PROVIDER_UPDATE",translateParams:{param1:e.name}})},e=>{this.snackBarService.open({message:e.error.message,translate:!1})}))}updateMetadataFile(e,t){return this.providerApi.patchProviderIdpMetadata(e,t).pipe(Object(Ce.a)(e=>this.addMetadataUrl(e)),Object(Ce.a)(e=>this.addSpMetadataUrl(e)),Object(nt.a)(e=>this.updated.next(e)),Object(nt.a)(e=>{this.snackBarService.open({message:"SHARED.SNACKBAR.PROVIDER_UPDATE",translateParams:{param1:e.name}})},e=>{this.snackBarService.open({message:e.error.message,translate:!1})}))}updateKeystore(e,t,i){return this.providerApi.patchProviderKeystore(e,t,i).pipe(Object(Ce.a)(e=>this.addMetadataUrl(e)),Object(nt.a)(e=>this.updated.next(e)),Object(nt.a)(e=>{this.snackBarService.open({message:"SHARED.SNACKBAR.PROVIDER_UPDATE",translateParams:{param1:e.name}})},e=>{this.snackBarService.open({message:e.error.message,translate:!1})}))}updateSpMetadataFile(e,t){return this.providerApi.patchProviderSpMetadata(e,t).pipe(Object(Ce.a)(e=>this.addSpMetadataUrl(e)),Object(nt.a)(e=>this.updated.next(e)),Object(nt.a)(e=>{this.snackBarService.open({message:"SHARED.SNACKBAR.PROVIDER_UPDATE",translateParams:{param1:e.name}})},e=>{this.snackBarService.open({message:e.error.message,translate:!1})}))}getAll(e){const t=[];e&&t.push({key:"customerId",value:e,operator:c.W.equals});const i={criteria:t},o=(new rt.g).set("criteria",JSON.stringify(i));return this.providerApi.getAll(o).pipe(Object(Ce.a)(e=>e.map(e=>this.addMetadataUrl(e))),Object(Ce.a)(e=>e.map(e=>this.addSpMetadataUrl(e))))}getDomainByCustomerId(e){return this.getAll(e).pipe(Object(Ce.a)(e=>e.reduce((e,t)=>e.concat(t.patterns.map(e=>e.replace(".*@",""))),[])))}addMetadataUrl(e){return e.idpMetadataUrl=this.providerApi.buildMetadataUrl(e.id),e}addSpMetadataUrl(e){return e.spMetadataUrl=this.providerApi.buildSpMetadataUrl(e.id),e}}return e.\u0275fac=function(t){return new(t||e)(T.bc(at),T.bc(c.Ab))},e.\u0275prov=T.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var st=function(e){return e.SAML="SAML",e.OIDC="OIDC",e.CERTIFICAT="CERTIFICAT",e}({}),lt=["","HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES256K","ES384","ES512","PS256","PS384","PS512"],ut=i("IrDo");const dt=["select"];function bt(e,t){1&e&&(T.Tb(0,"span"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"SHARED.PATTERN_ALREADY_USED")))}function mt(e,t){if(1&e&&(T.Tb(0,"mat-option",11),T.Oc(1),T.Mc(2,bt,3,3,"span",12),T.Sb()),2&e){const e=t.$implicit;T.oc("value",e.value)("disabled",e.disabled),T.Bb(1),T.Qc(" ",e.value," "),T.Bb(1),T.oc("ngIf",null==e?null:e.disabled)}}function pt(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",13),T.Tb(1,"div",14),T.Oc(2),T.Sb(),T.Tb(3,"div",15),T.ec("click",(function(){T.Dc(e);const i=t.$implicit;return T.ic().remove(i)})),T.Tb(4,"i",6),T.Oc(5,"clear"),T.Sb(),T.Sb(),T.Sb()}if(2&e){const e=t.$implicit;T.Bb(2),T.Pc(e)}}const ht={provide:l.o,useExisting:Object(T.V)(()=>gt),multi:!0};let gt=(()=>{class e{constructor(){this.vitamuiMiniMode=!1,this.control=new l.e}writeValue(e){this.patterns=(e||[]).slice()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}add(){this.controlValueValid()&&(this.patterns.push(this.control.value),this.onChange(this.patterns),this.enabledOptions.length<=0&&this.control.enabled&&this.control.disable())}remove(e){this.patterns=this.patterns.filter(t=>t!==e),this.onChange(this.patterns),this.enabledOptions.length>0&&this.control.disabled&&this.control.enable()}get availableOptions(){return(this.options||[]).filter(e=>this.isAvailable(e.value))}get enabledOptions(){return this.availableOptions.filter(e=>!e.disabled)}controlValueValid(){return!(this.patterns||[]).includes(this.control.value)&&!!this.control.value}isAvailable(e){return!this.patterns.includes(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=T.Hb({type:e,selectors:[["app-pattern"]],viewQuery:function(e,t){var i;1&e&&T.Ic(dt,!0),2&e&&T.yc(i=T.fc())&&(t.select=i.first)},inputs:{options:"options",vitamuiMiniMode:"vitamuiMiniMode"},features:[T.Ab([ht])],decls:15,vars:15,consts:[[1,"d-flex","mt-2"],[1,"vitamui-mat-select","d-flex","align-items-center"],["required","","panelClass","vitamui-mat-select",3,"formControl","placeholder"],["select",""],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"select-arrow"],[1,"material-icons"],[1,"btn","primary","btn-circle","mt-2",3,"disabled","click"],[1,"vitamui-icon","vitamui-icon-add"],[1,"mt-3","vitamui-chip-list"],["class","vitamui-chip",4,"ngFor","ngForOf"],[3,"value","disabled"],[4,"ngIf"],[1,"vitamui-chip"],[1,"vitamui-chip-content"],[1,"vitamui-remove-chip",3,"click"]],template:function(e,t){1&e&&(T.Tb(0,"div",0),T.Tb(1,"mat-form-field",1),T.Tb(2,"mat-select",2,3),T.jc(4,"translate"),T.Mc(5,mt,3,4,"mat-option",4),T.Sb(),T.Tb(6,"div",5),T.Tb(7,"i",6),T.Oc(8,"keyboard_arrow_up"),T.Sb(),T.Tb(9,"i",6),T.Oc(10,"keyboard_arrow_down"),T.Sb(),T.Sb(),T.Sb(),T.Tb(11,"button",7),T.ec("click",(function(){return t.add()})),T.Ob(12,"i",8),T.Sb(),T.Sb(),T.Tb(13,"div",9),T.Mc(14,pt,6,1,"div",10),T.Sb()),2&e&&(T.Fb("pattern-mini",t.vitamuiMiniMode),T.Bb(1),T.Jc("width",50,"%"),T.Fb("vitamui-mat-select-mini",t.vitamuiMiniMode),T.Bb(1),T.oc("formControl",t.control)("placeholder",T.kc(4,13,"SHARED.PATTERN")),T.Bb(3),T.oc("ngForOf",t.availableOptions),T.Bb(6),T.Fb("btn-small",t.vitamuiMiniMode),T.oc("disabled",!t.controlValueValid()),T.Bb(3),T.oc("ngForOf",t.patterns))},directives:[d.b,m.a,l.w,l.q,l.f,o.o,he.k,o.p],pipes:[we.d],styles:["[_nghost-%COMP%]  mat-form-field{width:50%}[_nghost-%COMP%]  .mat-form-field-wrapper{width:83%}[_nghost-%COMP%]  .mat-form-field-flex{height:100%}[_nghost-%COMP%]  .mat-form-field-infix{padding:.5rem 0!important}[_nghost-%COMP%]  .mat-form-field-label span{line-height:15px}"]}),e})();function ft(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",9),T.Tb(1,"div",10),T.Oc(2),T.Sb(),T.Tb(3,"div",11),T.ec("click",(function(){T.Dc(e);const i=t.$implicit;return T.ic().remove(i.key)})),T.Tb(4,"i",12),T.Oc(5,"clear"),T.Sb(),T.Sb(),T.Sb()}if(2&e){const e=t.$implicit;T.Bb(2),T.Rc("",e.key," : ",e.value,"")}}const vt=[[["vitamui-common-field-error"]]],Ot=["vitamui-common-field-error"],St={provide:l.o,useExisting:Object(T.V)(()=>Tt),multi:!0};let Tt=(()=>{class e{constructor(){this.spinnerDiameter=25,this.values=new Map,this.separatorKeysCodes=[Ne.e],this.controlKey=new l.e(null),this.controlValue=new l.e(null)}ngAfterContentInit(){this.controlKey.statusChanges.subscribe(()=>{this.errors.forEach(e=>{e.show=!!this.controlKey.errors&&!!this.controlKey.errors[e.errorKey]})})}writeValue(e){null!=e&&Object.keys(e).forEach(t=>{this.values.set(t,e[t])})}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}add(){var e,t;if(this.controlKey.invalid||this.controlKey.pending)return;const i=null===(e=this.controlKey.value)||void 0===e?void 0:e.trim(),o=null===(t=this.controlValue.value)||void 0===t?void 0:t.trim();!this.values.get(i)&&i&&o&&(this.values.set(i,o),this.onChange(this.strMapToObj(this.values)),this.controlKey.reset(),this.controlValue.reset())}remove(e){this.values.get(e)&&(this.values.delete(e),this.onChange(this.strMapToObj(this.values)))}buttonAddDisabled(){var e,t;return!(null===(e=this.controlValue.value)||void 0===e?void 0:e.trim())||!(null===(t=this.controlKey.value)||void 0===t?void 0:t.trim())||this.valueExists}get valueExists(){return!this.controlKey.value||!!this.values.get(this.controlKey.value)}strMapToObj(e){const t=Object.create(null);for(const[i,o]of e)t[i]=o;return t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=T.Hb({type:e,selectors:[["app-custom-params"]],contentQueries:function(e,t,i){var o;1&e&&T.Gb(i,c.zb,!1),2&e&&T.yc(o=T.fc())&&(t.errors=o)},inputs:{keyPlaceholder:"keyPlaceholder",valuePlaceholder:"valuePlaceholder",spinnerDiameter:"spinnerDiameter",selectedValues:"selectedValues"},features:[T.Ab([St])],ngContentSelectors:Ot,decls:15,vars:15,consts:[[1,"row","mt-2"],[1,"col-9"],[1,"p-0","col-5",3,"formControl","placeholder","blur","keydown.enter"],[1,"p-0","col-5","ml-4",3,"formControl","placeholder","blur","keydown.enter"],[1,"col-2"],["type","button",1,"btn","primary",3,"disabled","click"],[1,"vitamui-input-errors"],[1,"vitamui-chip-list","mt-1"],["class","vitamui-chip",4,"ngFor","ngForOf"],[1,"vitamui-chip"],[1,"vitamui-chip-content"],[1,"vitamui-remove-chip",3,"click"],[1,"material-icons"]],template:function(e,t){1&e&&(T.nc(vt),T.Tb(0,"div",0),T.Tb(1,"div",1),T.Tb(2,"vitamui-common-input",2),T.ec("blur",(function(){return t.onTouched()}))("keydown.enter",(function(){return t.add()})),T.jc(3,"translate"),T.Sb(),T.Tb(4,"vitamui-common-input",3),T.ec("blur",(function(){return t.onTouched()}))("keydown.enter",(function(){return t.add()})),T.jc(5,"translate"),T.Sb(),T.Sb(),T.Tb(6,"div",4),T.Tb(7,"button",5),T.ec("click",(function(){return t.add()})),T.Oc(8),T.jc(9,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(10,"div",6),T.mc(11),T.Sb(),T.Tb(12,"div",7),T.Mc(13,ft,6,2,"div",8),T.jc(14,"keyvalue"),T.Sb()),2&e&&(T.Bb(2),T.oc("formControl",t.controlKey)("placeholder",T.kc(3,7,t.keyPlaceholder)),T.Bb(2),T.oc("formControl",t.controlValue)("placeholder",T.kc(5,9,t.valuePlaceholder)),T.Bb(3),T.oc("disabled",t.buttonAddDisabled()),T.Bb(1),T.Pc(T.kc(9,11,"COMMON.ADD")),T.Bb(5),T.oc("ngForOf",T.kc(14,13,t.values)))},directives:[c.Qb,l.q,l.f,o.o],pipes:[we.d,o.i],styles:["[_nghost-%COMP%]{width:100%;display:block}mat-chip[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], mat-chip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.list-input-control[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:stretch}.list-input-control[_ngcontent-%COMP%]   .list-input-wrapper[_ngcontent-%COMP%]{position:relative;margin-right:15px;flex-grow:0.5}.list-input-control[_ngcontent-%COMP%]   .list-input-wrapper[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{position:absolute;right:12px;top:12px}.vitamui-chip-list[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.5rem}.list-input-mini[_nghost-%COMP%]   .list-input-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .list-input-mini[_nghost-%COMP%]   .list-input-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:34px;border-radius:17px}.list-input-mini[_nghost-%COMP%]   .list-input-control[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:18px}.list-input-mini[_nghost-%COMP%]   .list-input-control[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{right:8px;top:8px}.list-input-mini[_nghost-%COMP%]   .vitamui-chip-list[_ngcontent-%COMP%]{padding-left:27px}.required-marker[_ngcontent-%COMP%]{color:red}.vitamui-input[_ngcontent-%COMP%]{width:45%!important}"]}),e})();function Ct(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"COMMON.ERROR.REQUIRED")))}function Mt(e,t){if(1&e&&(T.Rb(0),T.Mc(1,Ct,3,3,"vitamui-common-input-error",15),T.Qb()),2&e){const e=T.ic();var i=null;T.Bb(1),T.oc("ngIf",!(null==e.form||null==(i=e.form.get("name"))||null==i.errors||!i.errors.required))}}function At(e,t){if(1&e){const e=T.Ub();T.Tb(0,"button",26),T.ec("click",(function(){return T.Dc(e),T.ic().onSubmit()})),T.Oc(1),T.jc(2,"translate"),T.Sb()}if(2&e){const e=T.ic();T.oc("disabled",e.disableNextButton),T.Bb(1),T.Qc(" ",T.kc(2,2,"COMMON.SUBMIT")," ")}}function Et(e,t){if(1&e&&(T.Tb(0,"button",27),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e){const e=T.ic();T.oc("disabled",e.disableNextButton),T.Bb(1),T.Qc(" ",T.kc(2,2,"COMMON.NEXT")," ")}}function Rt(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"COMMON.ERROR.REQUIRED")))}function It(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"CUSTOMER.SSO.MODAL.WRONG_PASSWORD")))}function yt(e,t){if(1&e&&(T.Rb(0),T.Mc(1,Rt,3,3,"vitamui-common-input-error",15),T.Mc(2,It,3,3,"vitamui-common-input-error",15),T.Qb()),2&e){const e=T.ic(3);var i=null,o=null;T.Bb(1),T.oc("ngIf",!(null==e.form||null==(i=e.form.get("keystorePassword"))||null==i.errors||!i.errors.required)),T.Bb(1),T.oc("ngIf",!(null==e.form||null==(o=e.form.get("keystorePassword"))||null==o.errors||!o.errors.badPassword))}}function kt(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",4),T.Tb(1,"div",5),T.Oc(2),T.jc(3,"translate"),T.Sb(),T.Tb(4,"div",30),T.Oc(5),T.jc(6,"translate"),T.Sb(),T.Tb(7,"div",31),T.Tb(8,"div",32),T.Tb(9,"mat-button-toggle-group",33,9),T.Tb(11,"mat-button-toggle",34),T.Oc(12,"GET "),T.Sb(),T.Tb(13,"mat-button-toggle",35),T.Oc(14,"POST "),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(15,"div",31),T.Tb(16,"div",32),T.Tb(17,"label",36),T.Tb(18,"span",37),T.Oc(19),T.jc(20,"translate"),T.Sb(),T.Tb(21,"div",38),T.Oc(22),T.Sb(),T.Sb(),T.Tb(23,"input",39),T.ec("change",(function(t){return T.Dc(e),T.ic(2).setKeystore(t.target.files)})),T.Sb(),T.Sb(),T.Sb(),T.Tb(24,"div",31),T.Tb(25,"vitamui-common-input",40),T.jc(26,"translate"),T.Mc(27,yt,3,2,"ng-container",15),T.Sb(),T.Sb(),T.Tb(28,"div",41),T.Tb(29,"label",42),T.Tb(30,"span",37),T.Oc(31),T.jc(32,"translate"),T.Sb(),T.Tb(33,"div",38),T.Oc(34),T.Sb(),T.Sb(),T.Tb(35,"input",43),T.ec("change",(function(t){return T.Dc(e),T.ic(2).setIdpMetadata(t.target.files)})),T.Sb(),T.Sb(),T.Tb(36,"div",44),T.Ob(37,"vitamui-common-input",45),T.jc(38,"translate"),T.Tb(39,"div",46),T.Tb(40,"vitamui-common-slide-toggle",47),T.Tb(41,"span"),T.Oc(42),T.jc(43,"translate"),T.Sb(),T.Sb(),T.Tb(44,"vitamui-common-slide-toggle",48),T.Tb(45,"span"),T.Oc(46),T.jc(47,"translate"),T.Sb(),T.Sb(),T.Tb(48,"vitamui-common-slide-toggle",49),T.Tb(49,"span"),T.Oc(50),T.jc(51,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(52,"div",22),T.Tb(53,"button",50),T.ec("click",(function(){return T.Dc(e),T.ic(2).onSubmit()})),T.Oc(54),T.jc(55,"translate"),T.Sb(),T.Tb(56,"button",25),T.ec("click",(function(){return T.Dc(e),T.ic(2).onCancel()})),T.Oc(57),T.jc(58,"translate"),T.Sb(),T.Sb(),T.Tb(59,"button",51),T.Ob(60,"i",52),T.Rb(61),T.Tb(62,"span",53),T.Oc(63),T.jc(64,"translate"),T.Sb(),T.Qb(),T.Sb(),T.Sb()}if(2&e){const e=T.ic(2);var i;T.Bb(2),T.Rc("",T.kc(3,17,"CUSTOMER.SSO.MODAL.TITLE"),' "',null==e.data||null==e.data.customer?null:e.data.customer.name,'"'),T.Bb(3),T.Pc(T.kc(6,19,"CUSTOMER.SSO.MODAL.SUBTITLE_SAML")),T.Bb(14),T.Pc(T.kc(20,21,"CUSTOMER.SSO.MODAL.UPLOAD_KEYSTORE")),T.Bb(3),T.Pc(null==e.keystore?null:e.keystore.name),T.Bb(3),T.oc("placeholder",T.kc(26,23,"CUSTOMER.SSO.MODAL.KEYSTORE_PWD")),T.Bb(2),T.oc("ngIf",null==(i=e.form.get("keystorePassword"))?null:i.touched),T.Bb(4),T.Pc(T.kc(32,25,"CUSTOMER.SSO.MODAL.UPLOAD_METADATA")),T.Bb(3),T.Pc(null==e.idpMetadata?null:e.idpMetadata.name),T.Bb(3),T.oc("placeholder",T.kc(38,27,"CUSTOMER.SSO.MAXIMUM_AUTHENTICATION_LIFETIME")),T.Bb(5),T.Pc(T.kc(43,29,"CUSTOMER.SSO.WANTS_ASSERTION_SIGNED")),T.Bb(4),T.Pc(T.kc(47,31,"CUSTOMER.SSO.AUTHN_REQUEST_SIGNED")),T.Bb(4),T.Pc(T.kc(51,33,"CUSTOMER.SSO.PROPAGATE_LOGOUT")),T.Bb(3),T.oc("disabled",!e.isFormValid),T.Bb(1),T.Qc(" ",T.kc(55,35,"COMMON.SUBMIT")," "),T.Bb(3),T.Qc(" ",T.kc(58,37,"COMMON.UNDO")," "),T.Bb(6),T.Pc(T.kc(64,39,"COMMON.BACK"))}}function Bt(e,t){if(1&e&&(T.Tb(0,"mat-option",77),T.Oc(1),T.Sb()),2&e){const e=t.$implicit;T.oc("value",e),T.Bb(1),T.Pc(e)}}function Nt(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",4),T.Tb(1,"div",54),T.Oc(2),T.jc(3,"translate"),T.Sb(),T.Tb(4,"div",55),T.Oc(5),T.jc(6,"translate"),T.Sb(),T.Tb(7,"div",56),T.Ob(8,"vitamui-common-input",57),T.jc(9,"translate"),T.Sb(),T.Tb(10,"div",56),T.Ob(11,"vitamui-common-input",58),T.jc(12,"translate"),T.Sb(),T.Tb(13,"div",56),T.Ob(14,"vitamui-common-input",59),T.jc(15,"translate"),T.Sb(),T.Tb(16,"div",56),T.Ob(17,"vitamui-common-input",60),T.jc(18,"translate"),T.Sb(),T.Tb(19,"div",61),T.Tb(20,"div"),T.Tb(21,"mat-form-field",62),T.Tb(22,"mat-select",63),T.jc(23,"translate"),T.Mc(24,Bt,2,2,"mat-option",64),T.Sb(),T.Tb(25,"div",65),T.Tb(26,"i",66),T.Oc(27,"keyboard_arrow_down"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(28,"div",67),T.Tb(29,"div",44),T.Tb(30,"vitamui-common-slide-toggle",68),T.Tb(31,"span"),T.Oc(32),T.jc(33,"translate"),T.Sb(),T.Sb(),T.Tb(34,"vitamui-common-slide-toggle",69),T.Tb(35,"span"),T.Oc(36),T.jc(37,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(38,"div",44),T.Tb(39,"vitamui-common-slide-toggle",70),T.Tb(40,"span"),T.Oc(41),T.jc(42,"translate"),T.Sb(),T.Sb(),T.Tb(43,"vitamui-common-slide-toggle",71),T.Tb(44,"span"),T.Oc(45),T.jc(46,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(47,"div",72),T.Tb(48,"div",55),T.Tb(49,"label",73),T.Oc(50),T.jc(51,"translate"),T.Sb(),T.Sb(),T.Ob(52,"app-custom-params",74),T.Sb(),T.Tb(53,"div",75),T.Tb(54,"button",76),T.ec("click",(function(){return T.Dc(e),T.ic(2).onSubmit()})),T.Oc(55),T.jc(56,"translate"),T.Sb(),T.Tb(57,"button",25),T.ec("click",(function(){return T.Dc(e),T.ic(2).onCancel()})),T.Oc(58),T.jc(59,"translate"),T.Sb(),T.Sb(),T.Tb(60,"button",51),T.Ob(61,"i",52),T.Rb(62),T.Tb(63,"span",53),T.Oc(64),T.jc(65,"translate"),T.Sb(),T.Qb(),T.Sb(),T.Sb()}if(2&e){const e=T.ic(2);T.Bb(2),T.Rc("",T.kc(3,21,"CUSTOMER.SSO.MODAL.TITLE"),' "',null==e.data||null==e.data.customer?null:e.data.customer.name,'"'),T.Bb(3),T.Pc(T.kc(6,23,"CUSTOMER.SSO.MODAL.SUBTITLE_OIDC")),T.Bb(3),T.oc("placeholder",T.kc(9,25,"CUSTOMER.SSO.CLIENT_IDENTIFIER")),T.Bb(3),T.oc("placeholder",T.kc(12,27,"CUSTOMER.SSO.CLIENT_SECRET")),T.Bb(3),T.oc("placeholder",T.kc(15,29,"CUSTOMER.SSO.URL_DISCOVERY")),T.Bb(3),T.oc("placeholder",T.kc(18,31,"CUSTOMER.SSO.PERIMETER")),T.Bb(5),T.oc("required",!1)("placeholder",T.kc(23,33,"CUSTOMER.SSO.JWS_ALGORITHME")),T.Bb(2),T.oc("ngForOf",e.jwsAlgorithms),T.Bb(8),T.Pc(T.kc(33,35,"CUSTOMER.SSO.STATEFUL")),T.Bb(4),T.Pc(T.kc(37,37,"CUSTOMER.SSO.USE_PKCE")),T.Bb(5),T.Pc(T.kc(42,39,"CUSTOMER.SSO.USE_NONCE")),T.Bb(4),T.Pc(T.kc(46,41,"CUSTOMER.SSO.PROPAGATE_LOGOUT")),T.Bb(5),T.Qc("",T.kc(51,43,"SHARED.EDITABLE_PARAMS.CUSTOM_SETTINGS")," "),T.Bb(2),T.oc("keyPlaceholder","SHARED.EDITABLE_PARAMS.KEY")("valuePlaceholder","SHARED.EDITABLE_PARAMS.VALUE"),T.Bb(2),T.oc("disabled",!e.form.valid),T.Bb(1),T.Qc(" ",T.kc(56,45,"COMMON.SUBMIT")," "),T.Bb(3),T.Qc(" ",T.kc(59,47,"COMMON.UNDO")," "),T.Bb(6),T.Pc(T.kc(65,49,"COMMON.BACK"))}}function wt(e,t){if(1&e&&(T.Tb(0,"cdk-step"),T.Mc(1,kt,65,41,"div",28),T.Mc(2,Nt,66,51,"ng-template",null,29,T.Nc),T.Sb()),2&e){const e=T.zc(3),t=T.ic();T.Bb(1),T.oc("ngIf","SAML"===t.form.get("protocoleType").value)("ngIfElse",e)}}let xt=(()=>{class e{constructor(e,t,i,o,n){this.dialogRef=e,this.data=t,this.formBuilder=i,this.identityProviderService=o,this.confirmDialogService=n,this.stepCount=2,this.stepIndex=0,this.protocoleType=st,this.jwsAlgorithms=lt,this.samlSpecificControls=this.initializeSamlControls(),this.oidcSpecificControls=this.initializeOIDCControls(),this.commonControls=this.initializeCommonControls(),this.form=this.formBuilder.group(Object.assign(Object.assign({},this.commonControls.controls),this.samlSpecificControls.controls))}ngOnInit(){this.keyPressSubscription=this.confirmDialogService.listenToEscapeKeyPress(this.dialogRef).subscribe(()=>this.onCancel()),this.form.get("protocoleType").setValue(st.SAML)}onProtocoleTypeChange(e){switch(e){case st.CERTIFICAT:this.stepCount=1,this.form=this.formBuilder.group(Object.assign({},this.commonControls.controls));break;case st.SAML:this.form=this.formBuilder.group(Object.assign(Object.assign({},this.commonControls.controls),this.samlSpecificControls.controls)),this.stepCount=2;break;case st.OIDC:this.form=this.formBuilder.group(Object.assign(Object.assign({},this.commonControls.controls),this.oidcSpecificControls.controls)),this.stepCount=2}}initializeSamlControls(){return this.formBuilder.group({keystorePassword:[null,l.x.required],authnRequestBinding:[c.m.POST,l.x.required],maximumAuthenticationLifetime:[null,l.x.pattern("^[0-9]*$")],wantsAssertionsSigned:[!0],authnRequestSigned:[!0],propagateLogout:[!1]})}initializeOIDCControls(){return this.formBuilder.group({clientId:[null,l.x.required],clientSecret:[null,l.x.required],discoveryUrl:[null,l.x.required],scope:[],preferredJwsAlgorithm:[],customParams:[],useState:[!0],useNonce:[!0],usePkce:[!1],propagateLogout:[!1]})}initializeCommonControls(){return this.formBuilder.group({protocoleType:[st.CERTIFICAT,l.x.required],customerId:[this.data.customer.id,l.x.required],enabled:[!0,l.x.required],name:[null,l.x.required],internal:[{value:!1,disabled:!0},l.x.required],patterns:[null,l.x.required],mailAttribute:[null],identifierAttribute:[null],autoProvisioningEnabled:[!1,l.x.required]})}ngOnDestroy(){this.keyPressSubscription.unsubscribe()}onCancel(){this.form.dirty?this.confirmDialogService.confirmBeforeClosing(this.dialogRef):this.dialogRef.close()}onSubmit(){let e;this.form.valid&&(e=this.form.value,e.keystore=this.keystore,e.idpMetadata=this.idpMetadata,e.internal=!1,this.identityProviderService.create(e).subscribe(e=>this.dialogRef.close(e),e=>{e&&e.error&&e.error.error&&"INVALID_KEYSTORE_PASSWORD"===e.error.error&&this.form.get("keystorePassword").setErrors({badPassword:!0})}))}setKeystore(e){this.keystore=e.item(0)}setIdpMetadata(e){this.idpMetadata=e.item(0)}get displayNextButton(){return this.form.get("protocoleType").value!==st.CERTIFICAT}get disableNextButton(){return!this.form.get("patterns").valid||!this.form.get("name").valid}get isFormValid(){return!this.form.pending&&this.form.valid&&!!this.keystore&&!!this.idpMetadata}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(n.g),T.Nb(n.a),T.Nb(l.d),T.Nb(ct),T.Nb(c.t))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-identity-provider-create"]],decls:47,vars:30,consts:[[1,"header"],[3,"index","count"],[3,"formGroup"],[3,"selectionChange"],[1,"content"],[1,"text","large","bold"],["formControlName","enabled",1,"col-4","p-0"],[1,"d-flex"],["formControlName","protocoleType",1,"vitamui-button-toggle-group","mt-3","mr-4"],["group","matButtonToggleGroup"],["value","SAML",3,"change"],["value","OIDC",3,"change"],["value","CERTIFICAT",3,"change"],[1,"d-flex","align-items-start","justify-content-between"],["formControlName","name","maxlength","100","required","",1,"mt-3",3,"placeholder"],[4,"ngIf"],[1,"row","mt-3"],["formControlName","mailAttribute",1,"col-6",3,"placeholder"],["formControlName","identifierAttribute",1,"col-6",3,"placeholder"],[1,"mt-3"],["formControlName","patterns",3,"options"],["formControlName","autoProvisioningEnabled",1,"p-0"],[1,"actions","mt-3"],["class","btn primary",3,"disabled","click",4,"ngIf"],["cdkStepperNext","","class","btn primary",3,"disabled",4,"ngIf"],["type","button",1,"btn","cancel","link",3,"click"],[1,"btn","primary",3,"disabled","click"],["cdkStepperNext","",1,"btn","primary",3,"disabled"],["class","content",4,"ngIf","ngIfElse"],["specific_oidc",""],[1,"text","small","lighter","mb-4"],[1,"row","mt-3","align-items-center"],[1,"col-6","vitamui-input-file"],["formControlName","authnRequestBinding",1,"vitamui-button-toggle-group"],["value","GET"],["value","POST"],["for","keystore"],[1,"text","link","bold","primary"],[1,"vitamui-input-file-filename"],["id","keystore","type","file","accept",".jks",3,"change"],["formControlName","keystorePassword","type","password","required","","maxlength","50",1,"col-6",3,"placeholder"],[1,"mt-3","vitamui-input-file"],["for","idpMetadata"],["id","idpMetadata","type","file","accept",".xml",3,"change"],[1,"row"],["formControlName","maximumAuthenticationLifetime",1,"col-6",3,"placeholder"],[1,"row","ml-0"],["formControlName","wantsAssertionsSigned",1,"col-12"],["formControlName","authnRequestSigned",1,"col-12"],["formControlName","propagateLogout",1,"col-12"],["type","submit",1,"btn","primary",3,"disabled","click"],["type","button","cdkStepperPrevious","",1,"btn","link"],[1,"vitamui-icon","vitamui-icon-chevron-left"],[1,"underline"],[1,"text","large","bold","oidc-row"],[1,"text","small","lighter","mb-4","oidc-row"],[1,"oidc-row"],["formControlName","clientId","required","",1,"col-11","p-0",3,"placeholder"],["formControlName","clientSecret","required","",1,"col-11","p-0",3,"placeholder"],["formControlName","discoveryUrl","required","",1,"col-11","p-0",3,"placeholder"],["formControlName","scope",1,"col-11","p-0",3,"placeholder"],[1,"d-flex","oidc-row"],[1,"vitamui-mat-select"],["formControlName","preferredJwsAlgorithm","panelclass","vitamui-mat-select",3,"required","placeholder"],[3,"value",4,"ngFor","ngForOf"],[1,"select-arrow"],[1,"material-icons"],[1,"oidc-row","mt-2","ml-4"],["formControlName","useState",1,"col-6"],["formControlName","usePkce",1,"col-6"],["formControlName","useNonce",1,"col-6"],["formControlName","propagateLogout",1,"col-6"],[1,"oidc-row","mt-4"],[1,"custom-label"],["formControlName","customParams",1,"col-11","p-0",3,"keyPlaceholder","valuePlaceholder"],[1,"actions"],["type","button",1,"btn","primary",3,"disabled","click"],[3,"value"]],template:function(e,t){var i;1&e&&(T.Tb(0,"div",0),T.Ob(1,"vitamui-common-progress-bar",1),T.Sb(),T.Tb(2,"form",2),T.Tb(3,"vitamui-common-stepper",3),T.ec("selectionChange",(function(e){return t.stepIndex=e.selectedIndex})),T.Tb(4,"cdk-step"),T.Tb(5,"div",4),T.Tb(6,"div",5),T.Oc(7),T.jc(8,"translate"),T.Sb(),T.Tb(9,"div"),T.Tb(10,"vitamui-common-slide-toggle",6),T.Oc(11),T.jc(12,"translate"),T.Sb(),T.Sb(),T.Tb(13,"div",7),T.Tb(14,"mat-button-toggle-group",8,9),T.Tb(16,"mat-button-toggle",10),T.ec("change",(function(e){return t.onProtocoleTypeChange(e.value)})),T.Tb(17,"span"),T.Oc(18,"SAML"),T.Sb(),T.Sb(),T.Tb(19,"mat-button-toggle",11),T.ec("change",(function(e){return t.onProtocoleTypeChange(e.value)})),T.Tb(20,"span"),T.Oc(21,"OIDC"),T.Sb(),T.Sb(),T.Tb(22,"mat-button-toggle",12),T.ec("change",(function(e){return t.onProtocoleTypeChange(e.value)})),T.Tb(23,"span"),T.Oc(24,"Certificat"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(25,"div",13),T.Tb(26,"vitamui-common-input",14),T.jc(27,"translate"),T.Mc(28,Mt,2,1,"ng-container",15),T.Sb(),T.Sb(),T.Tb(29,"div",16),T.Ob(30,"vitamui-common-input",17),T.jc(31,"translate"),T.Ob(32,"vitamui-common-input",18),T.jc(33,"translate"),T.Sb(),T.Tb(34,"div",19),T.Ob(35,"app-pattern",20),T.Sb(),T.Tb(36,"div",19),T.Tb(37,"vitamui-common-slide-toggle",21),T.Oc(38),T.jc(39,"translate"),T.Sb(),T.Sb(),T.Tb(40,"div",22),T.Mc(41,At,3,4,"button",23),T.Mc(42,Et,3,4,"button",24),T.Tb(43,"button",25),T.ec("click",(function(){return t.onCancel()})),T.Oc(44),T.jc(45,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Mc(46,wt,4,2,"cdk-step",15),T.Sb(),T.Sb()),2&e&&(T.Bb(1),T.oc("index",t.stepIndex)("count",t.stepCount),T.Bb(1),T.oc("formGroup",t.form),T.Bb(5),T.Rc("",T.kc(8,16,"CUSTOMER.SSO.MODAL.TITLE"),' "',null==t.data||null==t.data.customer?null:t.data.customer.name,'"'),T.Bb(4),T.Qc(" ",T.kc(12,18,"CUSTOMER.SSO.ACTIVE_SWITCH")," "),T.Bb(15),T.oc("placeholder",T.kc(27,20,"CUSTOMER.SSO.NAME")),T.Bb(2),T.oc("ngIf",null==(i=t.form.get("name"))?null:i.touched),T.Bb(2),T.oc("placeholder",T.kc(31,22,"CUSTOMER.SSO.MAIL_ATTRIBUTE")),T.Bb(2),T.oc("placeholder",T.kc(33,24,"CUSTOMER.SSO.IDENTIFIER_ATTRIBUTE")),T.Bb(3),T.oc("options",null==t.data?null:t.data.domains),T.Bb(3),T.Pc(T.kc(39,26,"CUSTOMER.SSO.AUTO_PROVISIONING")),T.Bb(3),T.oc("ngIf",!t.displayNextButton),T.Bb(1),T.oc("ngIf",t.displayNextButton),T.Bb(2),T.Qc(" ",T.kc(45,28,"COMMON.UNDO")," "),T.Bb(2),T.oc("ngIf","CERTIFICAT"!==t.form.get("protocoleType").value))},directives:[c.dc,l.y,l.r,l.i,c.mb,ut.a,c.ac,l.q,l.g,u.b,u.a,c.Qb,l.l,l.w,o.p,gt,c.Rb,ut.d,ut.e,d.b,m.a,o.o,Tt,he.k],pipes:[we.d],styles:[""]}),e})();function Pt(e,t){if(1&e&&(T.Tb(0,"div"),T.Oc(1),T.Sb()),2&e){const e=t.$implicit;T.Bb(1),T.Pc(e)}}function Dt(e,t){1&e&&(T.Tb(0,"i",13),T.Oc(1,"edit"),T.Sb())}function Ut(e,t){1&e&&(T.Tb(0,"div"),T.Ob(1,"mat-spinner",14),T.Sb())}function jt(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",15),T.Tb(1,"button",16),T.ec("click",(function(){return T.Dc(e),T.ic(2).confirm()})),T.Tb(2,"i",17),T.Oc(3,"check"),T.Sb(),T.Sb(),T.Tb(4,"button",18),T.ec("click",(function(){return T.Dc(e),T.ic(2).cancel()})),T.Tb(5,"i",17),T.Oc(6,"clear"),T.Sb(),T.Sb(),T.Sb()}if(2&e){const e=T.ic(2);T.Bb(1),T.oc("disabled",!e.canConfirm)}}function Ft(e,t){if(1&e){const e=T.Ub();T.Rb(0),T.Tb(1,"div",2,3),T.Tb(3,"div",4),T.ec("click",(function(){return T.Dc(e),T.ic().enterEditMode()})),T.Tb(4,"div",5),T.Tb(5,"label"),T.Oc(6),T.Sb(),T.Tb(7,"span",6),T.Mc(8,Pt,2,1,"div",7),T.Sb(),T.Tb(9,"div",8),T.Tb(10,"app-pattern",9),T.ec("click",(function(){return T.Dc(e),T.ic().onPatternClick()})),T.Sb(),T.Sb(),T.Sb(),T.Mc(11,Dt,2,0,"i",10),T.Mc(12,Ut,2,0,"div",0),T.Sb(),T.Sb(),T.Ob(13,"div",11),T.Mc(14,jt,7,1,"ng-template",12),T.Qb()}if(2&e){const e=T.zc(2),t=T.ic();T.Bb(3),T.Fb("edit-mode",t.editMode),T.Bb(3),T.Pc(t.label),T.Bb(2),T.oc("ngForOf",t.control.value),T.Bb(2),T.Jc("width",100,"%"),T.oc("formControl",t.control)("options",t.options),T.Bb(1),T.oc("ngIf",!t.showSpinner&&!t.editMode),T.Bb(1),T.oc("ngIf",t.showSpinner),T.Bb(2),T.oc("cdkConnectedOverlayOpen",t.editMode)("cdkConnectedOverlayOrigin",e)("cdkConnectedOverlayPositions",t.positions)}}function Lt(e,t){if(1&e&&(T.Tb(0,"div"),T.Oc(1),T.Sb()),2&e){const e=t.$implicit;T.Bb(1),T.Pc(e)}}function Vt(e,t){if(1&e&&(T.Tb(0,"div",19),T.Tb(1,"label"),T.Oc(2),T.Sb(),T.Mc(3,Lt,2,1,"div",7),T.Sb()),2&e){const e=T.ic();T.Bb(2),T.Pc(e.label),T.Bb(1),T.oc("ngForOf",null==e.control?null:e.control.value)}}const qt={provide:l.o,useExisting:Object(T.V)(()=>_t),multi:!0};let _t=(()=>{class e extends c.D{constructor(e){super(e),this.patternClicked=!1}onClick(e){if(!this.editMode)return;if(this.patternClicked)return void(this.patternClicked=!1);const t=this.cdkConnectedOverlay.overlayRef,i=this.pattern.select.overlayDir.overlayRef;this.isInside(e,this.elementRef.nativeElement)||this.isInside(e,t.hostElement)||this.isInside(e,i?i.overlayElement:null)||this.isInside(e,i?i.backdropElement:null)||this.cancel()}onPatternClick(){this.patternClicked=!0}isInside(e,t){return t&&(e===t||t.contains(e))}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(T.l))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-editable-patterns"]],viewQuery:function(e,t){var i;1&e&&T.Uc(gt,!0),2&e&&T.yc(i=T.fc())&&(t.pattern=i.first)},inputs:{options:"options"},features:[T.Ab([qt]),T.yb],decls:2,vars:2,consts:[[4,"ngIf"],["class","read-only-field",4,"ngIf"],["cdkOverlayOrigin",""],["origin","cdkOverlayOrigin"],[1,"vitamui-input","editable-field","squarish",3,"click"],[1,"editable-field-content"],[1,"editable-field-text-content"],[4,"ngFor","ngForOf"],[1,"mt-2","editable-field-control"],[3,"formControl","options","click"],["class","material-icons edit-icon",4,"ngIf"],[1,"vitamui-input-errors"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions"],[1,"material-icons","edit-icon"],[1,"vitamui-spinner","small"],[1,"editable-field-actions"],["type","button",1,"editable-field-confirm",3,"disabled","click"],[1,"material-icons"],["type","button",1,"editable-field-cancel",3,"click"],[1,"read-only-field"]],template:function(e,t){1&e&&(T.Mc(0,Ft,15,13,"ng-container",0),T.Mc(1,Vt,4,2,"div",1)),2&e&&(T.oc("ngIf",!t.disabled),T.Bb(1),T.oc("ngIf",t.disabled))},directives:[o.p,Be.b,o.o,gt,l.q,l.f,Be.a,g.b],encapsulation:2}),e})();const Gt=["fileInput"];function Ht(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"SHARED.EDITABLE_FIELD.WRONG_PASSWORD")))}function Kt(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",17),T.Tb(1,"button",18),T.ec("click",(function(){return T.Dc(e),T.ic(2).confirm()})),T.Tb(2,"i",19),T.Oc(3,"check"),T.Sb(),T.Sb(),T.Tb(4,"button",20),T.ec("click",(function(){return T.Dc(e),T.ic(2).cancel()})),T.Tb(5,"i",19),T.Oc(6,"clear"),T.Sb(),T.Sb(),T.Sb()}if(2&e){const e=T.ic(2);T.Bb(1),T.oc("disabled",!e.canConfirm)}}function Wt(e,t){if(1&e){const e=T.Ub();T.Rb(0),T.Tb(1,"div",2,3),T.Tb(3,"div",4),T.ec("click",(function(){return T.Dc(e),T.ic().enterEditMode()})),T.Tb(4,"div",5),T.Tb(5,"label"),T.Oc(6),T.jc(7,"translate"),T.Sb(),T.Tb(8,"span",6),T.Oc(9),T.Sb(),T.Tb(10,"div",7),T.Tb(11,"div",8),T.Tb(12,"label",9),T.Tb(13,"span",10),T.Oc(14),T.jc(15,"translate"),T.Sb(),T.Tb(16,"div",11),T.Oc(17),T.Sb(),T.Sb(),T.Tb(18,"input",12,13),T.ec("change",(function(t){return T.Dc(e),T.ic().setFile(t.target.files)})),T.Sb(),T.Sb(),T.Tb(20,"div"),T.Ob(21,"input",14),T.jc(22,"translate"),T.Tb(23,"div",15),T.Mc(24,Ht,3,3,"vitamui-common-input-error",0),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(25,"div",15),T.mc(26),T.Sb(),T.Mc(27,Kt,7,1,"ng-template",16),T.Qb()}if(2&e){const e=T.zc(2),t=T.ic();T.Bb(3),T.Fb("edit-mode",t.editMode),T.Bb(3),T.Pc(T.kc(7,12,"CUSTOMER.SSO.KEYSTORE")),T.Bb(3),T.Pc(null==t.originValue?null:t.originValue.name),T.Bb(5),T.Pc(T.kc(15,14,"SHARED.EDITABLE_FIELD.UPLOAD_FILE")),T.Bb(3),T.Pc(null==t.file?null:t.file.name),T.Bb(4),T.oc("formControl",t.control)("placeholder",T.kc(22,16,"SHARED.EDITABLE_FIELD.PASSWORD_PLACEHOLDER")),T.Bb(3),T.oc("ngIf",null==t.control?null:t.control.hasError("badPassword")),T.Bb(3),T.oc("cdkConnectedOverlayOpen",t.editMode)("cdkConnectedOverlayOrigin",e)("cdkConnectedOverlayPositions",t.positions)}}function Yt(e,t){if(1&e&&(T.Tb(0,"div",21),T.Tb(1,"label"),T.Oc(2),T.jc(3,"translate"),T.Sb(),T.Tb(4,"div"),T.Oc(5),T.Sb(),T.Sb()),2&e){const e=T.ic();T.Bb(2),T.Pc(T.kc(3,2,"CUSTOMER.SSO.KEYSTORE")),T.Bb(3),T.Pc(null==e.originValue?null:e.originValue.name)}}const zt=[[["vitamui-field-error"]]],Qt=["vitamui-field-error"];let Xt=(()=>{class e extends c.D{constructor(e,t){super(t),this.identityProviderService=e,this.originValue=Object(c.Mb)([""],"keystore.jks")}get canConfirm(){return this.editMode&&!!this.file&&this.control.valid}setFile(e){this.file=e.item(0)}confirm(){this.canConfirm&&this.identityProviderService.updateKeystore(this.identityProvider.id,this.file,this.control.value).subscribe(()=>{this.originValue=this.file,this.cancel()},()=>{this.control.setErrors({badPassword:!0})})}cancel(){this.editMode&&(this.editMode=!1,this.file=null,this.fileInput.nativeElement.value=null,this.control.reset())}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(ct),T.Nb(T.l))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-editable-keystore"]],viewQuery:function(e,t){var i;1&e&&T.Uc(Gt,!0),2&e&&T.yc(i=T.fc())&&(t.fileInput=i.first)},inputs:{identityProvider:"identityProvider"},features:[T.yb],ngContentSelectors:Qt,decls:2,vars:2,consts:[[4,"ngIf"],["class","read-only-field",4,"ngIf"],["cdkOverlayOrigin",""],["origin","cdkOverlayOrigin"],[1,"vitamui-input","editable-field",3,"click"],[1,"editable-field-content"],[1,"editable-field-text-content"],[1,"editable-field-control"],[1,"vitamui-input-file"],["for","vitamui-input-keystore"],[1,"text","primary","underline"],[1,"vitamui-input-file-filename"],["id","vitamui-input-keystore","type","file","accept",".jks",3,"change"],["fileInput",""],["type","password","required","","maxlength","50",1,"vitamui-input","vitamui-small",3,"formControl","placeholder"],[1,"vitamui-input-errors"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions"],[1,"editable-field-actions"],["type","button",1,"editable-field-confirm",3,"disabled","click"],[1,"material-icons"],["type","button",1,"editable-field-cancel",3,"click"],[1,"read-only-field"]],template:function(e,t){1&e&&(T.nc(zt),T.Mc(0,Wt,28,18,"ng-container",0),T.Mc(1,Yt,6,4,"div",1)),2&e&&(T.oc("ngIf",!t.disabled),T.Bb(1),T.oc("ngIf",t.disabled))},directives:[o.p,Be.b,l.c,l.w,l.l,l.q,l.f,Be.a,c.Rb],pipes:[we.d],styles:[".editable-field-control[_ngcontent-%COMP%]{flex-direction:column}.vitamui-input-file[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:10px}input.vitamui-input[_ngcontent-%COMP%]{width:100%;padding:0 17px}.vitamui-input-errors[_ngcontent-%COMP%]{padding:4px 17px}"]}),e})();function Jt(e,t){if(1&e&&(T.Tb(0,"div"),T.Oc(1),T.Sb()),2&e){const e=t.$implicit;T.Bb(1),T.Rc("",e.key," : ",e.value,"")}}function Zt(e,t){1&e&&(T.Tb(0,"i",13),T.Oc(1,"edit"),T.Sb())}function $t(e,t){1&e&&(T.Tb(0,"div"),T.Ob(1,"mat-spinner",14),T.Sb())}function ei(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",15),T.Tb(1,"button",16),T.ec("click",(function(){return T.Dc(e),T.ic(2).confirm()})),T.Tb(2,"i",17),T.Oc(3,"check"),T.Sb(),T.Sb(),T.Tb(4,"button",18),T.ec("click",(function(){return T.Dc(e),T.ic(2).cancel()})),T.Tb(5,"i",17),T.Oc(6,"clear"),T.Sb(),T.Sb(),T.Sb()}if(2&e){const e=T.ic(2);T.Bb(1),T.oc("disabled",!e.canConfirm)}}function ti(e,t){if(1&e){const e=T.Ub();T.Rb(0),T.Tb(1,"div",2,3),T.Tb(3,"div",4),T.ec("click",(function(){return T.Dc(e),T.ic().enterEditMode()})),T.Tb(4,"div",5),T.Tb(5,"label"),T.Oc(6),T.jc(7,"translate"),T.Sb(),T.Tb(8,"span",6),T.Mc(9,Jt,2,2,"div",7),T.jc(10,"keyvalue"),T.Sb(),T.Tb(11,"div",8),T.Tb(12,"app-custom-params",9),T.ec("click",(function(){return T.Dc(e),T.ic().onDomainInputClick()})),T.Sb(),T.Sb(),T.Sb(),T.Mc(13,Zt,2,0,"i",10),T.Mc(14,$t,2,0,"div",0),T.Sb(),T.Sb(),T.Ob(15,"div",11),T.Mc(16,ei,7,1,"ng-template",12),T.Qb()}if(2&e){const e=T.zc(2),t=T.ic();T.Bb(3),T.Fb("edit-mode",t.editMode),T.Bb(3),T.Pc(T.kc(7,15,"SHARED.EDITABLE_PARAMS.CUSTOM_SETTINGS")),T.Bb(3),T.oc("ngForOf",T.kc(10,17,t.getList(t.control.value))),T.Bb(3),T.Jc("width",90,"%"),T.oc("formControl",t.control)("selectedValues",null==t.control?null:t.control.value)("keyPlaceholder","SHARED.EDITABLE_PARAMS.KEY")("valuePlaceholder","SHARED.EDITABLE_PARAMS.VALUE"),T.Bb(1),T.oc("ngIf",!t.showSpinner&&!t.editMode),T.Bb(1),T.oc("ngIf",t.showSpinner),T.Bb(2),T.oc("cdkConnectedOverlayOpen",t.editMode)("cdkConnectedOverlayOrigin",e)("cdkConnectedOverlayPositions",t.positions)}}function ii(e,t){1&e&&T.Ob(0,"div",19)}const oi={provide:l.o,useExisting:Object(T.V)(()=>ni),multi:!0};let ni=(()=>{class e extends c.D{constructor(e){super(e),this.array=[],this.domainInputClicked=!1,this.defaultDomainChange=new T.n}get canConfirm(){return this.editMode&&!this.control.pending&&this.control.valid&&this.control.dirty}set defaultDomain(e){this._defaultDomain=e,this.selected=e}get defaultDomain(){return this._defaultDomain}ngOnInit(){}getList(e){const t=new Map;return e&&Object.entries(e).forEach(e=>{t.set(e[0],e[1])}),t}cancel(){super.cancel(),this.selected=this.defaultDomain}onClick(e){if(!this.editMode)return;if(this.domainInputClicked)return void(this.domainInputClicked=!1);const t=this.cdkConnectedOverlay.overlayRef;this.isInside(e,this.elementRef.nativeElement)||this.isInside(e,t.hostElement)||this.cancel()}onDomainInputClick(){this.domainInputClicked=!0}enterEditMode(){super.enterEditMode()}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(T.l))},e.\u0275cmp=T.Hb({type:e,selectors:[["editable-custom-params"]],inputs:{defaultDomain:"defaultDomain",placeholder:"placeholder"},outputs:{defaultDomainChange:"defaultDomainChange"},features:[T.Ab([oi]),T.yb],decls:2,vars:2,consts:[[4,"ngIf"],["class","read-only-field disabled-input",4,"ngIf"],["cdkOverlayOrigin",""],["origin","cdkOverlayOrigin"],[1,"vitamui-input","editable-field",3,"click"],[1,"editable-field-content"],[1,"editable-field-text-content"],[4,"ngFor","ngForOf"],[1,"editable-field-control","mt-1"],[3,"formControl","selectedValues","keyPlaceholder","valuePlaceholder","click"],["class","material-icons edit-icon",4,"ngIf"],[1,"vitamui-input-errors"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions"],[1,"material-icons","edit-icon"],[1,"vitamui-spinner","small"],[1,"editable-field-actions"],["type","button",1,"editable-field-confirm",3,"disabled","click"],[1,"material-icons"],["type","button",1,"editable-field-cancel",3,"click"],[1,"read-only-field","disabled-input"]],template:function(e,t){1&e&&(T.Mc(0,ti,17,19,"ng-container",0),T.Mc(1,ii,1,0,"div",1)),2&e&&(T.oc("ngIf",!t.disabled),T.Bb(1),T.oc("ngIf",!1))},directives:[o.p,Be.b,o.o,Tt,l.q,l.f,Be.a,g.b],pipes:[we.d,o.i],encapsulation:2}),e})();function ri(e,t){1&e&&(T.Tb(0,"div",6),T.Tb(1,"div",15),T.Tb(2,"vitamui-common-editable-toggle-group",20),T.jc(3,"translate"),T.Ob(4,"vitamui-common-editable-button-toggle",21),T.Ob(5,"vitamui-common-editable-button-toggle",22),T.Ob(6,"vitamui-common-editable-button-toggle",23),T.Tb(7,"vitamui-common-field-error",11),T.Oc(8),T.jc(9,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb()),2&e&&(T.Bb(2),T.oc("label",T.kc(3,2,"CUSTOMER.SSO.PROTOCOL_TYPE")),T.Bb(6),T.Pc(T.kc(9,4,"COMMON.ERROR.REQUIRED")))}function ai(e,t){if(1&e&&(T.Tb(0,"div",6),T.Tb(1,"div",15),T.Tb(2,"vitamui-common-editable-input",29),T.jc(3,"translate"),T.Tb(4,"vitamui-common-field-error",11),T.Oc(5),T.jc(6,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb()),2&e){const e=T.ic(2);var i=null,o=null;T.Bb(2),T.pc("label",T.kc(3,4,"CUSTOMER.SSO.MAXIMUM_AUTHENTICATION_LIFETIME")),T.oc("validator",null==e.form||null==(i=e.form.get("maximumAuthenticationLifetime"))?null:i.validator)("asyncValidator",null==e.form||null==(o=e.form.get("maximumAuthenticationLifetime"))?null:o.asyncValidator),T.Bb(3),T.Pc(T.kc(6,6,"COMMON.ERROR.REQUIRED"))}}function ci(e,t){1&e&&(T.Tb(0,"div",6),T.Tb(1,"div",30),T.Tb(2,"vitamui-common-slide-toggle",31),T.Oc(3),T.jc(4,"translate"),T.Sb(),T.Sb(),T.Tb(5,"div",2),T.Tb(6,"vitamui-common-slide-toggle",32),T.Oc(7),T.jc(8,"translate"),T.Sb(),T.Sb(),T.Tb(9,"div",2),T.Tb(10,"vitamui-common-slide-toggle",33),T.Oc(11),T.jc(12,"translate"),T.Sb(),T.Sb(),T.Sb()),2&e&&(T.Bb(3),T.Qc(" ",T.kc(4,3,"CUSTOMER.SSO.WANTS_ASSERTION_SIGNED")," "),T.Bb(4),T.Qc(" ",T.kc(8,5,"CUSTOMER.SSO.AUTHN_REQUEST_SIGNED")," "),T.Bb(4),T.Qc(" ",T.kc(12,7,"CUSTOMER.SSO.PROPAGATE_LOGOUT")," "))}function si(e,t){if(1&e&&(T.Tb(0,"div"),T.Tb(1,"div",6),T.Tb(2,"div",2),T.Tb(3,"vitamui-common-editable-toggle-group",24),T.Ob(4,"vitamui-common-editable-button-toggle",25),T.Ob(5,"vitamui-common-editable-button-toggle",26),T.Tb(6,"vitamui-common-field-error",11),T.Oc(7),T.jc(8,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Mc(9,ai,7,8,"div",5),T.Tb(10,"div",6),T.Tb(11,"div",2),T.Ob(12,"app-editable-keystore",27),T.Sb(),T.Tb(13,"div",2),T.Tb(14,"vitamui-common-editable-file",28),T.jc(15,"translate"),T.Tb(16,"vitamui-common-field-error",11),T.Oc(17),T.jc(18,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Mc(19,ci,13,9,"div",5),T.Sb()),2&e){const e=T.ic();var i=null,o=null;T.Bb(3),T.oc("validator",null==e.form||null==(i=e.form.get("authnRequestBinding"))?null:i.validator)("asyncValidator",null==e.form||null==(o=e.form.get("authnRequestBinding"))?null:o.asyncValidator),T.Bb(4),T.Pc(T.kc(8,12,"COMMON.ERROR.REQUIRED")),T.Bb(2),T.oc("ngIf",!e.identityProvider.internal),T.Bb(3),T.oc("identityProvider",e.identityProvider)("disabled",e.readOnly),T.Bb(2),T.oc("formControl",e.idpMetadata)("label",T.kc(15,14,"CUSTOMER.SSO.IDP_METADATA"))("validator",null==e.idpMetadata?null:e.idpMetadata.validator)("asyncValidator",null==e.idpMetadata?null:e.idpMetadata.asyncValidator),T.Bb(3),T.Pc(T.kc(18,16,"COMMON.ERROR.REQUIRED")),T.Bb(2),T.oc("ngIf",!e.identityProvider.internal)}}function li(e,t){if(1&e&&T.Ob(0,"vitamui-common-editable-option",9),2&e){const e=t.$implicit;T.oc("value",e)("content",e)}}function ui(e,t){if(1&e&&(T.Tb(0,"div"),T.Tb(1,"div",6),T.Tb(2,"div",2),T.Tb(3,"vitamui-common-editable-input",34),T.jc(4,"translate"),T.Tb(5,"vitamui-common-field-error",11),T.Oc(6),T.jc(7,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(8,"div",2),T.Tb(9,"vitamui-common-editable-input",35),T.jc(10,"translate"),T.Tb(11,"vitamui-common-field-error",11),T.Oc(12),T.jc(13,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(14,"div",6),T.Tb(15,"div",15),T.Tb(16,"vitamui-common-editable-input",36),T.jc(17,"translate"),T.Tb(18,"vitamui-common-field-error",11),T.Oc(19),T.jc(20,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(21,"div",6),T.Tb(22,"div",15),T.Ob(23,"vitamui-common-editable-input",37),T.jc(24,"translate"),T.Sb(),T.Sb(),T.Tb(25,"div",6),T.Tb(26,"div",15),T.Ob(27,"editable-custom-params",38),T.Sb(),T.Sb(),T.Tb(28,"div",6),T.Tb(29,"div",39),T.Tb(30,"vitamui-common-editable-select",40),T.jc(31,"translate"),T.Mc(32,li,1,2,"vitamui-common-editable-option",41),T.Sb(),T.Sb(),T.Sb(),T.Tb(33,"div",1),T.Tb(34,"div",42),T.Tb(35,"vitamui-common-slide-toggle",43),T.Oc(36),T.jc(37,"translate"),T.Sb(),T.Sb(),T.Tb(38,"div",42),T.Tb(39,"vitamui-common-slide-toggle",44),T.Oc(40),T.jc(41,"translate"),T.Sb(),T.Sb(),T.Tb(42,"div",42),T.Tb(43,"vitamui-common-slide-toggle",45),T.Oc(44),T.jc(45,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(46,"div",46),T.Tb(47,"vitamui-common-slide-toggle",33),T.Oc(48),T.jc(49,"translate"),T.Sb(),T.Sb(),T.Sb()),2&e){const e=T.ic();var i=null,o=null,n=null;T.Bb(3),T.oc("validator",null==e.form||null==(i=e.form.get("clientId"))?null:i.validator)("label",T.kc(4,16,"CUSTOMER.SSO.CLIENT_IDENTIFIER")),T.Bb(3),T.Pc(T.kc(7,18,"COMMON.ERROR.REQUIRED")),T.Bb(3),T.oc("validator",null==e.form||null==(o=e.form.get("clientSecret"))?null:o.validator)("label",T.kc(10,20,"CUSTOMER.SSO.CLIENT_SECRET")),T.Bb(3),T.Pc(T.kc(13,22,"COMMON.ERROR.REQUIRED")),T.Bb(4),T.oc("validator",null==e.form||null==(n=e.form.get("discoveryUrl"))?null:n.validator)("label",T.kc(17,24,"CUSTOMER.SSO.URL_DISCOVERY")),T.Bb(3),T.Pc(T.kc(20,26,"COMMON.ERROR.REQUIRED")),T.Bb(4),T.oc("label",T.kc(24,28,"CUSTOMER.SSO.PERIMETER")),T.Bb(7),T.oc("label",T.kc(31,30,"CUSTOMER.SSO.JWS_ALGORITHME")),T.Bb(2),T.oc("ngForOf",e.jwsAlgorithms),T.Bb(4),T.Pc(T.kc(37,32,"CUSTOMER.SSO.STATEFUL")),T.Bb(4),T.Qc("",T.kc(41,34,"CUSTOMER.SSO.USE_NONCE")," "),T.Bb(4),T.Pc(T.kc(45,36,"CUSTOMER.SSO.USE_PKCE")),T.Bb(4),T.Qc(" ",T.kc(49,38,"CUSTOMER.SSO.PROPAGATE_LOGOUT")," ")}}let di=(()=>{class e{constructor(e,t,i){this.formBuilder=e,this.identityProviderService=t,this.snackBarService=i,this._domains=[],this.displayOIDCSAMLBLOCKS=!1,this.jwsAlgorithms=lt,this.commonsControls=this.initializeCommonControls(),this.specificSamlControls=this.initializeSamlControls(),this.specificOidcControls=this.initializeOidcControls(),this.form=this.formBuilder.group(Object.assign({},this.commonsControls.controls)),this.idpMetadata=new l.e({value:Object(c.Mb)([""],"metadata.xml"),disabled:!0})}set identityProvider(e){this._identityProvider=e,this._identityProvider.internal||this.idpMetadata.enable({emitEvent:!1}),e&&this.manageForm(e),this.previousValue=this.form.value}get identityProvider(){return this._identityProvider}set domains(e){this._domains=e.map(e=>this.identityProvider.patterns.includes(e.value)?{value:e.value,disabled:!1}:e)}get domains(){return this._domains}set readOnly(e){this._readOnly=e||this._identityProvider.internal,e?(this.form.enabled&&this.form.disable({emitEvent:!1}),this.idpMetadata.enabled&&this.idpMetadata.disable({emitEvent:!1})):(this.form.disabled&&this.form.enable({emitEvent:!1}),this.idpMetadata.disabled&&this.idpMetadata.enable({emitEvent:!1}))}get readOnly(){return this._readOnly}updateForm(){var e,t;(null===(e=this.form.value)||void 0===e?void 0:e.protocoleType)!==(null===(t=this.previousValue)||void 0===t?void 0:t.protocoleType)&&(this.displayOIDCSAMLBLOCKS=!1,this.manageForm(this.form.getRawValue()))}initializeCommonControls(){const e=this.formBuilder.group({protocoleType:[],identifier:[{value:null,disabled:!0},l.x.required],enabled:[!0,l.x.required],name:[null,l.x.required],internal:[{value:null,disabled:!0},l.x.required],patterns:[null,l.x.required],mailAttribute:[null],identifierAttribute:[null],autoProvisioningEnabled:[!1,l.x.required]});return e.get("protocoleType").valueChanges.subscribe(e=>{e===this.previousValue.protocoleType&&this.manageForm(this.previousValue)}),e}initializeSamlControls(){return this.formBuilder.group({authnRequestBinding:[c.m.POST,l.x.required],maximumAuthenticationLifetime:[null],wantsAssertionsSigned:[this.identityProvider?this.identityProvider.wantsAssertionsSigned:null,l.x.required],authnRequestSigned:[this.identityProvider?this.identityProvider.authnRequestSigned:null,l.x.required],propagateLogout:[this.identityProvider?this.identityProvider.propagateLogout:null,l.x.required]})}initializeOidcControls(){return this.formBuilder.group({clientId:[null,l.x.required],clientSecret:[null,l.x.required],discoveryUrl:[null,l.x.required],scope:[],preferredJwsAlgorithm:[],customParams:[],useState:[!0],useNonce:[!0],usePkce:[!1],propagateLogout:[!1]})}manageChanges(){Object(ve.a)(this.form.statusChanges,this.form.valueChanges).pipe(Object(Te.a)(()=>(this.updateForm(),this.form.valid)),Object(Se.a)(200),Object(Ce.a)(()=>this.diff(this.form.value,this.previousValue)),Object(Te.a)(e=>!Object(Ee.c)(e)),Object(Ce.a)(e=>Object(Ee.a)({id:this.identityProvider.id},e)),Object(Me.a)(e=>this.identityProviderService.patch(e))).subscribe(()=>{this.previousValue=this.form.value}),this.idpMetadata.valueChanges.pipe(Object(Se.a)(200),Object(Te.a)(()=>this.idpMetadata.valid),Object(Me.a)(()=>this.identityProviderService.updateMetadataFile(this.identityProvider.id,this.idpMetadata.value))).subscribe()}diff(e,t){let i={};if(e.protocoleType!==t.protocoleType)switch(t.protocoleType){case st.OIDC:i={clientId:null,clientSecret:null,discoveryUrl:null,scope:null,preferredJwsAlgorithm:null,customParams:null,useState:null,useNonce:null,usePkce:null};break;case st.SAML:i={idpMetadata:null,keystoreBase64:null,keystorePassword:null,maximumAuthenticationLifetime:null,wantsAssertionsSigned:!0,authnRequestSigned:!0}}const o=Object(Ee.g)(e,(e,i)=>Object(Ee.e)(e)?Object(Ee.d)(t[i],e):t[i]===e);return i=Object.assign(Object.assign({},i),o),Object(Ee.f)(i,e=>e)}manageForm(e){switch(this.displayOIDCSAMLBLOCKS=!1,e.protocoleType){case st.CERTIFICAT:this.form=this.formBuilder.group(Object.assign({},this.commonsControls.controls));break;case st.SAML:this.form=this.formBuilder.group(Object.assign(Object.assign({},this.commonsControls.controls),this.specificSamlControls.controls)),e.authnRequestBinding||(e.authnRequestBinding=c.m.POST),null==e.authnRequestSigned&&(e.authnRequestSigned=!0),null==e.wantsAssertionsSigned&&(e.wantsAssertionsSigned=!0);break;case st.OIDC:this.form=this.formBuilder.group(Object.assign(Object.assign({},this.commonsControls.controls),this.specificOidcControls.controls)),null==e.useState&&(e.useState=!0,e.useNonce=!0,e.usePkce=!1)}this.form.reset(e,{emitEvent:!1}),this.manageChanges(),this.form.invalid&&e.protocoleType===st.OIDC?this.snackBarService.open({message:"SHARED.SNACKBAR.OIDC_UPDATE"}):this.form.invalid&&e.protocoleType===st.SAML&&this.snackBarService.open({message:"SHARED.SNACKBAR.SAML_UPDATE_ERROR"}),this.displayOIDCSAMLBLOCKS=!0}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(l.d),T.Nb(ct),T.Nb(c.Ab))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-identity-provider-details"]],inputs:{identityProvider:"identityProvider",domains:"domains",readOnly:"readOnly"},decls:51,vars:52,consts:[[3,"formGroup"],[1,"row","align-items-center"],[1,"col-6"],["formControlName","enabled"],[1,"read-only-field"],["class","row",4,"ngIf"],[1,"row"],["formControlName","identifier","maxlength","12","disabled","",3,"label","validator","asyncValidator"],["formControlName","internal",3,"label","validator","asyncValidator"],[3,"value","content"],["formControlName","name","maxlength","100",3,"label","validator","asyncValidator"],["errorKey","required"],["formControlName","mailAttribute","maxlength","100",3,"label"],["formControlName","identifierAttribute","maxlength","100",3,"label"],[1,"row","pattern-row"],[1,"col-12"],["formControlName","patterns",3,"label","options","validator","asyncValidator"],[1,"row","mt-2"],["formControlName","autoProvisioningEnabled",1,"col-4"],[4,"ngIf"],["formControlName","protocoleType",3,"label"],["value","SAML","content","SAML"],["value","OIDC","content","OIDC"],["value","CERTIFICAT","content","CERTIFICAT"],["formControlName","authnRequestBinding","label","Request Binding",3,"validator","asyncValidator"],["value","GET","content","GET"],["value","POST","content","POST"],[3,"identityProvider","disabled"],["accept",".xml",3,"formControl","label","validator","asyncValidator"],["type","number","formControlName","maximumAuthenticationLifetime",3,"label","validator","asyncValidator"],[1,"col-5"],["formControlName","wantsAssertionsSigned"],["formControlName","authnRequestSigned"],["formControlName","propagateLogout"],["formControlName","clientId",3,"validator","label"],["formControlName","clientSecret",3,"validator","label"],["formControlName","discoveryUrl",3,"validator","label"],["formControlName","scope",3,"label"],["formControlName","customParams"],[1,"col-12","form-control"],["formControlName","preferredJwsAlgorithm",3,"label"],[3,"value","content",4,"ngFor","ngForOf"],[1,"col-4"],["formControlName","useState"],["formControlName","usePkce"],["formControlName","useNonce"],[1,"col-6","padding0"]],template:function(e,t){if(1&e&&(T.Tb(0,"form",0),T.Tb(1,"div",1),T.Tb(2,"div",2),T.Tb(3,"vitamui-common-slide-toggle",3),T.Oc(4),T.jc(5,"translate"),T.Sb(),T.Sb(),T.Tb(6,"div",2),T.Tb(7,"div",4),T.Tb(8,"label"),T.Oc(9,"Identifiant SSO"),T.Sb(),T.Tb(10,"div"),T.Oc(11),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Mc(12,ri,10,6,"div",5),T.Tb(13,"div",6),T.Tb(14,"div",2),T.Ob(15,"vitamui-common-editable-input",7),T.jc(16,"translate"),T.Sb(),T.Tb(17,"div",2),T.Tb(18,"vitamui-common-editable-toggle-group",8),T.jc(19,"translate"),T.Ob(20,"vitamui-common-editable-button-toggle",9),T.jc(21,"translate"),T.Ob(22,"vitamui-common-editable-button-toggle",9),T.jc(23,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(24,"div",6),T.Tb(25,"div",2),T.Tb(26,"vitamui-common-editable-input",10),T.jc(27,"translate"),T.Tb(28,"vitamui-common-field-error",11),T.Oc(29),T.jc(30,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(31,"div",6),T.Tb(32,"div",2),T.Ob(33,"vitamui-common-editable-input",12),T.jc(34,"translate"),T.Sb(),T.Tb(35,"div",2),T.Ob(36,"vitamui-common-editable-input",13),T.jc(37,"translate"),T.Sb(),T.Sb(),T.Tb(38,"div",14),T.Tb(39,"div",15),T.Tb(40,"app-editable-patterns",16),T.jc(41,"translate"),T.Tb(42,"vitamui-common-field-error",11),T.Oc(43),T.jc(44,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(45,"div",17),T.Tb(46,"vitamui-common-slide-toggle",18),T.Oc(47),T.jc(48,"translate"),T.Sb(),T.Sb(),T.Mc(49,si,20,18,"div",19),T.Mc(50,ui,50,40,"div",19),T.Sb()),2&e){var i=null,o=null,n=null,r=null,a=null,c=null,s=null,l=null;T.oc("formGroup",t.form),T.Bb(4),T.Pc(T.kc(5,28,"CUSTOMER.SSO.ACTIVE_SWITCH")),T.Bb(7),T.Pc(t.identityProvider.technicalName),T.Bb(1),T.oc("ngIf",!t.form.get("internal").value),T.Bb(3),T.oc("label",T.kc(16,30,"COMMON.ID"))("validator",null==t.form||null==(i=t.form.get("identifier"))?null:i.validator)("asyncValidator",null==t.form||null==(o=t.form.get("identifier"))?null:o.asyncValidator),T.Bb(3),T.oc("label",T.kc(19,32,"CUSTOMER.SSO.TYPE"))("validator",null==t.form||null==(n=t.form.get("internal"))?null:n.validator)("asyncValidator",null==t.form||null==(r=t.form.get("internal"))?null:r.asyncValidator),T.Bb(2),T.oc("value",!0)("content",T.kc(21,34,"CUSTOMER.SSO.TYPE_INTERNAL")),T.Bb(2),T.oc("value",!1)("content",T.kc(23,36,"CUSTOMER.SSO.TYPE_EXTERNAL")),T.Bb(4),T.oc("label",T.kc(27,38,"CUSTOMER.SSO.IDP_NAME"))("validator",null==t.form||null==(a=t.form.get("name"))?null:a.validator)("asyncValidator",null==t.form||null==(c=t.form.get("name"))?null:c.asyncValidator),T.Bb(3),T.Pc(T.kc(30,40,"COMMON.ERROR.REQUIRED")),T.Bb(4),T.oc("label",T.kc(34,42,"CUSTOMER.SSO.MAIL_ATTRIBUTE")),T.Bb(3),T.oc("label",T.kc(37,44,"CUSTOMER.SSO.IDENTIFIER_ATTRIBUTE")),T.Bb(4),T.oc("label",T.kc(41,46,"CUSTOMER.SSO.PATTERNS"))("options",t.domains)("validator",null==t.form||null==(s=t.form.get("patterns"))?null:s.validator)("asyncValidator",null==t.form||null==(l=t.form.get("patterns"))?null:l.asyncValidator),T.Bb(3),T.Pc(T.kc(44,48,"COMMON.ERROR.REQUIRED")),T.Bb(4),T.Pc(T.kc(48,50,"CUSTOMER.SSO.AUTO_PROVISIONING")),T.Bb(2),T.oc("ngIf","SAML"===t.form.value.protocoleType&&t.displayOIDCSAMLBLOCKS),T.Bb(1),T.oc("ngIf","OIDC"===t.form.value.protocoleType&&t.displayOIDCSAMLBLOCKS)}},directives:[l.y,l.r,l.i,c.ac,l.q,l.g,o.p,c.F,l.l,c.K,c.B,c.zb,_t,Xt,c.E,l.f,ni,c.I,o.o,c.H],pipes:[we.d],styles:[".pattern-row[_ngcontent-%COMP%]{padding-bottom:10px}.padding0[_ngcontent-%COMP%]{padding:0}"]}),e})();function bi(e,t){if(1&e){const e=T.Ub();T.Tb(0,"button",5),T.ec("click",(function(){return T.Dc(e),T.ic(2).openCreateIDPDialog()})),T.Tb(1,"div",6),T.jc(2,"translate"),T.Oc(3),T.jc(4,"translate"),T.Sb(),T.Sb()}if(2&e){const e=T.ic(2);T.oc("disabled",!e.domainsAvailable),T.Bb(1),T.oc("matTooltipDisabled",e.domainsAvailable)("matTooltip",T.kc(2,4,"CUSTOMER.SSO.UNAVAILABLE_DOMAINS")),T.Bb(2),T.Qc(" ",T.kc(4,6,"CUSTOMER.SSO.BUTTON")," ")}}function mi(e,t){1&e&&(T.Tb(0,"div"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"CUSTOMER.SSO.TYPE_INTERNAL")))}function pi(e,t){1&e&&(T.Tb(0,"div"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"CUSTOMER.SSO.TYPE_EXTERNAL")))}function hi(e,t){if(1&e&&(T.Tb(0,"div"),T.Oc(1),T.Sb()),2&e){const e=t.$implicit;T.Bb(1),T.Pc(e)}}function gi(e,t){1&e&&(T.Tb(0,"div",20),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"CUSTOMER.SSO.STATUS_ACTIVE")))}function fi(e,t){1&e&&(T.Tb(0,"div",21),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"CUSTOMER.SSO.STATUS_INACTIVE")))}function vi(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",7),T.Tb(1,"div",8),T.ec("click",(function(){T.Dc(e);const i=t.$implicit;return T.ic(2).selectIdentityProvider(i)})),T.Tb(2,"div",9),T.Tb(3,"label"),T.Oc(4),T.jc(5,"translate"),T.Sb(),T.Tb(6,"div"),T.Oc(7),T.Sb(),T.Sb(),T.Tb(8,"div",10),T.Tb(9,"label"),T.Oc(10),T.jc(11,"translate"),T.Sb(),T.Mc(12,mi,3,3,"div",11),T.Mc(13,pi,3,3,"div",11),T.Sb(),T.Tb(14,"div",12),T.Tb(15,"label"),T.Oc(16),T.jc(17,"translate"),T.Sb(),T.Mc(18,hi,2,1,"div",13),T.Sb(),T.Tb(19,"div",14),T.Mc(20,gi,3,3,"div",15),T.Mc(21,fi,3,3,"div",16),T.Sb(),T.Sb(),T.Tb(22,"a",17),T.ec("click",(function(){T.Dc(e);const i=t.$implicit;return T.ic(2).downloadFile(null==i?null:i.internal,null==i?null:i.idpMetadataUrl)})),T.Tb(23,"i",18),T.Oc(24,"file_download"),T.Sb(),T.Tb(25,"span",19),T.Oc(26),T.jc(27,"translate"),T.Sb(),T.Sb(),T.Tb(28,"a",17),T.ec("click",(function(){T.Dc(e);const i=t.$implicit;return T.ic(2).downloadFile(null==i?null:i.internal,null==i?null:i.spMetadataUrl)})),T.Tb(29,"i",18),T.Oc(30,"file_download"),T.Sb(),T.Tb(31,"span",19),T.Oc(32),T.jc(33,"translate"),T.Sb(),T.Sb(),T.Sb()}if(2&e){const e=t.$implicit;T.Bb(4),T.Pc(T.kc(5,15,"CUSTOMER.SSO.NAME")),T.Bb(3),T.Pc(null==e?null:e.name),T.Bb(3),T.Pc(T.kc(11,17,"CUSTOMER.SSO.TYPE")),T.Bb(2),T.oc("ngIf",null==e?null:e.internal),T.Bb(1),T.oc("ngIf",!(null!=e&&e.internal)),T.Bb(3),T.Pc(T.kc(17,19,"CUSTOMER.SSO.PATTERNS")),T.Bb(2),T.oc("ngForOf",null==e?null:e.patterns),T.Bb(2),T.oc("ngIf",null==e?null:e.enabled),T.Bb(1),T.oc("ngIf",!(null!=e&&e.enabled)),T.Bb(1),T.Fb("disabled",null==e?null:e.internal),T.Bb(4),T.Pc(T.kc(27,21,"CUSTOMER.SSO.METADATA")),T.Bb(2),T.Fb("disabled",null==e?null:e.internal),T.Bb(4),T.Pc(T.kc(33,23,"CUSTOMER.SSO.SP_METADATA"))}}function Oi(e,t){if(1&e&&(T.Tb(0,"div",2),T.Mc(1,bi,5,8,"button",3),T.Mc(2,vi,34,25,"div",4),T.Sb()),2&e){const e=T.ic();T.Bb(1),T.oc("ngIf",!e.readOnly),T.Bb(1),T.oc("ngForOf",e.providers)}}function Si(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",2),T.Tb(1,"div"),T.Tb(2,"button",22),T.ec("click",(function(){return T.Dc(e),T.ic().selectedIdentityProvider=null})),T.Ob(3,"i",23),T.Rb(4),T.Tb(5,"span",24),T.Oc(6),T.jc(7,"translate"),T.Sb(),T.Qb(),T.Sb(),T.Ob(8,"app-identity-provider-details",25),T.Sb(),T.Sb()}if(2&e){const e=T.ic();T.Bb(6),T.Pc(T.kc(7,4,"CUSTOMER.SSO.RETURN")),T.Bb(2),T.oc("identityProvider",e.selectedIdentityProvider)("domains",e.domains)("readOnly",e.readOnly||e.selectedIdentityProvider.readonly)}}let Ti=(()=>{class e{constructor(e,t,i){this.dialog=e,this.identityProviderService=t,this.providerApi=i,this.panel1Position="current",this.panel2Position="next",this.domains=[]}set customer(e){this._customer=e,this.selectedIdentityProvider=null,this._customer&&(this.identityProviderService.getAll(this.customer.id).subscribe(e=>{this.providers=e}),this.refreshAvailableDomains())}get customer(){return this._customer}ngOnInit(){this.updatedProviderSub=this.identityProviderService.updated.subscribe(e=>{const t=this.providers.findIndex(t=>e.id===t.id);t>-1&&(this.providers[t]=e),this.refreshAvailableDomains()})}ngOnDestroy(){this.updatedProviderSub.unsubscribe()}openCreateIDPDialog(){this.dialog.open(xt,{data:{customer:this.customer,domains:this.domains},disableClose:!0,panelClass:"vitamui-modal"}).afterClosed().subscribe(e=>{e&&(this.providers.push(e),this.refreshAvailableDomains())})}selectIdentityProvider(e){this.selectedIdentityProvider=e}get domainsAvailable(){return this.domains.filter(e=>!e.disabled).length>0}downloadFile(e,t){e||this.providerApi.getFileByUrl(t).subscribe(e=>c.z.loadFromBlob(e,e.body.type))}refreshAvailableDomains(){this.identityProviderService.getDomainByCustomerId(this.customer.id).subscribe(e=>{this.domains=this.customer.emailDomains.map(t=>({value:t,disabled:e.includes(t)}))})}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(n.b),T.Nb(ct),T.Nb(at))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-sso-tab"]],inputs:{customer:"customer",readOnly:"readOnly"},decls:4,vars:6,consts:[[1,"vitamui-panel"],["class","vitamui-panel-content",4,"ngIf"],[1,"vitamui-panel-content"],["class","btn primary",3,"disabled","click",4,"ngIf"],["class","provider-list d-flex align-items-center mb-2",4,"ngFor","ngForOf"],[1,"btn","primary",3,"disabled","click"],["matTooltipClass","vitamui-tooltip",3,"matTooltipDisabled","matTooltip"],[1,"provider-list","d-flex","align-items-center","mb-2"],[1,"provider-item-content","d-flex","py-3","px-1",3,"click"],[1,"col-3"],[1,"col-2"],[4,"ngIf"],[1,"col-5"],[4,"ngFor","ngForOf"],[1,"col-2","d-flex","align-items-center"],["class","provider-status active",4,"ngIf"],["class","provider-status",4,"ngIf"],[1,"provider-item-link","clickable",3,"click"],[1,"material-icons"],[1,"p-0"],[1,"provider-status","active"],[1,"provider-status"],["type","button",1,"btn","link",3,"click"],[1,"vitamui-icon","vitamui-icon-chevron-left"],[1,"underline"],[3,"identityProvider","domains","readOnly"]],template:function(e,t){1&e&&(T.Tb(0,"div",0),T.Mc(1,Oi,3,2,"div",1),T.Sb(),T.Tb(2,"div",0),T.Mc(3,Si,9,6,"div",1),T.Sb()),2&e&&(T.Fb("active",!t.selectedIdentityProvider),T.Bb(1),T.oc("ngIf",!t.selectedIdentityProvider),T.Bb(1),T.Fb("active",t.selectedIdentityProvider),T.Bb(1),T.oc("ngIf",t.selectedIdentityProvider))},directives:[o.p,o.o,v.a,di],pipes:[we.d],styles:["[_nghost-%COMP%]   .vitamui-panel-content[_ngcontent-%COMP%]{padding:0!important}button.back[_ngcontent-%COMP%]{margin-bottom:30px}.vitamui-panel[_ngcontent-%COMP%]   .vitamui-panel-content[_ngcontent-%COMP%]{padding:30px 60px 0 40px;overflow:visible;height:100%;width:100%;transform:none}button.btn[_ngcontent-%COMP%]{margin-bottom:20px}.provider-list[_ngcontent-%COMP%]{width:100%;font-size:14px}.provider-list[_ngcontent-%COMP%]   .provider-item-content[_ngcontent-%COMP%]{border-radius:5px;background-color:var(--vitamui-grey-100);color:var(--vitamui-grey-900);min-height:60px;width:90%;cursor:pointer}.provider-list[_ngcontent-%COMP%]   .provider-item-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:500}.provider-list[_ngcontent-%COMP%]   .provider-item-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:400}.provider-list[_ngcontent-%COMP%]   .provider-item-centered[_ngcontent-%COMP%]{align-self:center}.provider-list[_ngcontent-%COMP%]   .provider-item-link[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:60px;border-radius:3px;border:1px solid var(--vitamui-primary);margin-left:10px;color:var(--vitamui-primary);font-size:9px;text-align:center;text-decoration:none}.provider-list[_ngcontent-%COMP%]   .provider-item-link.disabled[_ngcontent-%COMP%]{opacity:.4;pointer-events:none}.provider-list[_ngcontent-%COMP%]   .provider-status[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:var(--vitamui-grey-600);width:100%;text-align:right}.provider-list[_ngcontent-%COMP%]   .provider-status.active[_ngcontent-%COMP%]{color:#27740a}"],data:{animation:[Object(it.o)("panelTransition",[Object(it.l)("previous",Object(it.m)({transform:"translate3d(-100%, 0, 0)"})),Object(it.l)("next",Object(it.m)({transform:"translate3d(100%, 0, 0)"})),Object(it.l)("current",Object(it.m)({transform:"translate3d(0, 0, 0)"})),Object(it.n)("* <=> current",Object(it.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))]),Object(it.o)("slideLeftTransition",[Object(it.n)(":enter",[Object(it.m)({transform:"translate3d(-100%, 0, 0)"}),Object(it.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)")]),Object(it.n)(":leave",[Object(it.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)",Object(it.m)({transform:"translate3d(-100%, 0, 0)"}))])]),Object(it.o)("slideRightTransition",[Object(it.l)("*",Object(it.m)({transform:"translate3d(0, 0, 0)"})),Object(it.n)(":enter",[Object(it.m)({transform:"translate3d(100%, 0, 0)"}),Object(it.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)")]),Object(it.n)(":leave",[Object(it.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)",Object(it.m)({transform:"translate3d(100%, 0, 0)"}))])])]}}),e})();var Ci=i("kuMc"),Mi=function(e){return e[e.NONE=0]="NONE",e[e.COLOR_INVALID=1]="COLOR_INVALID",e[e.COLOR_TOO_LIGHT=2]="COLOR_TOO_LIGHT",e[e.COLOR_TOO_DARK=3]="COLOR_TOO_DARK",e}({});const Ai=["colorPickerInput"];function Ei(e,t){1&e&&(T.Tb(0,"div"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"GRAPHIC_IDENTITY.INVALID")))}function Ri(e,t){1&e&&(T.Rb(0),T.Tb(1,"div"),T.Oc(2),T.jc(3,"translate"),T.Sb(),T.Tb(4,"div"),T.Oc(5),T.jc(6,"translate"),T.Sb(),T.Qb()),2&e&&(T.Bb(2),T.Pc(T.kc(3,2,"CUSTOMER.GRAPHIC_IDENTITY.TOO_LIGHT")),T.Bb(3),T.Pc(T.kc(6,4,"CUSTOMER.GRAPHIC_IDENTITY.INCOMPATIBLE")))}function Ii(e,t){1&e&&(T.Rb(0),T.Tb(1,"div"),T.Oc(2),T.jc(3,"translate"),T.Sb(),T.Tb(4,"div"),T.Oc(5),T.jc(6,"translate"),T.Sb(),T.Qb()),2&e&&(T.Bb(2),T.Pc(T.kc(3,2,"CUSTOMER.GRAPHIC_IDENTITY.TOO_DARK")),T.Bb(3),T.Pc(T.kc(6,4,"CUSTOMER.GRAPHIC_IDENTITY.INCOMPATIBLE")))}function yi(e,t){if(1&e&&(T.Tb(0,"vitamui-common-input-error",4),T.Ob(1,"i",5),T.Tb(2,"div",6),T.Mc(3,Ei,3,3,"div",7),T.Mc(4,Ri,7,6,"ng-container",7),T.Mc(5,Ii,7,6,"ng-container",7),T.Sb(),T.Sb()),2&e){const e=T.ic();T.Bb(1),T.Jc("font-size",20,"px"),T.Bb(1),T.oc("ngSwitch",e.colorError),T.Bb(1),T.oc("ngSwitchCase",e.colorErrorEnum.COLOR_INVALID),T.Bb(1),T.oc("ngSwitchCase",e.colorErrorEnum.COLOR_TOO_LIGHT),T.Bb(1),T.oc("ngSwitchCase",e.colorErrorEnum.COLOR_TOO_DARK)}}let ki=(()=>{class e{constructor(){this.colorErrorEnum=Mi,this.colorError=Mi.NONE}ngOnInit(){this.color=this.colorInput.value,this.colorInput.valueChanges.subscribe(e=>{this.color=e,this.checkWarning&&this.checkColor500(e)})}checkColor500(e){this.colorError=Mi.NONE;const t=Object(c.Jb)(e);if(t){const e=Object(c.Nb)(t);e?e.l>60?this.colorError=Mi.COLOR_TOO_LIGHT:e.l<40&&(this.colorError=Mi.COLOR_TOO_DARK):this.colorError=Mi.COLOR_INVALID}else this.colorError=Mi.COLOR_INVALID}onPickerOpen(){this.disabled&&this.colorPicker.closeDialog()}openPicker(){this.disabled||this.colorPicker.openDialog()}forceHex(){this.colorInput.value.startsWith("#")||this.colorInput.setValue("#"+this.colorInput.value)}handlePicker(e){let t=this.colorInput.value.toUpperCase();if(e=e.toUpperCase(),t.startsWith("#")&&(t=t.substring(1)),e.startsWith("#")&&(e=e.substring(1)),3===t.length&&6===e.length)for(let i=0;i<3;i++)if(t.charAt(i)===e.charAt(2*i)&&t.charAt(i)===e.charAt(2*i+1))return;this.colorInput.setValue("#"+e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=T.Hb({type:e,selectors:[["app-input-color"]],viewQuery:function(e,t){var i;1&e&&T.Uc(Ai,!0,le),2&e&&T.yc(i=T.fc())&&(t.colorPicker=i.first)},inputs:{placeholder:"placeholder",disabled:"disabled",colorInput:"colorInput",checkWarning:"checkWarning"},decls:5,vars:9,consts:[["cpAlphaChannel","disabled","cpDisableInput","true","cpOutputFormat","hex","cpFallbackColor","#000","maxlength","7",3,"colorPicker","disabled","formControl","placeholder","colorPickerChange","colorPickerOpen","change","keyup"],["colorPickerInput",""],["class","d-flex align-items-center",4,"ngIf"],[1,"input-color-preview",3,"click"],[1,"d-flex","align-items-center"],[1,"vitamui-icon","vitamui-icon-anomalie","mr-1"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(e,t){1&e&&(T.Tb(0,"vitamui-common-input",0,1),T.ec("colorPickerChange",(function(e){return t.handlePicker(e)}))("colorPickerOpen",(function(){return t.onPickerOpen()}))("change",(function(){return t.forceHex()}))("keyup",(function(){return t.forceHex()})),T.Mc(2,yi,6,6,"vitamui-common-input-error",2),T.Sb(),T.Tb(3,"div",3),T.ec("click",(function(){return t.openPicker()})),T.jc(4,"safeStyle"),T.Sb()),2&e&&(T.pc("placeholder",t.placeholder),T.oc("colorPicker",t.color)("disabled",t.disabled)("formControl",t.colorInput),T.Bb(2),T.oc("ngIf",t.colorError!==t.colorErrorEnum.NONE),T.Bb(1),T.Jc("background-color",T.kc(4,7,t.color)))},directives:[c.Qb,l.l,le,l.q,l.f,o.p,c.Rb,o.r,o.s],pipes:[c.pc,we.d],styles:["[_nghost-%COMP%]{position:relative;width:300px;display:block}[_nghost-%COMP%]   .input-color-preview[_ngcontent-%COMP%]{padding:0;position:absolute;right:10px;top:10px;width:40px;height:40px;border-radius:5px}vitamui-common-input[_ngcontent-%COMP%]{width:300px!important}"]}),e})();function Bi(e,t){if(1&e&&(T.Tb(0,"div"),T.Ob(1,"app-input-color",4),T.jc(2,"translate"),T.Sb()),2&e){const e=t.$implicit,i=T.ic();T.Bb(1),T.oc("disabled",i.disabled)("colorInput",i.formGroup.get(e))("checkWarning",!0)("placeholder",T.kc(2,4,i.baseColors[e]))}}function Ni(e,t){if(1&e){const e=T.Ub();T.Rb(0),T.Tb(1,"small",7),T.ec("click",(function(){T.Dc(e);const t=T.ic();return t.displayTertiary=!t.displayTertiary})),T.Oc(2),T.jc(3,"translate"),T.Sb(),T.Qb()}2&e&&(T.Bb(2),T.Pc(T.kc(3,1,"CUSTOMER.GRAPHIC_IDENTITY.TERTIARY_COLOR_SHOW")))}function wi(e,t){if(1&e){const e=T.Ub();T.Tb(0,"small",7),T.ec("click",(function(){T.Dc(e);const t=T.ic();return t.displayTertiary=!t.displayTertiary})),T.Oc(1),T.jc(2,"translate"),T.Sb()}2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"CUSTOMER.GRAPHIC_IDENTITY.TERTIARY_COLOR_HIDE")))}const xi=function(e,t){return[e,t]},Pi=function(e,t){return{unselected:e,selected:t}};let Di=(()=>{class e{constructor(e){this.themeService=e,this.isUpdating=!1,this.displayTertiary=!1,this.backgroundColors=[],this.THEME_COLORS=c.ub}ngOnInit(){this.baseColors=this.themeService.getBaseColors(),this.colors=this.themeService.getThemeColors(),this.backgroundColors=this.themeService.backgroundChoice.map(e=>({id:e.value,label:e.class,isDefault:e.isDefault}))}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(c.vb))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-customer-colors-input"]],inputs:{formGroup:"formGroup",themeOverloadSelector:"themeOverloadSelector",disabled:"disabled",isUpdating:"isUpdating"},decls:12,vars:31,consts:[[3,"formGroup"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["closeTertiary",""],[3,"disabled","colorInput","checkWarning","placeholder"],[3,"colorInput","disabled","placeholder"],[1,"mb-4",3,"disabled","data","messages","selected","selectedChange"],[1,"mb-4","pb-2",3,"click"]],template:function(e,t){if(1&e&&(T.Rb(0,0),T.Mc(1,Bi,3,6,"div",1),T.Mc(2,Ni,4,3,"ng-container",2),T.Mc(3,wi,3,3,"ng-template",null,3,T.Nc),T.Ob(5,"app-input-color",4),T.jc(6,"translate"),T.Ob(7,"app-input-color",5),T.jc(8,"translate"),T.Tb(9,"vitamui-common-select",6),T.ec("selectedChange",(function(e){return t.formGroup.get(t.THEME_COLORS.VITAMUI_BACKGROUND).setValue(e)})),T.jc(10,"translate"),T.jc(11,"translate"),T.Sb(),T.Qb()),2&e){const e=T.zc(4);T.oc("formGroup",t.formGroup),T.Bb(1),T.oc("ngForOf",T.uc(25,xi,t.THEME_COLORS.VITAMUI_PRIMARY,t.THEME_COLORS.VITAMUI_SECONDARY)),T.Bb(1),T.oc("ngIf",!t.displayTertiary)("ngIfElse",e),T.Bb(3),T.Jc("display",t.displayTertiary?"block":"none"),T.oc("disabled",t.disabled)("colorInput",t.formGroup.get(t.THEME_COLORS.VITAMUI_TERTIARY))("checkWarning",!0)("placeholder",T.kc(6,17,"COLOR.TERTIARY")),T.Bb(2),T.oc("colorInput",t.formGroup.get(t.THEME_COLORS.VITAMUI_HEADER_FOOTER))("disabled",t.disabled)("placeholder",T.kc(8,19,"COLOR.HEADER_FOOTER")),T.Bb(2),T.oc("disabled",t.disabled)("data",t.backgroundColors)("messages",T.uc(28,Pi,T.kc(10,21,"COLOR.BACKGROUND"),T.kc(11,23,"COLOR.BACKGROUND")))("selected",t.formGroup.get(t.THEME_COLORS.VITAMUI_BACKGROUND).value)}},directives:[l.r,l.i,o.o,o.p,ki,c.kc],pipes:[we.d],styles:["[_nghost-%COMP%]   small[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer;color:var(--vitamui-primary)}"]}),e})();const Ui=function(){return{width:280,height:100}};function ji(e,t){if(1&e){const e=T.Ub();T.Tb(0,"form",1),T.Tb(1,"div",2),T.Tb(2,"div",3),T.Tb(3,"div",4),T.Oc(4),T.jc(5,"translate"),T.Sb(),T.Ob(6,"app-customer-colors-input",5),T.Sb(),T.Tb(7,"div",6),T.Tb(8,"div",4),T.Oc(9),T.jc(10,"translate"),T.Sb(),T.Tb(11,"div",7),T.Tb(12,"div"),T.Tb(13,"label",8),T.Oc(14),T.jc(15,"translate"),T.Sb(),T.Tb(16,"vitamui-common-drag-drop-file",9),T.ec("file",(function(t){T.Dc(e);const i=T.ic();return i.addOrReplaceLogo(i.ATTACHMENT_TYPE.Portal,t)})),T.jc(17,"translate"),T.jc(18,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(19,"div",7),T.Tb(20,"div",10),T.Tb(21,"label",8),T.Oc(22),T.jc(23,"translate"),T.Sb(),T.Tb(24,"vitamui-common-drag-drop-file",11),T.ec("file",(function(t){T.Dc(e);const i=T.ic();return i.addOrReplaceLogo(i.ATTACHMENT_TYPE.Header,t)})),T.jc(25,"translate"),T.jc(26,"translate"),T.Sb(),T.Sb(),T.Tb(27,"div"),T.Tb(28,"label",8),T.Oc(29),T.jc(30,"translate"),T.Sb(),T.Tb(31,"vitamui-common-drag-drop-file",11),T.ec("file",(function(t){T.Dc(e);const i=T.ic();return i.addOrReplaceLogo(i.ATTACHMENT_TYPE.Footer,t)})),T.jc(32,"translate"),T.jc(33,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Sb()}if(2&e){const e=T.ic();var i,o,n;T.oc("formGroup",e.graphicIdentityForm),T.Bb(4),T.Pc(T.kc(5,27,"CUSTOMER.GRAPHIC_IDENTITY.COLOR_TITLE")),T.Bb(2),T.oc("formGroup",e.graphicIdentityForm.get("themeColors"))("isUpdating",!0)("disabled",e.disabled),T.Bb(3),T.Pc(T.kc(10,29,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_TITLE")),T.Bb(5),T.Pc(T.kc(15,31,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_PORTAL_TITLE")),T.Bb(2),T.oc("disabled",e.disabled)("fileUrl",null==(i=e.graphicIdentityForm.get("portalUrl"))?null:i.value)("logoSize",T.sc(49,Ui))("canDelete",!1)("messContent",T.kc(17,33,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_DROP"))("messPj",T.kc(18,35,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_ATTACH")),T.Bb(6),T.Pc(T.kc(23,37,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_HEADER_TITLE")),T.Bb(2),T.oc("disabled",e.disabled)("fileUrl",null==(o=e.graphicIdentityForm.get("headerUrl"))?null:o.value)("logoSize",T.sc(50,Ui))("canDelete",!1)("messContent",T.kc(25,39,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_DROP"))("messPj",T.kc(26,41,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_ATTACH")),T.Bb(5),T.Pc(T.kc(30,43,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_FOOTER_TITLE")),T.Bb(2),T.oc("disabled",e.disabled)("fileUrl",null==(n=e.graphicIdentityForm.get("footerUrl"))?null:n.value)("logoSize",T.sc(51,Ui))("canDelete",!1)("messContent",T.kc(32,45,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_DROP"))("messPj",T.kc(33,47,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_ATTACH"))}}let Fi=(()=>{class e{constructor(e){this.themeService=e,this.disabled=!1,this.formChange=new T.n,this.ATTACHMENT_TYPE=c.i,this.logos=[]}ngOnInit(){this.applyTheme(),this.graphicIdentityForm.valueChanges.subscribe(()=>{this.formChange.emit({form:this.graphicIdentityForm,logos:this.logos})}),this.graphicIdentityForm.get("themeColors").valueChanges.subscribe(()=>{this.graphicIdentityForm.updateValueAndValidity(),this.applyTheme(),this.formChange.emit({form:this.graphicIdentityForm,logos:this.logos})})}applyTheme(){if(this.graphicIdentityForm.valid){const e=this.themeService.getThemeColors(this.graphicIdentityForm.get("themeColors").value);this.themeService.overloadLocalTheme(e,"#toOverride")}}addOrReplaceLogo(e,t){const i={attr:e,file:t},o=this.logos.findIndex(e=>e.attr===i.attr);-1===o?this.logos.push(i):this.logos[o]=i,this.formChange.emit({form:this.graphicIdentityForm,logos:this.logos})}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(c.vb))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-graphic-identity-form"]],inputs:{graphicIdentityForm:"graphicIdentityForm",disabled:"disabled"},outputs:{formChange:"formChange"},decls:1,vars:1,consts:[["id","graphicIdentityForm",3,"formGroup",4,"ngIf"],["id","graphicIdentityForm",3,"formGroup"],[1,"d-flex","justify-content-between"],[1,"container-color"],[1,"text","large","bold","mb-4"],["themeOverloadSelector","form#graphicIdentityForm",1,"d-inline-flex","flex-column",3,"formGroup","isUpdating","disabled"],[1,"pl-4","d-flex","flex-column"],[1,"d-flex"],[1,"text","normal","bold"],[1,"color-background","image-area-big",3,"disabled","fileUrl","logoSize","canDelete","messContent","messPj","file"],[1,"mr-4"],[1,"color-header-footer","image-area-small",3,"disabled","fileUrl","logoSize","canDelete","messContent","messPj","file"]],template:function(e,t){1&e&&T.Mc(0,ji,34,52,"form",0),2&e&&T.oc("ngIf",t.graphicIdentityForm)},directives:[o.p,l.y,l.r,l.i,Di,c.lc],pipes:[we.d],styles:["[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}[_nghost-%COMP%]     .color-header-footer>*>.drag-and-drop-area{background-color:var(--vitamui-header-footer)}[_nghost-%COMP%]     .color-background>*>.drag-and-drop-area{background-color:var(--vitamui-background)}[_nghost-%COMP%]     .image-area-big>*>.drag-and-drop-area>.image-area{height:230px;width:410px;max-width:100%}[_nghost-%COMP%]     .image-area-big>*>.drag-and-drop-area>.image-area img{max-height:120px;max-width:100%}[_nghost-%COMP%]     .image-area-small>*>.drag-and-drop-area>.image-area{width:200px}[_nghost-%COMP%]   .container-color[_ngcontent-%COMP%]{min-width:295px}[_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:20px}[_nghost-%COMP%]   .container-color[_ngcontent-%COMP%]{margin-right:80px}[_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-left:10px}[_nghost-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}[_nghost-%COMP%]   vitamui-common-input[_ngcontent-%COMP%]{width:47%}[_nghost-%COMP%]   vitamui-common-textarea[_ngcontent-%COMP%] + small[_ngcontent-%COMP%]{text-align:end;color:var(--vitamui-grey-900)}"]}),e})();function Li(e,t){if(1&e&&T.Ob(0,"app-graphic-identity-form",4),2&e){const e=T.ic();T.oc("graphicIdentityForm",e.defaultForm)("disabled",!0)}}function Vi(e,t){if(1&e){const e=T.Ub();T.Tb(0,"app-graphic-identity-form",5),T.ec("formChange",(function(t){return T.Dc(e),T.ic().sendForm(t)})),T.Sb()}if(2&e){const e=T.ic();T.oc("graphicIdentityForm",e.customerForm)}}let qi=(()=>{class e{constructor(e,t,i){this.dialogRef=e,this.formBuilder=t,this.themeService=i,this.hexValidator=l.x.pattern(/#([0-9A-Fa-f]{6})/),this.destroy=new ot.a,this.formToSend=new T.n,this.customerTheme={colors:null,headerUrl:"",footerUrl:"",portalUrl:""},this.defaultTheme=this.themeService.defaultTheme,this.displayCustomGraphicIdentity=new l.e(!1)}ngOnDestroy(){this.destroy.next()}ngOnInit(){this.graphicIdentityForm=this.formBuilder.group({id:null,hasCustomGraphicIdentity:!1,themeColors:this.formBuilder.group({[c.ub.VITAMUI_PRIMARY]:new l.e("",[this.hexValidator,l.x.required]),[c.ub.VITAMUI_SECONDARY]:new l.e("",[this.hexValidator,l.x.required]),[c.ub.VITAMUI_TERTIARY]:new l.e("",this.hexValidator),[c.ub.VITAMUI_HEADER_FOOTER]:new l.e("",[this.hexValidator,l.x.required]),[c.ub.VITAMUI_BACKGROUND]:new l.e("",[this.hexValidator,l.x.required])}),headerUrl:"",footerUrl:"",portalUrl:""}),this.customerTheme={colors:this.customer&&this.customer.themeColors?this.themeService.getThemeColors(this.customer.themeColors):this.defaultTheme.colors,headerUrl:this.customerLogosUrl?this.customerLogosUrl.headerUrl:this.defaultTheme.headerUrl,footerUrl:this.customerLogosUrl?this.customerLogosUrl.footerUrl:this.defaultTheme.footerUrl,portalUrl:this.customerLogosUrl?this.customerLogosUrl.portalUrl:this.defaultTheme.portalUrl},this.customer&&(this.customer.id&&this.graphicIdentityForm.get("id").setValue(this.customer.id),this.customer.hasCustomGraphicIdentity&&this.displayCustomGraphicIdentity.patchValue(!0)),this.defaultForm=this.setTheme(this.defaultTheme),this.customerForm=this.setTheme(this.customerTheme),!0===this.displayCustomGraphicIdentity.value?(this.customerForm.get("hasCustomGraphicIdentity").patchValue(!0),this.formToSend.emit({form:this.customerForm,logos:null})):this.formToSend.emit({form:this.formBuilder.group({id:this.graphicIdentityForm.get("id").value,hasCustomGraphicIdentity:!1}),logos:null}),this.displayCustomGraphicIdentity.valueChanges.subscribe(e=>{e?(this.customerForm.get("hasCustomGraphicIdentity").patchValue(!0),this.formToSend.emit({form:this.customerForm,logos:null})):this.formToSend.emit({form:this.formBuilder.group({id:this.graphicIdentityForm.get("id").value,hasCustomGraphicIdentity:!1}),logos:null})})}sendForm(e){this.customerForm=e.form,this.formToSend.emit(e)}setTheme(e){let t=this.formBuilder.group(this.graphicIdentityForm.get("themeColors").value);e.colors&&(t=new l.h({[c.ub.VITAMUI_PRIMARY]:new l.e(e.colors[c.ub.VITAMUI_PRIMARY],[this.hexValidator,l.x.required]),[c.ub.VITAMUI_SECONDARY]:new l.e(e.colors[c.ub.VITAMUI_SECONDARY],[this.hexValidator,l.x.required]),[c.ub.VITAMUI_TERTIARY]:new l.e(e.colors[c.ub.VITAMUI_TERTIARY],this.hexValidator),[c.ub.VITAMUI_HEADER_FOOTER]:new l.e(e.colors[c.ub.VITAMUI_HEADER_FOOTER],[this.hexValidator,l.x.required]),[c.ub.VITAMUI_BACKGROUND]:new l.e(e.colors[c.ub.VITAMUI_BACKGROUND],[this.hexValidator,l.x.required])})),this.graphicIdentityForm.get("headerUrl").setValue(e.headerUrl),this.graphicIdentityForm.get("footerUrl").setValue(e.footerUrl),this.graphicIdentityForm.get("portalUrl").setValue(e.portalUrl);const i=this.formBuilder.group(this.graphicIdentityForm.value);return i.controls.themeColors=t,i}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(n.g),T.Nb(l.d),T.Nb(c.vb))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-graphic-identity"]],inputs:{customer:"customer",customerLogosUrl:"customerLogosUrl"},outputs:{formToSend:"formToSend"},decls:6,vars:6,consts:[[3,"formControl"],[1,"mt-4"],[3,"graphicIdentityForm","disabled",4,"ngIf"],[3,"graphicIdentityForm","formChange",4,"ngIf"],[3,"graphicIdentityForm","disabled"],[3,"graphicIdentityForm","formChange"]],template:function(e,t){1&e&&(T.Ob(0,"vitamui-common-slide-toggle",0),T.Oc(1),T.jc(2,"translate"),T.Tb(3,"div",1),T.Mc(4,Li,1,2,"app-graphic-identity-form",2),T.Mc(5,Vi,1,1,"app-graphic-identity-form",3),T.Sb()),2&e&&(T.oc("formControl",t.displayCustomGraphicIdentity),T.Bb(1),T.Qc("",T.kc(2,4,"CUSTOMER.GRAPHIC_IDENTITY.TOGGLE_TITLE")," "),T.Bb(3),T.oc("ngIf",!t.displayCustomGraphicIdentity.value&&t.defaultForm),T.Bb(1),T.oc("ngIf",t.displayCustomGraphicIdentity.value&&t.customerForm))},directives:[c.ac,l.q,l.f,o.p,Fi],pipes:[we.d],styles:[""]}),e})(),_i=(()=>{class e{constructor(e,t,i){this.dialogRef=e,this.data=t,this.customerService=i,this.destroy=new ot.a,this.disabled=!0}get customForm(){return this._customForm}set customForm(e){this._customForm=e,this.disabled=!(this._customForm&&this._customForm.valid)}ngOnDestroy(){this.destroy.next()}ngOnInit(){this.customerLogosUrl=this.data.logos}onCancel(){this.dialogRef.close()}updateGraphicIdentity(){this.customForm.valid&&this.customerService.patch(this.customForm.value,this.logos).pipe(Object(Ci.a)(this.destroy)).subscribe(()=>{this.dialogRef.close(!0)},e=>{this.dialogRef.close(!1),console.error(e)})}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(n.g),T.Nb(n.a),T.Nb(fe.a))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-graphic-identity-update"]],decls:9,vars:9,consts:[["id","toOverride",1,"content"],[3,"customerLogosUrl","customer","formToSend"],[1,"d-flex"],["type","button",1,"btn","primary","mr-4",3,"disabled","click"],["type","button",1,"btn","cancel","link",3,"click"]],template:function(e,t){1&e&&(T.Tb(0,"div",0),T.Tb(1,"app-graphic-identity",1),T.ec("formToSend",(function(e){return t.customForm=e.form,t.logos=e.logos})),T.Sb(),T.Tb(2,"div",2),T.Tb(3,"button",3),T.ec("click",(function(){return t.updateGraphicIdentity()})),T.Oc(4),T.jc(5,"translate"),T.Sb(),T.Tb(6,"button",4),T.ec("click",(function(){return t.onCancel()})),T.Oc(7),T.jc(8,"translate"),T.Sb(),T.Sb(),T.Sb()),2&e&&(T.Bb(1),T.oc("customerLogosUrl",t.customerLogosUrl)("customer",t.data.customer),T.Bb(2),T.oc("disabled",t.disabled),T.Bb(1),T.Qc(" ",T.kc(5,5,"CUSTOMER.GRAPHIC_IDENTITY.SUBMIT")," "),T.Bb(3),T.Pc(T.kc(8,7,"COMMON.UNDO")))},directives:[qi],pipes:[we.d],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{padding:30px 60px 60px}"]}),e})();function Gi(e,t){1&e&&(T.Tb(0,"div"),T.Ob(1,"mat-spinner",15),T.Sb())}function Hi(e,t){if(1&e&&T.Ob(0,"img",16),2&e){const e=T.ic();T.oc("src",null==e.theme?null:e.theme.portalUrl,T.Fc)}}function Ki(e,t){1&e&&(T.Tb(0,"div"),T.Ob(1,"mat-spinner",15),T.Sb())}function Wi(e,t){if(1&e&&T.Ob(0,"img",16),2&e){const e=T.ic();T.oc("src",null==e.theme?null:e.theme.headerUrl,T.Fc)}}function Yi(e,t){1&e&&(T.Tb(0,"div"),T.Ob(1,"mat-spinner",15),T.Sb())}function zi(e,t){if(1&e&&T.Ob(0,"img",16),2&e){const e=T.ic();T.oc("src",null==e.theme?null:e.theme.footerUrl,T.Fc)}}function Qi(e,t){if(1&e&&(T.Tb(0,"span",14),T.jc(1,"safeStyle"),T.Sb()),2&e){const e=t.$implicit,i=T.ic().$implicit,o=T.ic();T.Jc("background-color",T.kc(1,2,o.theme.colors[i+e]))}}const Xi=function(){return["-900","-800","-700","-600","","-400","-300","-200","-100","-50"]};function Ji(e,t){if(1&e&&(T.Tb(0,"div",11),T.Tb(1,"div",12),T.Tb(2,"label",4),T.Oc(3),T.jc(4,"translate"),T.Sb(),T.Oc(5),T.Sb(),T.Tb(6,"div",13),T.Mc(7,Qi,2,4,"span",17),T.Sb(),T.Sb()),2&e){const e=t.$implicit,i=T.ic();T.Bb(3),T.Pc(T.kc(4,3,i.COLOR_NAME[e])),T.Bb(2),T.Qc(" ",i.theme.colors[e]," "),T.Bb(2),T.oc("ngForOf",T.sc(5,Xi))}}const Zi=function(e,t){return[e,t]};let $i=(()=>{class e{constructor(e,t,i){this.customerService=e,this.dialog=t,this.themeService=i,this.destroy=new ot.a,this.isLoading=!1,this.customerLogos={},this.THEME_COLORS=c.ub}set customer(e){this._customer=e,this.resetTab(this.customer)}get customer(){return this._customer}set readOnly(e){this._readonly=e}get readonly(){return this._readonly}ngOnDestroy(){this.destroy.next()}ngOnInit(){this.COLOR_NAME=this.themeService.getBaseColors()}majTheme(e){return{colors:e}}resetTab(e){if(e.hasCustomGraphicIdentity){const t=this.themeService.getThemeColors(e.themeColors);this.theme=this.majTheme(t)}else this.theme=this.majTheme(this.themeService.getThemeColors(this.themeService.defaultTheme.colors)),this.theme.headerUrl=this.themeService.defaultTheme.headerUrl,this.theme.portalUrl=this.themeService.defaultTheme.portalUrl,this.theme.footerUrl=this.themeService.defaultTheme.footerUrl;e.hasCustomGraphicIdentity&&(this.isLoading=!0),this.customerService.getLogos(e.id).pipe(Object(Ci.a)(this.destroy)).subscribe(t=>{this.customerLogos={headerUrl:t[0],footerUrl:t[1],portalUrl:t[2]},e.hasCustomGraphicIdentity&&(this.theme.headerUrl=this.customerLogos.headerUrl,this.theme.footerUrl=this.customerLogos.footerUrl,this.theme.portalUrl=this.customerLogos.portalUrl),this.isLoading=!1}),this.themeService.overloadLocalTheme(this.theme.colors,"div.vitamui-sidepanel")}openUpdateCustomerLogo(){this.dialog.open(_i,{panelClass:"vitamui-modal",disableClose:!0,data:{customer:this.customer,logos:this.customerLogos}}).afterClosed().subscribe()}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(fe.a),T.Nb(n.b),T.Nb(c.vb))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-graphic-identity-tab"]],inputs:{customer:"customer",readOnly:"readOnly"},decls:59,vars:59,consts:[[1,"d-flex"],[1,"col-6","mr-4","d-flex","justify-content-center","align-items-center"],[1,"btn","primary","mb-20",3,"disabled","click"],[1,"col-6"],[1,"text","normal","light"],[1,"image-area","small","d-flex","flex-column","justify-content-center","align-items-center"],[4,"ngIf"],[3,"src",4,"ngIf"],[1,"d-flex","mt-4"],[1,"col-6","mr-4"],["class","col-12 d-flex mt-4",4,"ngFor","ngForOf"],[1,"col-12","d-flex","mt-4"],[1,"label-color","p-0","col-4"],[1,"pl-2"],[1,"field-color-preview"],[1,"vitamui-spinner","normal"],[3,"src"],["class","field-color-preview",3,"background-color",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(T.Tb(0,"div",0),T.Tb(1,"div",1),T.Tb(2,"button",2),T.ec("click",(function(){return t.openUpdateCustomerLogo()})),T.Tb(3,"div"),T.Oc(4),T.jc(5,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(6,"div",3),T.Tb(7,"label",4),T.Oc(8),T.jc(9,"translate"),T.Sb(),T.Tb(10,"div",5),T.jc(11,"safeStyle"),T.Mc(12,Gi,2,0,"div",6),T.Mc(13,Hi,1,1,"img",7),T.Sb(),T.Sb(),T.Sb(),T.Tb(14,"div",8),T.Tb(15,"div",9),T.Tb(16,"label",4),T.Oc(17),T.jc(18,"translate"),T.Sb(),T.Tb(19,"div",5),T.jc(20,"safeStyle"),T.Mc(21,Ki,2,0,"div",6),T.Mc(22,Wi,1,1,"img",7),T.Sb(),T.Sb(),T.Tb(23,"div",3),T.Tb(24,"label",4),T.Oc(25),T.jc(26,"translate"),T.Sb(),T.Tb(27,"div",5),T.jc(28,"safeStyle"),T.Mc(29,Yi,2,0,"div",6),T.Mc(30,zi,1,1,"img",7),T.Sb(),T.Sb(),T.Sb(),T.Mc(31,Ji,8,6,"div",10),T.Tb(32,"div",11),T.Tb(33,"div",12),T.Tb(34,"label",4),T.Oc(35),T.jc(36,"translate"),T.Sb(),T.Oc(37),T.Sb(),T.Tb(38,"div",13),T.Tb(39,"span",14),T.jc(40,"safeStyle"),T.Sb(),T.Sb(),T.Sb(),T.Tb(41,"div",11),T.Tb(42,"div",12),T.Tb(43,"label",4),T.Oc(44),T.jc(45,"translate"),T.Sb(),T.Oc(46),T.Sb(),T.Tb(47,"div",13),T.Tb(48,"span",14),T.jc(49,"safeStyle"),T.Sb(),T.Sb(),T.Sb(),T.Tb(50,"div",11),T.Tb(51,"div",12),T.Tb(52,"label",4),T.Oc(53),T.jc(54,"translate"),T.Sb(),T.Oc(55),T.Sb(),T.Tb(56,"div",13),T.Tb(57,"span",14),T.jc(58,"safeStyle"),T.Sb(),T.Sb(),T.Sb()),2&e&&(T.Bb(2),T.oc("disabled",t.readonly),T.Bb(2),T.Qc(" ",T.kc(5,30,"COMMON.UPDATE")," "),T.Bb(4),T.Pc(T.kc(9,32,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_PORTAL_TITLE")),T.Bb(2),T.Jc("background-color",T.kc(11,34,t.theme.colors[t.THEME_COLORS.VITAMUI_BACKGROUND])),T.Bb(2),T.oc("ngIf",t.isLoading),T.Bb(1),T.oc("ngIf",!t.isLoading),T.Bb(4),T.Pc(T.kc(18,36,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_HEADER_TITLE")),T.Bb(2),T.Jc("background-color",T.kc(20,38,t.theme.colors[t.THEME_COLORS.VITAMUI_HEADER_FOOTER])),T.Bb(2),T.oc("ngIf",t.isLoading),T.Bb(1),T.oc("ngIf",!t.isLoading),T.Bb(3),T.Pc(T.kc(26,40,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_FOOTER_TITLE")),T.Bb(2),T.Jc("background-color",T.kc(28,42,t.theme.colors[t.THEME_COLORS.VITAMUI_HEADER_FOOTER])),T.Bb(2),T.oc("ngIf",t.isLoading),T.Bb(1),T.oc("ngIf",!t.isLoading),T.Bb(1),T.oc("ngForOf",T.uc(56,Zi,t.THEME_COLORS.VITAMUI_PRIMARY,t.THEME_COLORS.VITAMUI_SECONDARY)),T.Bb(4),T.Pc(T.kc(36,44,"COLOR.TERTIARY")),T.Bb(2),T.Qc(" ",t.theme.colors[t.THEME_COLORS.VITAMUI_TERTIARY]," "),T.Bb(2),T.Jc("background-color",T.kc(40,46,t.theme.colors[t.THEME_COLORS.VITAMUI_TERTIARY])),T.Bb(5),T.Pc(T.kc(45,48,"COLOR.HEADER_FOOTER")),T.Bb(2),T.Qc(" ",t.theme.colors[t.THEME_COLORS.VITAMUI_HEADER_FOOTER]," "),T.Bb(2),T.Jc("background-color",T.kc(49,50,t.theme.colors[t.THEME_COLORS.VITAMUI_HEADER_FOOTER])),T.Bb(5),T.Pc(T.kc(54,52,"COLOR.BACKGROUND")),T.Bb(2),T.Qc(" ",t.theme.colors[t.THEME_COLORS.VITAMUI_BACKGROUND]," "),T.Bb(2),T.Jc("background-color",T.kc(58,54,t.theme.colors[t.THEME_COLORS.VITAMUI_BACKGROUND])))},directives:[o.p,o.o,g.b],pipes:[we.d,c.pc],styles:["[_nghost-%COMP%]   .label-color[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   label[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}[_nghost-%COMP%]   .field-color-preview[_ngcontent-%COMP%]{padding:0;margin:0 5px 0 0;display:inline-block;width:30px;height:30px;border-radius:100%;position:relative;top:10px}"]}),e})();function eo(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Qc(" ",T.kc(2,1,"COMMON.ERROR.REQUIRED"),""))}function to(e,t){if(1&e&&(T.Tb(0,"mat-option",17),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e){const e=t.$implicit;T.oc("value",e.key),T.Bb(1),T.Qc(" ",T.kc(2,2,"COMMON.LANGUAGE."+e.key)," ")}}function io(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Qc(" ",T.kc(2,1,"COMMON.ERROR.REQUIRED"),""))}function oo(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Qc(" ",T.kc(2,1,"COMMON.ERROR.REQUIRED"),""))}let no=(()=>{class e{constructor(){this.formChange=new T.n,this.formRemove=new T.n}ngOnInit(){this.subscription=this.form.valueChanges.subscribe(()=>{this.formChange.emit({form:this.form})})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}onRemove(){this.formRemove.emit({form:this.form})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=T.Hb({type:e,selectors:[["app-homepage-message-translation"]],inputs:{form:"form",index:"index",languages:"languages"},outputs:{formChange:"formChange",formRemove:"formRemove"},decls:32,vars:25,consts:[["id","translationForm",3,"formGroup"],[1,"col-12","d-flex","align-items-center"],["for","language",1,"mr-4","mb-0"],[1,"text","medium","bold"],[1,"text","normal","danger"],[1,"text","caption","danger"],[4,"ngIf"],[1,"mt-4","mb-4","vitamui-mat-select"],["formControlName","language","required","","panelClass","vitamui-mat-select"],[3,"value",4,"ngFor","ngForOf"],[1,"select-arrow"],[1,"material-icons"],[1,"pl-4","btn","link",3,"click"],[1,"d-flex","flex-column"],["formControlName","portalTitle","required","",1,"pb-2",3,"placeholder"],["formControlName","portalMessage","required","",1,"pb-2",3,"placeholder","maxlength"],[1,"d-flex","justify-content-end"],[3,"value"]],template:function(e,t){if(1&e&&(T.Tb(0,"form",0),T.Tb(1,"div",1),T.Tb(2,"label",2),T.Tb(3,"div",3),T.Oc(4),T.jc(5,"translate"),T.Tb(6,"span",4),T.Oc(7,"*"),T.Sb(),T.Sb(),T.Tb(8,"div",5),T.Mc(9,eo,3,3,"vitamui-common-input-error",6),T.Sb(),T.Sb(),T.Tb(10,"mat-form-field",7),T.Tb(11,"mat-select",8),T.Mc(12,to,3,4,"mat-option",9),T.Sb(),T.Tb(13,"div",10),T.Tb(14,"i",11),T.Oc(15,"keyboard_arrow_up"),T.Sb(),T.Tb(16,"i",11),T.Oc(17,"keyboard_arrow_down"),T.Sb(),T.Sb(),T.Sb(),T.Tb(18,"button",12),T.ec("click",(function(){return t.onRemove()})),T.Tb(19,"span"),T.Oc(20),T.jc(21,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(22,"div",13),T.Tb(23,"vitamui-common-input",14),T.jc(24,"translate"),T.Mc(25,io,3,3,"vitamui-common-input-error",6),T.Sb(),T.Tb(26,"vitamui-common-textarea",15),T.jc(27,"translate"),T.Mc(28,oo,3,3,"vitamui-common-input-error",6),T.Sb(),T.Tb(29,"small",16),T.Oc(30),T.jc(31,"translate"),T.Sb(),T.Sb(),T.Sb()),2&e){var i,o=null,n=null,r=null;T.oc("formGroup",t.form),T.Bb(4),T.Rc(" ",T.kc(5,15,"COMMON.LANGUAGE.TITLE")," ",t.index," "),T.Bb(5),T.oc("ngIf",(null==(o=t.form.get("language"))?null:o.touched)&&!(null==(o=t.form.get("language"))||null==o.errors||!o.errors.required)),T.Bb(3),T.oc("ngForOf",t.languages),T.Bb(8),T.Qc(" ",T.kc(21,17,"CUSTOMER.HOMEPAGE_MESSAGE.DELETE_LANGUAGE"),""),T.Bb(3),T.rc("placeholder","",T.kc(24,19,"CUSTOMER.HOMEPAGE_MESSAGE.LANGUAGE_TITLE")," ",t.index,""),T.Bb(2),T.oc("ngIf",(null==(n=t.form.get("portalTitle"))?null:n.touched)&&!(null==(n=t.form.get("portalTitle"))||null==n.errors||!n.errors.required)),T.Bb(1),T.rc("placeholder","",T.kc(27,21,"CUSTOMER.HOMEPAGE_MESSAGE.LANGUAGE_PORTAL_MESSAGE")," ",t.index,""),T.oc("maxlength",500),T.Bb(2),T.oc("ngIf",(null==(r=t.form.get("portalMessage"))?null:r.touched)&&!(null==(r=t.form.get("portalMessage"))||null==r.errors||!r.errors.required)),T.Bb(2),T.Rc("",null==(i=t.form.get("portalMessage"))||null==i.value?null:i.value.length," ",T.kc(31,23,"CUSTOMER.HOMEPAGE_MESSAGE.PORTAL_MESSAGE_LENGTH"),"")}},directives:[l.y,l.r,l.i,o.p,d.b,m.a,l.q,l.g,l.w,o.o,c.Qb,c.Sb,l.l,c.Rb,he.k],pipes:[we.d],styles:[".vitamui-input[_ngcontent-%COMP%]{width:100%!important}"]}),e})();function ro(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Qc(" ",T.kc(2,1,"COMMON.ERROR.REQUIRED"),""))}function ao(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Qc(" ",T.kc(2,1,"COMMON.ERROR.REQUIRED"),""))}function co(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div"),T.Tb(1,"app-homepage-message-translation",10),T.ec("formChange",(function(){return T.Dc(e),T.ic().update()}))("formRemove",(function(){T.Dc(e);const i=t.index;return T.ic().remove(i)})),T.Sb(),T.Sb()}if(2&e){const e=t.$implicit,i=t.index,o=T.ic();T.Bb(1),T.oc("form",e)("index",i+1)("languages",o.getLanguages(i))}}let so=(()=>{class e{constructor(e,t,i,o){this.dialogRef=e,this.formBuilder=t,this.startupService=i,this.languageService=o,this.formToSend=new T.n,this.portalTitles={},this.portalMessages={},this.destroy=new ot.a}ngOnInit(){this.homepageMessageForm=this.formBuilder.group({id:null,portalTitle:["",[l.x.required]],portalMessage:["",[l.x.required,l.x.maxLength(500)]],translations:this.formBuilder.array([])})}ngAfterViewInit(){this.languageService.getAvailableLanguagesOptions().pipe(Object(Ie.a)(1)).subscribe(e=>{this.languages=e,this.setMessages(),this.formToSend.emit({form:this.homepageMessageForm,portalTitles:this.portalTitles,portalMessages:this.portalMessages}),this.homepageMessageForm.valueChanges.pipe(Object(Ci.a)(this.destroy)).subscribe(()=>{this.sendForm()})})}ngOnDestroy(){this.destroy.next(),this.destroy.complete()}setMessages(){let e=null;const t=this.startupService.getConfigStringValue("PORTAL_TITLE"),i=this.startupService.getConfigStringValue("PORTAL_MESSAGE");this.customer&&(this.customer.id&&(e=this.customer.id),this.customer.language&&(this.language=this.customer.language),this.customer.portalMessages&&(this.portalMessages=this.customer.portalMessages),this.customer.portalTitles&&(this.portalTitles=this.customer.portalTitles));const o=this.portalTitles&&this.portalTitles[this.language]?this.portalTitles[this.language]:t,n=this.portalMessages&&this.portalMessages[this.language]?this.portalMessages[this.language]:i;this.homepageMessageForm.get("id").patchValue(e),this.homepageMessageForm.get("portalTitle").patchValue(o),this.homepageMessageForm.get("portalMessage").patchValue(n),this.languages.forEach(e=>{if(this.portalTitles[e.key]&&this.portalMessages[e.key]&&this.language!==e.key){const t=this.formBuilder.group({language:[e.key,l.x.required],portalTitle:[this.portalTitles[e.key],[l.x.required]],portalMessage:[this.portalMessages[e.key],[l.x.required,l.x.maxLength(500)]]});this.homepageMessageForm.get("translations").value.push(t)}})}onAdd(){const e=this.formBuilder.group({language:["",l.x.required],portalTitle:["",[l.x.required]],portalMessage:["",[l.x.required,l.x.maxLength(500)]]});this.homepageMessageForm.get("translations").value.push(e),this.sendForm()}update(){this.sendForm()}remove(e){this.homepageMessageForm.get("translations").value.splice(e,1),this.sendForm()}sendForm(){this.getTranslations(),this.formToSend.emit({form:this.homepageMessageForm,portalTitles:this.portalTitles,portalMessages:this.portalMessages})}getTranslations(){const e={},t={};e[this.language]=this.homepageMessageForm.get("portalTitle").value,t[this.language]=this.homepageMessageForm.get("portalMessage").value,this.homepageMessageForm.get("translations").value.forEach(i=>{const o=i.get("language").value,n=i.get("portalTitle").value,r=i.get("portalMessage").value;e[o]=n,t[o]=r}),this.portalTitles=e,this.portalMessages=t}getLanguages(e){const t=[...this.homepageMessageForm.get("translations").value];t.splice(e,1);const i=t.map(e=>e.get("language").value);return this.languages.filter(e=>e.key!==this.language&&i.indexOf(e.key)<0)}isLanguageSet(){const e=this.homepageMessageForm.get("translations").value;let t=!0;return e.forEach(e=>{e.get("language").valid||(t=!1)}),t}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(n.g),T.Nb(l.d),T.Nb(c.lb),T.Nb(c.Q))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-homepage-message"]],inputs:{homepageMessageForm:"homepageMessageForm",customer:"customer"},outputs:{formToSend:"formToSend"},decls:20,vars:22,consts:[["id","homepageMessageForm",3,"formGroup"],[1,"justify-content-between"],[1,"d-flex","flex-column"],[1,"text","large","bold","mb-4"],["formControlName","portalTitle","required","",1,"pb-2",3,"placeholder"],[4,"ngIf"],["formControlName","portalMessage","required","",1,"pb-2",3,"placeholder","maxlength"],[1,"d-flex","justify-content-end"],[4,"ngFor","ngForOf"],[1,"pl-4","btn","link",3,"disabled","click"],[3,"form","index","languages","formChange","formRemove"]],template:function(e,t){if(1&e&&(T.Tb(0,"form",0),T.Tb(1,"div",1),T.Tb(2,"div",2),T.Tb(3,"div",3),T.Oc(4),T.jc(5,"translate"),T.Sb(),T.Tb(6,"vitamui-common-input",4),T.jc(7,"translate"),T.Mc(8,ro,3,3,"vitamui-common-input-error",5),T.Sb(),T.Tb(9,"vitamui-common-textarea",6),T.jc(10,"translate"),T.Mc(11,ao,3,3,"vitamui-common-input-error",5),T.Sb(),T.Tb(12,"small",7),T.Oc(13),T.jc(14,"translate"),T.Sb(),T.Sb(),T.Mc(15,co,2,3,"div",8),T.Tb(16,"button",9),T.ec("click",(function(){return t.onAdd()})),T.Tb(17,"span"),T.Oc(18),T.jc(19,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb()),2&e){var i,o,n=null,r=null;T.oc("formGroup",t.homepageMessageForm),T.Bb(4),T.Qc(" ",T.kc(5,12,"CUSTOMER.HOMEPAGE_MESSAGE.TITLE")," "),T.Bb(2),T.oc("placeholder",T.kc(7,14,"CUSTOMER.HOMEPAGE_MESSAGE.DEFAULT_PORTAL_TITLE")),T.Bb(2),T.oc("ngIf",(null==(n=t.homepageMessageForm.get("portalTitle"))?null:n.touched)&&!(null==(n=t.homepageMessageForm.get("portalTitle"))||null==n.errors||!n.errors.required)),T.Bb(1),T.oc("placeholder",T.kc(10,16,"CUSTOMER.HOMEPAGE_MESSAGE.DEFAULT_PORTAL_MESSAGE"))("maxlength",500),T.Bb(2),T.oc("ngIf",(null==(r=t.homepageMessageForm.get("portalMessage"))?null:r.touched)&&!(null==(r=t.homepageMessageForm.get("portalMessage"))||null==r.errors||!r.errors.required)),T.Bb(2),T.Rc("",null==(i=t.homepageMessageForm.get("portalMessage"))||null==i.value?null:i.value.length," ",T.kc(14,18,"CUSTOMER.HOMEPAGE_MESSAGE.PORTAL_MESSAGE_LENGTH"),""),T.Bb(2),T.oc("ngForOf",t.homepageMessageForm.get("translations").value),T.Bb(1),T.oc("disabled",!((null==(o=t.homepageMessageForm.get("translations"))||null==o.value?null:o.value.length)<(null==t.languages?null:t.languages.length)-1&&t.isLanguageSet())),T.Bb(2),T.Qc(" ",T.kc(19,20,"CUSTOMER.HOMEPAGE_MESSAGE.ADD_LANGUAGE"),"")}},directives:[l.y,l.r,l.i,c.Qb,l.q,l.g,l.w,o.p,c.Sb,l.l,o.o,c.Rb,no],pipes:[we.d],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{padding:30px 60px 60px}"]}),e})(),lo=(()=>{class e{constructor(e,t,i,o){this.dialogRef=e,this.data=t,this.customerService=i,this.confirmDialogService=o,this.destroy=new ot.a,this.disabled=!0}get customForm(){return this._customForm}set customForm(e){this._customForm=e,this.disabled=!(this._customForm&&this._customForm.valid&&this.checkValidation(this._customForm.value.translations))}ngOnDestroy(){this.destroy.next()}ngOnInit(){}onCancel(){this.customForm.dirty?this.confirmDialogService.confirmBeforeClosing(this.dialogRef):this.dialogRef.close()}checkValidation(e){let t=!0;return e.forEach(e=>{e.valid||(t=!1)}),t}updateHomepageMessage(){if(this.customForm.valid&&this.checkValidation(this.customForm.value.translations)){const e=Object.assign({id:this.customForm.get("id").value,portalTitles:this.portalTitles,portalMessages:this.portalMessages});this.customerService.patch(e).pipe(Object(Ci.a)(this.destroy)).subscribe(()=>{this.dialogRef.close(!0)},e=>{this.dialogRef.close(!1),console.error(e)})}}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(n.g),T.Nb(n.a),T.Nb(fe.a),T.Nb(c.t))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-homepage-message-update"]],decls:9,vars:8,consts:[[1,"content"],[3,"customer","formToSend"],[1,"d-flex","mt-4"],["type","button",1,"btn","primary","mr-4",3,"disabled","click"],["type","button",1,"btn","cancel","link",3,"click"]],template:function(e,t){1&e&&(T.Tb(0,"div",0),T.Tb(1,"app-homepage-message",1),T.ec("formToSend",(function(e){return t.customForm=e.form,t.portalTitles=e.portalTitles,t.portalMessages=e.portalMessages})),T.Sb(),T.Tb(2,"div",2),T.Tb(3,"button",3),T.ec("click",(function(){return t.updateHomepageMessage()})),T.Oc(4),T.jc(5,"translate"),T.Sb(),T.Tb(6,"button",4),T.ec("click",(function(){return t.onCancel()})),T.Oc(7),T.jc(8,"translate"),T.Sb(),T.Sb(),T.Sb()),2&e&&(T.Bb(1),T.oc("customer",t.data.customer),T.Bb(2),T.oc("disabled",t.disabled),T.Bb(1),T.Qc(" ",T.kc(5,4,"COMMON.APPLY_UPDATE")," "),T.Bb(3),T.Qc(" ",T.kc(8,6,"COMMON.UNDO")," "))},directives:[so],pipes:[we.d],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{padding:30px 60px 60px}"]}),e})();function uo(e,t){if(1&e&&(T.Tb(0,"div",2),T.Tb(1,"label",3),T.Oc(2),T.jc(3,"translate"),T.jc(4,"translate"),T.Sb(),T.Oc(5),T.Sb()),2&e){const e=T.ic(2).$implicit,t=T.ic();T.Bb(2),T.Rc("",T.kc(3,3,"CUSTOMER.HOMEPAGE_MESSAGE.LANGUAGE_PORTAL_MESSAGE")," ",T.kc(4,5,"COMMON.LANGUAGE."+e.key),""),T.Bb(3),T.Qc(" ",t.portalMessages[e.key]," ")}}function bo(e,t){if(1&e&&(T.Tb(0,"div"),T.Tb(1,"div",2),T.Tb(2,"label",3),T.Oc(3),T.jc(4,"translate"),T.jc(5,"translate"),T.Sb(),T.Tb(6,"span"),T.Oc(7),T.Sb(),T.Sb(),T.Mc(8,uo,6,7,"div",6),T.Sb()),2&e){const e=T.ic().$implicit,t=T.ic();T.Bb(3),T.Rc("",T.kc(4,4,"CUSTOMER.HOMEPAGE_MESSAGE.LANGUAGE_TITLE")," ",T.kc(5,6,"COMMON.LANGUAGE."+e.key),""),T.Bb(4),T.Pc(e.value),T.Bb(1),T.oc("ngIf",t.portalMessages[e.key])}}function mo(e,t){if(1&e&&(T.Tb(0,"div"),T.Mc(1,bo,9,8,"div",5),T.Sb()),2&e){const e=t.$implicit,i=T.ic();T.Bb(1),T.oc("ngIf",e.key&&e.key!==i.language)}}let po=(()=>{class e{constructor(e,t){this.dialog=e,this.startupService=t,this.destroy=new ot.a}set customer(e){this._customer=e,this.resetTab(this.customer)}get customer(){return this._customer}set readOnly(e){this._readonly=e}get readonly(){return this._readonly}ngOnDestroy(){this.destroy.next()}ngOnInit(){}resetTab(e){const t=this.startupService.getConfigStringValue("PORTAL_TITLE"),i=this.startupService.getConfigStringValue("PORTAL_MESSAGE");e&&(e.language&&(this.language=e.language),e.portalMessages&&(this.portalMessages=e.portalMessages),e.portalTitles&&(this.portalTitles=this.customer.portalTitles)),this.portalTitle=this.portalTitles&&this.portalTitles[this.language]?this.portalTitles[this.language]:t,this.portalMessage=this.portalMessages&&this.portalMessages[this.language]?this.portalMessages[this.language]:i}openUpdateHomepageMessage(){this.dialog.open(lo,{panelClass:"vitamui-modal",disableClose:!0,data:{customer:this.customer}}).afterClosed().subscribe()}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(n.b),T.Nb(c.lb))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-homepage-message-tab"]],inputs:{customer:"customer",readOnly:"readOnly"},decls:18,vars:15,consts:[[1,"d-flex"],[1,"btn","primary","mb-20",3,"disabled","click"],[1,"col-12","d-flex","flex-column","mt-4"],[1,"text","normal","light"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","col-12 d-flex flex-column mt-4",4,"ngIf"]],template:function(e,t){1&e&&(T.Tb(0,"div",0),T.Tb(1,"button",1),T.ec("click",(function(){return t.openUpdateHomepageMessage()})),T.Tb(2,"div"),T.Oc(3),T.jc(4,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(5,"div",2),T.Tb(6,"label",3),T.Oc(7),T.jc(8,"translate"),T.Sb(),T.Tb(9,"span"),T.Oc(10),T.Sb(),T.Sb(),T.Tb(11,"div",2),T.Tb(12,"label",3),T.Oc(13),T.jc(14,"translate"),T.Sb(),T.Oc(15),T.Sb(),T.Mc(16,mo,2,1,"div",4),T.jc(17,"keyvalue")),2&e&&(T.Bb(1),T.oc("disabled",t.readonly),T.Bb(2),T.Qc(" ",T.kc(4,7,"COMMON.UPDATE")," "),T.Bb(4),T.Pc(T.kc(8,9,"CUSTOMER.HOMEPAGE_MESSAGE.PORTAL_TITLE")),T.Bb(3),T.Pc(t.portalTitle),T.Bb(3),T.Pc(T.kc(14,11,"CUSTOMER.HOMEPAGE_MESSAGE.PORTAL_MESSAGE")),T.Bb(2),T.Qc(" ",t.portalMessage,"\n"),T.Bb(1),T.oc("ngForOf",T.kc(17,13,t.portalTitles)))},directives:[o.o,o.p],pipes:[we.d,o.i],styles:[""]}),e})(),ho=(()=>{class e{constructor(e,t){this.customerService=e,this.startupService=t,this.previewClose=new T.n}ngOnInit(){this.customerUpdatedSub=this.customerService.updated.subscribe(e=>{this.customer=e})}openPopup(){window.open(this.startupService.getConfigStringValue("UI_URL")+"/customer/"+this.customer.id,"detailPopup","width=584, height=713, resizable=no, location=no"),this.emitClose()}emitClose(){this.previewClose.emit()}ngOnDestroy(){this.customerUpdatedSub.unsubscribe()}filterEvents(e){return e.outDetail&&(e.outDetail.includes("EXT_VITAMUI_UPDATE_CUSTOMER")||e.outDetail.includes("EXT_VITAMUI_CREATE_CUSTOMER"))}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(fe.a),T.Nb(c.lb))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-customer-preview"]],inputs:{customer:"customer",isPopup:"isPopup",gdprReadOnlyStatus:"gdprReadOnlyStatus"},outputs:{previewClose:"previewClose"},decls:18,vars:30,consts:[[3,"title","subtitle","icon","onclose"],[1,"vitamui-sidepanel-body"],[1,"preview-tab-group","show-pagination"],[3,"label"],[3,"customer","readOnly","gdprReadOnlyStatus"],[1,"no-padding",3,"label"],[3,"customer","readOnly"],["collectionName","customers",3,"id","identifier","filter"]],template:function(e,t){1&e&&(T.Tb(0,"vitamui-common-sidenav-header",0),T.ec("onclose",(function(){return t.emitClose()})),T.Sb(),T.Tb(1,"div",1),T.Tb(2,"mat-tab-group",2),T.Tb(3,"mat-tab",3),T.jc(4,"translate"),T.Ob(5,"app-information-tab",4),T.Sb(),T.Tb(6,"mat-tab",5),T.jc(7,"translate"),T.Ob(8,"app-sso-tab",6),T.Sb(),T.Tb(9,"mat-tab",3),T.jc(10,"translate"),T.Ob(11,"app-graphic-identity-tab",6),T.Sb(),T.Tb(12,"mat-tab",3),T.jc(13,"translate"),T.Ob(14,"app-homepage-message-tab",6),T.Sb(),T.Tb(15,"mat-tab",3),T.jc(16,"translate"),T.Ob(17,"vitamui-common-operation-history-tab",7),T.Sb(),T.Sb(),T.Sb()),2&e&&(T.oc("title",null==t.customer?null:t.customer.name)("subtitle","("+(null==t.customer?null:t.customer.code)+")")("icon","vitamui-icon-bank"),T.Bb(3),T.oc("label",T.kc(4,20,"CUSTOMER.TAB.INFORMATION")),T.Bb(2),T.oc("customer",t.customer)("readOnly",t.isPopup||(null==t.customer?null:t.customer.readonly))("gdprReadOnlyStatus",t.gdprReadOnlyStatus),T.Bb(1),T.oc("label",T.kc(7,22,"CUSTOMER.TAB.SSO")),T.Bb(2),T.oc("customer",t.customer)("readOnly",t.isPopup||(null==t.customer?null:t.customer.readonly)),T.Bb(1),T.oc("label",T.kc(10,24,"CUSTOMER.TAB.GRAPHIC_ID")),T.Bb(2),T.oc("customer",t.customer)("readOnly",t.isPopup||(null==t.customer?null:t.customer.readonly)),T.Bb(1),T.oc("label",T.kc(13,26,"CUSTOMER.TAB.HOMEPAGE_MESSAGE")),T.Bb(2),T.oc("customer",t.customer)("readOnly",t.isPopup||(null==t.customer?null:t.customer.readonly)),T.Bb(1),T.oc("label",T.kc(16,28,"CUSTOMER.TAB.HISTORY")),T.Bb(2),T.oc("id",null==t.customer?null:t.customer.id)("identifier",null==t.customer?null:t.customer.identifier)("filter",t.filterEvents))},directives:[c.mc,f.b,f.a,tt,Ti,$i,po,c.Xb],pipes:[we.d],styles:[".no-padding[_ngcontent-%COMP%]{padding:0}.pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),e})(),go=(()=>{class e{constructor(e){this.route=e,this.customer=this.route.snapshot.data.customer}ngOnInit(){}closePopup(){window.close()}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(O.a))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-customer-popup"]],decls:1,vars:2,consts:[[3,"customer","isPopup","previewClose"]],template:function(e,t){1&e&&(T.Tb(0,"app-customer-preview",0),T.ec("previewClose",(function(){return t.closePopup()})),T.Sb()),2&e&&T.oc("customer",t.customer)("isPopup",!0)},directives:[ho],encapsulation:2}),e})(),fo=(()=>{class e{constructor(e,t){this.customerService=e,this.router=t}resolve(e){const t=e.paramMap.get("id");return this.customerService.get(t).pipe(Object(Ie.a)(1),Object(Ce.a)(e=>e||(this.router.navigate(["/"]),null)))}}return e.\u0275fac=function(t){return new(t||e)(T.bc(fe.a),T.bc(O.d))},e.\u0275prov=T.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),vo=(()=>{class e extends c.o{constructor(e,t){super(e,t+"/tenants")}getOne(e){return super.getOne(e)}getAllByParams(e,t){return super.getAllByParams(e,t)}create(e){return super.create(e)}patch(e){return super.patch(e)}checkExistsByParam(e){return super.checkExistsByParam(e)}}return e.\u0275fac=function(t){return new(t||e)(T.bc(rt.c),T.bc(c.n))},e.\u0275prov=T.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Oo=(()=>{class e{constructor(e,t){this.tenantApi=e,this.snackBarService=t,this.updated=new ot.a}get(e){return this.tenantApi.getOne(e)}getAll(){return this.tenantApi.getAllByParams(new rt.g)}getTenantsByCustomerIds(e){const t=[];t.push({key:"customerId",value:e,operator:c.W.in});const i={criteria:t},o=(new rt.g).set("criteria",JSON.stringify(i));return this.tenantApi.getAllByParams(o)}create(e,t){return this.tenantApi.create(e).pipe(Object(nt.a)(e=>{this.snackBarService.open({message:"SHARED.SNACKBAR.SAFE_CREATE",translateParams:{param1:e.name,param2:t},icon:"vitamui-icon-safe"})},()=>{this.snackBarService.open({message:"SHARED.SNACKBAR.SAFE_CREATE_ERROR",icon:"vitamui-icon-danger"})}))}patch(e,t){return this.tenantApi.patch(e).pipe(Object(nt.a)(e=>this.updated.next(e)),Object(nt.a)(e=>{this.snackBarService.open({message:"SHARED.SNACKBAR.SAFE_UPDATE",translateParams:{param1:e.name,param2:t},icon:"vitamui-icon-safe"})},e=>{this.snackBarService.open({message:e.error.message,translate:!1})}))}exists(e){const t=[];t.push({key:"name",value:e,operator:c.W.equals});const i=[{key:"criteria",value:JSON.stringify({criteria:t})}];return this.tenantApi.checkExistsByParam(i)}}return e.\u0275fac=function(t){return new(t||e)(T.bc(vo),T.bc(c.Ab))},e.\u0275prov=T.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),So=(()=>{class e{constructor(e){this.tenantService=e,this.debounceTime=400,this.uniqueName=e=>t=>Object(Re.a)(this.debounceTime).pipe(Object(Me.a)(()=>t.value!==e?this.tenantService.exists(t.value):Object(Oe.a)(!1)),Object(Ie.a)(1),Object(Ce.a)(e=>e?{uniqueName:!0}:null))}}return e.\u0275fac=function(t){return new(t||e)(T.bc(Oo))},e.\u0275prov=T.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),To=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=T.Hb({type:e,selectors:[["app-customer-alerting"]],decls:8,vars:1,consts:function(){return[$localize`:@@disabledGdprAlertConfirm4347a788d934ed7b0f199ad7d8aa51f6c40d6f8c4645850704435947410: Vous tes sur le point de dsactiver les alertes sur utilisateurs inactifs dont les donnes personnelles sont arrives  chance dans cette organisation. Voulez-vous continuer ? `,["align","end"],[1,"btn","primary","btn-confirm-dialog",3,"matDialogClose"],$localize`:@@confirmDialogConfirmButtone3da3c1369460b490b9077d027b9d04a8656ff744247263368529700262:Confirmer`,["matDialogClose","",1,"btn","cancel"],$localize`:@@confirmDialogCancelButton12380235948088ddf227ad226ce8a2ae63878fe51711750570766225138:Annuler`]},template:function(e,t){1&e&&(T.Tb(0,"mat-dialog-content"),T.Tb(1,"p"),T.Xb(2,0),T.Sb(),T.Sb(),T.Tb(3,"mat-dialog-actions",1),T.Tb(4,"button",2),T.Xb(5,3),T.Sb(),T.Tb(6,"button",4),T.Xb(7,5),T.Sb(),T.Sb()),2&e&&(T.Bb(4),T.oc("matDialogClose",!0))},directives:[n.e,n.c,n.d],styles:[""]}),e})();var Co=i("Ohay");let Mo=(()=>{class e extends c.o{constructor(e,t){super(e,t+"/owners")}getOne(e){return super.getOne(e)}checkExistsByParam(e){return super.checkExistsByParam(e)}create(e){return super.create(e)}patch(e){return super.patch(e)}}return e.\u0275fac=function(t){return new(t||e)(T.bc(rt.c),T.bc(c.n))},e.\u0275prov=T.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ao=(()=>{class e{constructor(e,t){this.ownerApi=e,this.snackBarService=t,this.updated=new ot.a}get(e){return this.ownerApi.getOne(e)}create(e){return this.ownerApi.create(e).pipe(Object(nt.a)(e=>{this.snackBarService.open({message:"SHARED.SNACKBAR.OWNER_CREATE",translateParams:{param1:e.name}})},e=>{this.snackBarService.open({message:e.error.message,translate:!1})}))}exists(e){const t=[];t.push({key:"code",value:e,operator:c.W.equals});const i=[{key:"criteria",value:JSON.stringify({criteria:t})}];return this.ownerApi.checkExistsByParam(i)}patch(e){return this.ownerApi.patch(e).pipe(Object(nt.a)(e=>this.updated.next(e)),Object(nt.a)(e=>{this.snackBarService.open({message:"SHARED.SNACKBAR.OWNER_UPDATE",translateParams:{param1:e.name}})},e=>{this.snackBarService.open({message:e.error.message,translate:!1})}))}}return e.\u0275fac=function(t){return new(t||e)(T.bc(Mo),T.bc(c.Ab))},e.\u0275prov=T.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Eo=/^[a-zA-Z0-9]*$/;let Ro=(()=>{class e{constructor(e){this.ownerService=e,this.debounceTime=400,this.uniqueCode=e=>t=>Object(Re.a)(this.debounceTime).pipe(Object(Me.a)(()=>t.value!==e?this.ownerService.exists(t.value):Object(Oe.a)(!1)),Object(Ie.a)(1),Object(Ce.a)(e=>e?{uniqueCode:!0}:null))}}return e.\u0275fac=function(t){return new(t||e)(T.bc(Ao))},e.\u0275prov=T.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Io(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"COMMON.ERROR.REQUIRED")))}function yo(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"COMMON.ERROR.WRONG_FORMAT")))}const ko=function(e){return{max:e}};function Bo(e,t){if(1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e){const e=T.ic(2);T.Bb(1),T.Pc(T.lc(2,1,"COMMON.ERROR.STRING_MAX_LENGTH",T.tc(4,ko,e.ownerCodeMaxLength)))}}function No(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"CUSTOMER.OWNER.MODAL.CODE_ALREADY_EXIST")))}function wo(e,t){if(1&e&&(T.Rb(0),T.Mc(1,Io,3,3,"vitamui-common-input-error",2),T.Mc(2,yo,3,3,"vitamui-common-input-error",2),T.Mc(3,Bo,3,6,"vitamui-common-input-error",2),T.Mc(4,No,3,3,"vitamui-common-input-error",2),T.Qb()),2&e){const e=T.ic();var i=null,o=null,n=null,r=null;T.Bb(1),T.oc("ngIf",!(null==e.form||null==(i=e.form.get("code"))||null==i.errors||!i.errors.required)),T.Bb(1),T.oc("ngIf",!(null==e.form||null==(o=e.form.get("code"))||null==o.errors||!o.errors.pattern)),T.Bb(1),T.oc("ngIf",!(null==e.form||null==(n=e.form.get("code"))||null==n.errors||!n.errors.maxlength)),T.Bb(1),T.oc("ngIf",!(null==e.form||null==(r=e.form.get("code"))||null==r.errors||!r.errors.uniqueCode))}}function xo(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"COMMON.ERROR.REQUIRED")))}function Po(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"COMMON.ERROR.REQUIRED")))}function Do(e,t){if(1&e&&(T.Tb(0,"mat-option",16),T.Oc(1),T.Sb()),2&e){const e=t.$implicit;T.oc("value",e.code),T.Bb(1),T.Qc(" ",e.name," ")}}const Uo={provide:l.o,useExisting:Object(T.V)(()=>jo),multi:!0};let jo=(()=>{class e{constructor(e,t,i,o){this.formBuilder=e,this.ownerFormValidators=t,this.countryService=i,this.startupService=o,this.ownerCodeMaxLength=15,this.onChange=e=>{},this.onTouched=()=>{},this.maxStreetLength=this.startupService.getConfigNumberValue("MAX_STREET_LENGTH"),this.form=this.formBuilder.group({id:null,customerId:[null],identifier:null,code:[null,[l.x.required,l.x.pattern(Eo),l.x.maxLength(this.ownerCodeMaxLength)],this.ownerFormValidators.uniqueCode()],name:[null,l.x.required],companyName:[null,l.x.required],internalCode:[null],address:this.formBuilder.group({street:[null,l.x.maxLength(this.maxStreetLength)],zipCode:null,city:null,country:"FR"}),readonly:!1})}set customerId(e){this._customerId=e,this.form&&this.form.get("customerId").setValue(e)}get customerId(){return this._customerId}set customerInfo(e){this._customerInfo=e,e&&this.form&&this.form.patchValue({code:e.code,name:e.name,companyName:e.companyName})}get customerInfo(){return this._customerInfo}ngOnInit(){this.subscribeToValueChanges(),this.countryService.getAvailableCountries().subscribe(e=>{this.countries=e})}ngOnDestroy(){this.sub.unsubscribe()}writeValue(e){this.sub.unsubscribe(),this.form.reset(e||{customerId:this.customerId,code:null,name:null,companyName:null,internalCode:null,address:{street:null,zipCode:null,city:null,country:"FR"},readonly:!1}),this.subscribeToValueChanges()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}subscribeToValueChanges(){this.sub=Object(ve.a)(this.form.statusChanges,this.form.valueChanges).pipe(Object(Ce.a)(()=>this.form.pending||this.form.invalid?null:this.form.value),Object(Co.a)()).subscribe(e=>this.onChange(e))}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(l.d),T.Nb(Ro),T.Nb(c.u),T.Nb(c.lb))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-owner-form"]],inputs:{customerId:"customerId",customerInfo:"customerInfo"},features:[T.Ab([Uo])],decls:30,vars:30,consts:[[3,"formGroup"],["maxlength","20","required","","formControlName","code",1,"col-6","pl-0",3,"placeholder"],[4,"ngIf"],[1,"d-flex"],["formControlName","name","maxlength","100","required","",1,"col-6","pl-0",3,"placeholder"],["formControlName","companyName","maxlength","250","required","",1,"col-6",3,"placeholder"],["formGroupName","address"],["formControlName","street",1,"col-12","pl-0",3,"maxlength","placeholder"],["formControlName","zipCode","maxlength","10",1,"col-4","pl-0",3,"placeholder"],["formControlName","city","maxlength","100",1,"col-4",3,"placeholder"],[1,"vitamui-mat-select","col-4"],["formControlName","country","panelClass","vitamui-mat-select",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[1,"select-arrow"],[1,"material-icons"],["formControlName","internalCode","maxlength","20",1,"col-12","pl-0",3,"placeholder"],[3,"value"]],template:function(e,t){if(1&e&&(T.Rb(0,0),T.Tb(1,"vitamui-common-input",1),T.jc(2,"translate"),T.Mc(3,wo,5,4,"ng-container",2),T.Sb(),T.Tb(4,"div",3),T.Tb(5,"vitamui-common-input",4),T.jc(6,"translate"),T.Mc(7,xo,3,3,"vitamui-common-input-error",2),T.Sb(),T.Tb(8,"vitamui-common-input",5),T.jc(9,"translate"),T.Mc(10,Po,3,3,"vitamui-common-input-error",2),T.Sb(),T.Sb(),T.Rb(11,6),T.Ob(12,"vitamui-common-input",7),T.jc(13,"translate"),T.Tb(14,"div",3),T.Ob(15,"vitamui-common-input",8),T.jc(16,"translate"),T.Ob(17,"vitamui-common-input",9),T.jc(18,"translate"),T.Tb(19,"mat-form-field",10),T.Tb(20,"mat-select",11),T.jc(21,"translate"),T.Mc(22,Do,2,2,"mat-option",12),T.Sb(),T.Tb(23,"div",13),T.Tb(24,"i",14),T.Oc(25,"keyboard_arrow_up"),T.Sb(),T.Tb(26,"i",14),T.Oc(27,"keyboard_arrow_down"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Qb(),T.Ob(28,"vitamui-common-input",15),T.jc(29,"translate"),T.Qb()),2&e){var i,o=null,n=null;T.oc("formGroup",t.form),T.Bb(1),T.oc("placeholder",T.kc(2,14,"CUSTOMER.OWNER.CODE")),T.Bb(2),T.oc("ngIf",null==(i=t.form.get("code"))?null:i.touched),T.Bb(2),T.oc("placeholder",T.kc(6,16,"CUSTOMER.OWNER.NAME")),T.Bb(2),T.oc("ngIf",(null==(o=t.form.get("name"))?null:o.touched)&&!(null==(o=t.form.get("name"))||null==o.errors||!o.errors.required)),T.Bb(1),T.oc("placeholder",T.kc(9,18,"CUSTOMER.OWNER.SOCIAL_REASON")),T.Bb(2),T.oc("ngIf",(null==(n=t.form.get("companyName"))?null:n.touched)&&!(null==(n=t.form.get("companyName"))||null==n.errors||!n.errors.required)),T.Bb(2),T.pc("maxlength",t.maxStreetLength),T.oc("placeholder",T.kc(13,20,"COMMON.ADRESS.STREET")),T.Bb(3),T.oc("placeholder",T.kc(16,22,"COMMON.ADRESS.ZIPCODE")),T.Bb(2),T.oc("placeholder",T.kc(18,24,"COMMON.ADRESS.CITY")),T.Bb(3),T.oc("placeholder",T.kc(21,26,"COMMON.ADRESS.COUNTRY")),T.Bb(2),T.oc("ngForOf",t.countries),T.Bb(6),T.oc("placeholder",T.kc(29,28,"CUSTOMER.OWNER.INTERNAL_CODE"))}},directives:[l.r,l.i,c.Qb,l.l,l.w,l.q,l.g,o.p,l.j,d.b,m.a,o.o,c.Rb,he.k],pipes:[we.d],styles:[""]}),e})();function Fo(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"COMMON.ERROR.REQUIRED")))}function Lo(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"COMMON.ERROR.WRONG_FORMAT")))}const Vo=function(e){return{max:e}};function qo(e,t){if(1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e){const e=T.ic(2);T.Bb(1),T.Pc(T.lc(2,1,"COMMON.ERROR.STRING_MAX_LENGTH",T.tc(4,Vo,e.customerCodeMaxLength)))}}function _o(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Qc("",T.kc(2,1,"CUSTOMER.INFORMATIONS.MODAL.CODE_ALREADY_EXIST")," "))}function Go(e,t){if(1&e&&(T.Rb(0),T.Mc(1,Fo,3,3,"vitamui-common-input-error",7),T.Mc(2,Lo,3,3,"vitamui-common-input-error",7),T.Mc(3,qo,3,6,"vitamui-common-input-error",7),T.Mc(4,_o,3,3,"vitamui-common-input-error",7),T.Qb()),2&e){const e=T.ic();var i=null,o=null,n=null,r=null;T.Bb(1),T.oc("ngIf",!(null==e.form||null==(i=e.form.get("code"))||null==i.errors||!i.errors.required)),T.Bb(1),T.oc("ngIf",!(null==e.form||null==(o=e.form.get("code"))||null==o.errors||!o.errors.pattern)),T.Bb(1),T.oc("ngIf",!(null==e.form||null==(n=e.form.get("code"))||null==n.errors||!n.errors.maxlength)),T.Bb(1),T.oc("ngIf",!(null==e.form||null==(r=e.form.get("code"))||null==r.errors||!r.errors.uniqueCode))}}function Ho(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Qc("",T.kc(2,1,"COMMON.ERROR.REQUIRED")," "))}function Ko(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Qc("",T.kc(2,1,"COMMON.ERROR.REQUIRED")," "))}function Wo(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Qc("",T.kc(2,1,"COMMON.ERROR.REQUIRED")," "))}function Yo(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Qc("",T.kc(2,1,"COMMON.ERROR.REQUIRED")," "))}function zo(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Qc("",T.kc(2,1,"COMMON.ERROR.REQUIRED")," "))}function Qo(e,t){if(1&e&&(T.Tb(0,"mat-option",40),T.Oc(1),T.Sb()),2&e){const e=t.$implicit;T.oc("value",e.code),T.Bb(1),T.Qc(" ",e.name," ")}}function Xo(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Xb(1,59),T.Sb())}function Jo(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Xb(1,60),T.Sb())}function Zo(e,t){1&e&&T.Pb(0)}function $o(e,t){1&e&&T.Pb(0)}function en(e,t){1&e&&T.Pb(0)}function tn(e,t){1&e&&T.Pb(0)}function on(e,t){1&e&&T.Pb(0)}function nn(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",61),T.Tb(1,"app-graphic-identity",62),T.ec("formToSend",(function(t){T.Dc(e);const i=T.ic();return i.customerForm=t.form,i.logos=t.logos})),T.Sb(),T.Tb(2,"div",32),T.Tb(3,"button",33),T.Oc(4),T.jc(5,"translate"),T.Sb(),T.Mc(6,tn,1,0,"ng-container",34),T.Sb(),T.Mc(7,on,1,0,"ng-container",34),T.Sb()}if(2&e){const e=T.ic(),t=T.zc(186),i=T.zc(188);T.Bb(1),T.oc("customer",e.customer),T.Bb(2),T.oc("disabled",!e.thirdStepValid()),T.Bb(1),T.Qc(" ",T.kc(5,5,"COMMON.NEXT")," "),T.Bb(2),T.oc("ngTemplateOutlet",t),T.Bb(1),T.oc("ngTemplateOutlet",i)}}function rn(e,t){1&e&&T.Pb(0)}function an(e,t){1&e&&T.Pb(0)}function cn(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",63),T.Tb(1,"app-homepage-message",62),T.ec("formToSend",(function(t){T.Dc(e);const i=T.ic();return i.homepageMessageForm=t.form,i.portalTitles=t.portalTitles,i.portalMessages=t.portalMessages})),T.Sb(),T.Tb(2,"div",32),T.Tb(3,"button",33),T.Oc(4),T.jc(5,"translate"),T.Sb(),T.Mc(6,rn,1,0,"ng-container",34),T.Sb(),T.Mc(7,an,1,0,"ng-container",34),T.Sb()}if(2&e){const e=T.ic(),t=T.zc(186),i=T.zc(188);T.Bb(1),T.oc("customer",e.getCustomerFromForm()),T.Bb(2),T.oc("disabled",!e.fourthStepValid()),T.Bb(1),T.Qc(" ",T.kc(5,5,"COMMON.NEXT")," "),T.Bb(2),T.oc("ngTemplateOutlet",t),T.Bb(1),T.oc("ngTemplateOutlet",i)}}function sn(e,t){1&e&&T.Pb(0)}function ln(e,t){1&e&&T.Pb(0)}function un(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Qc("",T.kc(2,1,"COMMON.ERROR.REQUIRED")," "))}function dn(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Qc("",T.kc(2,1,"CUSTOMER.OWNER.MODAL.NAME_ALREADY_EXIST")," "))}function bn(e,t){1&e&&T.Pb(0)}function mn(e,t){1&e&&T.Pb(0)}function pn(e,t){if(1&e){const e=T.Ub();T.Tb(0,"button",64),T.ec("click",(function(){return T.Dc(e),T.ic().onCancel()})),T.Oc(1),T.jc(2,"translate"),T.Sb()}2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"COMMON.UNDO")))}function hn(e,t){1&e&&(T.Tb(0,"button",65),T.Ob(1,"i",66),T.Tb(2,"span",67),T.Oc(3),T.jc(4,"translate"),T.Sb(),T.Sb()),2&e&&(T.Bb(3),T.Pc(T.kc(4,1,"COMMON.BACK")))}const gn=function(){return["owners",0]};let fn=(()=>{class e{constructor(e,t,i,o,n,r,a,s,u,d){this.dialogRef=e,this.data=t,this.formBuilder=i,this.customerService=o,this.customerCreateValidators=n,this.confirmDialogService=r,this.tenantFormValidators=a,this.countryService=s,this.startupService=u,this.matDialog=d,this.customerCodeMaxLength=15,this.stepIndex=0,this.stepCount=6,this.hasError=!0,this.creating=!1,this.customerInfo={code:null,name:null,companyName:null},this.destroy=new ot.a,this.maxStreetLength=this.startupService.getConfigNumberValue("MAX_STREET_LENGTH"),this.form=this.formBuilder.group({gdprAlert:!0,gdprAlertDelay:[72,l.x.min(1)],enabled:[!0,l.x.required],code:[null,[l.x.required,l.x.pattern(ye),l.x.maxLength(this.customerCodeMaxLength)],this.customerCreateValidators.uniqueCode()],name:[null,l.x.required],companyName:[null,l.x.required],passwordRevocationDelay:6,otp:c.Y.OPTIONAL,address:this.formBuilder.group({street:[null,[l.x.required,l.x.maxLength(this.maxStreetLength)]],zipCode:[null,l.x.required],city:[null,l.x.required],country:["FR",l.x.required]}),internalCode:[null],language:["FRENCH",l.x.required],emailDomains:[null,l.x.required],defaultEmailDomain:[null,l.x.required],hasCustomGraphicIdentity:!1,themeColors:[null],portalMessages:[null],portalTitles:[null],owners:this.formBuilder.array([this.formBuilder.control(null,l.x.required)]),tenantName:[null,[l.x.required],this.tenantFormValidators.uniqueName()]}),this.data&&(this.gdprReadOnlyStatus=this.data.gdprReadOnlySettingStatus),this.form.get("gdprAlert").valueChanges.subscribe(()=>{this.form.get("gdprAlert").value||this.confirm(To).subscribe(()=>this.form.get("gdprAlert").setValue(!0))})}get customerForm(){return this._customerForm}set customerForm(e){this._customerForm=e}get homepageMessageForm(){return this._homepageMessageForm}set homepageMessageForm(e){this._homepageMessageForm=e}ngOnInit(){this.onChanges(),this.customerService.getMyCustomer().subscribe(e=>{this.customer=e}),this.confirmDialogService.listenToEscapeKeyPress(this.dialogRef).pipe(Object(Ci.a)(this.destroy)).subscribe(()=>this.onCancel()),this.countryService.getAvailableCountries().subscribe(e=>{this.countries=e})}ngOnDestroy(){this.destroy.next()}onChanges(){Object(ve.a)(this.form.get("code").valueChanges,this.form.get("name").valueChanges,this.form.get("companyName").valueChanges).subscribe(()=>{this.customerInfo={code:this.form.get("code").value,name:this.form.get("name").value,companyName:this.form.get("companyName").value}})}getOwnerName(){return this.form.get(["owners",0]).value?this.form.get(["owners",0]).value.name:""}onCancel(){this.form.dirty?this.confirmDialogService.confirmBeforeClosing(this.dialogRef):this.dialogRef.close()}confirm(e){return this.matDialog.open(e,{panelClass:"vitamui-dialog"}).beforeClosed().pipe(Object(Te.a)(e=>!e))}onSubmit(){if(this.lastStepIsInvalid()||this.stepIndex!==this.stepCount-1)return;this.creating=!0;const e=this.getCustomerFromForm();this.customerService.create(e,this.logos).pipe(Object(Ci.a)(this.destroy)).subscribe(()=>{this.dialogRef.close(!0)},e=>{this.creating=!1,console.error(e)})}getCustomerFromForm(){let e=this.form.value;return this.customerForm&&!0===this.customerForm.get("hasCustomGraphicIdentity").value&&(e=Object.assign(Object.assign({},this.form.value),{hasCustomGraphicIdentity:this.customerForm.get("hasCustomGraphicIdentity").value,themeColors:this.customerForm.get("themeColors").value})),this.homepageMessageForm&&(e=Object.assign(Object.assign({},e),{id:this.homepageMessageForm.get("id").value,portalTitles:this.portalTitles,portalMessages:this.portalMessages})),e}isDurationNotValid(){return this.form.get("gdprAlert").value?this.form.get("gdprAlertDelay").invalid||this.form.get("gdprAlertDelay").pending:(this.form.get("gdprAlert").valueChanges.subscribe(()=>{this.form.get("gdprAlertDelay").setValue(72)}),!1)}firstStepInvalid(){return this.form.get("code").invalid||this.form.get("code").pending||this.form.get("name").invalid||this.form.get("name").pending||this.form.get("companyName").invalid||this.form.get("companyName").pending||this.form.get("address.street").invalid||this.form.get("address.street").pending||this.form.get("address.zipCode").invalid||this.form.get("address.zipCode").pending||this.form.get("address.city").invalid||this.form.get("address.city").pending||this.isDurationNotValid()||this.form.get("internalCode").invalid||this.form.get("internalCode").pending||this.form.get("address.country").invalid||this.form.get("address.country").pending}secondStepInvalid(){return this.form.get("passwordRevocationDelay").invalid||this.form.get("otp").invalid||this.form.get("emailDomains").invalid||this.form.get("defaultEmailDomain").invalid}thirdStepValid(){return!this.customerForm||this.customerForm&&this.customerForm.valid}fourthStepValid(){return this.homepageMessageForm&&this.homepageMessageForm.valid&&this.checkValidation(this.homepageMessageForm.value.translations)}checkValidation(e){let t=!0;return e.forEach(e=>{e.valid||(t=!1)}),t}lastStepIsInvalid(){const e=this.firstStepInvalid()||this.secondStepInvalid()||!this.thirdStepValid()||!this.fourthStepValid();return this.form.pending||this.form.invalid||e||this.creating}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(n.g),T.Nb(n.a),T.Nb(l.d),T.Nb(fe.a),T.Nb(ke),T.Nb(c.t),T.Nb(So),T.Nb(c.u),T.Nb(c.lb),T.Nb(n.b))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-customer-create"]],decls:189,vars:150,consts:function(){return[[1,"header"],[3,"index","count"],["id","formCreateCustomer",3,"formGroup","ngSubmit"],[3,"selectionChange"],[1,"content"],[1,"text","large","bold"],["formControlName","code","required","",1,"col-6","pl-0",3,"placeholder"],[4,"ngIf"],[1,"d-flex"],["formControlName","name","maxlength","100","required","",1,"col-6","pl-0",3,"placeholder"],["formControlName","companyName","maxlength","250","required","",1,"col-6",3,"placeholder"],["formGroupName","address"],["formControlName","street","required","",1,"col-12","pl-0",3,"maxlength","placeholder"],["formControlName","zipCode","maxlength","10","required","",1,"col-4","pl-0",3,"placeholder"],["formControlName","city","maxlength","100","required","",1,"col-4",3,"placeholder"],[1,"vitamui-mat-select"],["formControlName","country","required","","panelClass","vitamui-mat-select",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[1,"select-arrow"],[1,"material-icons"],["formControlName","internalCode","maxlength","20",1,"col-12","pl-0",3,"placeholder"],["for","alerte",1,"inline-label","label-alerte"],[1,"required-marker"],["formControlName","gdprAlert",3,"disabled"],["for","dur\xe9ealerte",1,"inline-label","label-alertDelay"],["formControlName","gdprAlertDelay","maxlength","250","required","","placeholder","Dur\xe9e d'alerte",3,"disabled"],[1,"col-12","d-flex","align-items-center"],["for","language",1,"mr-4","mb-0"],[1,"font-weight-bold"],["formControlName","language","required","","panelClass","vitamui-mat-select"],["value","ENGLISH"],["value","FRENCH"],[1,"actions"],["type","button","cdkStepperNext","",1,"btn","primary",3,"disabled"],[4,"ngTemplateOutlet"],[1,"col-12","p-0","d-flex","align-items-center"],[1,"text","medium","bold"],[1,"text","normal","bold","light"],[1,"vitamui-mat-select","ml-5"],["formControlName","passwordRevocationDelay","panelClass","vitamui-mat-select",3,"placeholder"],[3,"value"],[1,"col-12","p-0","mt-3"],[1,"text","danger"],["formControlName","otp",1,"vitamui-button-toggle-group","mt-2"],["group","matButtonToggleGroup"],["value","DISABLED"],["value","OPTIONAL"],["value","MANDATORY"],[1,"col-12","p-0","mt-4","mb-3"],[1,"mb-4","text","normal","bold","light"],["formControlName","emailDomains",3,"placeholder","selected","selectedChange"],["id","toOverride","class","content mt-4",4,"ngIf"],["class","content mt-4",4,"ngIf"],[3,"formControl","customerInfo"],[1,"hint"],["formControlName","tenantName","required","",3,"placeholder"],["type","submit",1,"btn","primary",3,"disabled"],["cancel",""],["back",""],$localize`:Required field error hint@@formErrorRequiredField280938ad72007d81e91ee0f9502065c65fc5e86c2006890700163375412:Champ requis `,$localize`:Required field error hint@@formErrorRequiredField64f0577d627b50efbe97df1474bcad8af18ad40f7264927525496483276:Il faut une valeur suprieure  0 `,["id","toOverride",1,"content","mt-4"],[3,"customer","formToSend"],[1,"content","mt-4"],["type","button",1,"btn","cancel","link","ml-3",3,"click"],["type","button","cdkStepperPrevious","",1,"btn","link","mt-1","ml-1","primary"],[1,"vitamui-icon","vitamui-icon-chevron-left"],[1,"underline"]]},template:function(e,t){if(1&e&&(T.Tb(0,"div",0),T.Ob(1,"vitamui-common-progress-bar",1),T.Sb(),T.Tb(2,"form",2),T.ec("ngSubmit",(function(){return t.onSubmit()})),T.Tb(3,"vitamui-common-stepper",3),T.ec("selectionChange",(function(e){return t.stepIndex=e.selectedIndex})),T.Tb(4,"cdk-step"),T.Tb(5,"div",4),T.Tb(6,"div",5),T.Oc(7),T.jc(8,"translate"),T.Sb(),T.Tb(9,"vitamui-common-input",6),T.jc(10,"translate"),T.Mc(11,Go,5,4,"ng-container",7),T.Sb(),T.Tb(12,"div",8),T.Tb(13,"vitamui-common-input",9),T.jc(14,"translate"),T.Mc(15,Ho,3,3,"vitamui-common-input-error",7),T.Sb(),T.Tb(16,"vitamui-common-input",10),T.jc(17,"translate"),T.Mc(18,Ko,3,3,"vitamui-common-input-error",7),T.Sb(),T.Sb(),T.Rb(19,11),T.Tb(20,"vitamui-common-input",12),T.jc(21,"translate"),T.Mc(22,Wo,3,3,"vitamui-common-input-error",7),T.Sb(),T.Tb(23,"div",8),T.Tb(24,"vitamui-common-input",13),T.jc(25,"translate"),T.Mc(26,Yo,3,3,"vitamui-common-input-error",7),T.Sb(),T.Tb(27,"vitamui-common-input",14),T.jc(28,"translate"),T.Mc(29,zo,3,3,"vitamui-common-input-error",7),T.Sb(),T.Tb(30,"mat-form-field",15),T.Tb(31,"mat-select",16),T.jc(32,"translate"),T.Mc(33,Qo,2,2,"mat-option",17),T.Sb(),T.Tb(34,"div",18),T.Tb(35,"i",19),T.Oc(36,"keyboard_arrow_up"),T.Sb(),T.Tb(37,"i",19),T.Oc(38,"keyboard_arrow_down"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Qb(),T.Ob(39,"vitamui-common-input",20),T.jc(40,"translate"),T.Tb(41,"div",8),T.Tb(42,"label",21),T.Oc(43," Alerte pour les utilisateurs inactifs "),T.Tb(44,"span",22),T.Oc(45,"*"),T.Sb(),T.Ob(46,"br"),T.Sb(),T.Ob(47,"vitamui-common-slide-toggle",23),T.Tb(48,"label",24),T.Oc(49," Dur\xe9e d'alerte sur les utilisateurs inactifs (par mois) "),T.Tb(50,"span",22),T.Oc(51,"*"),T.Sb(),T.Sb(),T.Tb(52,"vitamui-common-input",25),T.Mc(53,Xo,2,0,"vitamui-common-input-error",7),T.Mc(54,Jo,2,0,"vitamui-common-input-error",7),T.Sb(),T.Sb(),T.Tb(55,"div",26),T.Tb(56,"label",27),T.Tb(57,"div",28),T.Oc(58),T.jc(59,"translate"),T.Tb(60,"span",22),T.Oc(61,"*"),T.Sb(),T.Sb(),T.Tb(62,"div",28),T.Tb(63,"small"),T.Oc(64),T.jc(65,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(66,"mat-form-field",15),T.Tb(67,"mat-select",29),T.Tb(68,"mat-option",30),T.Oc(69),T.jc(70,"translate"),T.Sb(),T.Tb(71,"mat-option",31),T.Oc(72),T.jc(73,"translate"),T.Sb(),T.Sb(),T.Tb(74,"div",18),T.Tb(75,"i",19),T.Oc(76,"keyboard_arrow_up"),T.Sb(),T.Tb(77,"i",19),T.Oc(78,"keyboard_arrow_down"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(79,"div",32),T.Tb(80,"button",33),T.Oc(81),T.jc(82,"translate"),T.Sb(),T.Mc(83,Zo,1,0,"ng-container",34),T.Sb(),T.Sb(),T.Sb(),T.Tb(84,"cdk-step"),T.Tb(85,"div",4),T.Tb(86,"div",5),T.Oc(87),T.jc(88,"translate"),T.Sb(),T.Tb(89,"div",35),T.Tb(90,"div"),T.Tb(91,"div",36),T.Oc(92),T.jc(93,"translate"),T.Sb(),T.Tb(94,"div",37),T.Tb(95,"small"),T.Oc(96),T.jc(97,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(98,"mat-form-field",38),T.Tb(99,"mat-select",39),T.jc(100,"translate"),T.Tb(101,"mat-option",40),T.Oc(102),T.jc(103,"translate"),T.Sb(),T.Tb(104,"mat-option",40),T.Oc(105),T.jc(106,"translate"),T.Sb(),T.Tb(107,"mat-option",40),T.Oc(108),T.jc(109,"translate"),T.Sb(),T.Tb(110,"mat-option",40),T.Oc(111),T.jc(112,"translate"),T.Sb(),T.Sb(),T.Tb(113,"div",18),T.Tb(114,"i",19),T.Oc(115,"keyboard_arrow_up"),T.Sb(),T.Tb(116,"i",19),T.Oc(117,"keyboard_arrow_down"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(118,"div",41),T.Tb(119,"div",36),T.Oc(120),T.jc(121,"translate"),T.Tb(122,"span",42),T.Oc(123,"*"),T.Sb(),T.Sb(),T.Tb(124,"mat-button-toggle-group",43,44),T.Tb(126,"mat-button-toggle",45),T.Oc(127),T.jc(128,"translate"),T.Sb(),T.Tb(129,"mat-button-toggle",46),T.Oc(130),T.jc(131,"translate"),T.Sb(),T.Tb(132,"mat-button-toggle",47),T.Oc(133),T.jc(134,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(135,"div",48),T.Tb(136,"div",36),T.Oc(137),T.jc(138,"translate"),T.Sb(),T.Tb(139,"div",49),T.Oc(140),T.jc(141,"translate"),T.Sb(),T.Tb(142,"app-domains-input",50),T.ec("selectedChange",(function(e){return t.form.get("defaultEmailDomain").setValue(e)})),T.jc(143,"translate"),T.Sb(),T.Sb(),T.Tb(144,"div",32),T.Tb(145,"button",33),T.Oc(146),T.jc(147,"translate"),T.Sb(),T.Mc(148,$o,1,0,"ng-container",34),T.Sb(),T.Mc(149,en,1,0,"ng-container",34),T.Sb(),T.Sb(),T.Tb(150,"cdk-step"),T.Mc(151,nn,8,7,"div",51),T.Sb(),T.Tb(152,"cdk-step"),T.Mc(153,cn,8,7,"div",52),T.Sb(),T.Tb(154,"cdk-step"),T.Tb(155,"div",4),T.Tb(156,"div",5),T.Oc(157),T.jc(158,"translate"),T.Sb(),T.Tb(159,"div"),T.Ob(160,"app-owner-form",53),T.Tb(161,"p",54),T.Oc(162),T.jc(163,"translate"),T.Sb(),T.Sb(),T.Tb(164,"div",32),T.Tb(165,"button",33),T.Oc(166),T.jc(167,"translate"),T.Sb(),T.Mc(168,sn,1,0,"ng-container",34),T.Sb(),T.Mc(169,ln,1,0,"ng-container",34),T.Sb(),T.Sb(),T.Tb(170,"cdk-step"),T.Tb(171,"div",4),T.Tb(172,"div",5),T.Oc(173),T.jc(174,"translate"),T.Sb(),T.Tb(175,"vitamui-common-input",55),T.jc(176,"translate"),T.Mc(177,un,3,3,"vitamui-common-input-error",7),T.Mc(178,dn,3,3,"vitamui-common-input-error",7),T.Sb(),T.Tb(179,"div",32),T.Tb(180,"button",56),T.Oc(181),T.jc(182,"translate"),T.Sb(),T.Mc(183,bn,1,0,"ng-container",34),T.Sb(),T.Mc(184,mn,1,0,"ng-container",34),T.Sb(),T.Sb(),T.Mc(185,pn,3,3,"ng-template",null,57,T.Nc),T.Mc(187,hn,5,3,"ng-template",null,58,T.Nc),T.Sb(),T.Sb()),2&e){const e=T.zc(186),b=T.zc(188);var i,o=null,n=null,r=null,a=null,c=null,s=null,l=null,u=null,d=null;T.Bb(1),T.oc("index",t.stepIndex)("count",t.stepCount),T.Bb(1),T.oc("formGroup",t.form),T.Bb(5),T.Pc(T.kc(8,75,"CUSTOMER.HOME.CREATE_TITLE")),T.Bb(2),T.oc("placeholder",T.kc(10,77,"CUSTOMER.INFORMATIONS.CODE")),T.Bb(2),T.oc("ngIf",null==(i=t.form.get("code"))?null:i.touched),T.Bb(2),T.oc("placeholder",T.kc(14,79,"CUSTOMER.INFORMATIONS.NAME")),T.Bb(2),T.oc("ngIf",(null==(o=t.form.get("name"))?null:o.touched)&&!(null==(o=t.form.get("name"))||null==o.errors||!o.errors.required)),T.Bb(1),T.oc("placeholder",T.kc(17,81,"CUSTOMER.INFORMATIONS.SOCIAL_REASON")),T.Bb(2),T.oc("ngIf",(null==(n=t.form.get("companyName"))?null:n.touched)&&!(null==(n=t.form.get("companyName"))||null==n.errors||!n.errors.required)),T.Bb(2),T.pc("maxlength",t.maxStreetLength),T.oc("placeholder",T.kc(21,83,"COMMON.ADRESS.STREET")),T.Bb(2),T.oc("ngIf",(null==(r=t.form.get("address.street"))?null:r.touched)&&!(null==(r=t.form.get("address.street"))||null==r.errors||!r.errors.required)),T.Bb(2),T.oc("placeholder",T.kc(25,85,"COMMON.ADRESS.ZIPCODE")),T.Bb(2),T.oc("ngIf",(null==(a=t.form.get("address.zipCode"))?null:a.touched)&&!(null==(a=t.form.get("address.zipCode"))||null==a.errors||!a.errors.required)),T.Bb(1),T.oc("placeholder",T.kc(28,87,"COMMON.ADRESS.CITY")),T.Bb(2),T.oc("ngIf",(null==(c=t.form.get("address.city"))?null:c.touched)&&!(null==(c=t.form.get("address.city"))||null==c.errors||!c.errors.required)),T.Bb(2),T.oc("placeholder",T.kc(32,89,"COMMON.ADRESS.COUNTRY")),T.Bb(2),T.oc("ngForOf",t.countries),T.Bb(6),T.oc("placeholder",T.kc(40,91,"CUSTOMER.INFORMATIONS.INTERNAL_CODE")),T.Bb(8),T.oc("disabled",t.gdprReadOnlyStatus),T.Bb(5),T.oc("disabled",t.gdprReadOnlyStatus||!t.form.get("gdprAlert").value),T.Bb(1),T.oc("ngIf",t.form.get("gdprAlert").value&&(null==(s=t.form.get("gdprAlertDelay"))?null:s.touched)&&!(null==(s=t.form.get("gdprAlertDelay"))||null==s.errors||!s.errors.required)),T.Bb(1),T.oc("ngIf",t.form.get("gdprAlert").value&&!(null==(l=t.form.get("gdprAlertDelay"))||null==l.errors||!l.errors.min)),T.Bb(4),T.Qc(" ",T.kc(59,93,"CUSTOMER.INFORMATIONS.DEFAULT_LANGUAGE_1")," "),T.Bb(6),T.Pc(T.kc(65,95,"CUSTOMER.INFORMATIONS.DEFAULT_LANGUAGE_2")),T.Bb(5),T.Pc(T.kc(70,97,"COMMON.LANGUAGE.ENGLISH")),T.Bb(3),T.Pc(T.kc(73,99,"COMMON.LANGUAGE.FRENCH")),T.Bb(8),T.oc("disabled",t.firstStepInvalid()),T.Bb(1),T.Pc(T.kc(82,101,"COMMON.NEXT")),T.Bb(2),T.oc("ngTemplateOutlet",e),T.Bb(4),T.Pc(T.kc(88,103,"CUSTOMER.INFORMATIONS.MODAL.ACCESS_TITLE")),T.Bb(5),T.Qc(" ",T.kc(93,105,"CUSTOMER.INFORMATIONS.PASSWORD_DURATION_1")," "),T.Bb(4),T.Pc(T.kc(97,107,"CUSTOMER.INFORMATIONS.PASSWORD_DURATION_2")),T.Bb(3),T.oc("placeholder",T.kc(100,109,"CUSTOMER.INFORMATIONS.PASSWORDS_DURATION")),T.Bb(2),T.oc("value",3),T.Bb(1),T.Qc("",T.kc(103,111,"CUSTOMER.INFORMATIONS.MODAL.PWD_REVOCATION_THREE")," "),T.Bb(2),T.oc("value",6),T.Bb(1),T.Qc("",T.kc(106,113,"CUSTOMER.INFORMATIONS.MODAL.PWD_REVOCATION_SIX")," "),T.Bb(2),T.oc("value",9),T.Bb(1),T.Qc("",T.kc(109,115,"CUSTOMER.INFORMATIONS.MODAL.PWD_REVOCATION_NINE")," "),T.Bb(2),T.oc("value",12),T.Bb(1),T.Qc("",T.kc(112,117,"CUSTOMER.INFORMATIONS.MODAL.PWD_REVOCATION_TWELVE")," "),T.Bb(9),T.Qc("",T.kc(121,119,"CUSTOMER.INFORMATIONS.VALIDATIONS")," "),T.Bb(7),T.Qc("",T.kc(128,121,"CUSTOMER.INFORMATIONS.MODAL.OTP_DISABLED")," "),T.Bb(3),T.Qc("",T.kc(131,123,"CUSTOMER.INFORMATIONS.MODAL.OTP_OPTIONAL")," "),T.Bb(3),T.Qc(" ",T.kc(134,125,"CUSTOMER.INFORMATIONS.MODAL.OTP_MANDATORY")," "),T.Bb(4),T.Qc(" ",T.kc(138,127,"CUSTOMER.INFORMATIONS.MODAL.DOMAINS_RESTRICTION")," "),T.Bb(3),T.Pc(T.kc(141,129,"CUSTOMER.INFORMATIONS.MODAL.DOMAINS_RESTRICTION_DESC")),T.Bb(2),T.oc("placeholder",T.kc(143,131,"CUSTOMER.INFORMATIONS.MODAL.DOMAINS_PLACEHOLDER"))("selected",t.form.get("defaultEmailDomain").value),T.Bb(3),T.oc("disabled",t.secondStepInvalid()),T.Bb(1),T.Pc(T.kc(147,133,"COMMON.NEXT")),T.Bb(2),T.oc("ngTemplateOutlet",e),T.Bb(1),T.oc("ngTemplateOutlet",b),T.Bb(2),T.oc("ngIf",2===t.stepIndex),T.Bb(2),T.oc("ngIf",3===t.stepIndex),T.Bb(4),T.Rc("",T.kc(158,135,"CUSTOMER.OWNER.CREATE.TITLE"),' "',t.customerInfo.name,'"'),T.Bb(3),T.oc("formControl",t.form.get(T.sc(147,gn)))("customerInfo",t.customerInfo),T.Bb(2),T.Qc(" ",T.kc(163,137,"CUSTOMER.OWNER.CREATE.PROOF_ELEMENTS")," "),T.Bb(3),T.oc("disabled",t.form.get(T.sc(148,gn)).pending||t.form.get(T.sc(149,gn)).invalid),T.Bb(1),T.Qc(" ",T.kc(167,139,"CUSTOMER.OWNER.MODAL.ACTION_BUTTON")," "),T.Bb(2),T.oc("ngTemplateOutlet",e),T.Bb(1),T.oc("ngTemplateOutlet",b),T.Bb(4),T.Rc("",T.kc(174,141,"CUSTOMER.OWNER.MODAL.SAFE_TITLE"),' "',t.getOwnerName(),'"'),T.Bb(2),T.oc("placeholder",T.kc(176,143,"CUSTOMER.OWNER.SAFE_NAME")),T.Bb(2),T.oc("ngIf",(null==t.form||null==(u=t.form.get("tenantName"))?null:u.touched)&&(null==t.form||null==(u=t.form.get("tenantName"))?null:u.hasError("required"))),T.Bb(1),T.oc("ngIf",(null==t.form||null==(d=t.form.get("tenantName"))?null:d.touched)&&(null==t.form||null==(d=t.form.get("tenantName"))?null:d.hasError("uniqueName"))),T.Bb(2),T.oc("disabled",t.form.pending||t.form.invalid),T.Bb(1),T.Pc(T.kc(182,145,"COMMON.SUBMIT")),T.Bb(2),T.oc("ngTemplateOutlet",e),T.Bb(1),T.oc("ngTemplateOutlet",b)}},directives:[c.dc,l.y,l.r,l.i,c.mb,ut.a,c.Qb,l.q,l.g,l.w,o.p,l.l,l.j,d.b,m.a,o.o,c.ac,he.k,ut.d,o.u,u.b,u.a,Le,jo,l.f,c.Rb,qi,so,ut.e],pipes:[we.d],styles:[""]}),e})();var vn=i("C05f");let On=(()=>{class e{constructor(){this.tenantsUpdatedSource=new vn.a([]),this._tenants=[]}get tenants(){return this._tenants}set tenants(e){this._tenants=e}addTenants(e){this._tenants=Array.from(new Set([...this.tenants,...e])),this.tenantsUpdatedSource.next(this.tenants)}updateTenant(e){const t=(this.tenants||[]).findIndex(t=>e.id===t.id);t>-1&&(this.tenants[t]=e),this.tenantsUpdatedSource.next(this.tenants)}get tenantsUpdated$(){return this.tenantsUpdatedSource.asObservable()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=T.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Sn(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"COMMON.ERROR.REQUIRED")))}function Tn(e,t){1&e&&(T.Tb(0,"vitamui-common-input-error"),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"CUSTOMER.OWNER.MODAL.NAME_ALREADY_EXIST")))}let Cn=(()=>{class e{constructor(e,t,i,o,n,r,a){this.dialogRef=e,this.data=t,this.formBuilder=i,this.ownerService=o,this.tenantService=n,this.tenantFormValidators=r,this.confirmDialogService=a,this.stepIndex=0}ngOnInit(){this.ownerForm=this.formBuilder.group({owner:[null,l.x.required]}),this.tenantForm=this.formBuilder.group({name:[null,[l.x.required],this.tenantFormValidators.uniqueName()],ownerId:[null],customerId:[this.data.customer.id],enabled:[!0,l.x.required]}),this.keyPressSubscription=this.confirmDialogService.listenToEscapeKeyPress(this.dialogRef).subscribe(()=>this.onCancel())}ngOnDestroy(){this.keyPressSubscription.unsubscribe()}onCancel(){this.ownerForm.dirty||this.tenantForm.dirty?this.confirmDialogService.confirmBeforeClosing(this.dialogRef):this.dialogRef.close()}onOwnerSubmit(){this.ownerForm.pending||this.ownerForm.invalid||this.ownerService.create(this.ownerForm.value.owner).subscribe(e=>this.dialogRef.close({owner:e}),e=>{console.error(e)})}onTenantSubmit(){this.ownerForm.pending||this.ownerForm.invalid||this.tenantForm.pending||this.tenantForm.invalid||this.ownerService.create(this.ownerForm.value.owner).subscribe(e=>{this.tenantForm.get("ownerId").setValue(e.id),this.tenantService.create(this.tenantForm.value,e.name).subscribe(t=>{this.dialogRef.close({owner:e,tenant:t})},e=>{console.error(e),this.dialogRef.close()})},e=>{console.error(e)})}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(n.g),T.Nb(n.a),T.Nb(l.d),T.Nb(Ao),T.Nb(Oo),T.Nb(So),T.Nb(c.t))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-owner-create"]],decls:43,vars:40,consts:[[1,"header"],[3,"index","count"],[3,"selectedIndex","selectionChange"],[3,"formGroup","ngSubmit"],[1,"content"],[1,"text","large","bold"],["formControlName","owner",3,"customerId"],[1,"actions"],["type","button","cdkStepperNext","",1,"btn","primary",3,"disabled"],["type","submit",1,"btn","primary",3,"disabled"],["type","button",1,"btn","cancel","link",3,"click"],["formControlName","name","required","",3,"placeholder"],[4,"ngIf"],["type","button","cdkStepperPrevious","",1,"btn","link"],[1,"vitamui-icon","vitamui-icon-chevron-left"],[1,"underline"]],template:function(e,t){if(1&e&&(T.Tb(0,"div",0),T.Ob(1,"vitamui-common-progress-bar",1),T.Sb(),T.Tb(2,"vitamui-common-stepper",2),T.ec("selectionChange",(function(e){return t.stepIndex=e.selectedIndex})),T.Tb(3,"cdk-step"),T.Tb(4,"form",3),T.ec("ngSubmit",(function(){return t.onOwnerSubmit()})),T.Tb(5,"div",4),T.Tb(6,"div",5),T.Oc(7),T.jc(8,"translate"),T.Sb(),T.Ob(9,"app-owner-form",6),T.Tb(10,"div",7),T.Tb(11,"button",8),T.Oc(12),T.jc(13,"translate"),T.Sb(),T.Tb(14,"button",9),T.Oc(15),T.jc(16,"translate"),T.Sb(),T.Tb(17,"button",10),T.ec("click",(function(){return t.onCancel()})),T.Oc(18),T.jc(19,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(20,"cdk-step"),T.Tb(21,"form",3),T.ec("ngSubmit",(function(){return t.onTenantSubmit()})),T.Tb(22,"div",4),T.Tb(23,"div",5),T.Oc(24),T.jc(25,"translate"),T.Sb(),T.Tb(26,"vitamui-common-input",11),T.jc(27,"translate"),T.Mc(28,Sn,3,3,"vitamui-common-input-error",12),T.Mc(29,Tn,3,3,"vitamui-common-input-error",12),T.Sb(),T.Tb(30,"div",7),T.Tb(31,"button",9),T.Oc(32),T.jc(33,"translate"),T.Sb(),T.Tb(34,"button",10),T.ec("click",(function(){return t.onCancel()})),T.Oc(35),T.jc(36,"translate"),T.Sb(),T.Sb(),T.Tb(37,"button",13),T.Ob(38,"i",14),T.Rb(39),T.Tb(40,"span",15),T.Oc(41),T.jc(42,"translate"),T.Sb(),T.Qb(),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Sb()),2&e){var i=null,o=null;T.Bb(1),T.oc("index",t.stepIndex)("count",2),T.Bb(1),T.oc("selectedIndex",t.stepIndex),T.Bb(2),T.oc("formGroup",t.ownerForm),T.Bb(3),T.Rc("",T.kc(8,22,"CUSTOMER.OWNER.CREATE.TITLE"),' "',null==t.data||null==t.data.customer?null:t.data.customer.name,'"'),T.Bb(2),T.oc("customerId",null==t.data||null==t.data.customer?null:t.data.customer.id),T.Bb(2),T.oc("disabled",t.ownerForm.pending||t.ownerForm.invalid),T.Bb(1),T.Qc(" ",T.kc(13,24,"CUSTOMER.OWNER.MODAL.ACTION_BUTTON")," "),T.Bb(2),T.oc("disabled",t.ownerForm.pending||t.ownerForm.invalid),T.Bb(1),T.Qc(" ",T.kc(16,26,"COMMON.SUBMIT")," "),T.Bb(3),T.Pc(T.kc(19,28,"COMMON.UNDO")),T.Bb(3),T.oc("formGroup",t.tenantForm),T.Bb(3),T.Rc("",T.kc(25,30,"CUSTOMER.OWNER.MODAL.SAFE_TITLE"),' "',null==t.ownerForm||null==t.ownerForm.value||null==t.ownerForm.value.owner?null:t.ownerForm.value.owner.name,'"'),T.Bb(2),T.oc("placeholder",T.kc(27,32,"CUSTOMER.OWNER.SAFE_NAME")),T.Bb(2),T.oc("ngIf",(null==t.tenantForm||null==(i=t.tenantForm.get("name"))?null:i.touched)&&(null==t.tenantForm||null==(i=t.tenantForm.get("name"))?null:i.hasError("required"))),T.Bb(1),T.oc("ngIf",(null==t.tenantForm||null==(o=t.tenantForm.get("name"))?null:o.touched)&&(null==t.tenantForm||null==(o=t.tenantForm.get("name"))?null:o.hasError("uniqueName"))),T.Bb(2),T.oc("disabled",t.tenantForm.pending||t.tenantForm.invalid),T.Bb(1),T.Qc(" ",T.kc(33,34,"COMMON.SUBMIT")," "),T.Bb(3),T.Pc(T.kc(36,36,"COMMON.UNDO")),T.Bb(6),T.Pc(T.kc(42,38,"COMMON.BACK"))}},directives:[c.dc,c.mb,ut.a,l.y,l.r,l.i,jo,l.q,l.g,ut.d,c.Qb,l.w,o.p,ut.e,c.Rb],pipes:[we.d],styles:[""]}),e})();var Mn=i("guXd");let An=(()=>{class e extends c.jb{constructor(e){super(e,"OWNER,TENANT"),this.customerApi=e}search(e=new c.Z(0,c.w,"code",c.x.ASCENDANT)){return this.pageRequest=e,this.customerApi.getAllPaginated(this.pageRequest,"OWNER,TENANT").pipe(Object(Ce.a)(e=>(this.data=e.values.map(e=>this.transformCustomer(e)),this.pageRequest.page=e.pageNum,this.hasMore=e.hasMore,this.data)))}loadMore(){return this.hasMore?(this.pageRequest.page+=1,this.customerApi.getAllPaginated(this.pageRequest,"OWNER,TENANT").pipe(Object(Ce.a)(e=>(this.data=this.data.concat(e.values.map(e=>this.transformCustomer(e))),this.pageRequest.page=e.pageNum,this.hasMore=e.hasMore,this.data)))):Object(Oe.a)(this.data)}transformCustomer(e){return{id:e.id,identifier:e.identifier,enabled:e.enabled,code:e.code,name:e.name,companyName:e.companyName,passwordRevocationDelay:e.passwordRevocationDelay,otp:e.otp,address:e.address,internalCode:e.internalCode,language:e.language,emailDomains:e.emailDomains,defaultEmailDomain:e.defaultEmailDomain,owners:this.filteredOwners(e),portalMessages:e.portalMessages,portalTitles:e.portalTitles,readonly:e.readonly,hasCustomGraphicIdentity:e.hasCustomGraphicIdentity,themeColors:e.themeColors,gdprAlert:e.gdprAlert,gdprAlertDelay:e.gdprAlertDelay}}filteredOwners(e){return e.owners}}return e.\u0275fac=function(t){return new(t||e)(T.bc(Mn.a))},e.\u0275prov=T.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),En=(()=>{class e{constructor(e,t,i,o,n,r){this.dialogRef=e,this.data=t,this.formBuilder=i,this.tenantService=o,this.tenantFormValidators=n,this.confirmDialogService=r}ngOnInit(){this.form=this.formBuilder.group({ownerId:[this.data.owner.id],customerId:[this.data.owner.customerId],name:[null,[l.x.required],this.tenantFormValidators.uniqueName()],enabled:[!0,l.x.required]}),this.keyPressSubscription=this.confirmDialogService.listenToEscapeKeyPress(this.dialogRef).subscribe(()=>this.onCancel())}ngOnDestroy(){this.keyPressSubscription.unsubscribe()}onCancel(){this.form.dirty?this.confirmDialogService.confirmBeforeClosing(this.dialogRef):this.dialogRef.close()}onSubmit(){this.form.pending||this.form.invalid||this.tenantService.create(this.form.value,this.data.owner.name).subscribe(e=>{this.dialogRef.close(e)},e=>{console.error(e),this.dialogRef.close(null)})}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(n.g),T.Nb(n.a),T.Nb(l.d),T.Nb(Oo),T.Nb(So),T.Nb(c.t))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-tenant-create"]],decls:16,vars:17,consts:[[1,"header"],[3,"index","count"],[3,"formGroup","ngSubmit"],[1,"content"],[1,"text","large","bold"],["formControlName","name","required","",3,"placeholder"],[1,"actions"],["type","submit",1,"btn","primary",3,"disabled"],["type","button",1,"btn","cancel","link",3,"click"]],template:function(e,t){1&e&&(T.Tb(0,"div",0),T.Ob(1,"vitamui-common-progress-bar",1),T.Sb(),T.Tb(2,"form",2),T.ec("ngSubmit",(function(){return t.onSubmit()})),T.Tb(3,"div",3),T.Tb(4,"div",4),T.Oc(5),T.jc(6,"translate"),T.Sb(),T.Ob(7,"vitamui-common-input",5),T.jc(8,"translate"),T.Tb(9,"div",6),T.Tb(10,"button",7),T.Oc(11),T.jc(12,"translate"),T.Sb(),T.Tb(13,"button",8),T.ec("click",(function(){return t.onCancel()})),T.Oc(14),T.jc(15,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb()),2&e&&(T.Bb(1),T.oc("index",0)("count",1),T.Bb(1),T.oc("formGroup",t.form),T.Bb(3),T.Rc("",T.kc(6,9,"CUSTOMER.OWNER.MODAL.SAFE_TITLE"),' "',null==t.data||null==t.data.owner?null:t.data.owner.name,'"'),T.Bb(2),T.oc("placeholder",T.kc(8,11,"CUSTOMER.OWNER.SAFE_NAME")),T.Bb(3),T.oc("disabled",t.form.pending||t.form.invalid),T.Bb(1),T.Pc(T.kc(12,13,"COMMON.SUBMIT")),T.Bb(3),T.Pc(T.kc(15,15,"COMMON.UNDO")))},directives:[c.dc,l.y,l.r,l.i,c.Qb,l.q,l.g,l.w],pipes:[we.d],styles:[""]}),e})();function Rn(e,t){1&e&&T.Ob(0,"div")}function In(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",12),T.ec("click",(function(i){T.Dc(e);const o=t.$implicit,n=T.ic();return n.clickTenant(o,n.getOwner(null==o?null:o.ownerId))})),T.Tb(1,"div",13),T.Mc(2,Rn,1,0,"div",14),T.Sb(),T.Tb(3,"div",15),T.Oc(4),T.Sb(),T.Tb(5,"div",16),T.Oc(6),T.Sb(),T.Tb(7,"div",15),T.Oc(8),T.Sb(),T.Sb()}if(2&e){const e=t.$implicit,n=T.ic(),r=T.zc(23),a=T.zc(25);var i,o;T.Bb(2),T.oc("ngIf",e.proof)("ngIfThen",r)("ngIfElse",a),T.Bb(2),T.Pc(null==(i=n.getOwner(null==e?null:e.ownerId))?null:i.code),T.Bb(2),T.Pc(null==(o=n.getOwner(null==e?null:e.ownerId))?null:o.name),T.Bb(2),T.Pc(null==e?null:e.identifier)}}function yn(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",12),T.ec("click",(function(i){T.Dc(e);const o=t.$implicit;return T.ic().ownerClick.emit(o)})),T.Tb(1,"div",13),T.Ob(2,"i",17),T.Sb(),T.Tb(3,"div",15),T.Oc(4),T.Sb(),T.Tb(5,"div",16),T.Oc(6),T.Sb(),T.Tb(7,"div",18),T.Tb(8,"div"),T.Tb(9,"button",19),T.ec("click",(function(i){T.Dc(e);const o=t.$implicit,n=T.ic();return i.stopPropagation(),n.openCreateTenantDialog(o)})),T.Ob(10,"i",20),T.Sb(),T.Sb(),T.Sb(),T.Sb()}if(2&e){const e=t.$implicit;T.Bb(2),T.Jc("font-size",25,"px"),T.Bb(2),T.Pc(null==e?null:e.code),T.Bb(2),T.Pc(null==e?null:e.name),T.Bb(4),T.Jc("font-size",25,"px")}}function kn(e,t){1&e&&(T.Tb(0,"div",21),T.jc(1,"translate"),T.Ob(2,"i",22),T.Ob(3,"i",23),T.Sb()),2&e&&(T.oc("matTooltip",T.kc(1,5,"CUSTOMER.OWNER.LIST.PROOF_ELEMENTS")),T.Bb(2),T.Jc("font-size",25,"px"),T.Bb(1),T.Jc("font-size",15,"px"))}function Bn(e,t){1&e&&(T.Ob(0,"i",24),T.Ob(1,"i",17)),2&e&&(T.Jc("font-size",25,"px"),T.Bb(1),T.Jc("font-size",15,"px"))}let Nn=(()=>{class e{constructor(e,t,i,o){this.dialog=e,this.ownerService=t,this.tenantService=i,this.customerDataService=o,this._customer=null,this.ownerClick=new T.n,this.tenantClick=new T.n}set customer(e){this._customer=e}get customer(){return this._customer}ngOnInit(){this.filteredData(this.customerDataService.tenants),this.customerDataService.tenantsUpdated$.subscribe(e=>{this.filteredData(e)}),this.updatedOwnerSub=this.ownerService.updated.subscribe(e=>{const t=(this.customer.owners||[]).findIndex(t=>e.id===t.id);t>-1&&(this.customer.owners[t]=e),this.filteredData(this.myTenants)}),this.updatedTenantSub=this.tenantService.updated.subscribe(e=>{this.customerDataService.updateTenant(e)})}ngOnDestroy(){this.updatedOwnerSub.unsubscribe(),this.updatedTenantSub.unsubscribe()}openCreateOwnerDialog(){this.dialog.open(Cn,{data:{customer:this.customer},disableClose:!0,panelClass:"vitamui-modal"}).afterClosed().pipe(Object(Te.a)(e=>!!e)).subscribe(e=>{e.owner&&(this.customer.owners=this.customer.owners.concat([e.owner]),this.filteredData(this.myTenants)),e.tenant&&this.customerDataService.addTenants([e.tenant])})}filteredData(e){if(e){this.myTenants=e.sort((e,t)=>e.identifier-t.identifier).filter(e=>e.customerId===this.customer.id);const t=this.myTenants.map(e=>e.ownerId);this.ownersWithoutTenant=this.customer.owners.filter(e=>!t.includes(e.id))}}clickTenant(e,t){this.tenantService.get(e.id).subscribe(e=>{this.tenantClick.emit({tenant:e,owner:t})})}getOwner(e){return e?this.customer.owners.filter(t=>t.id===e)[0]:null}openCreateTenantDialog(e){this.dialog.open(En,{disableClose:!0,data:{owner:e},panelClass:"vitamui-modal"}).afterClosed().pipe(Object(Te.a)(e=>!!e)).subscribe(e=>{this.customerDataService.addTenants([e])})}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(n.b),T.Nb(Ao),T.Nb(Oo),T.Nb(On))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-owner-list"]],inputs:{customer:"customer"},outputs:{ownerClick:"ownerClick",tenantClick:"tenantClick"},decls:26,vars:14,consts:[[1,"vitamui-subtable","p-0"],[1,"vitamui-table-head"],[1,"col-3"],[1,"col-2"],[1,"col-4"],[1,"vitamui-table-body"],[1,"vitamui-table-rows"],["class","vitamui-row d-flex align-items-center clickable",3,"click",4,"ngFor","ngForOf"],[1,"footer-action"],[1,"text","normal","link","bold","primary",3,"click"],["proofIcons",""],["notProofIcons",""],[1,"vitamui-row","d-flex","align-items-center","clickable",3,"click"],[1,"col-3","d-flex","justify-content-center","align-items-end"],[4,"ngIf","ngIfThen","ngIfElse"],["vitamuiCommonEllipsis","",1,"col-2"],["vitamuiCommonEllipsis","",1,"col-3"],[1,"vitamui-icon","vitamui-icon-key"],[1,"col-3","sub-actions"],[1,"btn","btn-circle","primary",3,"click"],[1,"vitamui-icon","vitamui-icon-home-add"],["matTooltipClass","vitamui-tooltip",3,"matTooltip"],[1,"vitamui-icon","vitamui-icon-safe","secondary","mr-1"],[1,"vitamui-icon","vitamui-icon-key","secondary"],[1,"vitamui-icon","vitamui-icon-safe","mr-1"]],template:function(e,t){1&e&&(T.Tb(0,"div",0),T.Tb(1,"div",1),T.Ob(2,"div",2),T.Tb(3,"div",3),T.Oc(4),T.jc(5,"translate"),T.Sb(),T.Tb(6,"div",2),T.Oc(7),T.jc(8,"translate"),T.Sb(),T.Tb(9,"div",3),T.Oc(10),T.jc(11,"translate"),T.Sb(),T.Ob(12,"div",4),T.Sb(),T.Tb(13,"div",5),T.Tb(14,"div",6),T.Mc(15,In,9,6,"div",7),T.Sb(),T.Tb(16,"div",6),T.Mc(17,yn,11,6,"div",7),T.Sb(),T.Tb(18,"div",8),T.Tb(19,"div",9),T.ec("click",(function(e){return t.openCreateOwnerDialog()})),T.Oc(20),T.jc(21,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Mc(22,kn,4,7,"ng-template",null,10,T.Nc),T.Mc(24,Bn,2,4,"ng-template",null,11,T.Nc)),2&e&&(T.Bb(4),T.Pc(T.kc(5,6,"CUSTOMER.OWNER.CODE")),T.Bb(3),T.Pc(T.kc(8,8,"CUSTOMER.OWNER.NAME")),T.Bb(3),T.Pc(T.kc(11,10,"CUSTOMER.OWNER.SAFE_CODE")),T.Bb(5),T.oc("ngForOf",t.myTenants),T.Bb(2),T.oc("ngForOf",t.ownersWithoutTenant),T.Bb(3),T.Qc(" ",T.kc(21,12,"CUSTOMER.HOME.RESULTS_TABLE.ADD_OWNER")," "))},directives:[o.o,o.p,c.Zb,v.a],pipes:[we.d],styles:["[_nghost-%COMP%]{display:block;width:100%}"]}),e})();function wn(e,t){if(1&e){const e=T.Ub();T.Rb(0),T.Tb(1,"div",14,15),T.ec("click",(function(){T.Dc(e);const i=t.$implicit;return T.ic().customerClick.emit(i)})),T.Tb(3,"div",16),T.Tb(4,"div",17),T.ec("click",(function(t){T.Dc(e);const i=T.zc(2);return t.stopPropagation(),i.toggle()})),T.Ob(5,"i",4),T.Tb(6,"i",18),T.Oc(7,"keyboard_arrow_up"),T.Sb(),T.Sb(),T.Tb(8,"div",19),T.Oc(9),T.Sb(),T.Tb(10,"div",19),T.Oc(11),T.Sb(),T.Tb(12,"div",20),T.Oc(13),T.Sb(),T.Tb(14,"div",19),T.Oc(15),T.jc(16,"translate"),T.Sb(),T.Tb(17,"div",21),T.Tb(18,"span",22),T.Oc(19),T.jc(20,"translate"),T.Sb(),T.Tb(21,"div"),T.Tb(22,"button",23),T.ec("click",(function(i){T.Dc(e);const o=t.$implicit,n=T.ic();return i.stopPropagation(),n.openCreateOwnerDialog(o,n.tenants)})),T.Ob(23,"i",24),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(24,"app-owner-list",25),T.ec("ownerClick",(function(t){return T.Dc(e),T.ic().ownerClick.emit(t)}))("tenantClick",(function(t){return T.Dc(e),T.ic().tenantClick.emit(t)})),T.Sb(),T.Qb()}if(2&e){const e=t.$implicit,i=T.zc(2);T.Bb(1),T.Fb("no-hover","expanded"===i.state),T.Bb(5),T.Jc("font-size",20,"px"),T.oc("@rotateAnimation",i.state),T.Bb(3),T.Pc(null==e?null:e.code),T.Bb(2),T.Pc(null==e?null:e.name),T.Bb(2),T.Pc(null==e?null:e.companyName),T.Bb(2),T.Pc(T.kc(16,12,"YES")),T.Bb(4),T.Pc(T.kc(20,14,"CUSTOMER.INFORMATIONS.OTP_"+(null==e?null:e.otp))),T.Bb(5),T.oc("@collapseAnimation",i.state)("customer",e)}}function xn(e,t){1&e&&T.Ob(0,"div")}function Pn(e,t){1&e&&T.Ob(0,"div")}function Dn(e,t){1&e&&T.Ob(0,"div")}function Un(e,t){1&e&&(T.Tb(0,"div",26),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"COMMON.NO_RESULT")))}function jn(e,t){if(1&e){const e=T.Ub();T.Tb(0,"div",27),T.ec("click",(function(){return T.Dc(e),T.ic().customerListService.loadMore()})),T.Tb(1,"span",28),T.Oc(2),T.jc(3,"translate"),T.Sb(),T.Sb()}2&e&&(T.Bb(2),T.Pc(T.kc(3,1,"COMMON.SHOW_MORE_RESULTS")))}function Fn(e,t){1&e&&(T.Tb(0,"div",29),T.Ob(1,"mat-spinner",30),T.Sb())}let Ln=(()=>{class e extends c.O{constructor(e,t,i,o,n){super(e),this.customerListService=e,this.customerService=t,this.tenantService=i,this.customerDataService=o,this.dialog=n,this.customerClick=new T.n,this.ownerClick=new T.n,this.tenantClick=new T.n,this.tenants=[],this.loaded=!1}ngOnInit(){this.searchCustomersOrderedByCode(),this.customerDataService.tenantsUpdated$.subscribe(e=>{this.tenants=e}),this.updatedData.subscribe(()=>{const e=this.dataSource.filter(e=>!this.tenants.find(t=>t.customerId===e.id)).map(e=>e.id);e&&e.length>0?this.tenantService.getTenantsByCustomerIds(e).subscribe(e=>{this.customerDataService.addTenants(e),this.loaded=!0,this.pending=!1}):(this.loaded=!0,this.pending=!1)}),this.updatedCustomerSub=this.customerService.updated.subscribe(e=>{const t=this.dataSource.findIndex(t=>e.id===t.id);t>-1&&(this.dataSource[t]=e)})}ngOnDestroy(){this.updatedCustomerSub.unsubscribe(),this.updatedData.unsubscribe()}searchCustomersOrderedByCode(){this.search(new c.Z(0,c.w,"code",c.x.ASCENDANT))}openCreateOwnerDialog(e){this.dialog.open(Cn,{disableClose:!0,data:{customer:e},panelClass:"vitamui-modal"}).afterClosed().pipe(Object(Te.a)(e=>!!e)).subscribe(t=>{t.owner&&e.owners.push(t.owner)})}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(An),T.Nb(fe.a),T.Nb(Oo),T.Nb(On),T.Nb(n.b))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-customer-list"]],outputs:{customerClick:"customerClick",ownerClick:"ownerClick",tenantClick:"tenantClick"},features:[T.yb],decls:32,vars:22,consts:[["vitamuiCommonInfiniteScroll","",3,"vitamuiScroll"],[1,"vitamui-table"],[1,"vitamui-table-head"],[1,"col-1"],[1,"vitamui-icon","vitamui-icon-bank"],[1,"col-2"],[1,"col-3"],[1,"vitamui-table-body"],[1,"vitamui-table-rows"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfThen"],["noResults",""],["loadMore",""],["loadingSpinner",""],[1,"vitamui-row",3,"vitamuiCommonCollapse","click"],["row","vitamuiCommonCollapse"],[1,"d-flex","align-items-center","clickable"],[1,"col-1","d-flex",3,"click"],[1,"material-icons","caret","ml-1"],["vitamuiCommonEllipsis","",1,"col-2"],["vitamuiCommonEllipsis","",1,"col-3"],[1,"col-2","actions"],["vitamuiCommonEllipsis",""],[1,"btn","btn-circle","primary",3,"click"],[1,"vitamui-icon","vitamui-icon-key-plus","btn-icon"],[3,"customer","ownerClick","tenantClick"],[1,"vitamui-min-content","vitamui-table-message"],[1,"vitamui-min-content","vitamui-table-message",3,"click"],[1,"clickable"],[1,"vitamui-min-content"],[1,"vitamui-spinner","medium"]],template:function(e,t){if(1&e&&(T.Tb(0,"div",0),T.ec("vitamuiScroll",(function(){return t.onScroll()})),T.Tb(1,"div",1),T.Tb(2,"div",2),T.Tb(3,"div",3),T.Ob(4,"i",4),T.Sb(),T.Tb(5,"div",5),T.Oc(6),T.jc(7,"translate"),T.Sb(),T.Tb(8,"div",5),T.Oc(9),T.jc(10,"translate"),T.Sb(),T.Tb(11,"div",6),T.Oc(12),T.jc(13,"translate"),T.Sb(),T.Tb(14,"div",5),T.Oc(15),T.jc(16,"translate"),T.Sb(),T.Tb(17,"div",5),T.Oc(18),T.jc(19,"translate"),T.Sb(),T.Sb(),T.Tb(20,"div",7),T.Tb(21,"div",8),T.Mc(22,wn,25,16,"ng-container",9),T.Sb(),T.Sb(),T.Sb(),T.Mc(23,xn,1,0,"div",10),T.Mc(24,Pn,1,0,"div",10),T.Mc(25,Dn,1,0,"div",10),T.Sb(),T.Mc(26,Un,3,3,"ng-template",null,11,T.Nc),T.Mc(28,jn,4,3,"ng-template",null,12,T.Nc),T.Mc(30,Fn,2,0,"ng-template",null,13,T.Nc)),2&e){const e=T.zc(27),i=T.zc(29),o=T.zc(31);T.Bb(6),T.Pc(T.kc(7,12,"CUSTOMER.HOME.RESULTS_TABLE.CODE")),T.Bb(3),T.Pc(T.kc(10,14,"CUSTOMER.HOME.RESULTS_TABLE.NAME")),T.Bb(3),T.Pc(T.kc(13,16,"CUSTOMER.HOME.RESULTS_TABLE.SOCIAL_REASON")),T.Bb(3),T.Pc(T.kc(16,18,"CUSTOMER.HOME.RESULTS_TABLE.SSO")),T.Bb(3),T.Pc(T.kc(19,20,"CUSTOMER.HOME.RESULTS_TABLE.VALIDATIONS")),T.Bb(4),T.oc("ngForOf",t.dataSource),T.Bb(1),T.oc("ngIf",!t.dataSource||t.pending)("ngIfThen",o),T.Bb(1),T.oc("ngIf",!t.pending&&0===(null==t.dataSource?null:t.dataSource.length))("ngIfThen",e),T.Bb(1),T.oc("ngIf",t.infiniteScrollDisabled&&t.customerListService.canLoadMore&&!t.pending)("ngIfThen",i)}},directives:[c.N,o.o,o.p,c.q,c.Zb,Nn,g.b],pipes:[we.d],styles:[""],data:{animation:[c.Hb,c.Ob]}}),e})();var Vn=i("zmEM");function qn(e,t){if(1&e&&T.Ob(0,"vitamui-common-editable-option",24),2&e){const e=t.$implicit;T.oc("value",e.code)("content",e.name)}}function _n(e,t){1&e&&T.Ob(0,"mat-divider")}function Gn(e,t){if(1&e&&(T.Tb(0,"form",0),T.Tb(1,"div",1),T.Tb(2,"div",8),T.Tb(3,"div",25),T.Tb(4,"label"),T.Oc(5),T.jc(6,"translate"),T.Sb(),T.Tb(7,"div"),T.Oc(8),T.Sb(),T.Sb(),T.Sb(),T.Tb(9,"div",8),T.Tb(10,"vitamui-common-editable-input",10),T.jc(11,"translate"),T.Tb(12,"vitamui-common-field-error",4),T.Oc(13),T.jc(14,"translate"),T.Sb(),T.Tb(15,"vitamui-common-field-error",26),T.Oc(16),T.jc(17,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(18,"div",1),T.Tb(19,"div",27),T.Ob(20,"vitamui-common-editable-input",28),T.jc(21,"translate"),T.Sb(),T.Sb(),T.Tb(22,"div",1),T.Tb(23,"div",27),T.Ob(24,"vitamui-common-editable-input",29),T.jc(25,"translate"),T.Sb(),T.Sb(),T.Tb(26,"div",1),T.Tb(27,"div",27),T.Ob(28,"vitamui-common-editable-input",30),T.jc(29,"translate"),T.Sb(),T.Tb(30,"div",27),T.Ob(31,"vitamui-common-editable-input",31),T.jc(32,"translate"),T.Sb(),T.Sb(),T.Sb()),2&e){const e=T.ic();var i=null,o=null,n=null,r=null,a=null,c=null,s=null,l=null,u=null,d=null;T.oc("formGroup",e.tenantForm),T.Bb(5),T.Pc(T.kc(6,20,"CUSTOMER.OWNER.SAFE_CODE")),T.Bb(3),T.Pc(null==e.tenant?null:e.tenant.identifier),T.Bb(2),T.oc("label",T.kc(11,22,"CUSTOMER.OWNER.SAFE_NAME"))("validator",null==e.tenantForm||null==(i=e.tenantForm.get("name"))?null:i.validator)("asyncValidator",null==e.tenantForm||null==(o=e.tenantForm.get("name"))?null:o.asyncValidator),T.Bb(3),T.Pc(T.kc(14,24,"COMMON.ERROR.REQUIRED")),T.Bb(3),T.Qc(" ",T.kc(17,26,"CUSTOMER.OWNER.MODAL.NAME_ALREADY_EXIST"),""),T.Bb(4),T.oc("label",T.kc(21,28,"CUSTOMER.OWNER.ACCESS_CONTRACT"))("validator",null==e.tenantForm||null==(n=e.tenantForm.get("accessContractHoldingIdentifier"))?null:n.validator)("asyncValidator",null==e.tenantForm||null==(r=e.tenantForm.get("accessContractHoldingIdentifier"))?null:r.asyncValidator),T.Bb(4),T.oc("label",T.kc(25,30,"CUSTOMER.OWNER.INGEST_CONTRACT"))("validator",null==e.tenantForm||null==(a=e.tenantForm.get("ingestContractHoldingIdentifier"))?null:a.validator)("asyncValidator",null==e.tenantForm||null==(c=e.tenantForm.get("ingestContractHoldingIdentifier"))?null:c.asyncValidator),T.Bb(4),T.oc("label",T.kc(29,32,"CUSTOMER.OWNER.LOGBOOK_ACCESS_CONTRACT"))("validator",null==e.tenantForm||null==(s=e.tenantForm.get("accessContractLogbookIdentifier"))?null:s.validator)("asyncValidator",null==e.tenantForm||null==(l=e.tenantForm.get("accessContractLogbookIdentifier"))?null:l.asyncValidator),T.Bb(3),T.oc("label",T.kc(32,34,"CUSTOMER.OWNER.SLIPS_INGEST_CONTRACT"))("validator",null==e.tenantForm||null==(u=e.tenantForm.get("itemIngestContractIdentifier"))?null:u.validator)("asyncValidator",null==e.tenantForm||null==(d=e.tenantForm.get("itemIngestContractIdentifier"))?null:d.asyncValidator)}}const Hn=function(e){return{max:e}};let Kn=(()=>{class e{constructor(e,t,i,o,n,r,a){this.formBuilder=e,this.ownerFormValidators=t,this.ownerService=i,this.tenantService=o,this.tenantFormValidators=n,this.countryService=r,this.startupService=a,this.ownerCodeMaxLength=15,this.maxStreetLength=this.startupService.getConfigNumberValue("MAX_STREET_LENGTH"),this.ownerForm=this.formBuilder.group({id:[null,l.x.required],identifier:[{value:null,disabled:!0},l.x.required],customerId:[null,l.x.required],code:[null,[l.x.required,l.x.pattern(Eo),l.x.maxLength(this.ownerCodeMaxLength)],this.ownerFormValidators.uniqueCode()],name:[null,l.x.required],companyName:[null,l.x.required],address:this.formBuilder.group({street:[null,l.x.maxLength(this.maxStreetLength)],zipCode:null,city:null,country:"FR"}),internalCode:[null]}),this.tenantForm=this.formBuilder.group({id:[null,l.x.required],identifier:[null,l.x.required],customerId:[null,l.x.required],ownerId:[null,l.x.required],name:[null,[l.x.required],this.tenantFormValidators.uniqueName()],enabled:[!0,l.x.required],ingestContractHoldingIdentifier:[null],itemIngestContractIdentifier:[null],accessContractHoldingIdentifier:[null],accessContractLogbookIdentifier:[null]})}ngOnInit(){Object(ve.a)(this.ownerForm.valueChanges,this.ownerForm.statusChanges).pipe(Object(Se.a)(200),Object(Ce.a)(()=>Object(c.Ib)(this.ownerForm.value,this.previousOwner)),Object(Te.a)(e=>!Object(Ee.c)(e)),Object(Ce.a)(e=>Object(Ee.a)({id:this.owner.id},e)),Object(Me.a)(e=>this.ownerService.patch(e).pipe(Object(Ae.a)(()=>Object(Oe.a)(null))))).subscribe(e=>this.resetOwnerForm(e)),Object(ve.a)(this.tenantForm.valueChanges,this.tenantForm.statusChanges).pipe(Object(Se.a)(200),Object(Ce.a)(()=>Object(c.Ib)(this.tenantForm.value,this.previousTenant)),Object(Te.a)(e=>!Object(Ee.c)(e)),Object(Ce.a)(e=>Object(Ee.a)({id:this.tenant.id},e)),Object(Me.a)(e=>this.tenantService.patch(e,this.ownerForm.value.name).pipe(Object(Ae.a)(()=>Object(Oe.a)(null))))).subscribe(e=>{this.resetTenantForm(e)}),this.countryService.getAvailableCountries().subscribe(e=>{this.countries=e})}ngOnChanges(){this.readOnly?this.ownerForm.disable({emitEvent:!1}):this.ownerForm.disabled&&this.ownerForm.enable({emitEvent:!1}),this.readOnly?this.tenantForm.disable({emitEvent:!1}):this.tenantForm.disabled&&this.tenantForm.enable({emitEvent:!1}),this.tenant&&(this.tenantForm.reset(this.tenant,{emitEvent:!1}),this.tenantForm.get("name").setAsyncValidators(this.tenantFormValidators.uniqueName(this.tenant.name)),this.previousTenant=this.tenantForm.value),this.owner&&this.resetOwnerForm(this.owner)}resetOwnerForm(e){this.ownerForm.reset(e,{emitEvent:!1}),this.ownerForm.get("code").setAsyncValidators(this.ownerFormValidators.uniqueCode(e.code)),this.ownerForm.get("identifier").disable({emitEvent:!1}),this.previousOwner=this.ownerForm.value}resetTenantForm(e){this.tenant.name=e.name,this.tenantForm.reset(e,{emitEvent:!1}),this.tenantForm.get("name").setAsyncValidators(this.tenantFormValidators.uniqueName(e.name)),this.previousTenant=this.tenantForm.value}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(l.d),T.Nb(Ro),T.Nb(Ao),T.Nb(Oo),T.Nb(So),T.Nb(c.u),T.Nb(c.lb))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-information-tab"]],inputs:{owner:"owner",tenant:"tenant",readOnly:"readOnly"},features:[T.zb],decls:56,vars:61,consts:[[3,"formGroup"],[1,"row"],[1,"col-6","form-control"],["formControlName","code","maxlength","20",3,"label","validator","asyncValidator"],["errorKey","required"],["errorKey","pattern"],["errorKey","maxlength"],["errorKey","uniqueCode"],[1,"col-6"],["formControlName","identifier","maxlength","12",3,"label","validator","asyncValidator"],["formControlName","name","maxlength","100",3,"label","validator","asyncValidator"],["formControlName","companyName","maxlength","250",3,"label","validator","asyncValidator"],["formGroupName","address"],[1,"col-12","form-control"],["formControlName","street",3,"maxlength","label"],[1,"col-5","form-control"],["formControlName","zipCode","maxlength","10",3,"label"],[1,"col-7","form-control"],["formControlName","city","maxlength","100",3,"label"],["formControlName","country",3,"label"],[3,"value","content",4,"ngFor","ngForOf"],["formControlName","internalCode","maxlength","20",3,"label"],[4,"ngIf"],[3,"formGroup",4,"ngIf"],[3,"value","content"],[1,"read-only-field","disabled-input"],["errorKey","uniqueName"],[1,"col-12"],["formControlName","accessContractHoldingIdentifier",3,"label","validator","asyncValidator"],["formControlName","ingestContractHoldingIdentifier",3,"label","validator","asyncValidator"],["formControlName","accessContractLogbookIdentifier",3,"label","validator","asyncValidator"],["formControlName","itemIngestContractIdentifier",3,"label","validator","asyncValidator"]],template:function(e,t){if(1&e&&(T.Tb(0,"form",0),T.Tb(1,"div",1),T.Tb(2,"div",2),T.Tb(3,"vitamui-common-editable-input",3),T.jc(4,"translate"),T.Tb(5,"vitamui-common-field-error",4),T.Oc(6),T.jc(7,"translate"),T.Sb(),T.Tb(8,"vitamui-common-field-error",5),T.Oc(9),T.jc(10,"translate"),T.Sb(),T.Tb(11,"vitamui-common-field-error",6),T.Oc(12),T.jc(13,"translate"),T.Sb(),T.Tb(14,"vitamui-common-field-error",7),T.Oc(15),T.jc(16,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(17,"div",8),T.Ob(18,"vitamui-common-editable-input",9),T.jc(19,"translate"),T.Sb(),T.Sb(),T.Tb(20,"div",1),T.Tb(21,"div",2),T.Tb(22,"vitamui-common-editable-input",10),T.jc(23,"translate"),T.Tb(24,"vitamui-common-field-error",4),T.Oc(25),T.jc(26,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Tb(27,"div",2),T.Tb(28,"vitamui-common-editable-input",11),T.jc(29,"translate"),T.Tb(30,"vitamui-common-field-error",4),T.Oc(31),T.jc(32,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Rb(33,12),T.Tb(34,"div",1),T.Tb(35,"div",13),T.Ob(36,"vitamui-common-editable-input",14),T.jc(37,"translate"),T.Sb(),T.Sb(),T.Tb(38,"div",1),T.Tb(39,"div",15),T.Ob(40,"vitamui-common-editable-input",16),T.jc(41,"translate"),T.Sb(),T.Tb(42,"div",17),T.Ob(43,"vitamui-common-editable-input",18),T.jc(44,"translate"),T.Sb(),T.Sb(),T.Tb(45,"div",1),T.Tb(46,"div",2),T.Tb(47,"vitamui-common-editable-select",19),T.jc(48,"translate"),T.Mc(49,qn,1,2,"vitamui-common-editable-option",20),T.Sb(),T.Sb(),T.Sb(),T.Qb(),T.Tb(50,"div",1),T.Tb(51,"div",13),T.Ob(52,"vitamui-common-editable-input",21),T.jc(53,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Mc(54,_n,1,0,"mat-divider",22),T.Mc(55,Gn,33,36,"form",23)),2&e){var i=null,o=null,n=null,r=null,a=null,c=null,s=null,l=null;T.oc("formGroup",t.ownerForm),T.Bb(3),T.oc("label",T.kc(4,28,"CUSTOMER.OWNER.CODE"))("validator",null==t.ownerForm||null==(i=t.ownerForm.get("code"))?null:i.validator)("asyncValidator",null==t.ownerForm||null==(o=t.ownerForm.get("code"))?null:o.asyncValidator),T.Bb(3),T.Pc(T.kc(7,30,"COMMON.ERROR.REQUIRED")),T.Bb(3),T.Pc(T.kc(10,32,"COMMON.ERROR.WRONG_FORMAT")),T.Bb(3),T.Pc(T.lc(13,34,"COMMON.ERROR.STRING_MAX_LENGTH",T.tc(59,Hn,t.ownerCodeMaxLength))),T.Bb(3),T.Pc(T.kc(16,37,"CUSTOMER.OWNER.MODAL.CODE_ALREADY_EXIST")),T.Bb(3),T.oc("label",T.kc(19,39,"COMMON.ID"))("validator",null==t.ownerForm||null==(n=t.ownerForm.get("identifier"))?null:n.validator)("asyncValidator",null==t.ownerForm||null==(r=t.ownerForm.get("identifier"))?null:r.asyncValidator),T.Bb(4),T.oc("label",T.kc(23,41,"CUSTOMER.OWNER.NAME"))("validator",null==t.ownerForm||null==(a=t.ownerForm.get("name"))?null:a.validator)("asyncValidator",null==t.ownerForm||null==(c=t.ownerForm.get("name"))?null:c.asyncValidator),T.Bb(3),T.Pc(T.kc(26,43,"COMMON.ERROR.REQUIRED")),T.Bb(3),T.oc("label",T.kc(29,45,"CUSTOMER.OWNER.SOCIAL_REASON"))("validator",null==t.ownerForm||null==(s=t.ownerForm.get("companyName"))?null:s.validator)("asyncValidator",null==t.ownerForm||null==(l=t.ownerForm.get("companyName"))?null:l.asyncValidator),T.Bb(3),T.Pc(T.kc(32,47,"COMMON.ERROR.REQUIRED")),T.Bb(5),T.pc("maxlength",t.maxStreetLength),T.oc("label",T.kc(37,49,"COMMON.ADRESS.STREET")),T.Bb(4),T.oc("label",T.kc(41,51,"COMMON.ADRESS.ZIPCODE")),T.Bb(3),T.oc("label",T.kc(44,53,"COMMON.ADRESS.CITY")),T.Bb(4),T.oc("label",T.kc(48,55,"COMMON.ADRESS.COUNTRY")),T.Bb(2),T.oc("ngForOf",t.countries),T.Bb(3),T.oc("label",T.kc(53,57,"CUSTOMER.OWNER.INTERNAL_CODE")),T.Bb(2),T.oc("ngIf",t.tenant),T.Bb(1),T.oc("ngIf",t.tenant)}},directives:[l.y,l.r,l.i,c.F,l.q,l.g,l.l,c.zb,l.j,c.I,o.o,o.p,c.H,Vn.a],pipes:[we.d],styles:[".mat-divider[_ngcontent-%COMP%]{margin-bottom:20px}"]}),e})();function Wn(e,t){1&e&&(T.Tb(0,"div"),T.Ob(1,"mat-spinner",2),T.Sb())}function Yn(e,t){1&e&&(T.Tb(0,"div",4),T.Oc(1),T.jc(2,"translate"),T.Sb()),2&e&&(T.Bb(1),T.Pc(T.kc(2,1,"COMMON.HISTORY.NO_HISTORY")))}function zn(e,t){if(1&e&&(T.Tb(0,"vitamui-common-collapse",5),T.jc(1,"translate"),T.Ob(2,"vitamui-common-history-events",6),T.Sb()),2&e){const e=T.ic(2);T.oc("collapseTitle",T.kc(1,2,"COMMON.HISTORY.OPERATIONS")),T.Bb(2),T.oc("events",e.events)}}function Qn(e,t){if(1&e&&(T.Mc(0,Yn,3,3,"div",3),T.Mc(1,zn,3,4,"ng-template",null,1,T.Nc)),2&e){const e=T.zc(2),t=T.ic();T.oc("ngIf",!(null!=t.events&&t.events.length))("ngIfElse",e)}}let Xn=(()=>{class e{constructor(e,t){this.authService=e,this.logbookService=t,this.events=[],this.loading=!1}ngOnChanges(e){(e.hasOwnProperty("id")||e.hasOwnProperty("externalParamId"))&&this.id&&this.externalParamId&&this.initEvent()}initEvent(){this.loading=!0,this.events=[];const e=Number(this.authService.user.proofTenantIdentifier);this.logbookService.listHistoryForOwner(this.id,this.identifier,this.externalParamId,e).subscribe(e=>{this.loading=!1,this.events=e.filter(e=>!this.filter||this.filter(e)).slice(0,100)},()=>this.loading=!1)}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(c.k),T.Nb(c.T))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-owner-operation-history-tab"]],inputs:{id:"id",identifier:"identifier",externalParamId:"externalParamId",filter:"filter"},features:[T.zb],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"vitamui-spinner","medium"],["class","no-result",4,"ngIf","ngIfElse"],[1,"no-result"],[3,"collapseTitle"],[3,"events"]],template:function(e,t){if(1&e&&(T.Mc(0,Wn,2,0,"div",0),T.Mc(1,Qn,3,2,"ng-template",null,1,T.Nc)),2&e){const e=T.zc(2);T.oc("ngIf",t.loading)("ngIfElse",e)}},directives:[o.p,g.b,c.Vb,c.Wb],pipes:[we.d],styles:[""]}),e})(),Jn=(()=>{class e{constructor(e){this.startupService=e,this.previewClose=new T.n}openPopup(){const e=this.tenant?"/customer/tenant/"+this.tenant.id:"/customer/owner/"+this.owner.id;window.open(this.startupService.getConfigStringValue("UI_URL")+e,"detailPopup","width=584, height=713, resizable=no, location=no"),this.emitClose()}emitClose(){this.previewClose.emit()}filterEvents(e){return e.outDetail&&(e.outDetail.includes("EXT_VITAMUI_UPDATE_OWNER")||e.outDetail.includes("EXT_VITAMUI_CREATE_OWNER")||e.outDetail.includes("EXT_VITAMUI_CREATE_TENANT")||e.outDetail.includes("EXT_VITAMUI_UPDATE_TENANT"))}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(c.lb))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-owner-preview"]],inputs:{owner:"owner",tenant:"tenant",isPopup:"isPopup"},outputs:{previewClose:"previewClose"},decls:9,vars:16,consts:[[3,"title","subtitle","icon","onclose"],[1,"vitamui-sidepanel-body"],[1,"preview-tab-group"],[3,"label"],[3,"owner","tenant","readOnly"],[3,"id","identifier","externalParamId","filter"]],template:function(e,t){1&e&&(T.Tb(0,"vitamui-common-sidenav-header",0),T.ec("onclose",(function(){return t.emitClose()})),T.Sb(),T.Tb(1,"div",1),T.Tb(2,"mat-tab-group",2),T.Tb(3,"mat-tab",3),T.jc(4,"translate"),T.Ob(5,"app-information-tab",4),T.Sb(),T.Tb(6,"mat-tab",3),T.jc(7,"translate"),T.Ob(8,"app-owner-operation-history-tab",5),T.Sb(),T.Sb(),T.Sb()),2&e&&(T.oc("title",null==t.owner?null:t.owner.name)("subtitle","("+(null==t.owner?null:t.owner.code)+")")("icon",t.tenant?"vitamui-icon-safe":"vitamui-icon-key"),T.Bb(3),T.oc("label",T.kc(4,12,"CUSTOMER.TAB.OWNER")),T.Bb(2),T.oc("owner",t.owner)("tenant",t.tenant)("readOnly",t.isPopup||(null==t.tenant?null:t.tenant.readonly)||(null==t.owner?null:t.owner.readonly)),T.Bb(1),T.oc("label",T.kc(7,14,"CUSTOMER.TAB.HISTORY")),T.Bb(2),T.oc("id",null==t.owner?null:t.owner.id)("identifier",null==t.owner?null:t.owner.identifier)("externalParamId",null==t.tenant?null:t.tenant.id)("filter",t.filterEvents))},directives:[c.mc,f.b,f.a,Kn,Xn],pipes:[we.d],styles:[""]}),e})();function Zn(e,t){if(1&e){const e=T.Ub();T.Tb(0,"app-customer-preview",11),T.ec("previewClose",(function(){return T.Dc(e),T.ic().closePanel()})),T.Sb()}if(2&e){const e=T.ic();T.oc("customer",e.openedItem)("gdprReadOnlyStatus",e.gdprReadOnlySettingStatus)}}function $n(e,t){if(1&e){const e=T.Ub();T.Tb(0,"app-owner-preview",12),T.ec("previewClose",(function(){return T.Dc(e),T.ic().closePanel()})),T.Sb()}if(2&e){const e=T.ic();T.oc("owner",e.openedItem)}}function er(e,t){if(1&e){const e=T.Ub();T.Tb(0,"app-owner-preview",13),T.ec("previewClose",(function(){return T.Dc(e),T.ic().closePanel()})),T.Sb()}if(2&e){const e=T.ic();T.oc("owner",e.owner)("tenant",e.openedItem)}}let tr=(()=>{class e extends c.kb{constructor(e,t,i,o){super(t,i),this.dialog=e,this.route=t,this.globalEventService=i,this.customerService=o,this.gdprReadOnlySettingStatus=!0}ngOnInit(){this.customerService.getGdprReadOnlySettingStatus().subscribe(e=>{this.gdprReadOnlySettingStatus=e})}openCreateCustomerDialog(){this.dialog.open(fn,{data:{gdprReadOnlySettingStatus:this.gdprReadOnlySettingStatus},panelClass:"vitamui-modal",disableClose:!0}).afterClosed().subscribe(e=>{e&&this.refreshList()})}openCustomerPanel(e){this.previewType="CUSTOMER",this.openPanel(e)}openOwnerPanel(e){this.previewType="OWNER",this.openPanel(e)}openTenantPanel(e){this.previewType="TENANT",this.owner=e.owner,this.openPanel(e.tenant)}refreshList(){this.customerListComponent&&this.customerListComponent.searchCustomersOrderedByCode()}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(n.b),T.Nb(O.a),T.Nb(c.M),T.Nb(fe.a))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-customer"]],viewQuery:function(e,t){var i;1&e&&T.Ic(Ln,!0),2&e&&T.yc(i=T.fc())&&(t.customerListComponent=i.first)},features:[T.yb],decls:19,vars:16,consts:[[3,"autosize","hasBackdrop"],["mode","side","position","end",3,"fixedInViewport"],["panel",""],[3,"customer","gdprReadOnlyStatus","previewClose",4,"ngIf"],[3,"owner","previewClose",4,"ngIf"],[3,"owner","tenant","previewClose",4,"ngIf"],[1,"vitamui-heading"],[3,"searchbarPlaceholder","disableSearchBar"],[1,"btn","primary","ml-5",3,"click"],[1,"vitamui-content"],[3,"customerClick","ownerClick","tenantClick"],[3,"customer","gdprReadOnlyStatus","previewClose"],[3,"owner","previewClose"],[3,"owner","tenant","previewClose"]],template:function(e,t){1&e&&(T.Tb(0,"mat-sidenav-container",0),T.Tb(1,"mat-sidenav",1,2),T.Mc(3,Zn,1,2,"app-customer-preview",3),T.Mc(4,$n,1,1,"app-owner-preview",4),T.Mc(5,er,1,2,"app-owner-preview",5),T.Sb(),T.Tb(6,"mat-sidenav-content"),T.Tb(7,"div",6),T.Tb(8,"vitamui-common-title-breadcrumb"),T.Oc(9),T.jc(10,"translate"),T.Sb(),T.Tb(11,"vitamui-common-banner",7),T.jc(12,"translate"),T.Tb(13,"button",8),T.ec("click",(function(){return t.openCreateCustomerDialog()})),T.Tb(14,"span"),T.Oc(15),T.jc(16,"translate"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(17,"div",9),T.Tb(18,"app-customer-list",10),T.ec("customerClick",(function(e){return t.openCustomerPanel(e)}))("ownerClick",(function(e){return t.openOwnerPanel(e)}))("tenantClick",(function(e){return t.openTenantPanel(e)})),T.Sb(),T.Sb(),T.Sb(),T.Sb()),2&e&&(T.oc("autosize",!0)("hasBackdrop",!1),T.Bb(1),T.oc("fixedInViewport",!0),T.Bb(2),T.oc("ngIf","CUSTOMER"===t.previewType),T.Bb(1),T.oc("ngIf","OWNER"===t.previewType),T.Bb(1),T.oc("ngIf","TENANT"===t.previewType),T.Bb(4),T.Qc(" ",T.kc(10,10,"CUSTOMER.HOME.TITLE")," "),T.Bb(2),T.oc("searchbarPlaceholder",T.kc(12,12,"CUSTOMER.INFORMATIONS.CODE"))("disableSearchBar",!0),T.Bb(4),T.Pc(T.kc(16,14,"CUSTOMER.HOME.CREATE_TITLE")))},directives:[a.b,a.a,o.p,a.c,c.cc,c.jc,Ln,ho,Jn],pipes:[we.d],styles:[""]}),e})(),ir=(()=>{class e{constructor(e,t){this.route=e,this.ownerService=t,this.route.snapshot.data.tenant?(this.tenant=this.route.snapshot.data.tenant,this.owner=this.route.snapshot.data.owner,this.owner||this.ownerService.get(this.tenant.ownerId).subscribe(e=>this.owner=e)):this.owner=this.route.snapshot.data.owner}ngOnInit(){}closePopup(){window.close()}}return e.\u0275fac=function(t){return new(t||e)(T.Nb(O.a),T.Nb(Ao))},e.\u0275cmp=T.Hb({type:e,selectors:[["app-owner-popup"]],decls:1,vars:3,consts:[[3,"owner","tenant","isPopup","previewClose"]],template:function(e,t){1&e&&(T.Tb(0,"app-owner-preview",0),T.ec("previewClose",(function(){return t.closePopup()})),T.Sb()),2&e&&T.oc("owner",t.owner)("tenant",t.tenant)("isPopup",!0)},directives:[Jn],encapsulation:2}),e})();const or=[{path:"",component:tr,pathMatch:"full"},{path:":id",component:go,resolve:{customer:fo},data:{isPopup:!0,appId:"CUSTOMERS_APP"}},{path:"owner/:id",component:ir,resolve:{owner:(()=>{class e{constructor(e,t){this.ownerService=e,this.router=t}resolve(e){const t=e.paramMap.get("id");return this.ownerService.get(t).pipe(Object(Ie.a)(1),Object(Ce.a)(e=>e||(this.router.navigate(["/"]),null)))}}return e.\u0275fac=function(t){return new(t||e)(T.bc(Ao),T.bc(O.d))},e.\u0275prov=T.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},data:{isPopup:!0,appId:"CUSTOMERS_APP"}},{path:"tenant/:id",component:ir,resolve:{tenant:(()=>{class e{constructor(e,t){this.tenantService=e,this.router=t}resolve(e){const t=e.paramMap.get("id");return this.tenantService.get(t).pipe(Object(Ie.a)(1),Object(Ce.a)(e=>e||(this.router.navigate(["/"]),null)))}}return e.\u0275fac=function(t){return new(t||e)(T.bc(Oo),T.bc(O.d))},e.\u0275prov=T.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},data:{isPopup:!0,appId:"CUSTOMERS_APP"}}];let nr=(()=>{class e{}return e.\u0275mod=T.Lb({type:e}),e.\u0275inj=T.Kb({factory:function(t){return new(t||e)},imports:[[o.c,O.g.forChild(or)],O.g]}),e})(),rr=(()=>{class e{}return e.\u0275mod=T.Lb({type:e}),e.\u0275inj=T.Kb({factory:function(t){return new(t||e)},imports:[[o.c,h.b,l.v,de,c.xb]]}),e})(),ar=(()=>{class e{}return e.\u0275mod=T.Lb({type:e}),e.\u0275inj=T.Kb({factory:function(t){return new(t||e)},imports:[[o.c,s.a,r.b,f.c,l.v,Vn.b,c.xb,g.a]]}),e})(),cr=(()=>{class e{}return e.\u0275mod=T.Lb({type:e}),e.\u0275inj=T.Kb({factory:function(t){return new(t||e)},imports:[[o.c,h.b,l.v,c.xb]]}),e})(),sr=(()=>{class e{}return e.\u0275mod=T.Lb({type:e}),e.\u0275inj=T.Kb({factory:function(t){return new(t||e)},imports:[[o.c,s.a,c.xb,pe,ge,me,n.f,r.b,ar,rr,cr,a.d,nr]]}),e})()}}]);