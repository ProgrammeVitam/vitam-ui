!function(){var e,t;function i(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function o(){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=a(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(arguments.length<3?e:i):r.value}}).apply(this,arguments)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}function c(e,t,i){return t=l(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,i||[],l(e).constructor):t.apply(e,i))}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function m(e,t,i){return t&&b(e.prototype,t),i&&b(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"7UCR":function(n,a,s){"use strict";s.r(a),s.d(a,"UserModule",(function(){return Wt}));var b,d,p,v,S,g,h,O=s("2kYt"),T=s("nIj0"),E=s("OZ4H"),I=s("Jb3d"),y=s("lQ7A"),N=s("OWX3"),C=s("PCNd"),R=s("l7x+"),A=s("jdnZ"),B=s("29Wa"),M=s("Cd2c"),k=s("R7+U"),U=s("W1gw"),P=s("EM62"),D=((b=m((function e(){f(this,e)}))).\u0275mod=P.Lb({type:b}),b.\u0275inj=P.Kb({factory:function(e){return new(e||b)},imports:[[O.c,C.a,A.c,B.d,M.c,k.b,U.c,T.v,R.a,N.xb]]}),b),_=s("csyo"),j=s("sEIs"),L=((d=m((function e(){f(this,e)}))).\u0275mod=P.Lb({type:d}),d.\u0275inj=P.Kb({factory:function(e){return new(e||d)},imports:[[O.c,j.g,_.a,N.xb,C.a,k.b]]}),d),x=s("KZIX"),w=s("Y2X+"),F=((p=m((function e(){f(this,e)}))).\u0275mod=P.Lb({type:p}),p.\u0275inj=P.Kb({factory:function(e){return new(e||p)},imports:[[O.c,C.a,j.g,A.c,I.b,x.c,w.b,T.v,E.f,N.xb]]}),p),G=s("xVbo"),V=s("6Oco"),H=s("ZTXN"),Q=s("8j5Y"),z=((v=function(e){function t(e,i){var n;return f(this,t),(n=c(this,t,[{getAllPaginated:function(){return V.a}},""])).userInfoServiceApi=e,n.snackBarService=i,n.userInfoUpdated=new H.a,n}return u(t,e),m(t,[{key:"create",value:function(e){return this.userInfoServiceApi.create(e)}},{key:"get",value:function(e){return this.userInfoServiceApi.getOne(e)}},{key:"getMyUserInfo",value:function(){return this.userInfoServiceApi.getMyUserInfo()}},{key:"patch",value:function(e,t){var i=this;return this.userInfoServiceApi.patch(e).pipe(Object(Q.a)((function(e){return i.userInfoUpdated.next(e)})),Object(Q.a)((function(){i.snackBarService.open({message:"SHARED.SNACKBAR.PROFILE_UPDATE",translateParams:{param1:t.firstname,param2:t.lastname},icon:"vitamui-icon-key"})}),(function(e){i.snackBarService.open({message:e.error.message,translate:!1})})))}}]),t}(N.jb)).\u0275fac=function(e){return new(e||v)(P.bc(N.p),P.bc(N.Ab))},v.\u0275prov=P.Jb({token:v,factory:v.\u0275fac,providedIn:"root"}),v),q=s("vobO"),K=((S=function(e){function t(e,i){return f(this,t),c(this,t,[e,i+"/users"])}return u(t,e),m(t,[{key:"getAllByParams",value:function(e,i){return o(l(t.prototype),"getAllByParams",this).call(this,e,i)}},{key:"getAllPaginated",value:function(e,i,n){return o(l(t.prototype),"getAllPaginated",this).call(this,e,i,n)}},{key:"getOne",value:function(e,i){return o(l(t.prototype),"getOne",this).call(this,e,i)}},{key:"checkExistsByParam",value:function(e,i){return o(l(t.prototype),"checkExistsByParam",this).call(this,e,i)}},{key:"create",value:function(e,i){return o(l(t.prototype),"create",this).call(this,e,i)}},{key:"patch",value:function(e,i){return o(l(t.prototype),"patch",this).call(this,e,i)}},{key:"getLevels",value:function(e,t){var i=new q.g;return e&&(i=i.set("criteria",JSON.stringify(e))),this.http.get(this.apiUrl+"/levels",{params:i,headers:t})}},{key:"export",value:function(){return this.http.get(this.apiUrl+"/export",{observe:"response",responseType:"blob"})}}]),t}(N.o)).\u0275fac=function(e){return new(e||S)(P.bc(q.c),P.bc(N.n))},S.\u0275prov=P.Jb({token:S,factory:S.\u0275fac,providedIn:"root"}),S),Y=s("bWz1"),X=s("YtkY"),$=s("4Xmu"),W=((g=function(e){function t(e,i,n){var r;return f(this,t),(r=c(this,t,[e,""])).userApi=e,r.snackBarService=i,r.rngProfileService=n,r.userUpdated=new H.a,r}return u(t,e),m(t,[{key:"create",value:function(e){var t=this;return e.email=e.email,this.userApi.create(e).pipe(Object(Q.a)((function(e){t.snackBarService.open({message:"SHARED.SNACKBAR.USER_CREATE",icon:"vitamui-icon-key",translateParams:{param1:e.firstname,param2:e.lastname}})})))}},{key:"get",value:function(e){return this.userApi.getOne(e)}},{key:"exists",value:function(e){var t=[];t.push({key:"email",value:e,operator:N.W.equalsIgnoreCase});var i=[{key:"criteria",value:JSON.stringify({criteria:t})}];return this.userApi.checkExistsByParam(i)}},{key:"patch",value:function(e){var t=this;return this.userApi.patch(e).pipe(Object(Q.a)((function(e){return t.userUpdated.next(e)})),Object(Q.a)((function(e){t.snackBarService.open({message:"SHARED.SNACKBAR.USER_UPDATE",icon:"vitamui-icon-key",translateParams:{param1:e.firstname,param2:e.lastname}})})))}},{key:"deleteUser",value:function(e){var t=this;return this.userApi.patch(e).pipe(Object(Q.a)((function(e){return t.userUpdated.next(e)})),Object(Q.a)((function(e){t.snackBarService.open({message:"SHARED.SNACKBAR.USER_DELETE",icon:"vitamui-icon-key",translateParams:{param1:e.firstname,param2:e.lastname}})})))}},{key:"getUserProfileInfo",value:function(e){var t=this,i=null;return e.profileGroup.profiles.forEach((function(e){"USERS_APP"===e.applicationName&&(i=t.rngProfileService.convertToAdminUserProfile(e.roles))})),i}},{key:"getLevelsNoEmpty",value:function(e){return this.userApi.getLevels(e).pipe(Object(X.a)((function(e){return e.filter((function(e){return!!e}))})))}},{key:"export",value:function(){return this.userApi.export()}}]),t}(N.jb)).\u0275fac=function(e){return new(e||g)(P.bc(K),P.bc(N.Ab),P.bc($.a))},g.\u0275prov=P.Jb({token:g,factory:g.\u0275fac,providedIn:"root"}),g),Z=s("g6G6"),J=s("ROBh"),ee=s("mWib"),te=s("TLy2"),ie=s("4e/d"),ne=s("6WTZ"),re=s("8lHc"),oe=s("J+dc"),ae=((h=m((function e(t){var i=this;f(this,e),this.userService=t,this.debounceTime=400,this.uniqueEmail=function(e){return function(t){return Object(re.a)(i.debounceTime).pipe(Object(te.a)((function(){return t.value!==e?i.userService.exists(t.value):Object(J.a)(!1)})),Object(oe.a)(1),Object(X.a)((function(e){return e?{uniqueEmail:!0}:null})))}}}))).\u0275fac=function(e){return new(e||h)(P.bc(W))},h.\u0275prov=P.Jb({token:h,factory:h.\u0275fac,providedIn:"root"}),h),ce=s("s2Ay");function le(e,t){1&e&&(P.Tb(0,"p"),P.Oc(1),P.jc(2,"translate"),P.Sb()),2&e&&(P.Bb(1),P.Pc(P.kc(2,1,"USER.INFORMATIONS.ACTIVE_SWITCH")))}function ue(e,t){1&e&&(P.Tb(0,"p"),P.Oc(1),P.jc(2,"translate"),P.Sb()),2&e&&(P.Bb(1),P.Pc(P.kc(2,1,"USER.INFORMATIONS.INACTIVE_SWITCH")))}function se(e,t){if(1&e&&(P.Rb(0),P.Oc(1),P.jc(2,"translate"),P.jc(3,"dateTime"),P.Qb()),2&e){var i=P.ic(3);P.Bb(1),P.Rc("(",P.kc(2,2,"USER.INFORMATIONS.BLOCKED_ACCOUNT_SINCE")," ",P.lc(3,4,null==i.user?null:i.user.lastConnection,"medium"),") ")}}function be(e,t){if(1&e&&(P.Tb(0,"p",40),P.Oc(1),P.jc(2,"translate"),P.Mc(3,se,4,7,"ng-container",1),P.Sb()),2&e){var i=P.ic(2);P.Bb(1),P.Qc(" ",P.kc(2,2,"USER.INFORMATIONS.BLOCKED_ACCOUNT")," "),P.Bb(2),P.oc("ngIf",null==i.user?null:i.user.lastConnection)}}function me(e,t){1&e&&(P.Tb(0,"p",40),P.Oc(1),P.jc(2,"translate"),P.Sb()),2&e&&(P.Bb(1),P.Qc(" ",P.kc(2,1,"USER.INFORMATIONS.ERASED_ACCOUNT")," "))}function de(e,t){if(1&e&&P.Ob(0,"vitamui-common-editable-option",41),2&e){var i=t.$implicit;P.oc("value",i.code)("content",i.name)}}function fe(e,t){if(1&e&&(P.Tb(0,"form",2),P.Tb(1,"div",3),P.Tb(2,"div",4),P.Mc(3,le,3,3,"p",1),P.Mc(4,ue,3,3,"p",1),P.Mc(5,be,4,4,"p",5),P.Mc(6,me,3,3,"p",5),P.Sb(),P.Sb(),P.Tb(7,"div",3),P.Tb(8,"div",6),P.Ob(9,"vitamui-common-editable-input",7),P.jc(10,"translate"),P.Sb(),P.Sb(),P.Tb(11,"div",3),P.Tb(12,"div",8),P.Tb(13,"vitamui-common-editable-input",9),P.jc(14,"translate"),P.Tb(15,"vitamui-common-field-error",10),P.Oc(16),P.jc(17,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Tb(18,"div",8),P.Tb(19,"vitamui-common-editable-input",11),P.jc(20,"translate"),P.Tb(21,"vitamui-common-field-error",10),P.Oc(22),P.jc(23,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(24,"div",3),P.Tb(25,"div",12),P.Tb(26,"vitamui-common-editable-email-input",13),P.jc(27,"translate"),P.Tb(28,"vitamui-common-field-error",14),P.Oc(29),P.jc(30,"translate"),P.Sb(),P.Tb(31,"vitamui-common-field-error",15),P.Oc(32),P.jc(33,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(34,"div",3),P.Tb(35,"div",8),P.Tb(36,"vitamui-common-editable-input",16),P.jc(37,"translate"),P.Tb(38,"vitamui-common-field-error",10),P.Oc(39),P.jc(40,"translate"),P.Sb(),P.Tb(41,"vitamui-common-field-error",17),P.Oc(42),P.jc(43,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Tb(44,"div",8),P.Tb(45,"vitamui-common-editable-input",18),P.jc(46,"translate"),P.Tb(47,"vitamui-common-field-error",17),P.Oc(48),P.jc(49,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Rb(50,19),P.Tb(51,"div",3),P.Tb(52,"div",12),P.Tb(53,"vitamui-common-editable-input",20),P.jc(54,"translate"),P.Tb(55,"vitamui-common-field-error",10),P.Oc(56),P.jc(57,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(58,"div",3),P.Tb(59,"div",8),P.Tb(60,"vitamui-common-editable-input",21),P.jc(61,"translate"),P.Tb(62,"vitamui-common-field-error",10),P.Oc(63),P.jc(64,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Tb(65,"div",8),P.Tb(66,"vitamui-common-editable-input",22),P.jc(67,"translate"),P.Tb(68,"vitamui-common-field-error",10),P.Oc(69),P.jc(70,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(71,"div",3),P.Tb(72,"div",12),P.Tb(73,"vitamui-common-editable-select",23),P.jc(74,"translate"),P.Mc(75,de,1,2,"vitamui-common-editable-option",24),P.Sb(),P.Sb(),P.Sb(),P.Qb(),P.Tb(76,"div",3),P.Tb(77,"div",25),P.Ob(78,"vitamui-common-editable-input",26),P.jc(79,"translate"),P.Sb(),P.Tb(80,"div",25),P.Ob(81,"vitamui-common-editable-input",27),P.jc(82,"translate"),P.Sb(),P.Sb(),P.Tb(83,"div",3),P.Tb(84,"div",25),P.Ob(85,"vitamui-common-editable-input",28),P.jc(86,"translate"),P.Sb(),P.Sb(),P.Tb(87,"div",3),P.Tb(88,"div",8),P.Tb(89,"form",2),P.Tb(90,"div"),P.Tb(91,"vitamui-common-editable-select",29),P.jc(92,"translate"),P.Ob(93,"vitamui-common-editable-option",30),P.jc(94,"translate"),P.Ob(95,"vitamui-common-editable-option",31),P.jc(96,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(97,"div",8),P.Ob(98,"vitamui-common-editable-input",32),P.jc(99,"translate"),P.Sb(),P.Sb(),P.Tb(100,"div",3),P.Tb(101,"div",8),P.Tb(102,"vitamui-common-editable-select",33),P.jc(103,"translate"),P.Ob(104,"vitamui-common-editable-option",34),P.jc(105,"translate"),P.Ob(106,"vitamui-common-editable-option",35),P.jc(107,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Tb(108,"div",3),P.Tb(109,"div",8),P.Tb(110,"vitamui-common-slide-toggle",36),P.Oc(111),P.jc(112,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Tb(113,"div",3),P.Tb(114,"div",8),P.Tb(115,"vitamui-common-slide-toggle",37),P.Tb(116,"span",38),P.jc(117,"translate"),P.Oc(118),P.jc(119,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(120,"div",3),P.Tb(121,"div",8),P.Tb(122,"vitamui-common-slide-toggle",39),P.Oc(123),P.jc(124,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Sb()),2&e){var i=P.ic(),n=null,r=null,o=null,a=null,c=null,l=null,u=null,s=null,b=null,m=null,d=null,f=null,p=null,v=null,S=null,g=null;P.oc("formGroup",i.form),P.Bb(3),P.oc("ngIf","ENABLED"===(null==i.user?null:i.user.status)),P.Bb(1),P.oc("ngIf","DISABLED"===(null==i.user?null:i.user.status)),P.Bb(1),P.oc("ngIf","BLOCKED"===(null==i.user?null:i.user.status)),P.Bb(1),P.oc("ngIf","ANONYM"===(null==i.user?null:i.user.status)),P.Bb(3),P.oc("label",P.kc(10,61,"COMMON.ID"))("validator",null==i.form||null==(n=i.form.get("identifier"))?null:n.validator)("asyncValidator",null==i.form||null==(r=i.form.get("identifier"))?null:r.asyncValidator),P.Bb(4),P.oc("validator",null==i.form||null==(o=i.form.get("lastname"))?null:o.validator)("label",P.kc(14,63,"USER.INFORMATIONS.LASTNAME")),P.Bb(3),P.Pc(P.kc(17,65,"COMMON.ERROR.REQUIRED")),P.Bb(3),P.oc("validator",null==i.form||null==(a=i.form.get("firstname"))?null:a.validator)("label",P.kc(20,67,"USER.INFORMATIONS.FIRSTNAME")),P.Bb(3),P.Pc(P.kc(23,69,"COMMON.ERROR.REQUIRED")),P.Bb(4),P.oc("validator",null==i.form||null==(c=i.form.get("email"))?null:c.validator)("asyncValidator",null==i.form||null==(l=i.form.get("email"))?null:l.asyncValidator)("domains",i.customerEmailDomains)("label",P.kc(27,71,"USER.INFORMATIONS.MAIL")),P.Bb(3),P.Qc("",P.kc(30,73,"COMMON.ERROR.REQUIRED")," "),P.Bb(3),P.Qc(" ",P.kc(33,75,"USER.INFORMATIONS.MAIL_ALREADY_EXIST"),""),P.Bb(4),P.oc("validator",null==i.form||null==(u=i.form.get("mobile"))?null:u.validator)("label",P.kc(37,77,"USER.INFORMATIONS.PHONE.MOBILE")),P.Bb(3),P.Pc(P.kc(40,79,"COMMON.ERROR.REQUIRED")),P.Bb(3),P.Pc(P.kc(43,81,"USER.INFORMATIONS.PHONE_FIELD_FORMAT")),P.Bb(3),P.oc("validator",null==i.form||null==(s=i.form.get("phone"))?null:s.validator)("label",P.kc(46,83,"USER.INFORMATIONS.PHONE.FIX")),P.Bb(3),P.Pc(P.kc(49,85,"USER.INFORMATIONS.PHONE_FIELD_FORMAT")),P.Bb(5),P.pc("maxlength",i.maxStreetLength),P.oc("label",P.kc(54,87,"COMMON.ADRESS.STREET"))("validator",null==i.form||null==(b=i.form.get("address.street"))?null:b.validator)("asyncValidator",null==i.form||null==(m=i.form.get("address.street"))?null:m.asyncValidator),P.Bb(3),P.Pc(P.kc(57,89,"COMMON.ERROR.REQUIRED")),P.Bb(4),P.oc("label",P.kc(61,91,"COMMON.ADRESS.ZIPCODE"))("validator",null==i.form||null==(d=i.form.get("address.zipCode"))?null:d.validator)("asyncValidator",null==i.form||null==(f=i.form.get("address.zipCode"))?null:f.asyncValidator),P.Bb(3),P.Pc(P.kc(64,93,"COMMON.ERROR.REQUIRED")),P.Bb(3),P.oc("label",P.kc(67,95,"COMMON.ADRESS.CITY"))("validator",null==i.form||null==(p=i.form.get("address.city"))?null:p.validator)("asyncValidator",null==i.form||null==(v=i.form.get("address.city"))?null:v.asyncValidator),P.Bb(3),P.Pc(P.kc(70,97,"COMMON.ERROR.REQUIRED")),P.Bb(4),P.oc("label",P.kc(74,99,"COMMON.ADRESS.COUNTRY"))("validator",null==i.form||null==(S=i.form.get("address.country"))?null:S.validator)("asyncValidator",null==i.form||null==(g=i.form.get("address.country"))?null:g.asyncValidator),P.Bb(2),P.oc("ngForOf",i.countries),P.Bb(3),P.oc("label",P.kc(79,101,"USER.INFORMATIONS.CENTER_CODES")),P.Bb(3),P.oc("label",P.kc(82,103,"USER.INFORMATIONS.SITE_CODE")),P.Bb(4),P.oc("label",P.kc(86,105,"USER.INFORMATIONS.INTERNAL_CODE"))("maxlength",20),P.Bb(4),P.oc("formGroup",i.userInfoForm),P.Bb(2),P.oc("label",P.kc(92,107,"USER.INFORMATIONS.DEFAULT_LANGUAGE")),P.Bb(2),P.oc("content",P.kc(94,109,"COMMON.LANGUAGE.ENGLISH")),P.Bb(2),P.oc("content",P.kc(96,111,"COMMON.LANGUAGE.FRENCH")),P.Bb(3),P.oc("label",P.kc(99,113,"USER.INFORMATIONS.GROUP_LEVEL")),P.Bb(4),P.oc("label",P.kc(103,115,"USER.INFORMATIONS.TYPE")),P.Bb(2),P.oc("content",P.kc(105,117,"USER.INFORMATIONS.MODAL.INFORMATIONS_STEP.GROUP_TYPE_NOMINATIVE")),P.Bb(2),P.oc("content",P.kc(107,119,"USER.INFORMATIONS.MODAL.INFORMATIONS_STEP.GROUP_TYPE_GENERIC")),P.Bb(5),P.Qc(" ",P.kc(112,121,"USER.INFORMATIONS.ALLOW_SUBROGATION"),""),P.Bb(5),P.pc("vitamuiCommonToolTip",P.kc(117,123,"USER.INFORMATIONS.VALIDATIONS_TOOLTIP")),P.pc("vitamuiCommonToolTipDisabled",!i.showTooltip),P.Bb(2),P.Qc(" ",P.kc(119,125,"USER.INFORMATIONS.VALIDATIONS")," "),P.Bb(5),P.Qc(" ",P.kc(124,127,"USER.INFORMATIONS.ACTIVATE_AUTO_PROVISIONING"),"")}}function pe(e,t){1&e&&(P.Tb(0,"div"),P.Tb(1,"h2"),P.Oc(2,"ATTENTION"),P.Sb(),P.Oc(3," L'utilisateur que vous cherchez est d\xe9ja supprim\xe9\n"),P.Sb())}var ve,Se=((ve=function(){function e(t,i,n,r,o,a){f(this,e),this.userService=t,this.userInfoService=i,this.formBuilder=n,this.userCreateValidators=r,this.countryService=o,this.startupService=a,this.maxStreetLength=this.startupService.getConfigNumberValue("MAX_STREET_LENGTH"),this.form=this.formBuilder.group({id:[null],identifier:[{value:null,disabled:!0},T.x.required],firstname:[null,T.x.required],lastname:[null,T.x.required],email:[null,[T.x.required,T.x.email],this.userCreateValidators.uniqueEmail()],mobile:[null,[T.x.pattern(/^[+]{1}[0-9]{11,12}$/)]],phone:[null,[T.x.pattern(/^[+]{1}[0-9]{11,12}$/)]],level:[{value:"",disabled:!0}],otp:[null],type:[null],status:[null],customerId:[null],groupId:[null],subrogeable:!1,address:this.formBuilder.group({street:[null,[T.x.required,T.x.maxLength(this.maxStreetLength)]],zipCode:[null,T.x.required],city:[null,T.x.required],country:[null,T.x.required]}),siteCode:[null],centerCodes:[null],internalCode:[null],autoProvisioningEnabled:null}),this.userInfoForm=this.formBuilder.group({language:[null,T.x.required]})}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.form.get("mobile").valueChanges.subscribe((function(){e.updateOtpState(e.form,e.adminUserProfile,e.customer)})),this.form.get("otp").valueChanges.subscribe((function(){e.initMobileValidators(e.form)})),Object(Z.a)(this.form.valueChanges,this.form.statusChanges).pipe(Object(ee.a)(200),Object(X.a)((function(){return Object(N.Ib)(e.form.getRawValue(),e.previousValue)})),Object(G.a)((function(e){return!Object(ne.c)(e)})),Object(X.a)((function(t){return Object(ne.a)({id:e.user.id},t)})),Object(te.a)((function(t){return e.userService.patch(t).pipe(Object(ie.a)((function(){return Object(J.a)(null)})))}))).subscribe((function(t){t&&e.resetForm(e.form,t,e.customer,e.adminUserProfile,e.readOnly)})),Object(Z.a)(this.userInfoForm.valueChanges,this.userInfoForm.statusChanges).pipe(Object(ee.a)(200),Object(X.a)((function(){return Object(N.Ib)(e.userInfoForm.getRawValue(),e.previousUserInfoValue)})),Object(G.a)((function(e){return!Object(ne.c)(e)})),Object(X.a)((function(t){return Object(ne.a)({id:e.userInfo.id},t)})),Object(te.a)((function(t){return e.userInfoService.patch(t,e.user).pipe(Object(ie.a)((function(){return Object(J.a)(null)})))}))).subscribe((function(t){return e.resetUserInfoForm(e.form,t)})),this.countryService.getAvailableCountries().subscribe((function(t){e.countries=t}))}},{key:"updateOtpState",value:function(e,t,i){this.canModifyOtp(t,i)&&(!e.get("mobile")||e.get("mobile").value&&""!==e.get("mobile").value?e.get("otp").disable&&(this.showTooltip=!1,e.get("otp").enable({emitEvent:!0})):(this.showTooltip=!0,e.get("otp").disable({emitEvent:!1})))}},{key:"canModifyOtp",value:function(e,t){return e||!e.multifactorAllowed||t&&t.otp!==N.Y.OPTIONAL}},{key:"ngOnChanges",value:function(e){(e.hasOwnProperty("user")||e.hasOwnProperty("readOnly")||e.hasOwnProperty("customer")||e.hasOwnProperty("adminUserProfile"))&&this.user&&this.customer&&this.adminUserProfile&&this.resetForm(this.form,this.user,this.customer,this.adminUserProfile,this.readOnly),e.hasOwnProperty("userInfo")&&this.userInfo&&this.resetUserInfoForm(this.userInfoForm,this.userInfo)}},{key:"resetForm",value:function(e,t,i,n,r){e.reset(t,{emitEvent:!1}),this.previousValue=this.form.value,this.initFormValidators(e,t),this.initFormActivationState(e,i,n,r),e.updateValueAndValidity({emitEvent:!1})}},{key:"resetUserInfoForm",value:function(e,t){t&&(e.reset(t,{emitEvent:!1}),this.previousUserInfoValue=this.userInfoForm.value,e.updateValueAndValidity({emitEvent:!1}))}},{key:"initFormValidators",value:function(e,t){e.get("email").setAsyncValidators(this.userCreateValidators.uniqueEmail(t.email)),this.initMobileValidators(e)}},{key:"initMobileValidators",value:function(e){var t=[T.x.pattern(/^[+]{1}[0-9]{11,12}$/)];e.get("otp").value&&t.push(T.x.required),e.get("mobile").setValidators(t)}},{key:"initFormActivationState",value:function(e,t,i,n){var r=this;this.customerEmailDomains=[],t.emailDomains.forEach((function(e){return r.customerEmailDomains.push(e.replace("*.",""))})),!n&&i.standardAttrsAllowed?(e.enable({emitEvent:!1}),e.get("identifier").disable({emitEvent:!1}),e.get("level").disable({emitEvent:!1}),i.genericAllowed||e.get("type").disable({emitEvent:!1}),this.updateOtpState(e,i,t)):e.disable({emitEvent:!1})}}]),e}()).\u0275fac=function(e){return new(e||ve)(P.Nb(W),P.Nb(z),P.Nb(T.d),P.Nb(ae),P.Nb(N.u),P.Nb(N.lb))},ve.\u0275cmp=P.Hb({type:ve,selectors:[["app-user-info-tab"]],inputs:{user:"user",userInfo:"userInfo",customer:"customer",readOnly:"readOnly",adminUserProfile:"adminUserProfile"},features:[P.zb],decls:2,vars:2,consts:[[3,"formGroup",4,"ngIf"],[4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-10"],["class","status-warning",4,"ngIf"],[1,"col-8"],["formControlName","identifier",3,"label","validator","asyncValidator"],[1,"col-6"],["formControlName","lastname",3,"validator","label"],["errorKey","required"],["formControlName","firstname",3,"validator","label"],[1,"col-12"],["formControlName","email",3,"validator","asyncValidator","domains","label"],["errorKey","email"],["errorKey","uniqueEmail"],["formControlName","mobile",3,"validator","label"],["errorKey","pattern"],["formControlName","phone",3,"validator","label"],["formGroupName","address"],["formControlName","street",3,"maxlength","label","validator","asyncValidator"],["formControlName","zipCode","maxlength","10",3,"label","validator","asyncValidator"],["formControlName","city","maxlength","100",3,"label","validator","asyncValidator"],["formControlName","country",3,"label","validator","asyncValidator"],[3,"value","content",4,"ngFor","ngForOf"],[1,"col-6","form-control"],["formControlName","centerCodes",3,"label"],["formControlName","siteCode",3,"label"],["formControlName","internalCode",3,"label","maxlength"],["formControlName","language",3,"label"],["value","ENGLISH",3,"content"],["value","FRENCH",3,"content"],["formControlName","level",3,"label"],["formControlName","type",3,"label"],["value","NOMINATIVE",3,"content"],["value","GENERIC",3,"content"],["formControlName","subrogeable"],["formControlName","otp"],["vitamuiCommonToolTipPosition","TOP",3,"vitamuiCommonToolTip","vitamuiCommonToolTipDisabled"],["formControlName","autoProvisioningEnabled"],[1,"status-warning"],[3,"value","content"]],template:function(e,t){1&e&&(P.Mc(0,fe,125,129,"form",0),P.Mc(1,pe,4,0,"div",1)),2&e&&(P.oc("ngIf","REMOVED"!==(null==t.user?null:t.user.status)),P.Bb(1),P.oc("ngIf","REMOVED"===(null==t.user?null:t.user.status)))},directives:[O.p,T.y,T.r,T.i,N.F,T.q,T.g,N.zb,N.C,T.j,T.l,N.I,O.o,N.H,N.ac,N.Ub],pipes:[ce.d,N.nc],styles:[".form-group[_ngcontent-%COMP%]{padding-bottom:30px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-right:30px;font-size:16px;font-weight:500;font-style:normal;line-height:normal;letter-spacing:normal;text-align:left}.status-warning[_ngcontent-%COMP%]{color:#c10000}"]}),ve);function ge(e,t){if(1&e&&(P.Tb(0,"div",11),P.Tb(1,"div"),P.Tb(2,"div",12),P.Oc(3),P.jc(4,"titlecase"),P.Sb(),P.Sb(),P.Tb(5,"div"),P.Ob(6,"i",13),P.jc(7,"translate"),P.Sb(),P.Sb()),2&e){var i=t.$implicit;P.Bb(3),P.Pc(P.kc(4,2,null==i?null:i.name)),P.Bb(3),P.oc("matTooltip",null!=i&&i.description?i.description:P.kc(7,4,"MISC.NO_DESC"))}}var he,Oe=((he=function(){function e(t){f(this,e),this.groupService=t}return m(e,[{key:"ngOnInit",value:function(){this.getGroupProfiles(this.group)}},{key:"getGroupProfiles",value:function(e){var t=this;e&&this.groupService.get(e.id).subscribe((function(e){t.groupProfiles=e.profiles}))}}]),e}()).\u0275fac=function(e){return new(e||he)(P.Nb(Y.a))},he.\u0275cmp=P.Hb({type:he,selectors:[["app-group-detail"]],inputs:{group:"group"},decls:20,vars:12,consts:[[1,"vitamui-dialog-subtable"],[1,"vitamui-dialog-subtable-header","d-flex"],[1,"col-4"],[1,"col-3"],[1,"col-5"],[1,"vitamui-dialog-subtable-body"],[1,"vitamui-dialog-subtable-rows"],[1,"vitamui-dialog-subtable-row","d-flex"],["vitamuiCommonEllipsis","",1,"col-4"],["vitamuiCommonEllipsis","",1,"col-3"],["class","d-flex justify-content-between align-items-center py-1 px-2 mb-2 vitamui-profile-list",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","py-1","px-2","mb-2","vitamui-profile-list"],[1,"profile-value"],["matTooltipClass","vitamui-tooltip",1,"vitamui-icon","vitamui-icon-info","primary","clickable",3,"matTooltip"]],template:function(e,t){1&e&&(P.Tb(0,"div",0),P.Tb(1,"div",1),P.Tb(2,"div",2),P.Oc(3),P.jc(4,"translate"),P.Sb(),P.Tb(5,"div",3),P.Oc(6),P.jc(7,"translate"),P.Sb(),P.Tb(8,"div",4),P.Oc(9),P.jc(10,"translate"),P.Sb(),P.Sb(),P.Tb(11,"div",5),P.Tb(12,"div",6),P.Tb(13,"div",7),P.Tb(14,"div",8),P.Oc(15),P.Sb(),P.Tb(16,"div",9),P.Oc(17),P.Sb(),P.Tb(18,"div",4),P.Mc(19,ge,8,6,"div",10),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Sb()),2&e&&(P.Bb(3),P.Pc(P.kc(4,6,"USER.GROUP.DESCRIPTION")),P.Bb(3),P.Pc(P.kc(7,8,"USER.GROUP.LEVEL")),P.Bb(3),P.Pc(P.kc(10,10,"USER.GROUP.PROFILE")),P.Bb(6),P.Pc(null==t.group?null:t.group.description),P.Bb(2),P.Pc(null==t.group?null:t.group.level),P.Bb(2),P.oc("ngForOf",t.groupProfiles))},directives:[N.Zb,O.o,w.a],pipes:[ce.d,O.y],styles:[".vitamui-dialog-subtable[_ngcontent-%COMP%]   .vitamui-dialog-subtable-header[_ngcontent-%COMP%]{font-size:14px;font-weight:700;height:30px}.vitamui-dialog-subtable[_ngcontent-%COMP%]   .vitamui-dialog-subtable-rows[_ngcontent-%COMP%]   .vitamui-dialog-subtable-row[_ngcontent-%COMP%]{font-weight:400;font-size:16px;line-height:24px}"]}),he);function Te(e,t){if(1&e&&(P.Tb(0,"div",9),P.Tb(1,"div",10),P.Oc(2),P.jc(3,"translate"),P.Sb(),P.Oc(4," \xa0"),P.Tb(5,"span",11),P.Oc(6),P.Sb(),P.Sb()),2&e){var i=P.ic();P.Bb(2),P.Qc("",P.kc(3,2,"USER.GROUP.MODAL.AUTORISATION_STEP.ATTRIBUATE_GROUP")," :"),P.Bb(4),P.Pc(i.groupName)}}function Ee(e,t){if(1&e&&P.Ob(0,"app-group-detail",19),2&e){var i=P.ic(2).$implicit;P.oc("group",i)("@collapseAnimation",void 0)}}function Ie(e,t){if(1&e){var i=P.Ub();P.Tb(0,"div",13,14),P.Tb(2,"div",15),P.ec("click",(function(){P.Dc(i);var e=P.zc(1),t=P.ic().$implicit;return P.ic().updateGroup(null==t?null:t.id,null==t?null:t.name,e)})),P.Tb(3,"div",16),P.Oc(4),P.Sb(),P.Tb(5,"button",17),P.ec("click",(function(e){P.Dc(i);var t=P.zc(1);return e.stopPropagation(),t.toggle()})),P.Oc(6),P.jc(7,"translate"),P.jc(8,"translate"),P.Sb(),P.Sb(),P.Mc(9,Ee,1,2,"app-group-detail",18),P.Sb()}if(2&e){var n=P.zc(1),r=P.ic().$implicit;P.Fb("no-hover","expanded"===n.state),P.Bb(4),P.Pc(null==r?null:r.name),P.Bb(2),P.Qc(" ","collapsed"===n.state?P.kc(7,5,"USER.GROUP.MODAL.AUTORISATION_STEP.RESULTS_TABLE.MORE_DETAIL"):P.kc(8,7,"USER.GROUP.MODAL.AUTORISATION_STEP.RESULTS_TABLE.LESS_DETAIL")," "),P.Bb(3),P.oc("ngIf","expanded"===n.state)}}function ye(e,t){if(1&e&&(P.Rb(0),P.Mc(1,Ie,10,9,"div",12),P.Qb()),2&e){var i=t.$implicit;P.Bb(1),P.oc("ngIf",!(null!=i&&i.selected))}}var Ne,Ce,Re=((Ne=function(){function e(t){f(this,e),this.data=t,this.groupProfiles=[],this.searchActiv=!1,this.selectedGroupEvent=new P.n,this.CUSTOMER_ACTIVE_PROFILE_GROUPS_INDEX=2}return m(e,[{key:"userGroupName",set:function(e){this.groupName=e}},{key:"ngOnInit",value:function(){this.initialGroups=this.groups.slice()}},{key:"updateGroup",value:function(e,t){this.groupName=t,this.unselectAllGroups();var i=this.groups.find((function(t){return t.id===e}));i.selected=!0,this.selectedGroupEvent.emit(i)}},{key:"unselectAllGroups",value:function(){this.groups.forEach((function(e){return e.selected=!1}))}},{key:"findGroup",value:function(e){return this.groups.find((function(t){return t.id===e}))}},{key:"onSearch",value:function(e){this.resetgroups(),null!==e&&e.length>0&&(this.groups=this.groups.filter((function(t){return t.name.toLocaleLowerCase().includes(e.toLocaleLowerCase())||t.description.toLocaleLowerCase().includes(e.toLocaleLowerCase())})))}},{key:"resetgroups",value:function(){var e=this;if(this.groups=this.data[this.CUSTOMER_ACTIVE_PROFILE_GROUPS_INDEX]?this.data[this.CUSTOMER_ACTIVE_PROFILE_GROUPS_INDEX]:this.initialGroups,this.groups.sort((function(e,t){return e.name.toUpperCase()<t.name.toUpperCase()?-1:1})),this.data[1]){var t=this.groups.find((function(t){return t.id===e.data[1].id}));t&&(t.selected=!0)}}}]),e}()).\u0275fac=function(e){return new(e||Ne)(P.Nb(E.a))},Ne.\u0275cmp=P.Hb({type:Ne,selectors:[["app-group-list"]],inputs:{groups:"groups",searchActiv:"searchActiv",userGroupName:"userGroupName"},outputs:{selectedGroupEvent:"selectedGroupEvent"},decls:14,vars:12,consts:[[1,"text","large","bold"],[1,"my-3",3,"placeholder","disabled","search"],["class","d-flex mt-4 mb-3",4,"ngIf"],[1,"vitamui-table"],[1,"vitamui-table-head","p-0","py-3","d-flex","align-items-center"],[1,"pl-4"],[1,"vitamui-table-body"],[1,"vitamui-table-rows"],[4,"ngFor","ngForOf"],[1,"d-flex","mt-4","mb-3"],[1,"text","medium","bold"],[1,"text","medium"],["class","vitamui-row p-0 px-4",3,"no-hover","vitamuiCommonCollapse",4,"ngIf"],[1,"vitamui-row","p-0","px-4",3,"vitamuiCommonCollapse"],["row","vitamuiCommonCollapse"],[1,"d-flex","justify-content-between","align-items-center","clickable",3,"click"],["vitamuiCommonEllipsis","",1,"align-items-center","w-100"],[1,"btn","link","underline",3,"click"],[3,"group",4,"ngIf"],[3,"group"]],template:function(e,t){1&e&&(P.Tb(0,"div",0),P.Oc(1),P.jc(2,"translate"),P.Sb(),P.Tb(3,"vitamui-common-search-bar",1),P.ec("search",(function(e){return t.onSearch(e)})),P.jc(4,"translate"),P.Sb(),P.Mc(5,Te,7,4,"div",2),P.Tb(6,"div",3),P.Tb(7,"div",4),P.Tb(8,"div",5),P.Oc(9),P.jc(10,"translate"),P.Sb(),P.Sb(),P.Tb(11,"div",6),P.Tb(12,"div",7),P.Mc(13,ye,2,1,"ng-container",8),P.Sb(),P.Sb(),P.Sb()),2&e&&(P.Bb(1),P.Pc(P.kc(2,6,"USER.GROUP.MODAL.AUTORISATION_STEP.TITLE")),P.Bb(2),P.oc("placeholder",P.kc(4,8,"USER.GROUP.MODAL.AUTORISATION_STEP.INPUT_PLACEHOLDER"))("disabled",t.searchActiv),P.Bb(2),P.oc("ngIf",t.groupName),P.Bb(4),P.Pc(P.kc(10,10,"USER.GROUP.MODAL.AUTORISATION_STEP.RESULTS_TABLE.GROUP_LABEL")),P.Bb(4),P.oc("ngForOf",t.groups))},directives:[N.hb,O.p,O.o,N.q,N.Zb,Oe],pipes:[ce.d],styles:[""],data:{animation:[N.Hb,N.Ob]}}),Ne),Ae={provide:T.o,useExisting:Object(P.V)((function(){return Be})),multi:!0},Be=((Ce=function(){function e(t,i,n){f(this,e),this.userService=t,this.dialogRef=i,this.data=n,this.CUSTOMER_ACTIVE_PROFILE_GROUPS_INDEX=2,this.stepIndex=0,this.stepCount=1}return m(e,[{key:"profileGroupChange",value:function(e){this.user.groupId=e.id,this.selectedGroupName=e.name}},{key:"ngOnInit",value:function(){this.user=this.data[0],this.userGroupName=this.data[1].name,this.resetActiveGroups()}},{key:"resetActiveGroups",value:function(){var e=this;if(this.activeGroups=this.data[this.CUSTOMER_ACTIVE_PROFILE_GROUPS_INDEX],this.activeGroups.sort((function(e,t){return e.name.toUpperCase()<t.name.toUpperCase()?-1:1})),this.data[1]){this.selectedGroupName=this.data[1].name;var t=this.activeGroups.find((function(t){return t.id===e.data[1].id}));t&&(t.selected=!0)}}},{key:"updateGroup",value:function(e){var t=e;this.selectedGroupName=t.name,this.user.groupId=t.id,this.user.level=t.level}},{key:"saveUserUpdate",value:function(){var e=this;this.userService.patch({id:this.user.id,groupId:this.user.groupId}).subscribe((function(){return e.dialogRef.close(!0)}),(function(e){console.error(e)}))}},{key:"onCancel",value:function(){this.dialogRef.close()}}]),e}()).\u0275fac=function(e){return new(e||Ce)(P.Nb(W),P.Nb(E.g),P.Nb(E.a))},Ce.\u0275cmp=P.Hb({type:Ce,selectors:[["app-group-attribution"]],features:[P.Ab([Ae])],decls:12,vars:11,consts:[[1,"header"],[3,"index","count"],[1,"mt-3","content"],[3,"groups","userGroupName","selectedGroupEvent"],[1,"actions"],["type","button",1,"btn","primary",3,"disabled","click"],["type","button",1,"btn","cancel","link",3,"click"]],template:function(e,t){1&e&&(P.Tb(0,"div",0),P.Ob(1,"vitamui-common-progress-bar",1),P.Sb(),P.Tb(2,"div",2),P.Tb(3,"div"),P.Tb(4,"app-group-list",3),P.ec("selectedGroupEvent",(function(e){return t.updateGroup(e)})),P.Sb(),P.Sb(),P.Tb(5,"div",4),P.Tb(6,"button",5),P.ec("click",(function(){return t.saveUserUpdate()})),P.Oc(7),P.jc(8,"translate"),P.Sb(),P.Tb(9,"button",6),P.ec("click",(function(){return t.onCancel()})),P.Oc(10),P.jc(11,"translate"),P.Sb(),P.Sb(),P.Sb()),2&e&&(P.Bb(1),P.oc("index",t.stepIndex)("count",t.stepCount),P.Bb(3),P.oc("groups",t.activeGroups)("userGroupName",t.userGroupName),P.Bb(2),P.oc("disabled",!t.selectedGroupName),P.Bb(1),P.Qc(" ",P.kc(8,7,"COMMON.UPDATE")," "),P.Bb(3),P.Pc(P.kc(11,9,"COMMON.UNDO")))},directives:[N.dc,Re],pipes:[ce.d],styles:[""]}),Ce);function Me(e,t){if(1&e){var i=P.Ub();P.Tb(0,"button",4),P.ec("click",(function(){return P.Dc(i),P.ic(2).openAttributionGroupe()})),P.Tb(1,"div"),P.Oc(2),P.jc(3,"translate"),P.Sb(),P.Sb()}if(2&e){var n=P.ic(2);P.oc("disabled","NONE"===n.userInfo.type),P.Bb(2),P.Qc(" ",P.kc(3,2,"COMMON.UPDATE")," ")}}function ke(e,t){if(1&e&&(P.Tb(0,"div"),P.Tb(1,"div",5),P.Tb(2,"p",6),P.Oc(3),P.jc(4,"translate"),P.Sb(),P.Tb(5,"p",7),P.Oc(6),P.Sb(),P.Sb(),P.Tb(7,"div",5),P.Tb(8,"p",6),P.Oc(9),P.jc(10,"translate"),P.Sb(),P.Tb(11,"p",7),P.Oc(12),P.Sb(),P.Sb(),P.Tb(13,"div",5),P.Tb(14,"p",6),P.Oc(15),P.jc(16,"translate"),P.Sb(),P.Tb(17,"p",7),P.Oc(18),P.Sb(),P.Sb(),P.Sb()),2&e){var i=P.ic(2);P.Bb(3),P.Pc(P.kc(4,6,"USER.GROUP.GROUP")),P.Bb(3),P.Pc(null==i.userGroup?null:i.userGroup.name),P.Bb(3),P.Pc(P.kc(10,8,"USER.GROUP.LEVEL")),P.Bb(3),P.Pc(null==i.userGroup?null:i.userGroup.level),P.Bb(3),P.Pc(P.kc(16,10,"USER.GROUP.DESCRIPTION")),P.Bb(3),P.Pc(null==i.userGroup?null:i.userGroup.description)}}function Ue(e,t){if(1&e&&(P.Tb(0,"div",8),P.Tb(1,"div"),P.Tb(2,"div",9),P.Oc(3),P.Sb(),P.Sb(),P.Tb(4,"div"),P.Ob(5,"i",10),P.jc(6,"translate"),P.Sb(),P.Sb()),2&e){var i=t.$implicit;P.Bb(3),P.Pc(null==i?null:i.name),P.Bb(2),P.oc("matTooltip",null!=i&&i.description?i.description:P.kc(6,2,"MISC.NO_DESC"))}}function Pe(e,t){if(1&e&&(P.Tb(0,"div"),P.Mc(1,Me,4,4,"button",1),P.Mc(2,ke,19,12,"div",0),P.Tb(3,"p",2),P.Oc(4),P.jc(5,"translate"),P.Sb(),P.Mc(6,Ue,7,4,"div",3),P.Sb()),2&e){var i=P.ic();P.Bb(1),P.oc("ngIf",i.showUpdateButton),P.Bb(1),P.oc("ngIf",i.userGroup),P.Bb(2),P.Pc(P.kc(5,4,"USER.GROUP.PROFILE")),P.Bb(2),P.oc("ngForOf",i.groupProfiles)}}function De(e,t){1&e&&(P.Tb(0,"div"),P.Tb(1,"h2"),P.Oc(2,"ATTENTION"),P.Sb(),P.Oc(3," L'utilisateur que vous cherchez est d\xe9ja supprim\xe9\n"),P.Sb())}var _e,je=((_e=function(){function e(t,i,n,r){f(this,e),this.groupAttrDialog=t,this.userService=i,this.groupService=n,this.authService=r,this.groupProfiles=[],this.destroy=new H.a}return m(e,[{key:"user",get:function(){return this._user},set:function(e){this._user=e}},{key:"readOnly",get:function(){return this._readOnly},set:function(e){this.showUpdateButton=!e}},{key:"userInfo",get:function(){return this._userInfo},set:function(e){this._userInfo=e}},{key:"groups",get:function(){return this._groups},set:function(e){this._groups=e}},{key:"ngOnDestroy",value:function(){this.destroy.next()}},{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(){this.getUserProfileDetail(),this.getGroupProfiles()}},{key:"getGroupProfiles",value:function(){var e=this;this.userGroup&&this.groupService.get(this.userGroup.id).subscribe((function(t){e.groupProfiles=t.profiles}))}},{key:"getUserProfileDetail",value:function(){var e=this;this.activeGroups=this.groups.map((function(e){return Object({id:e.id,name:e.name,description:e.description,level:e.level,selected:!1,profiles:e.profiles})})),Object(N.Lb)(this.authService.user)||(this.activeGroups=this.activeGroups.filter((function(t){return t.id!==e.authService.user.groupId}))),this.user.groupId&&(this.userGroup=this.groups.find((function(t){return t.id===e.user.groupId})))}},{key:"getAttributableGroups",value:function(){var e=this;return"LIST"===this.userInfo.type&&(this.activeGroups=[],this.userInfo.profilGroup.forEach((function(t){var i=e.groups.find((function(e){return e.id===t.id})),n=Object({id:t.id,name:t.name,description:t.description,selected:!1,profiles:null==i?void 0:i.profiles});e.activeGroups.push(n)}))),this.activeGroups}},{key:"openAttributionGroupe",value:function(){var e=this;this.activeGroups=this.getAttributableGroups(),this.groupAttrDialog.open(Be,{panelClass:"vitamui-modal",disableClose:!0,data:[this.user,this.userGroup,this.activeGroups]}).afterClosed().subscribe((function(t){t&&e.refreshTab()}))}},{key:"refreshTab",value:function(){var e=this;this.userService.get(this.user.id).subscribe((function(t){return e.user=t}),(function(e){console.error(e)}))}}]),e}()).\u0275fac=function(e){return new(e||_e)(P.Nb(E.b),P.Nb(W),P.Nb(Y.a),P.Nb(N.k))},_e.\u0275cmp=P.Hb({type:_e,selectors:[["app-user-group-tab"]],inputs:{user:"user",readOnly:"readOnly",userInfo:"userInfo",groups:"groups"},features:[P.zb],decls:2,vars:2,consts:[[4,"ngIf"],["class","btn primary mb-4",3,"disabled","click",4,"ngIf"],[1,"text","normal","spaced","light","mt-5"],["class","d-flex justify-content-between align-items-center p-3 mb-2 vitamui-profile-list",4,"ngFor","ngForOf"],[1,"btn","primary","mb-4",3,"disabled","click"],[1,"mb-3"],[1,"text","normal","spaced","light","mb-1"],[1,"text","medium","m-0"],[1,"d-flex","justify-content-between","align-items-center","p-3","mb-2","vitamui-profile-list"],[1,"text","medium"],["matTooltipClass","vitamui-tooltip",1,"vitamui-icon","vitamui-icon-info","primary","clickable",3,"matTooltip"]],template:function(e,t){1&e&&(P.Mc(0,Pe,7,6,"div",0),P.Mc(1,De,4,0,"div",0)),2&e&&(P.oc("ngIf","REMOVED"!==(null==t.user?null:t.user.status)),P.Bb(1),P.oc("ngIf","REMOVED"===(null==t.user?null:t.user.status)))},directives:[O.p,O.o,w.a],pipes:[ce.d],styles:[""]}),_e),Le=["confirmDisabledUserDialog"],xe=["confirmEnabledUserDialog"],we=["confirmdeleteUserDialog"];function Fe(e,t){if(1&e&&(P.Tb(0,"mat-tab",6),P.jc(1,"translate"),P.Ob(2,"vitamui-common-multi-operation-history-tab",14),P.Sb()),2&e){var i=P.ic();P.oc("label",P.kc(1,4,"USER.TAB.HISTORY")),P.Bb(2),P.oc("collectionsMap",i.collectionsMap)("identifiers",i.identifiers)("filter",i.filterAuthenticationEvents)}}var Ge=function(e,t,i){return{param1:e,param2:t,param3:i}};function Ve(e,t){if(1&e&&(P.Tb(0,"mat-dialog-content"),P.Tb(1,"p"),P.Oc(2),P.jc(3,"translate"),P.Sb(),P.Sb(),P.Tb(4,"mat-dialog-actions"),P.Tb(5,"button",15),P.Oc(6),P.jc(7,"translate"),P.Sb(),P.Tb(8,"button",16),P.Oc(9),P.jc(10,"translate"),P.Sb(),P.Sb()),2&e){var i=P.ic();P.Bb(2),P.Qc(" ",P.lc(3,4,"USER.OTHER_ACTION.DESACTIVATE_MESSAGE",P.vc(11,Ge,null==i.user?null:i.user.firstname,null==i.user?null:i.user.lastname,null==i.user?null:i.user.email))," "),P.Bb(3),P.oc("matDialogClose",!0),P.Bb(1),P.Pc(P.kc(7,7,"COMMON.CONFIRM")),P.Bb(3),P.Pc(P.kc(10,9,"COMMON.BACK"))}}function He(e,t){if(1&e&&(P.Tb(0,"mat-dialog-content"),P.Tb(1,"p"),P.Oc(2),P.jc(3,"translate"),P.Sb(),P.Sb(),P.Tb(4,"mat-dialog-actions"),P.Tb(5,"button",15),P.Oc(6),P.jc(7,"translate"),P.Sb(),P.Tb(8,"button",16),P.Oc(9),P.jc(10,"translate"),P.Sb(),P.Sb()),2&e){var i=P.ic();P.Bb(2),P.Qc(" ",P.lc(3,4,"USER.OTHER_ACTION.REACTIVATE_MESSAGE",P.vc(11,Ge,null==i.user?null:i.user.firstname,null==i.user?null:i.user.lastname,null==i.user?null:i.user.email))," "),P.Bb(3),P.oc("matDialogClose",!0),P.Bb(1),P.Pc(P.kc(7,7,"COMMON.CONFIRM")),P.Bb(3),P.Pc(P.kc(10,9,"COMMON.BACK"))}}function Qe(e,t){if(1&e&&(P.Tb(0,"mat-dialog-content"),P.Tb(1,"p"),P.Xb(2,17),P.Sb(),P.Sb(),P.Tb(3,"mat-dialog-actions"),P.Tb(4,"button",15),P.Oc(5),P.jc(6,"translate"),P.Sb(),P.Tb(7,"button",16),P.Oc(8),P.jc(9,"translate"),P.Sb(),P.Sb()),2&e){var i=P.ic();P.Bb(2),P.ac(null==i.user?null:i.user.firstname)(null==i.user?null:i.user.lastname),P.Yb(2),P.Bb(2),P.oc("matDialogClose",!0),P.Bb(1),P.Pc(P.kc(6,5,"COMMON.CONFIRM")),P.Bb(3),P.Pc(P.kc(9,7,"COMMON.BACK"))}}var ze,qe,Ke,Ye=((ze=function(){function e(t,i,n,r,o,a,c){f(this,e),this.matDialog=t,this.userService=i,this.authService=n,this.userApi=r,this.startupService=o,this.groupService=a,this.userInfoService=c,this.previewClose=new P.n}return m(e,[{key:"user",get:function(){return this._user},set:function(e){var t=this;this._user=e,this.collectionsMap=new Map;var i=new Map,n=[];this._user&&(i.set(this._user.id,"users"),n.push(this._user.identifier),this._user.userInfoId?this.userInfoService.get(this._user.userInfoId).subscribe((function(e){t.userInfo=e,n.push(t.userInfo.identifier),i.set(t.userInfo.id,"userinfos"),t.collectionsMap=i,t.identifiers=n})):(this.collectionsMap=i,this.identifiers=n))}},{key:"groups",get:function(){return this._groups},set:function(e){this._groups=e}},{key:"isVitamEnabled",get:function(){return this.startupService.isVitamEnabled()}},{key:"ngOnInit",value:function(){var e=this;this.connectedUserInfo=this.userService.getUserProfileInfo(this.authService.user),this.userUpdatedSub=this.userService.userUpdated.subscribe((function(t){e.user=t}))}},{key:"ngOnDestroy",value:function(){this.userUpdatedSub.unsubscribe()}},{key:"openPopup",value:function(){window.open(this.startupService.getConfigStringValue("UI_URL")+"/user/"+this.user.id,"detailPopup","width=584, height=713, resizable=no, location=no"),this.emitClose()}},{key:"updateStatus",value:function(e){var t,i=this;"ENABLED"===e?t=this.confirmEnabledUserDialog:"DISABLED"===e&&(t=this.confirmDisabledUserDialog),this.matDialog.open(t,{panelClass:"vitamui-dialog"}).afterClosed().pipe(Object(G.a)((function(e){return!!e}))).subscribe((function(){i.userService.patch({id:i.user.id,status:e}).subscribe((function(e){i.user=e}))}))}},{key:"levelNotAllowed",value:function(){if(this.user)return!Object(N.Kb)(this.authService.user,this.user.level)}},{key:"emitClose",value:function(){this.previewClose.emit()}},{key:"filterAuthenticationEvents",value:function(e){return e.outDetail&&(e.outDetail.includes("EXT_VITAMUI_CREATE_USER")||e.outDetail.includes("EXT_VITAMUI_UPDATE_USER")||e.outDetail.includes("EXT_VITAMUI_BLOCK_USER")||e.outDetail.includes("EXT_VITAMUI_PASSWORD_REVOCATION")||e.outDetail.includes("EXT_VITAMUI_PASSWORD_INIT")||e.outDetail.includes("EXT_VITAMUI_PASSWORD_CHANGE")||e.outDetail.includes("EXT_VITAMUI_CREATE_USER_INFO")||e.outDetail.includes("EXT_VITAMUI_UPDATE_USER_INFO"))}},{key:"deleteUser",value:function(e,t){var i,n=this,r=e.email.split("@"),o="anonyme-"+e.identifier+"@"+r[1],a={street:"",zipCode:"",city:"",country:""};i=this.confirmdeleteUserDialog,this.matDialog.open(i,{panelClass:"vitamui-dialog"}).afterClosed().pipe(Object(G.a)((function(e){return!!e}))).subscribe((function(){n.userService.deleteUser({id:n.user.id,lastname:"",email:o,address:a,mobile:null,phone:null,status:t,groupId:"",firstname:"",siteCode:"",internalCode:""}).subscribe((function(e){n.user=e,n.emitClose()}))}))}}]),e}()).\u0275fac=function(e){return new(e||ze)(P.Nb(E.b),P.Nb(W),P.Nb(N.k),P.Nb(K),P.Nb(N.lb),P.Nb(Y.a),P.Nb(z))},ze.\u0275cmp=P.Hb({type:ze,selectors:[["app-user-preview"]],viewQuery:function(e,t){var i;1&e&&(P.Ic(Le,!0),P.Ic(xe,!0),P.Ic(we,!0)),2&e&&(P.yc(i=P.fc())&&(t.confirmDisabledUserDialog=i.first),P.yc(i=P.fc())&&(t.confirmEnabledUserDialog=i.first),P.yc(i=P.fc())&&(t.confirmdeleteUserDialog=i.first))},inputs:{isPopup:"isPopup",user:"user",customer:"customer",groups:"groups"},outputs:{previewClose:"previewClose"},decls:25,vars:31,consts:function(){return[[3,"badge","title","subtitle","icon","onclose"],[3,"overlayPos","icon"],["mat-menu-item","",3,"disabled","click"],$localize(e||(e=r([":@@userPreviewDeleted\u241f26a9cb8525f6413a0cdcda727d9ac45d98dd95db\u241f2552240154184994944: Supprimer les donn\xe9es personnelles "]))),[1,"vitamui-sidepanel-body"],[1,"preview-tab-group"],[3,"label"],[3,"user","customer","readOnly","adminUserProfile","userInfo"],[1,"no-padding",3,"label"],[3,"user","readOnly","userInfo","groups"],[3,"label",4,"ngIf"],["confirmDisabledUserDialog",""],["confirmEnabledUserDialog",""],["confirmdeleteUserDialog",""],[3,"collectionsMap","identifiers","filter"],[1,"btn","primary","mr-2",3,"matDialogClose"],["matDialogClose","",1,"btn","link","cancel"],$localize(t||(t=r([":@@disabledUserConfirm\u241f4c67edc882053d5ade00fee4c9fa9828e1a92e99\u241f2953856490548959546: Vous allez proc\xe9der \xe0 l'effacement des donn\xe9es personnelles de l'utilisateur ",":INTERPOLATION: ",":INTERPOLATION_1:. Cette action ne peut pas \xeatre annul\xe9e, voulez-vous confirmer ? "])),"\ufffd0\ufffd","\ufffd1\ufffd")]},template:function(e,t){1&e&&(P.Tb(0,"vitamui-common-sidenav-header",0),P.ec("onclose",(function(){return t.emitClose()})),P.Tb(1,"vitamui-common-menu-button",1),P.Tb(2,"button",2),P.ec("click",(function(){return t.updateStatus("ENABLED")})),P.Oc(3),P.jc(4,"translate"),P.Sb(),P.Tb(5,"button",2),P.ec("click",(function(){return t.updateStatus("DISABLED")})),P.Oc(6),P.jc(7,"translate"),P.Sb(),P.Tb(8,"button",2),P.ec("click",(function(){return t.deleteUser(t.user,"REMOVED")})),P.Xb(9,3),P.Sb(),P.Sb(),P.Sb(),P.Tb(10,"div",4),P.Tb(11,"mat-tab-group",5),P.Tb(12,"mat-tab",6),P.jc(13,"translate"),P.Ob(14,"app-user-info-tab",7),P.Sb(),P.Tb(15,"mat-tab",8),P.jc(16,"translate"),P.Ob(17,"app-user-group-tab",9),P.Sb(),P.Mc(18,Fe,3,6,"mat-tab",10),P.Sb(),P.Sb(),P.Mc(19,Ve,11,15,"ng-template",null,11,P.Nc),P.Mc(21,He,11,15,"ng-template",null,12,P.Nc),P.Mc(23,Qe,10,9,"ng-template",null,13,P.Nc)),2&e&&(P.oc("badge","ENABLED"===(null==t.user?null:t.user.status)?"green":"DISABLED"===(null==t.user?null:t.user.status)||"ANONYM"===(null==t.user?null:t.user.status)?"grey":"orange")("title",(null==t.user?null:t.user.lastname.toUpperCase())+" "+(null==t.user?null:t.user.firstname))("subtitle","("+(null==t.user?null:t.user.identifier)+")")("icon","vitamui-icon-user"),P.Bb(1),P.oc("overlayPos","end")("icon","vitamui-icon-more-horiz"),P.Bb(1),P.oc("disabled","ENABLED"===(null==t.user?null:t.user.status)),P.Bb(1),P.Qc(" ",P.kc(4,23,"USER.OTHER_ACTION.ACTIVATE")," "),P.Bb(2),P.oc("disabled","DISABLED"===(null==t.user?null:t.user.status)),P.Bb(1),P.Qc(" ",P.kc(7,25,"USER.OTHER_ACTION.DESACTIVATE")," "),P.Bb(2),P.oc("disabled","ENABLED"===(null==t.user?null:t.user.status)||"REMOVED"===(null==t.user?null:t.user.status)||"BLOCKED"===(null==t.user?null:t.user.status)||"ANONYM"===(null==t.user?null:t.user.status)),P.Bb(4),P.oc("label",P.kc(13,27,"USER.TAB.INFORMATIONS")),P.Bb(2),P.oc("user",t.user)("customer",t.customer)("readOnly",t.isPopup||(null==t.user?null:t.user.readonly)||t.levelNotAllowed())("adminUserProfile",t.connectedUserInfo)("userInfo",t.userInfo),P.Bb(1),P.oc("label",P.kc(16,29,"USER.TAB.GROUP")),P.Bb(2),P.oc("user",t.user)("readOnly",t.isPopup||(null==t.user?null:t.user.readonly)||t.levelNotAllowed())("userInfo",t.connectedUserInfo)("groups",t.groups),P.Bb(1),P.oc("ngIf",t.isVitamEnabled))},directives:[N.mc,N.Tb,I.a,x.b,x.a,Se,je,O.p,N.Yb,E.e,E.c,E.d],pipes:[ce.d],styles:[""]}),ze),Xe=s("O4oY"),$e=((Ke=function(){function e(t,i){var n=this;f(this,e),this.route=t,this.customerService=i,this.customerService.getMyCustomer().subscribe((function(e){return n.customer=e})),this.user=this.route.snapshot.data.user}return m(e,[{key:"ngOnInit",value:function(){}},{key:"closePopup",value:function(){window.close()}}]),e}()).\u0275fac=function(e){return new(e||Ke)(P.Nb(j.a),P.Nb(Xe.a))},Ke.\u0275cmp=P.Hb({type:Ke,selectors:[["app-profile-group-popup"]],decls:1,vars:3,consts:[[3,"user","customer","isPopup","previewClose"]],template:function(e,t){1&e&&(P.Tb(0,"app-user-preview",0),P.ec("previewClose",(function(){return t.closePopup()})),P.Sb()),2&e&&P.oc("user",t.user)("customer",t.customer)("isPopup",!0)},directives:[Ye],encapsulation:2}),Ke),We=((qe=function(){function e(t,i){f(this,e),this.userService=t,this.router=i}return m(e,[{key:"resolve",value:function(e){var t=this,i=e.paramMap.get("id");return this.userService.get(i).pipe(Object(oe.a)(1),Object(X.a)((function(e){return e||(t.router.navigate(["/"]),null)})))}}]),e}()).\u0275fac=function(e){return new(e||qe)(P.bc(W),P.bc(j.d))},qe.\u0275prov=P.Jb({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe),Ze=s("+9k3"),Je=s("Ohay"),et=function(){function e(){f(this,e)}return m(e,null,[{key:"missingPhoneNumber",value:function(e){return e&&e.get("otp").value&&!e.get("mobile").value?{missingPhoneNumber:!0}:null}}]),e}(),tt=s("IrDo"),it=s("mFH5");function nt(e,t){1&e&&(P.Tb(0,"span"),P.Oc(1),P.jc(2,"translate"),P.Sb()),2&e&&(P.Bb(1),P.Pc(P.kc(2,1,"USER.INFORMATIONS.INACTIVE_SWITCH")))}function rt(e,t){1&e&&(P.Tb(0,"span"),P.Oc(1),P.jc(2,"translate"),P.Sb()),2&e&&(P.Bb(1),P.Pc(P.kc(2,1,"USER.INFORMATIONS.ACTIVE_SWITCH")))}function ot(e,t){1&e&&(P.Tb(0,"vitamui-common-input-error"),P.Oc(1),P.jc(2,"translate"),P.Sb()),2&e&&(P.Bb(1),P.Qc(" ",P.kc(2,1,"COMMON.ERROR.REQUIRED"),""))}function at(e,t){1&e&&(P.Tb(0,"vitamui-common-input-error"),P.Oc(1),P.jc(2,"translate"),P.Sb()),2&e&&(P.Bb(1),P.Pc(P.kc(2,1,"COMMON.ERROR.REQUIRED")))}function ct(e,t){1&e&&(P.Tb(0,"vitamui-common-input-error"),P.Oc(1),P.jc(2,"translate"),P.Sb()),2&e&&(P.Bb(1),P.Pc(P.kc(2,1,"COMMON.ERROR.REQUIRED")))}function lt(e,t){1&e&&(P.Tb(0,"vitamui-common-input-error"),P.Oc(1),P.jc(2,"translate"),P.Sb()),2&e&&(P.Bb(1),P.Qc("",P.kc(2,1,"USER.INFORMATIONS.MODAL.INFORMATIONS_STEP.WRONG_FORMAT")," "))}function ut(e,t){1&e&&(P.Tb(0,"vitamui-common-input-error"),P.Oc(1),P.jc(2,"translate"),P.Sb()),2&e&&(P.Bb(1),P.Pc(P.kc(2,1,"USER.INFORMATIONS.MODAL.INFORMATIONS_STEP.MAIL_ALREADY_EXIST")))}function st(e,t){if(1&e&&(P.Rb(0),P.Mc(1,ct,3,3,"vitamui-common-input-error",8),P.Mc(2,lt,3,3,"vitamui-common-input-error",8),P.Mc(3,ut,3,3,"vitamui-common-input-error",8),P.Qb()),2&e){var i=P.ic(),n=null,r=null,o=null;P.Bb(1),P.oc("ngIf",null==i.form||null==(n=i.form.get("email"))?null:n.hasError("required")),P.Bb(1),P.oc("ngIf",null==i.form||null==(r=i.form.get("email"))?null:r.hasError("pattern")),P.Bb(1),P.oc("ngIf",null==i.form||null==(o=i.form.get("email"))?null:o.hasError("uniqueEmail"))}}function bt(e,t){if(1&e&&(P.Tb(0,"mat-option",56),P.Oc(1),P.Sb()),2&e){var i=t.$implicit;P.pc("value",i),P.Bb(1),P.Qc(" ",i," ")}}function mt(e,t){if(1&e&&(P.Tb(0,"button",36),P.Oc(1),P.jc(2,"translate"),P.Sb()),2&e){var i=P.ic();P.oc("disabled",i.firstStepInvalid()),P.Bb(1),P.Qc(" ",P.kc(2,2,"COMMON.NEXT")," ")}}function dt(e,t){if(1&e){var i=P.Ub();P.Tb(0,"button",57),P.ec("click",(function(){return P.Dc(i),P.ic().passGroupStep()})),P.Oc(1),P.jc(2,"translate"),P.Sb()}if(2&e){var n=P.ic();P.oc("disabled",n.firstStepInvalid()),P.Bb(1),P.Qc(" ",P.kc(2,2,"USER.INFORMATIONS.MODAL.INFORMATIONS_STEP.CONTINUE_AUTH")," ")}}function ft(e,t){1&e&&(P.Tb(0,"vitamui-common-input-error"),P.Oc(1),P.jc(2,"translate"),P.Sb()),2&e&&(P.Bb(1),P.Pc(P.kc(2,1,"COMMON.ERROR.REQUIRED")))}function pt(e,t){1&e&&(P.Tb(0,"vitamui-common-input-error"),P.Oc(1),P.jc(2,"translate"),P.Sb()),2&e&&(P.Bb(1),P.Pc(P.kc(2,1,"COMMON.ERROR.REQUIRED")))}function vt(e,t){1&e&&(P.Tb(0,"vitamui-common-input-error"),P.Oc(1),P.jc(2,"translate"),P.Sb()),2&e&&(P.Bb(1),P.Pc(P.kc(2,1,"COMMON.ERROR.REQUIRED")))}function St(e,t){if(1&e&&(P.Tb(0,"mat-option",56),P.Oc(1),P.Sb()),2&e){var i=t.$implicit;P.oc("value",i.code),P.Bb(1),P.Qc(" ",i.name," ")}}function gt(e,t){1&e&&(P.Tb(0,"vitamui-common-input-error"),P.Oc(1),P.jc(2,"translate"),P.Sb()),2&e&&(P.Bb(1),P.Qc(" ",P.kc(2,1,"USER.INFORMATIONS.MODAL.SECURITY_STEP.PHONE_FIELD_FORMAT")," "))}function ht(e,t){1&e&&(P.Tb(0,"vitamui-common-input-error"),P.Oc(1),P.jc(2,"translate"),P.Sb()),2&e&&(P.Bb(1),P.Qc(" ",P.kc(2,1,"COMMON.ERROR.REQUIRED"),""))}function Ot(e,t){1&e&&(P.Tb(0,"vitamui-common-input-error"),P.Oc(1),P.jc(2,"translate"),P.Sb()),2&e&&(P.Bb(1),P.Pc(P.kc(2,1,"USER.INFORMATIONS.MODAL.SECURITY_STEP.PHONE_FIELD_FORMAT")))}var Tt,Et=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,It=((Tt=function(){function e(t,i,n,r,o,a,c,l,u,s,b){f(this,e),this.dialogRef=t,this.data=i,this.formBuilder=n,this.userService=r,this.userInfoService=o,this.authService=a,this.userCreateValidators=c,this.confirmDialogService=l,this.countryService=u,this.startupService=s,this.loggerService=b,this.groups=[],this.stepIndex=0,this.addressEmpty=!0,this.creating=!1,this.stepCount=4}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.fullGroup=this.data.groups,this.groups=this.fullGroup.map((function(e){return{id:e.id,name:e.name,description:e.description,selected:!1,profiles:e.profiles,level:e.level}})),this.maxStreetLength=this.startupService.getConfigNumberValue("MAX_STREET_LENGTH"),Object(N.Lb)(this.authService.user)||(this.groups=this.groups.filter((function(t){return t.id!==e.authService.user.groupId}))),this.groups.sort((function(e,t){return e.name.toUpperCase()<t.name.toUpperCase()?-1:e.name.toUpperCase()>t.name.toUpperCase()?1:0})),this.customer=this.data.customer,this.connectedUserInfo=this.data.userInfo,this.formEmail=this.formBuilder.group({emailFirstPart:null,domain:[this.customer.emailDomains[0]]}),this.form=this.formBuilder.group({enabled:!0,email:[null,[T.x.required,T.x.pattern(Et)],this.userCreateValidators.uniqueEmail()],firstname:[null,T.x.required],lastname:[null,T.x.required],mobile:[null,[T.x.pattern(/^[+]{1}[0-9]{11,12}$/)]],phone:[null,[T.x.pattern(/^[+]{1}[0-9]{11,12}$/)]],domain:[this.customer.emailDomains[0],T.x.required],groupId:[null,T.x.required],customerId:this.authService.user.customerId,otp:[{value:this.customer.otp!==N.Y.DEACTIVATED,disabled:this.customer.otp!==N.Y.OPTIONAL}],type:[{value:"NOMINATIVE",disabled:!this.connectedUserInfo.genericAllowed}],subrogeable:!1,status:null,userInfoId:null,address:this.formBuilder.group({street:[null,T.x.maxLength(this.maxStreetLength)],zipCode:[null],city:[null],country:["FR"]}),internalCode:[null],siteCode:[null],centerCodes:[null],autoProvisioningEnabled:!1},{validator:et.missingPhoneNumber}),this.applyUserProfile(),this.onChanges(),this.keyPressSubscription=this.confirmDialogService.listenToEscapeKeyPress(this.dialogRef).subscribe((function(){return e.onCancel()})),this.form.get("address").valueChanges.pipe(Object(X.a)((function(e){return!e.street&&!e.zipCode&&!e.city})),Object(Je.a)()).subscribe((function(t){e.addressEmpty=t,t?(e.form.get("address.street").clearValidators(),e.form.get("address.zipCode").clearValidators(),e.form.get("address.city").clearValidators()):(e.form.get("address.street").setValidators(T.x.required),e.form.get("address.zipCode").setValidators(T.x.required),e.form.get("address.city").setValidators(T.x.required)),e.form.get("address").updateValueAndValidity({emitEvent:!1})})),this.countryService.getAvailableCountries().subscribe((function(t){e.countries=t}))}},{key:"ngOnDestroy",value:function(){this.keyPressSubscription.unsubscribe()}},{key:"applyUserProfile",value:function(){var e=this;"NONE"===this.connectedUserInfo.type?(this.form.get("enabled").setValue(!1),this.form.get("enabled").disable(),this.form.get("groupId").setValidators(null),this.form.updateValueAndValidity({emitEvent:!1})):"LIST"===this.connectedUserInfo.type&&(this.groups=this.connectedUserInfo.profilGroup.map((function(t){var i=e.groups.find((function(e){return e.id===t.id}));return Object({id:t.id,name:t.name,description:t.description,selected:!1,profiles:null==i?void 0:i.profiles})})),this.groups.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})))}},{key:"onCancel",value:function(){this.form.dirty?this.confirmDialogService.confirmBeforeClosing(this.dialogRef):this.dialogRef.close()}},{key:"onSubmit",value:function(){var e,t=this;this.form.invalid||(this.creating=!0,e=this.form.get("enabled").value?"ENABLED":"DISABLED",this.form.get("status").setValue(e),this.userInfoService.create({id:null,language:this.customer.language}).subscribe((function(e){t.form.get("userInfoId").setValue(e.id),t.userService.create(t.form.getRawValue()).subscribe((function(){return t.dialogRef.close(!0)}),(function(e){t.creating=!1,t.loggerService.error(e)}))}),(function(e){t.creating=!1,t.loggerService.error(e)})))}},{key:"onChanges",value:function(){var e=this;this.formEmail.valueChanges.subscribe((function(t){e.form.patchValue({email:t.emailFirstPart+"@"+t.domain})}))}},{key:"firstStepInvalid",value:function(){return this.form.pending||this.form.get("email").invalid||this.form.get("email").pending||this.form.get("firstname").invalid||this.form.get("lastname").invalid||this.form.get("domain").invalid||this.form.get("enabled").invalid}},{key:"thirdStepInvalid",value:function(){return this.form.get("address").pending||this.form.get("address").invalid||this.form.get("internalCode").pending||this.form.get("internalCode").invalid}},{key:"passGroupStep",value:function(){this.stepIndex=2}},{key:"formInvalid",value:function(){return this.form.pending||this.form.invalid}},{key:"updateGroup",value:function(e){var t=e;this.groupName=t.name,this.form.patchValue({groupId:t.id})}}]),e}()).\u0275fac=function(e){return new(e||Tt)(P.Nb(E.g),P.Nb(E.a),P.Nb(T.d),P.Nb(W),P.Nb(z),P.Nb(N.k),P.Nb(ae),P.Nb(N.t),P.Nb(N.u),P.Nb(N.lb),P.Nb(N.U))},Tt.\u0275cmp=P.Hb({type:Tt,selectors:[["app-user-create"]],decls:155,vars:127,consts:[[1,"header"],[3,"index","count"],[3,"formGroup","ngSubmit"],[3,"selectedIndex","selectionChange"],[1,"content"],[1,"text","large","bold"],[1,"mt-4"],["formControlName","enabled"],[4,"ngIf"],[1,"d-flex","mt-2"],["formControlName","lastname","minlength","2","maxlength","50","required","",1,"col-5","p-0",3,"placeholder"],["formControlName","firstname","minlength","2","maxlength","50","required","",1,"col-5","ml-3","p-0",3,"placeholder"],[3,"formGroup"],[1,"d-flex"],["formControlName","emailFirstPart","maxlength","50","required","",1,"col-6","p-0",3,"placeholder"],[1,"mx-2","mt-1"],[1,"vitamui-mat-select"],["formControlName","domain","required","","panelClass","vitamui-mat-select"],[3,"value",4,"ngFor","ngForOf"],[1,"select-arrow"],[1,"material-icons"],["for","type"],[1,"mt-2"],["formControlName","type",1,"vitamui-button-toggle-group"],["group","matButtonToggleGroup"],["value","NOMINATIVE"],["value","GENERIC"],["formControlName","subrogeable"],["formControlName","autoProvisioningEnabled"],[1,"row","actions"],["type","button","class","btn primary","cdkStepperNext","",3,"disabled",4,"ngIf","ngIfElse"],["noGroup",""],["type","button",1,"btn","cancel","link","ml-1",3,"click"],[1,"mt-3","content"],[3,"groups","selectedGroupEvent"],[1,"actions"],["type","button","cdkStepperNext","",1,"btn","primary",3,"disabled"],["type","button",1,"btn","cancel","link",3,"click"],["type","button","cdkStepperPrevious","",1,"btn","link"],[1,"vitamui-icon","vitamui-icon-chevron-left"],[1,"underline"],["formGroupName","address"],[1,"row"],["formControlName","street",1,"col-12",3,"required","maxlength","placeholder"],["formControlName","zipCode","maxlength","10",1,"col-4",3,"required","placeholder"],["formControlName","city","maxlength","100",1,"col-4",3,"required","placeholder"],[1,"col-4","vitamui-mat-select"],["formControlName","country","panelClass","vitamui-mat-select",3,"placeholder"],["formControlName","centerCode",1,"col-4",3,"placeholder"],["formControlName","siteCode",1,"col-4",3,"placeholder"],["formControlName","internalCode","maxlength","20",1,"col-4",3,"placeholder"],["formControlName","otp"],[1,"d-flex","mt-3"],["formControlName","mobile",1,"col-5","p-0","mr-4",3,"placeholder"],["formControlName","phone",1,"col-5","p-0",3,"placeholder"],["type","submit",1,"btn","primary",3,"disabled"],[3,"value"],["type","button",1,"btn","primary",3,"disabled","click"]],template:function(e,t){if(1&e&&(P.Tb(0,"div",0),P.Ob(1,"vitamui-common-progress-bar",1),P.Sb(),P.Tb(2,"form",2),P.ec("ngSubmit",(function(){return t.onSubmit()})),P.Tb(3,"vitamui-common-stepper",3),P.ec("selectionChange",(function(e){return t.stepIndex=e.selectedIndex})),P.Tb(4,"cdk-step"),P.Tb(5,"div",4),P.Tb(6,"div",5),P.Oc(7),P.jc(8,"translate"),P.Sb(),P.Tb(9,"div",6),P.Tb(10,"vitamui-common-slide-toggle",7),P.Mc(11,nt,3,3,"span",8),P.Mc(12,rt,3,3,"span",8),P.Sb(),P.Sb(),P.Tb(13,"div",9),P.Tb(14,"vitamui-common-input",10),P.jc(15,"translate"),P.Mc(16,ot,3,3,"vitamui-common-input-error",8),P.Sb(),P.Tb(17,"vitamui-common-input",11),P.jc(18,"translate"),P.Mc(19,at,3,3,"vitamui-common-input-error",8),P.Sb(),P.Sb(),P.Tb(20,"form",12),P.Tb(21,"div",13),P.Tb(22,"vitamui-common-input",14),P.jc(23,"translate"),P.Mc(24,st,4,3,"ng-container",8),P.Sb(),P.Tb(25,"h4",15),P.Oc(26,"@"),P.Sb(),P.Tb(27,"mat-form-field",16),P.Tb(28,"mat-select",17),P.Mc(29,bt,2,2,"mat-option",18),P.Sb(),P.Tb(30,"div",19),P.Tb(31,"i",20),P.Oc(32,"keyboard_arrow_up"),P.Sb(),P.Tb(33,"i",20),P.Oc(34,"keyboard_arrow_down"),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(35,"div"),P.Tb(36,"label",21),P.Oc(37),P.jc(38,"translate"),P.Sb(),P.Tb(39,"div",22),P.Tb(40,"mat-button-toggle-group",23,24),P.Tb(42,"mat-button-toggle",25),P.Oc(43),P.jc(44,"translate"),P.Sb(),P.Tb(45,"mat-button-toggle",26),P.Oc(46),P.jc(47,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(48,"div",6),P.Tb(49,"vitamui-common-slide-toggle",27),P.Oc(50),P.jc(51,"translate"),P.Sb(),P.Sb(),P.Tb(52,"div",6),P.Tb(53,"vitamui-common-slide-toggle",28),P.Oc(54),P.jc(55,"translate"),P.Sb(),P.Sb(),P.Tb(56,"div",29),P.Mc(57,mt,3,4,"button",30),P.Mc(58,dt,3,4,"ng-template",null,31,P.Nc),P.Tb(60,"button",32),P.ec("click",(function(){return t.onCancel()})),P.Oc(61),P.jc(62,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(63,"cdk-step"),P.Tb(64,"div",33),P.Tb(65,"div"),P.Tb(66,"app-group-list",34),P.ec("selectedGroupEvent",(function(e){return t.updateGroup(e)})),P.Sb(),P.Sb(),P.Tb(67,"div",35),P.Tb(68,"button",36),P.Oc(69),P.jc(70,"translate"),P.Sb(),P.Tb(71,"button",37),P.ec("click",(function(){return t.onCancel()})),P.Oc(72),P.jc(73,"translate"),P.Sb(),P.Sb(),P.Tb(74,"button",38),P.Ob(75,"i",39),P.Rb(76),P.Tb(77,"span",40),P.Oc(78),P.jc(79,"translate"),P.Sb(),P.Qb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(80,"cdk-step"),P.Tb(81,"div",4),P.Tb(82,"div",5),P.Oc(83),P.jc(84,"translate"),P.Sb(),P.Rb(85,41),P.Tb(86,"div",42),P.Tb(87,"vitamui-common-input",43),P.jc(88,"translate"),P.Mc(89,ft,3,3,"vitamui-common-input-error",8),P.Sb(),P.Sb(),P.Tb(90,"div",42),P.Tb(91,"vitamui-common-input",44),P.jc(92,"translate"),P.Mc(93,pt,3,3,"vitamui-common-input-error",8),P.Sb(),P.Tb(94,"vitamui-common-input",45),P.jc(95,"translate"),P.Mc(96,vt,3,3,"vitamui-common-input-error",8),P.Sb(),P.Tb(97,"mat-form-field",46),P.Tb(98,"mat-select",47),P.jc(99,"translate"),P.Mc(100,St,2,2,"mat-option",18),P.Sb(),P.Tb(101,"div",19),P.Tb(102,"i",20),P.Oc(103,"keyboard_arrow_up"),P.Sb(),P.Tb(104,"i",20),P.Oc(105,"keyboard_arrow_down"),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Qb(),P.Tb(106,"div",42),P.Ob(107,"vitamui-common-input",48),P.jc(108,"translate"),P.Ob(109,"vitamui-common-input",49),P.jc(110,"translate"),P.Ob(111,"vitamui-common-input",50),P.jc(112,"translate"),P.Sb(),P.Tb(113,"div",35),P.Tb(114,"button",36),P.Oc(115),P.jc(116,"translate"),P.Sb(),P.Tb(117,"button",37),P.ec("click",(function(){return t.onCancel()})),P.Oc(118),P.jc(119,"translate"),P.Sb(),P.Sb(),P.Tb(120,"button",38),P.Ob(121,"i",39),P.Rb(122),P.Tb(123,"span",40),P.Oc(124),P.jc(125,"translate"),P.Sb(),P.Qb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(126,"cdk-step"),P.Tb(127,"div",4),P.Tb(128,"div",5),P.Oc(129),P.jc(130,"translate"),P.Sb(),P.Tb(131,"vitamui-common-slide-toggle",51),P.Oc(132),P.jc(133,"translate"),P.Sb(),P.Tb(134,"div",52),P.Tb(135,"vitamui-common-input",53),P.jc(136,"translate"),P.Mc(137,gt,3,3,"vitamui-common-input-error",8),P.Mc(138,ht,3,3,"vitamui-common-input-error",8),P.Sb(),P.Tb(139,"vitamui-common-input",54),P.jc(140,"translate"),P.Mc(141,Ot,3,3,"vitamui-common-input-error",8),P.Sb(),P.Sb(),P.Tb(142,"div",35),P.Tb(143,"button",55),P.Oc(144),P.jc(145,"translate"),P.Sb(),P.Tb(146,"button",37),P.ec("click",(function(){return t.onCancel()})),P.Oc(147),P.jc(148,"translate"),P.Sb(),P.Sb(),P.Tb(149,"button",38),P.Ob(150,"i",39),P.Rb(151),P.Tb(152,"span",40),P.Oc(153),P.jc(154,"translate"),P.Sb(),P.Qb(),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Sb()),2&e){var i,n=P.zc(59),r=null,o=null,a=null,c=null,l=null,u=null,s=null,b=null,m=null,d=null;P.Bb(1),P.oc("index",t.stepIndex)("count",t.stepCount),P.Bb(1),P.oc("formGroup",t.form),P.Bb(1),P.oc("selectedIndex",t.stepIndex),P.Bb(4),P.Pc(P.kc(8,65,"USER.INFORMATIONS.MODAL.INFORMATIONS_STEP.TITLE")),P.Bb(4),P.oc("ngIf",!(null!=t.form&&t.form.get("enabled").value)),P.Bb(1),P.oc("ngIf",null==t.form?null:t.form.get("enabled").value),P.Bb(2),P.oc("placeholder",P.kc(15,67,"USER.INFORMATIONS.LASTNAME")),P.Bb(2),P.oc("ngIf",(null==(r=t.form.get("lastname"))?null:r.touched)&&(null==(r=t.form.get("lastname"))?null:r.hasError("required"))),P.Bb(1),P.oc("placeholder",P.kc(18,69,"USER.INFORMATIONS.FIRSTNAME")),P.Bb(2),P.oc("ngIf",(null==(o=t.form.get("firstname"))?null:o.touched)&&(null==(o=t.form.get("firstname"))?null:o.hasError("required"))),P.Bb(1),P.oc("formGroup",t.formEmail),P.Bb(2),P.Fb("ng-pending",null==t.form||null==(a=t.form.get("email"))?null:a.pending)("ng-invalid",null==t.form||null==(c=t.form.get("email"))?null:c.errors),P.oc("placeholder",P.kc(23,71,"USER.INFORMATIONS.MAIL")),P.Bb(2),P.oc("ngIf",null==(i=t.formEmail.get("emailFirstPart"))?null:i.touched),P.Bb(5),P.oc("ngForOf",null==t.customer?null:t.customer.emailDomains),P.Bb(8),P.Qc(" ",P.kc(38,73,"USER.INFORMATIONS.TYPE")," "),P.Bb(6),P.Qc(" ",P.kc(44,75,"USER.INFORMATIONS.MODAL.INFORMATIONS_STEP.GROUP_TYPE_NOMINATIVE")," "),P.Bb(3),P.Qc(" ",P.kc(47,77,"USER.INFORMATIONS.MODAL.INFORMATIONS_STEP.GROUP_TYPE_GENERIC")," "),P.Bb(4),P.Qc("",P.kc(51,79,"USER.INFORMATIONS.ALLOW_SUBROGATION")," "),P.Bb(4),P.Qc("",P.kc(55,81,"USER.INFORMATIONS.ACTIVATE_AUTO_PROVISIONING")," "),P.Bb(3),P.oc("ngIf","NONE"!==t.connectedUserInfo.type)("ngIfElse",n),P.Bb(4),P.Qc(" ",P.kc(62,83,"COMMON.UNDO")," "),P.Bb(5),P.oc("groups",t.groups),P.Bb(2),P.oc("disabled",!t.groupName),P.Bb(1),P.Qc(" ",P.kc(70,85,"COMMON.NEXT")," "),P.Bb(3),P.Pc(P.kc(73,87,"COMMON.UNDO")),P.Bb(6),P.Pc(P.kc(79,89,"COMMON.BACK")),P.Bb(5),P.Pc(P.kc(84,91,"USER.INFORMATIONS.MODAL.CONTACT_STEP.TITLE")),P.Bb(4),P.pc("maxlength",t.maxStreetLength),P.oc("required",!t.addressEmpty)("placeholder",P.kc(88,93,"COMMON.ADRESS.STREET")),P.Bb(2),P.oc("ngIf",(null==(l=t.form.get("address.street"))?null:l.touched)&&(null==(l=t.form.get("address.street"))?null:l.hasError("required"))),P.Bb(2),P.oc("required",!t.addressEmpty)("placeholder",P.kc(92,95,"COMMON.ADRESS.ZIPCODE")),P.Bb(2),P.oc("ngIf",(null==(u=t.form.get("address.zipCode"))?null:u.touched)&&(null==(u=t.form.get("address.zipCode"))?null:u.hasError("required"))),P.Bb(1),P.oc("required",!t.addressEmpty)("placeholder",P.kc(95,97,"COMMON.ADRESS.CITY")),P.Bb(2),P.oc("ngIf",(null==(s=t.form.get("address.city"))?null:s.touched)&&(null==(s=t.form.get("address.city"))?null:s.hasError("required"))),P.Bb(2),P.oc("placeholder",P.kc(99,99,"COMMON.ADRESS.COUNTRY")),P.Bb(2),P.oc("ngForOf",t.countries),P.Bb(7),P.oc("placeholder",P.kc(108,101,"USER.INFORMATIONS.CENTER_CODES")),P.Bb(2),P.oc("placeholder",P.kc(110,103,"USER.INFORMATIONS.SITE_CODE")),P.Bb(2),P.oc("placeholder",P.kc(112,105,"USER.INFORMATIONS.INTERNAL_CODE")),P.Bb(3),P.oc("disabled",t.thirdStepInvalid()),P.Bb(1),P.Qc(" ",P.kc(116,107,"COMMON.NEXT")," "),P.Bb(3),P.Pc(P.kc(119,109,"COMMON.UNDO")),P.Bb(6),P.Pc(P.kc(125,111,"COMMON.BACK")),P.Bb(5),P.Pc(P.kc(130,113,"USER.INFORMATIONS.MODAL.SECURITY_STEP.TITLE")),P.Bb(3),P.Qc("",P.kc(133,115,"USER.INFORMATIONS.VALIDATIONS")," "),P.Bb(3),P.Fb("ng-invalid",null==t.form?null:t.form.hasError("missingPhoneNumber")),P.oc("placeholder",P.kc(136,117,"USER.INFORMATIONS.PHONE.MOBILE")),P.Bb(2),P.oc("ngIf",null==t.form||null==(b=t.form.get("mobile"))?null:b.hasError("pattern")),P.Bb(1),P.oc("ngIf",(null==t.form||null==(m=t.form.get("mobile"))?null:m.touched)&&(null==t.form?null:t.form.hasError("missingPhoneNumber"))),P.Bb(1),P.oc("placeholder",P.kc(140,119,"USER.INFORMATIONS.PHONE.FIX")),P.Bb(2),P.oc("ngIf",null==t.form||null==(d=t.form.get("phone"))?null:d.hasError("pattern")),P.Bb(2),P.oc("disabled",t.formInvalid()||t.creating),P.Bb(1),P.Pc(P.kc(145,121,"COMMON.SUBMIT")),P.Bb(3),P.Pc(P.kc(148,123,"COMMON.UNDO")),P.Bb(6),P.Pc(P.kc(154,125,"COMMON.BACK"))}},directives:[N.dc,T.y,T.r,T.i,N.mb,tt.a,N.ac,T.q,T.g,O.p,N.Qb,T.m,T.l,T.w,B.b,k.a,O.o,A.b,A.a,Re,tt.d,tt.e,T.j,N.Rb,it.k],pipes:[ce.d],styles:[""]}),Tt),yt={status:function(e){var t=e.filter((function(e){return"GENERIC"!==e})),i=[];return t.length>0&&i.push({key:"status",value:t,operator:N.W.in}),e.find((function(e){return"GENERIC"===e}))&&i.push({key:"type",value:"GENERIC",operator:N.W.equals}),[{queryOperator:N.cb.AND,criteria:i}]},level:function(e){return 0===e.length?[]:(e.some((function(e){return null===e}))&&e.push(""),[{key:"level",value:e,operator:N.W.in}])},group:function(e){return 0===e.length?[]:[{key:"groupId",value:e,operator:N.W.in}]}},Nt=["filterTemplate"],Ct=["filterButton"];function Rt(e,t){1&e&&(P.Tb(0,"vitamui-common-table-filter-option",28),P.Tb(1,"div",22),P.Tb(2,"span",23),P.Oc(3),P.jc(4,"translate"),P.Sb(),P.Sb(),P.Sb()),2&e&&(P.oc("separator",!0),P.Bb(3),P.Pc(P.kc(4,2,"USER.HOME.RESULTS_TABLE.STATUS_FILTER.GENERIC")))}function At(e,t){if(1&e){var i=P.Ub();P.Tb(0,"vitamui-common-table-filter",20),P.ec("filterChange",(function(e){return P.Dc(i),P.ic().filterMap.status=e}))("filterChange",(function(e){return P.Dc(i),P.ic().onFilterChange("status",e)})),P.Tb(1,"vitamui-common-table-filter-option",21),P.Tb(2,"div",22),P.Tb(3,"span",23),P.Oc(4),P.jc(5,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Tb(6,"vitamui-common-table-filter-option",24),P.Tb(7,"div",22),P.Tb(8,"span",23),P.Oc(9),P.jc(10,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Tb(11,"vitamui-common-table-filter-option",25),P.Tb(12,"div",22),P.Tb(13,"span",23),P.Oc(14),P.jc(15,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Tb(16,"vitamui-common-table-filter-option",26),P.Tb(17,"div",22),P.Tb(18,"span",23),P.Oc(19),P.jc(20,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Mc(21,Rt,5,4,"vitamui-common-table-filter-option",27),P.Sb()}if(2&e){var n=P.ic();P.oc("filter",n.filterMap.status),P.Bb(4),P.Pc(P.kc(5,6,"USER.HOME.RESULTS_TABLE.STATUS_FILTER.ACTIVE")),P.Bb(5),P.Pc(P.kc(10,8,"USER.HOME.RESULTS_TABLE.STATUS_FILTER.BLOCKED")),P.Bb(5),P.Pc(P.kc(15,10,"USER.HOME.RESULTS_TABLE.STATUS_FILTER.INACTIVE")),P.Bb(5),P.Pc(P.kc(20,12,"USER.HOME.RESULTS_TABLE.STATUS_FILTER.DELETED")),P.Bb(2),P.oc("vitamuiCommonHasAnyRole",n.genericUserRole)}}function Bt(e,t){if(1&e){var i=P.Ub();P.Tb(0,"vitamui-common-table-filter-search",29),P.ec("filterChange",(function(e){return P.Dc(i),P.ic().filterMap.level=e}))("filterChange",(function(e){return P.Dc(i),P.ic().onFilterChange("level",e)}))("filterClose",(function(){P.Dc(i),P.ic();var e=P.zc(28);return null==e?null:e.close()})),P.jc(1,"translate"),P.Sb()}if(2&e){var n=P.ic();P.oc("filter",n.filterMap.level)("options",n.levelFilterOptions)("emptyValueOption",P.kc(1,3,"USER.HOME.RESULTS_TABLE.EMPTY_LEVEL"))}}function Mt(e,t){if(1&e){var i=P.Ub();P.Tb(0,"vitamui-common-table-filter-search",30),P.ec("filterChange",(function(e){return P.Dc(i),P.ic().filterMap.group=e}))("filterChange",(function(e){return P.Dc(i),P.ic().onFilterChange("group",e)}))("filterClose",(function(){P.Dc(i),P.ic();var e=P.zc(39);return null==e?null:e.close()})),P.Sb()}if(2&e){var n=P.ic();P.oc("filter",n.filterMap.group)("options",n.groupFilterOptions)}}function kt(e,t){1&e&&(P.Tb(0,"div"),P.Ob(1,"i",44),P.Sb()),2&e&&(P.Bb(1),P.Jc("font-size",30,"px"))}function Ut(e,t){1&e&&(P.Tb(0,"div"),P.Ob(1,"i",45),P.Sb()),2&e&&(P.Bb(1),P.Jc("font-size",30,"px"))}function Pt(e,t){1&e&&(P.Tb(0,"div"),P.Ob(1,"i",46),P.Sb()),2&e&&(P.Bb(1),P.Jc("font-size",30,"px"))}function Dt(e,t){1&e&&(P.Tb(0,"div"),P.Ob(1,"i",47),P.Tb(2,"span",48),P.Oc(3,"x"),P.Sb(),P.Sb()),2&e&&(P.Bb(1),P.Jc("font-size",30,"px"))}function _t(e,t){if(1&e&&(P.Rb(0),P.Rb(1,41),P.Mc(2,kt,2,2,"div",42),P.Mc(3,Ut,2,2,"div",42),P.Mc(4,Pt,2,2,"div",42),P.Qb(),P.Mc(5,Dt,4,2,"div",43),P.Qb()),2&e){var i=P.ic().$implicit;P.Bb(1),P.oc("ngSwitch",null==i?null:i.status),P.Bb(1),P.oc("ngSwitchCase","ENABLED"),P.Bb(1),P.oc("ngSwitchCase","BLOCKED"),P.Bb(1),P.oc("ngSwitchCase","DISABLED"),P.Bb(1),P.oc("ngIf","REMOVED"===(null==i?null:i.status))}}function jt(e,t){1&e&&P.Ob(0,"i",7),2&e&&P.Jc("font-size",30,"px")}function Lt(e,t){if(1&e){var i=P.Ub();P.Tb(0,"div",33),P.ec("click",(function(){P.Dc(i);var e=t.$implicit;return P.ic(2).userClick.emit(e)})),P.Tb(1,"div",34),P.Tb(2,"div",35),P.Mc(3,_t,6,5,"ng-container",36),P.Mc(4,jt,1,2,"ng-template",null,37,P.Nc),P.Sb(),P.Tb(6,"div",3),P.Tb(7,"div",38),P.Oc(8),P.jc(9,"uppercase"),P.Sb(),P.Tb(10,"span",39),P.Oc(11),P.Sb(),P.Sb(),P.Tb(12,"div",40),P.Oc(13),P.Sb(),P.Tb(14,"div",40),P.Oc(15),P.jc(16,"empty"),P.jc(17,"date"),P.Sb(),P.Tb(18,"div",40),P.Oc(19),P.Sb(),P.Tb(20,"div",40),P.Oc(21),P.Sb(),P.Sb(),P.Sb()}if(2&e){var n,r=t.$implicit,o=P.zc(5),a=P.ic(2);P.Bb(3),P.oc("ngIf","GENERIC"!==(null==r?null:r.type))("ngIfElse",o),P.Bb(5),P.Rc("",P.kc(9,9,null==r?null:r.lastname)," ",null==r?null:r.firstname,""),P.Bb(3),P.Qc(" ",null==r?null:r.email,""),P.Bb(2),P.Pc(null==r?null:r.identifier),P.Bb(2),P.Pc(P.kc(16,11,P.lc(17,13,null==r?null:r.lastConnection,"dd/MM/yyyy"))),P.Bb(4),P.Pc(null==r?null:r.level),P.Bb(2),P.Pc(null==(n=a.getGroup(r))?null:n.name)}}function xt(e,t){if(1&e&&(P.Tb(0,"div",31),P.Mc(1,Lt,22,16,"div",32),P.Sb()),2&e){var i=P.ic();P.Bb(1),P.oc("ngForOf",i.dataSource)}}function wt(e,t){1&e&&P.Ob(0,"div")}function Ft(e,t){1&e&&(P.Tb(0,"div",49),P.Ob(1,"mat-spinner",50),P.Sb())}var Gt,Vt=((Gt=function(e){function t(e,i,n,r,o){var a;return f(this,t),(a=c(this,t,[i])).customerService=e,a.userService=i,a.locale=n,a.authService=r,a.snackBarService=o,a.userClick=new P.n,a.statusFilter=[],a.filterMap={status:[],level:null,group:null},a.groupFilterOptions=[],a.levelFilterOptions=[],a.orderBy="lastname",a.direction=N.x.ASCENDANT,a.isInactifUsers=!1,a.userGroups=[],a.filterChange=new H.a,a.searchChange=new H.a,a.orderChange=new H.a,a.searchKeys=["firstname","lastname","email","mobile","phone","identifier"],a.genericUserRole={appId:N.h.USERS_APP,tenantIdentifier:+a.authService.user.proofTenantIdentifier,roles:[N.db.ROLE_GENERIC_USERS]},a}return u(t,e),m(t,[{key:"searchText",set:function(e){this._searchText=e,this.searchChange.next(e)}},{key:"connectedUserInfo",get:function(){return this._connectedUserInfo},set:function(e){this._connectedUserInfo=e}},{key:"groups",get:function(){return this._groups},set:function(e){var t=this;this._groups=e,e&&(this.updateData(e),this.updatedData.subscribe((function(){t.updateData(e)})))}},{key:"ngOnInit",value:function(){var e=this;this.search(new N.Z(0,N.w,this.orderBy,N.x.ASCENDANT)),this.refreshLevelOptions(),this.updatedUserSub=this.userService.userUpdated.subscribe((function(t){var i=e.dataSource.findIndex((function(e){return t.id===e.id}));i>-1&&e.userService.get(t.id).subscribe((function(t){e.dataSource[i]=t}))})),Object(Z.a)(this.searchChange,this.filterChange,this.orderChange).pipe(Object(ee.a)(400)).subscribe((function(){var t,n={criteria:[].concat(i((t=e.filterMap,Object(N.Eb)(t,yt))),i(Object(N.Fb)(e._searchText,e.searchKeys)))},r=new N.Z(0,N.w,e.orderBy,e.direction,JSON.stringify(n));e.search(r)}))}},{key:"updateData",value:function(e){var t=this;new Set(this.dataSource.map((function(e){return e.groupId}))).forEach((function(i){if(!t.userGroups.find((function(e){return e.id===i}))){var n=e.find((function(e){return e.id===i}));n&&t.userGroups.push({id:n.id,group:n})}})),this.groupFilterOptions=this.userGroups.map((function(e){return{value:e.id,label:e.group.name}})),this.groupFilterOptions.sort(Ht(this.locale))}},{key:"refreshLevelOptions",value:function(e){var t=this;this.userService.getLevelsNoEmpty(e).subscribe((function(e){t.levelFilterOptions=e.map((function(e){return{value:e,label:e}})),t.levelFilterOptions.sort(Ht(t.locale))}))}},{key:"ngOnDestroy",value:function(){this.updatedUserSub.unsubscribe(),this.updatedData.unsubscribe()}},{key:"getGroup",value:function(e){return this.groups.find((function(t){return t.id===e.groupId}))||void 0}},{key:"onFilterChange",value:function(e,t){this.filterMap[e]=t,this.filterChange.next(this.filterMap)}},{key:"emitOrderChange",value:function(){this.orderChange.next()}},{key:"showUser",value:function(e){"REMOVED"===e.status?this.snackBarService.open({message:"SHARED.SNACKBAR.USER_ALREADY_DELETED",icon:"vitamui-icon-bank"}):this.userClick.emit(e)}},{key:"checkInactifUsers",value:function(){var e=this;this.customerService.getMyCustomer().subscribe((function(t){t.gdprAlert&&(e.dataSource.filter((function(e){return"DISABLED"===e.status&&null!==e.disablingDate})).forEach((function(i){e.totalMonth=12*((new Date).getFullYear()-new Date(i.disablingDate).getFullYear())-new Date(i.disablingDate).getMonth()+(new Date).getMonth(),e.totalMonth>t.gdprAlertDelay&&i.email.split("@")[1]===t.defaultEmailDomain&&(e.isInactifUsers=!0)})),e.isInactifUsers&&e.snackBarService.open({message:"SHARED.SNACKBAR.USER_TO_DELETE",icon:"vitamui-icon-bank"}))}))}}]),t}(N.O)).\u0275fac=function(e){return new(e||Gt)(P.Nb(Xe.a),P.Nb(W),P.Nb(P.v),P.Nb(N.k),P.Nb(N.Ab))},Gt.\u0275cmp=P.Hb({type:Gt,selectors:[["app-user-list"]],viewQuery:function(e,t){var i;1&e&&(P.Uc(Nt,!0),P.Uc(Ct,!0)),2&e&&(P.yc(i=P.fc())&&(t.filterTemplate=i.first),P.yc(i=P.fc())&&(t.filterButton=i.first))},inputs:{searchText:["search","searchText"],connectedUserInfo:"connectedUserInfo",groups:"groups"},outputs:{userClick:"userClick"},features:[P.yb],decls:51,vars:39,consts:[["vitamuiCommonInfiniteScroll","",3,"vitamuiScroll"],[1,"vitamui-table"],[1,"vitamui-table-head"],[1,"col-2"],[1,"vitamui-filter-button",3,"vitamuiCommonTableFilter"],[1,"material-icons","vitamui-row-icon"],["statusFilterTemplate",""],[1,"vitamui-icon","vitamui-icon-user","vitamui-row-icon"],["orderByKey","status",3,"orderBy","direction","orderByChange","directionChange","orderChange"],["orderByKey","lastname",3,"orderBy","direction","orderByChange","directionChange","orderChange"],["orderByKey","identifier",3,"orderBy","direction","orderByChange","directionChange","orderChange"],["orderByKey","lastConnection",3,"orderBy","direction","orderByChange","directionChange","orderChange"],["levelFilterTrigger","vitamuiCommonTableFilter"],["levelFilterTemplate",""],["orderByKey","level",3,"orderBy","direction","orderByChange","directionChange","orderChange"],["groupFilterTrigger","vitamuiCommonTableFilter"],["groupFilterTemplate",""],["class","vitamui-table-body",4,"ngIf"],[4,"ngIf","ngIfThen"],["loadingSpinner",""],[3,"filter","filterChange"],["value","ENABLED"],[1,"table-filter-icon"],[1,"badge-state"],["value","BLOCKED"],["value","DISABLED"],["value","REMOVED"],["value","GENERIC",3,"separator",4,"vitamuiCommonHasAnyRole"],["value","GENERIC",3,"separator"],[3,"filter","options","emptyValueOption","filterChange","filterClose"],[3,"filter","options","filterChange","filterClose"],[1,"vitamui-table-body"],["class","vitamui-table-rows",3,"click",4,"ngFor","ngForOf"],[1,"vitamui-table-rows",3,"click"],[1,"vitamui-row","d-flex","align-items-center","clickable"],[1,"col-2","padding-user"],[4,"ngIf","ngIfElse"],["genericUserIcon",""],["vitamuiCommonEllipsis",""],["vitamuiCommonEllipsis","",1,"email"],["vitamuiCommonEllipsis","",1,"col-2"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngIf"],[1,"vitamui-icon","vitamui-icon-user","vitamui-row-icon","status-badge","status-badge-green","close"],[1,"vitamui-icon","vitamui-icon-user","vitamui-row-icon","status-badge","status-badge-orange"],[1,"vitamui-icon","vitamui-icon-user","vitamui-row-icon","status-badge","status-badge-grey"],[1,"vitamui-icon","vitamui-icon-user","vitamui-row-icon","parent"],[1,"status-badge-anonym"],[1,"vitamui-min-content"],[1,"vitamui-spinner","medium"]],template:function(e,t){if(1&e&&(P.Tb(0,"div",0),P.ec("vitamuiScroll",(function(){return t.onScroll()})),P.Tb(1,"div",1),P.Tb(2,"div",2),P.Tb(3,"div",3),P.Tb(4,"button",4),P.Tb(5,"i",5),P.Oc(6,"filter_list"),P.Sb(),P.Sb(),P.Mc(7,At,22,14,"ng-template",null,6,P.Nc),P.Ob(9,"i",7),P.Tb(10,"vitamui-common-order-by-button",8),P.ec("orderByChange",(function(e){return t.orderBy=e}))("directionChange",(function(e){return t.direction=e}))("orderChange",(function(){return t.emitOrderChange()})),P.Sb(),P.Sb(),P.Tb(11,"div",3),P.Tb(12,"span"),P.Oc(13),P.jc(14,"translate"),P.Sb(),P.Tb(15,"vitamui-common-order-by-button",9),P.ec("orderByChange",(function(e){return t.orderBy=e}))("directionChange",(function(e){return t.direction=e}))("orderChange",(function(){return t.emitOrderChange()})),P.Sb(),P.Sb(),P.Tb(16,"div",3),P.Tb(17,"span"),P.Oc(18),P.jc(19,"translate"),P.Sb(),P.Tb(20,"vitamui-common-order-by-button",10),P.ec("orderByChange",(function(e){return t.orderBy=e}))("directionChange",(function(e){return t.direction=e}))("orderChange",(function(){return t.emitOrderChange()})),P.Sb(),P.Sb(),P.Tb(21,"div",3),P.Tb(22,"span"),P.Oc(23),P.jc(24,"translate"),P.Sb(),P.Tb(25,"vitamui-common-order-by-button",11),P.ec("orderByChange",(function(e){return t.orderBy=e}))("directionChange",(function(e){return t.direction=e}))("orderChange",(function(){return t.emitOrderChange()})),P.Sb(),P.Sb(),P.Tb(26,"div",3),P.Tb(27,"button",4,12),P.Tb(29,"i",5),P.Oc(30,"filter_list"),P.Sb(),P.Sb(),P.Mc(31,Bt,2,5,"ng-template",null,13,P.Nc),P.Tb(33,"span"),P.Oc(34),P.jc(35,"translate"),P.Sb(),P.Tb(36,"vitamui-common-order-by-button",14),P.ec("orderByChange",(function(e){return t.orderBy=e}))("directionChange",(function(e){return t.direction=e}))("orderChange",(function(){return t.emitOrderChange()})),P.Sb(),P.Sb(),P.Tb(37,"div",3),P.Tb(38,"button",4,15),P.Tb(40,"i",5),P.Oc(41,"filter_list"),P.Sb(),P.Sb(),P.Mc(42,Mt,1,2,"ng-template",null,16,P.Nc),P.Tb(44,"span"),P.Oc(45),P.jc(46,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Mc(47,xt,2,1,"div",17),P.Sb(),P.Mc(48,wt,1,0,"div",18),P.Sb(),P.Mc(49,Ft,2,0,"ng-template",null,19,P.Nc)),2&e){var i=P.zc(8),n=P.zc(32),r=P.zc(43),o=P.zc(50);P.Bb(4),P.Fb("active",t.filterMap.status&&t.filterMap.status.length>0),P.oc("vitamuiCommonTableFilter",i),P.Bb(5),P.Jc("font-size",30,"px"),P.Bb(1),P.oc("orderBy",t.orderBy)("direction",t.direction),P.Bb(3),P.Pc(P.kc(14,29,"USER.HOME.RESULTS_TABLE.NAME")),P.Bb(2),P.oc("orderBy",t.orderBy)("direction",t.direction),P.Bb(3),P.Pc(P.kc(19,31,"COMMON.ID")),P.Bb(2),P.oc("orderBy",t.orderBy)("direction",t.direction),P.Bb(3),P.Pc(P.kc(24,33,"USER.HOME.RESULTS_TABLE.LAST_CONNEXION")),P.Bb(2),P.oc("orderBy",t.orderBy)("direction",t.direction),P.Bb(2),P.Fb("active",t.filterMap.level&&t.filterMap.level.length>0),P.oc("vitamuiCommonTableFilter",n),P.Bb(7),P.Pc(P.kc(35,35,"USER.HOME.RESULTS_TABLE.GROUP_LEVEL")),P.Bb(2),P.oc("orderBy",t.orderBy)("direction",t.direction),P.Bb(2),P.Fb("active",t.filterMap.group&&t.filterMap.group.length>0),P.oc("vitamuiCommonTableFilter",r),P.Bb(7),P.Pc(P.kc(46,37,"USER.HOME.RESULTS_TABLE.GROUP")),P.Bb(2),P.oc("ngIf",t.groups),P.Bb(1),P.oc("ngIf",!t.dataSource||t.pending||!t.groups)("ngIfThen",o)}},directives:[N.N,N.qb,N.X,O.p,N.pb,N.bc,N.gc,N.sb,O.o,N.Zb,O.r,O.s,_.b],pipes:[ce.d,O.z,N.oc,O.e],styles:[".parent[_ngcontent-%COMP%]{position:relative}.status-badge-anonym[_ngcontent-%COMP%]{box-shadow:0 1px 4px rgba(var(--vitamui-grey-rgb),.2),0 2px 8px rgba(var(--vitamui-grey-rgb),.05);font-family:Helvetica,sans-serif;font-size:10px;font-weight:200;color:#fff;width:16px;height:16px;display:block;position:absolute;margin-left:15px;margin-top:-9px;padding:0 3px 3px 4px;border-radius:50%;background-color:var(--vitamui-grey-600);border:2px solid #fff}span.email[_ngcontent-%COMP%]{font-size:14px;text-align:left;font-weight:400;color:var(--vitamui-grey-600)}vitamui-common-table-filter-option[_ngcontent-%COMP%]   .vitamui-icon[_ngcontent-%COMP%]{font-size:24px;color:var(--vitamui-grey);margin-right:15px}.table-filter-icon[_ngcontent-%COMP%]{display:flex;align-items:center}.table-filter-icon[_ngcontent-%COMP%]   span.badge-state[_ngcontent-%COMP%]{color:var(--vitamui-grey-900);margin-left:18px;font-size:14px;line-height:22px;letter-spacing:.1px}.vitamui-table-head[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:nowrap}.padding-user[_ngcontent-%COMP%]{padding-left:2.5rem}.text-right[_ngcontent-%COMP%]{text-align:right}"],data:{animation:[N.Hb,N.Ob]}}),Gt);function Ht(e){return function(t,i){return t.label.localeCompare(i.label,e)}}function Qt(e,t){if(1&e){var i=P.Ub();P.Tb(0,"app-user-preview",10),P.ec("previewClose",(function(){return P.Dc(i),P.ic().closePanel()})),P.Sb()}if(2&e){var n=P.ic();P.oc("user",n.openedItem)("customer",n.customer)("groups",n.groups)}}function zt(e,t){if(1&e){var i=P.Ub();P.Tb(0,"button",11),P.ec("click",(function(){return P.Dc(i),P.ic().openCreateUserDialog()})),P.Tb(1,"span"),P.Oc(2),P.jc(3,"translate"),P.Sb(),P.Sb()}if(2&e){var n=P.ic();P.oc("disabled",!n.connectedUserInfo.createUser),P.Bb(2),P.Pc(P.kc(3,2,"USER.HOME.ACTION_BUTTON"))}}var qt,Kt,Yt,Xt=[{path:"",component:(qt=function(e){function t(e,i,n,r,o,a,l,u,s){var b;return f(this,t),(b=c(this,t,[n,o])).dialog=e,b.userService=i,b.route=n,b.customerService=r,b.globalEventService=o,b.groupService=a,b.authService=l,b.downloadSnackBarService=u,b.snackBarService=s,b.exportLoading=!1,b}return u(t,e),m(t,[{key:"ngOnInit",value:function(){var e=this;this.customerService.getMyCustomer().subscribe((function(t){return e.customer=t})),this.groupService.getAll(!0).subscribe((function(t){return e.groups=t})),this.connectedUserInfo=this.userService.getUserProfileInfo(this.authService.user)}},{key:"openCreateUserDialog",value:function(){var e=this;this.dialog.open(It,{panelClass:"vitamui-modal",disableClose:!0,data:{userInfo:this.connectedUserInfo,customer:this.customer,groups:this.groups}}).afterClosed().subscribe((function(t){t&&e.refreshList()}))}},{key:"onSearchSubmit",value:function(e){this.search=e}},{key:"export",value:function(){var e=this;this.exportLoading=!0,this.downloadSnackBarService.openDownloadBar();var t=this.userService.export().subscribe((function(t){var i="export-utilisateurs-"+e.buildExportDateTime()+".xlsx";N.z.loadFromBlob(t,t.body.type,i),e.downloadSnackBarService.close(),e.exportLoading=!1,e.snackBarService.open({message:"SHARED.SNACKBAR.USER_EXPORT_SUCCESS"})}),(function(){e.downloadSnackBarService.close(),e.exportLoading=!1}));this.downloadSnackBarService.cancelDownload.subscribe((function(){return t.unsubscribe()}))}},{key:"buildExportDateTime",value:function(){var e=(new Date).toLocaleTimeString().replace(":","_"),t=(new Date).toISOString();return t.substring(0,t.indexOf("T")+1)+e}},{key:"refreshList",value:function(){this.userListComponent&&this.userListComponent.search(new N.Z(0,N.w,"lastname",N.x.ASCENDANT))}}]),t}(N.kb),qt.\u0275fac=function(e){return new(e||qt)(P.Nb(E.b),P.Nb(W),P.Nb(j.a),P.Nb(Xe.a),P.Nb(N.M),P.Nb(Y.a),P.Nb(N.k),P.Nb(Ze.a),P.Nb(N.Ab))},qt.\u0275cmp=P.Hb({type:qt,selectors:[["app-user"]],viewQuery:function(e,t){var i;1&e&&P.Ic(Vt,!0),2&e&&P.yc(i=P.fc())&&(t.userListComponent=i.first)},features:[P.yb],decls:18,vars:18,consts:[[3,"autosize","hasBackdrop"],["mode","side","position","end",3,"fixedInViewport"],["panel",""],[3,"user","customer","groups","previewClose",4,"ngIf"],[1,"vitamui-heading"],[3,"searchbarPlaceholder","search"],["class","btn primary mr-3",3,"disabled","click",4,"ngIf"],[1,"btn","secondary",3,"disabled","click"],[1,"vitamui-content"],[3,"search","connectedUserInfo","groups","userClick"],[3,"user","customer","groups","previewClose"],[1,"btn","primary","mr-3",3,"disabled","click"]],template:function(e,t){1&e&&(P.Tb(0,"mat-sidenav-container",0),P.Tb(1,"mat-sidenav",1,2),P.Mc(3,Qt,1,3,"app-user-preview",3),P.Sb(),P.Tb(4,"mat-sidenav-content"),P.Tb(5,"div",4),P.Tb(6,"vitamui-common-title-breadcrumb"),P.Oc(7),P.jc(8,"translate"),P.Sb(),P.Tb(9,"vitamui-common-banner",5),P.ec("search",(function(e){return t.onSearchSubmit(e)})),P.jc(10,"translate"),P.Mc(11,zt,4,4,"button",6),P.Tb(12,"button",7),P.ec("click",(function(){return t.export()})),P.Tb(13,"span"),P.Oc(14),P.jc(15,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(16,"div",8),P.Tb(17,"app-user-list",9),P.ec("userClick",(function(e){return t.openPanel(e)})),P.Sb(),P.Sb(),P.Sb(),P.Sb()),2&e&&(P.oc("autosize",!0)("hasBackdrop",!1),P.Bb(1),P.oc("fixedInViewport",!0),P.Bb(2),P.oc("ngIf",t.openedItem),P.Bb(4),P.Qc(" ",P.kc(8,12,"APPLICATION.USERS_APP.TITLE")," "),P.Bb(2),P.oc("searchbarPlaceholder",P.kc(10,14,"USER.HOME.TITLE_PLACEHOLDER")),P.Bb(2),P.oc("ngIf",t.groups),P.Bb(1),P.oc("disabled",t.exportLoading),P.Bb(2),P.Pc(P.kc(15,16,"USER.HOME.EXPORT")),P.Bb(3),P.oc("search",t.search)("connectedUserInfo",t.connectedUserInfo)("groups",t.groups))},directives:[y.b,y.a,O.p,y.c,N.cc,N.jc,Vt,Ye],pipes:[ce.d],styles:[""]}),qt)},{path:":id",component:$e,resolve:{user:We}}],$t=((Yt=m((function e(){f(this,e)}))).\u0275mod=P.Lb({type:Yt}),Yt.\u0275inj=P.Kb({factory:function(e){return new(e||Yt)},imports:[[O.c,j.g.forChild(Xt)],j.g]}),Yt),Wt=((Kt=m((function e(){f(this,e)}))).\u0275mod=P.Lb({type:Kt}),Kt.\u0275inj=P.Kb({factory:function(e){return new(e||Kt)},imports:[[O.c,N.xb,C.a,D,L,E.f,I.b,F,R.a,y.d,T.k,$t]]}),Kt)}}])}();