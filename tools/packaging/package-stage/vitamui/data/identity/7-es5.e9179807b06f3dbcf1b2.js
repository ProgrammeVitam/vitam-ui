!function(){var e,t,n,i,o,r,a,c,l,s;function u(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t,n){return(t=k(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r,a,c=[],l=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=r.call(n)).done)&&(c.push(i.value),c.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function h(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function f(e,t,n){return t=O(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],O(e).constructor):t.apply(e,n))}function v(){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=g(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}function T(e,t){return(T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,k(i.key),i)}}function y(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function k(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{d7gL:function(p,g,T){"use strict";T.r(g),T.d(g,"CustomerModule",(function(){return La}));var C=T("2kYt"),k=T("OZ4H"),A=T("Jb3d"),E=T("lQ7A"),R=T("OWX3"),I=T("PCNd"),B=T("nIj0"),N=T("jdnZ"),w=T("29Wa"),x=T("Cd2c"),P=T("R7+U"),D=T("W1gw"),j=T("66mq"),U=T("csyo"),F=T("KZIX"),L=T("Y2X+"),V=T("sEIs"),q=T("2J8+"),_=T("EM62"),G=["dialogPopup"],H=["hueSlider"],K=["alphaSlider"];function W(e,t){if(1&e&&_.Ob(0,"div"),2&e){var n=_.ic();_.Eb("arrow arrow-",n.cpUsePosition,""),_.Jc("top",n.arrowTop,"px")}}function Y(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",26),_.ec("newValue",(function(e){return _.Dc(n),_.ic().onColorChange(e)}))("dragStart",(function(){return _.Dc(n),_.ic().onDragStart("saturation-lightness")}))("dragEnd",(function(){return _.Dc(n),_.ic().onDragEnd("saturation-lightness")})),_.Ob(1,"div",13),_.Sb()}if(2&e){var i=_.ic();_.Jc("background-color",i.hueSliderColor),_.oc("rgX",1)("rgY",1),_.Bb(1),_.Jc("top",null==i.slider?null:i.slider.v,"px")("left",null==i.slider?null:i.slider.s,"px")}}function z(e,t){if(1&e){var n=_.Ub();_.Tb(0,"button",27),_.ec("click",(function(e){_.Dc(n);var t=_.ic();return t.onAddPresetColor(e,t.selectedColor)})),_.Oc(1),_.Sb()}if(2&e){var i=_.ic();_.Db(i.cpAddColorButtonClass),_.oc("disabled",i.cpPresetColors&&i.cpPresetColors.length>=i.cpMaxPresetColorsLength),_.Bb(1),_.Qc(" ",i.cpAddColorButtonText," ")}}function Q(e,t){1&e&&_.Ob(0,"div",28)}function X(e,t){if(1&e){var n=_.Ub();_.Tb(0,"input",34),_.ec("keyup.enter",(function(e){return _.Dc(n),_.ic(2).onAcceptColor(e)}))("newValue",(function(e){return _.Dc(n),_.ic(2).onAlphaInput(e)})),_.Sb()}if(2&e){var i=_.ic(2);_.oc("rg",1)("value",null==i.cmykText?null:i.cmykText.a)}}function J(e,t){1&e&&(_.Tb(0,"div"),_.Oc(1,"A"),_.Sb())}function Z(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",29),_.Tb(1,"div",30),_.Tb(2,"input",31),_.ec("keyup.enter",(function(e){return _.Dc(n),_.ic().onAcceptColor(e)}))("newValue",(function(e){return _.Dc(n),_.ic().onCyanInput(e)})),_.Sb(),_.Tb(3,"input",31),_.ec("keyup.enter",(function(e){return _.Dc(n),_.ic().onAcceptColor(e)}))("newValue",(function(e){return _.Dc(n),_.ic().onMagentaInput(e)})),_.Sb(),_.Tb(4,"input",31),_.ec("keyup.enter",(function(e){return _.Dc(n),_.ic().onAcceptColor(e)}))("newValue",(function(e){return _.Dc(n),_.ic().onYellowInput(e)})),_.Sb(),_.Tb(5,"input",31),_.ec("keyup.enter",(function(e){return _.Dc(n),_.ic().onAcceptColor(e)}))("newValue",(function(e){return _.Dc(n),_.ic().onBlackInput(e)})),_.Sb(),_.Mc(6,X,1,2,"input",32),_.Sb(),_.Tb(7,"div",30),_.Tb(8,"div"),_.Oc(9,"C"),_.Sb(),_.Tb(10,"div"),_.Oc(11,"M"),_.Sb(),_.Tb(12,"div"),_.Oc(13,"Y"),_.Sb(),_.Tb(14,"div"),_.Oc(15,"K"),_.Sb(),_.Mc(16,J,2,0,"div",33),_.Sb(),_.Sb()}if(2&e){var i=_.ic();_.Jc("display",3!==i.format?"none":"block"),_.Bb(2),_.oc("rg",100)("value",null==i.cmykText?null:i.cmykText.c),_.Bb(1),_.oc("rg",100)("value",null==i.cmykText?null:i.cmykText.m),_.Bb(1),_.oc("rg",100)("value",null==i.cmykText?null:i.cmykText.y),_.Bb(1),_.oc("rg",100)("value",null==i.cmykText?null:i.cmykText.k),_.Bb(1),_.oc("ngIf","disabled"!==i.cpAlphaChannel),_.Bb(10),_.oc("ngIf","disabled"!==i.cpAlphaChannel)}}function $(e,t){if(1&e){var n=_.Ub();_.Tb(0,"input",34),_.ec("keyup.enter",(function(e){return _.Dc(n),_.ic(2).onAcceptColor(e)}))("newValue",(function(e){return _.Dc(n),_.ic(2).onAlphaInput(e)})),_.Sb()}if(2&e){var i=_.ic(2);_.oc("rg",1)("value",null==i.hslaText?null:i.hslaText.a)}}function ee(e,t){1&e&&(_.Tb(0,"div"),_.Oc(1,"A"),_.Sb())}function te(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",35),_.Tb(1,"div",30),_.Tb(2,"input",36),_.ec("keyup.enter",(function(e){return _.Dc(n),_.ic().onAcceptColor(e)}))("newValue",(function(e){return _.Dc(n),_.ic().onHueInput(e)})),_.Sb(),_.Tb(3,"input",31),_.ec("keyup.enter",(function(e){return _.Dc(n),_.ic().onAcceptColor(e)}))("newValue",(function(e){return _.Dc(n),_.ic().onSaturationInput(e)})),_.Sb(),_.Tb(4,"input",31),_.ec("keyup.enter",(function(e){return _.Dc(n),_.ic().onAcceptColor(e)}))("newValue",(function(e){return _.Dc(n),_.ic().onLightnessInput(e)})),_.Sb(),_.Mc(5,$,1,2,"input",32),_.Sb(),_.Tb(6,"div",30),_.Tb(7,"div"),_.Oc(8,"H"),_.Sb(),_.Tb(9,"div"),_.Oc(10,"S"),_.Sb(),_.Tb(11,"div"),_.Oc(12,"L"),_.Sb(),_.Mc(13,ee,2,0,"div",33),_.Sb(),_.Sb()}if(2&e){var i=_.ic();_.Jc("display",2!==i.format?"none":"block"),_.Bb(2),_.oc("rg",360)("value",null==i.hslaText?null:i.hslaText.h),_.Bb(1),_.oc("rg",100)("value",null==i.hslaText?null:i.hslaText.s),_.Bb(1),_.oc("rg",100)("value",null==i.hslaText?null:i.hslaText.l),_.Bb(1),_.oc("ngIf","disabled"!==i.cpAlphaChannel),_.Bb(8),_.oc("ngIf","disabled"!==i.cpAlphaChannel)}}function ne(e,t){if(1&e){var n=_.Ub();_.Tb(0,"input",34),_.ec("keyup.enter",(function(e){return _.Dc(n),_.ic(2).onAcceptColor(e)}))("newValue",(function(e){return _.Dc(n),_.ic(2).onAlphaInput(e)})),_.Sb()}if(2&e){var i=_.ic(2);_.oc("rg",1)("value",null==i.rgbaText?null:i.rgbaText.a)}}function ie(e,t){1&e&&(_.Tb(0,"div"),_.Oc(1,"A"),_.Sb())}function oe(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",37),_.Tb(1,"div",30),_.Tb(2,"input",38),_.ec("keyup.enter",(function(e){return _.Dc(n),_.ic().onAcceptColor(e)}))("newValue",(function(e){return _.Dc(n),_.ic().onRedInput(e)})),_.Sb(),_.Tb(3,"input",38),_.ec("keyup.enter",(function(e){return _.Dc(n),_.ic().onAcceptColor(e)}))("newValue",(function(e){return _.Dc(n),_.ic().onGreenInput(e)})),_.Sb(),_.Tb(4,"input",38),_.ec("keyup.enter",(function(e){return _.Dc(n),_.ic().onAcceptColor(e)}))("newValue",(function(e){return _.Dc(n),_.ic().onBlueInput(e)})),_.Sb(),_.Mc(5,ne,1,2,"input",32),_.Sb(),_.Tb(6,"div",30),_.Tb(7,"div"),_.Oc(8,"R"),_.Sb(),_.Tb(9,"div"),_.Oc(10,"G"),_.Sb(),_.Tb(11,"div"),_.Oc(12,"B"),_.Sb(),_.Mc(13,ie,2,0,"div",33),_.Sb(),_.Sb()}if(2&e){var i=_.ic();_.Jc("display",1!==i.format?"none":"block"),_.Bb(2),_.oc("rg",255)("value",null==i.rgbaText?null:i.rgbaText.r),_.Bb(1),_.oc("rg",255)("value",null==i.rgbaText?null:i.rgbaText.g),_.Bb(1),_.oc("rg",255)("value",null==i.rgbaText?null:i.rgbaText.b),_.Bb(1),_.oc("ngIf","disabled"!==i.cpAlphaChannel),_.Bb(8),_.oc("ngIf","disabled"!==i.cpAlphaChannel)}}function re(e,t){if(1&e){var n=_.Ub();_.Tb(0,"input",34),_.ec("keyup.enter",(function(e){return _.Dc(n),_.ic(2).onAcceptColor(e)}))("newValue",(function(e){return _.Dc(n),_.ic(2).onAlphaInput(e)})),_.Sb()}if(2&e){var i=_.ic(2);_.oc("rg",1)("value",i.hexAlpha)}}function ae(e,t){1&e&&(_.Tb(0,"div"),_.Oc(1,"A"),_.Sb())}function ce(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",39),_.Tb(1,"div",30),_.Tb(2,"input",40),_.ec("blur",(function(){return _.Dc(n),_.ic().onHexInput(null)}))("keyup.enter",(function(e){return _.Dc(n),_.ic().onAcceptColor(e)}))("newValue",(function(e){return _.Dc(n),_.ic().onHexInput(e)})),_.Sb(),_.Mc(3,re,1,2,"input",32),_.Sb(),_.Tb(4,"div",30),_.Tb(5,"div"),_.Oc(6,"Hex"),_.Sb(),_.Mc(7,ae,2,0,"div",33),_.Sb(),_.Sb()}if(2&e){var i=_.ic();_.Jc("display",0!==i.format?"none":"block"),_.Fb("hex-alpha","forced"===i.cpAlphaChannel),_.Bb(2),_.oc("value",i.hexText),_.Bb(1),_.oc("ngIf","forced"===i.cpAlphaChannel),_.Bb(4),_.oc("ngIf","forced"===i.cpAlphaChannel)}}function le(e,t){if(1&e){var n=_.Ub();_.Tb(0,"input",34),_.ec("keyup.enter",(function(e){return _.Dc(n),_.ic(2).onAcceptColor(e)}))("newValue",(function(e){return _.Dc(n),_.ic(2).onAlphaInput(e)})),_.Sb()}if(2&e){var i=_.ic(2);_.oc("rg",1)("value",null==i.hslaText?null:i.hslaText.a)}}function se(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",41),_.Tb(1,"div",30),_.Tb(2,"input",31),_.ec("keyup.enter",(function(e){return _.Dc(n),_.ic().onAcceptColor(e)}))("newValue",(function(e){return _.Dc(n),_.ic().onValueInput(e)})),_.Sb(),_.Mc(3,le,1,2,"input",32),_.Sb(),_.Tb(4,"div",30),_.Tb(5,"div"),_.Oc(6,"V"),_.Sb(),_.Tb(7,"div"),_.Oc(8,"A"),_.Sb(),_.Sb(),_.Sb()}if(2&e){var i=_.ic();_.Bb(2),_.oc("rg",100)("value",null==i.hslaText?null:i.hslaText.l),_.Bb(1),_.oc("ngIf","disabled"!==i.cpAlphaChannel)}}function ue(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",42),_.Tb(1,"span",43),_.ec("click",(function(){return _.Dc(n),_.ic().onFormatToggle(-1)})),_.Sb(),_.Tb(2,"span",43),_.ec("click",(function(){return _.Dc(n),_.ic().onFormatToggle(1)})),_.Sb(),_.Sb()}}function de(e,t){if(1&e){var n=_.Ub();_.Tb(0,"span",50),_.ec("click",(function(e){_.Dc(n);var t=_.ic().$implicit;return _.ic(3).onRemovePresetColor(e,t)})),_.Sb()}if(2&e){var i=_.ic(4);_.Db(i.cpRemoveColorButtonClass)}}function be(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",48),_.ec("click",(function(){_.Dc(n);var e=t.$implicit;return _.ic(3).setColorFromString(e)})),_.Mc(1,de,1,3,"span",49),_.Sb()}if(2&e){var i=t.$implicit,o=_.ic(3);_.Jc("background-color",i),_.Bb(1),_.oc("ngIf",o.cpAddColorButton)}}function me(e,t){if(1&e&&(_.Tb(0,"div"),_.Mc(1,be,2,3,"div",47),_.Sb()),2&e){var n=_.ic(2);_.Db(n.cpPresetColorsClass),_.Bb(1),_.oc("ngForOf",n.cpPresetColors)}}function pe(e,t){if(1&e&&(_.Tb(0,"div"),_.Oc(1),_.Sb()),2&e){var n=_.ic(2);_.Db(n.cpPresetEmptyMessageClass),_.Bb(1),_.Pc(n.cpPresetEmptyMessage)}}function he(e,t){if(1&e&&(_.Tb(0,"div",44),_.Ob(1,"hr"),_.Tb(2,"div",45),_.Oc(3),_.Sb(),_.Mc(4,me,2,4,"div",46),_.Mc(5,pe,2,4,"div",46),_.Sb()),2&e){var n=_.ic();_.Bb(3),_.Pc(n.cpPresetLabel),_.Bb(1),_.oc("ngIf",null==n.cpPresetColors?null:n.cpPresetColors.length),_.Bb(1),_.oc("ngIf",!(null!=n.cpPresetColors&&n.cpPresetColors.length)&&n.cpAddColorButton)}}function fe(e,t){if(1&e){var n=_.Ub();_.Tb(0,"button",53),_.ec("click",(function(e){return _.Dc(n),_.ic(2).onCancelColor(e)})),_.Oc(1),_.Sb()}if(2&e){var i=_.ic(2);_.Db(i.cpCancelButtonClass),_.Bb(1),_.Pc(i.cpCancelButtonText)}}function ve(e,t){if(1&e){var n=_.Ub();_.Tb(0,"button",53),_.ec("click",(function(e){return _.Dc(n),_.ic(2).onAcceptColor(e)})),_.Oc(1),_.Sb()}if(2&e){var i=_.ic(2);_.Db(i.cpOKButtonClass),_.Bb(1),_.Pc(i.cpOKButtonText)}}function ge(e,t){if(1&e&&(_.Tb(0,"div",51),_.Mc(1,fe,2,4,"button",52),_.Mc(2,ve,2,4,"button",52),_.Sb()),2&e){var n=_.ic();_.Bb(1),_.oc("ngIf",n.cpCancelButton),_.Bb(1),_.oc("ngIf",n.cpOKButton)}}var Oe,Se,Te,Ce,ye,ke,Me,Ae,Ee,Re,Ie,Be,Ne=function(e){return e[e.HEX=0]="HEX",e[e.RGBA=1]="RGBA",e[e.HSLA=2]="HSLA",e[e.CMYK=3]="CMYK",e}({}),we=y((function e(t,n,i,o){M(this,e),this.r=t,this.g=n,this.b=i,this.a=o})),xe=y((function e(t,n,i,o){M(this,e),this.h=t,this.s=n,this.v=i,this.a=o})),Pe=y((function e(t,n,i,o){M(this,e),this.h=t,this.s=n,this.l=i,this.a=o})),De=y((function e(t,n,i,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;M(this,e),this.c=t,this.m=n,this.y=i,this.k=o,this.a=r})),je=((Se=function(){function e(){M(this,e),this.newValue=new _.n}return y(e,[{key:"inputChange",value:function(e){var t=e.target.value;if(void 0===this.rg)this.newValue.emit(t);else{var n=parseFloat(t);this.newValue.emit({v:n,rg:this.rg})}}}]),e}()).\u0275fac=function(e){return new(e||Se)},Se.\u0275dir=_.Ib({type:Se,selectors:[["","text",""]],hostBindings:function(e,t){1&e&&_.ec("input",(function(e){return t.inputChange(e)}))},inputs:{rg:"rg",text:"text"},outputs:{newValue:"newValue"}}),Se),Ue=((Oe=function(){function e(t){var n=this;M(this,e),this.elRef=t,this.dragEnd=new _.n,this.dragStart=new _.n,this.newValue=new _.n,this.listenerMove=function(e){return n.move(e)},this.listenerStop=function(){return n.stop()}}return y(e,[{key:"mouseDown",value:function(e){this.start(e)}},{key:"touchStart",value:function(e){this.start(e)}},{key:"move",value:function(e){e.preventDefault(),this.setCursor(e)}},{key:"start",value:function(e){this.setCursor(e),e.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}},{key:"stop",value:function(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}},{key:"getX",value:function(e){var t=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==e.pageX?e.pageX:e.touches[0].pageX)-t.left-window.pageXOffset}},{key:"getY",value:function(e){var t=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==e.pageY?e.pageY:e.touches[0].pageY)-t.top-window.pageYOffset}},{key:"setCursor",value:function(e){var t=this.elRef.nativeElement.offsetWidth,n=this.elRef.nativeElement.offsetHeight,i=Math.max(0,Math.min(this.getX(e),t)),o=Math.max(0,Math.min(this.getY(e),n));void 0!==this.rgX&&void 0!==this.rgY?this.newValue.emit({s:i/t,v:1-o/n,rgX:this.rgX,rgY:this.rgY}):void 0===this.rgX&&void 0!==this.rgY?this.newValue.emit({v:o/n,rgY:this.rgY}):void 0!==this.rgX&&void 0===this.rgY&&this.newValue.emit({v:i/t,rgX:this.rgX})}}]),e}()).\u0275fac=function(e){return new(e||Oe)(_.Nb(_.l))},Oe.\u0275dir=_.Ib({type:Oe,selectors:[["","slider",""]],hostBindings:function(e,t){1&e&&_.ec("mousedown",(function(e){return t.mouseDown(e)}))("touchstart",(function(e){return t.touchStart(e)}))},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),Oe),Fe=y((function e(t,n,i,o){M(this,e),this.h=t,this.s=n,this.v=i,this.a=o})),Le=y((function e(t,n,i,o){M(this,e),this.h=t,this.s=n,this.v=i,this.a=o})),Ve=((Re=function(){function e(){M(this,e),this.active=null}return y(e,[{key:"setActive",value:function(e){this.active&&this.active!==e&&"inline"!==this.active.cpDialogDisplay&&this.active.closeDialog(),this.active=e}},{key:"hsva2hsla",value:function(e){var t=e.h,n=e.s,i=e.v,o=e.a;if(0===i)return new Pe(t,0,0,o);if(0===n&&1===i)return new Pe(t,1,1,o);var r=i*(2-n)/2;return new Pe(t,i*n/(1-Math.abs(2*r-1)),r,o)}},{key:"hsla2hsva",value:function(e){var t=Math.min(e.h,1),n=Math.min(e.s,1),i=Math.min(e.l,1),o=Math.min(e.a,1);if(0===i)return new xe(t,0,0,o);var r=i+n*(1-Math.abs(2*i-1))/2;return new xe(t,2*(r-i)/r,r,o)}},{key:"hsvaToRgba",value:function(e){var t,n,i,o=e.h,r=e.s,a=e.v,c=e.a,l=Math.floor(6*o),s=6*o-l,u=a*(1-r),d=a*(1-s*r),b=a*(1-(1-s)*r);switch(l%6){case 0:t=a,n=b,i=u;break;case 1:t=d,n=a,i=u;break;case 2:t=u,n=a,i=b;break;case 3:t=u,n=d,i=a;break;case 4:t=b,n=u,i=a;break;case 5:t=a,n=u,i=d;break;default:t=0,n=0,i=0}return new we(t,n,i,c)}},{key:"cmykToRgb",value:function(e){return new we((1-e.c)*(1-e.k),(1-e.m)*(1-e.k),(1-e.y)*(1-e.k),e.a)}},{key:"rgbaToCmyk",value:function(e){var t=1-Math.max(e.r,e.g,e.b);return 1===t?new De(0,0,0,1,e.a):new De((1-e.r-t)/(1-t),(1-e.g-t)/(1-t),(1-e.b-t)/(1-t),t,e.a)}},{key:"rgbaToHsva",value:function(e){var t,n,i=Math.min(e.r,1),o=Math.min(e.g,1),r=Math.min(e.b,1),a=Math.min(e.a,1),c=Math.max(i,o,r),l=Math.min(i,o,r),s=c,u=c-l;if(n=0===c?0:u/c,c===l)t=0;else{switch(c){case i:t=(o-r)/u+(o<r?6:0);break;case o:t=(r-i)/u+2;break;case r:t=(i-o)/u+4;break;default:t=0}t/=6}return new xe(t,n,s,a)}},{key:"rgbaToHex",value:function(e,t){var n="#"+(1<<24|e.r<<16|e.g<<8|e.b).toString(16).substr(1);return t&&(n+=(256|Math.round(255*e.a)).toString(16).substr(1)),n}},{key:"normalizeCMYK",value:function(e){return new De(e.c/100,e.m/100,e.y/100,e.k/100,e.a)}},{key:"denormalizeCMYK",value:function(e){return new De(Math.floor(100*e.c),Math.floor(100*e.m),Math.floor(100*e.y),Math.floor(100*e.k),e.a)}},{key:"denormalizeRGBA",value:function(e){return new we(Math.round(255*e.r),Math.round(255*e.g),Math.round(255*e.b),e.a)}},{key:"stringToHsva",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null;e=(e||"").toLowerCase();var i=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return new we(parseInt(e[2],10)/255,parseInt(e[3],10)/255,parseInt(e[4],10)/255,isNaN(parseFloat(e[5]))?1:parseFloat(e[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return new Pe(parseInt(e[2],10)/360,parseInt(e[3],10)/100,parseInt(e[4],10)/100,isNaN(parseFloat(e[5]))?1:parseFloat(e[5]))}}];for(var o in i.push(t?{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(e){return new we(parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255,parseInt(e[4]||"FF",16)/255)}}:{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(e){return new we(parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255,1)}}),i.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(e){return new we(parseInt(e[1]+e[1],16)/255,parseInt(e[2]+e[2],16)/255,parseInt(e[3]+e[3],16)/255,1)}}),i)if(i.hasOwnProperty(o)){var r=i[o],a=r.re.exec(e),c=a&&r.parse(a);if(c)return c instanceof we?n=this.rgbaToHsva(c):c instanceof Pe&&(n=this.hsla2hsva(c)),n}return n}},{key:"outputFormat",value:function(e,t,n){switch("auto"===t&&(t=e.a<1?"rgba":"hex"),t){case"hsla":var i=this.hsva2hsla(e),o=new Pe(Math.round(360*i.h),Math.round(100*i.s),Math.round(100*i.l),Math.round(100*i.a)/100);return e.a<1||"always"===n?"hsla("+o.h+","+o.s+"%,"+o.l+"%,"+o.a+")":"hsl("+o.h+","+o.s+"%,"+o.l+"%)";case"rgba":var r=this.denormalizeRGBA(this.hsvaToRgba(e));return e.a<1||"always"===n?"rgba("+r.r+","+r.g+","+r.b+","+Math.round(100*r.a)/100+")":"rgb("+r.r+","+r.g+","+r.b+")";default:var a="always"===n||"forced"===n;return this.rgbaToHex(this.denormalizeRGBA(this.hsvaToRgba(e)),a)}}}]),e}()).\u0275fac=function(e){return new(e||Re)},Re.\u0275prov=_.Jb({token:Re,factory:Re.\u0275fac}),Re),qe=((Ee=function(){function e(t,n,i){M(this,e),this.elRef=t,this.cdRef=n,this.service=i,this.isIE10=!1,this.dialogArrowSize=10,this.dialogArrowOffset=15,this.dialogInputFields=[Ne.HEX,Ne.RGBA,Ne.HSLA,Ne.CMYK],this.useRootViewContainer=!1}return y(e,[{key:"handleEsc",value:function(e){this.show&&"popup"===this.cpDialogDisplay&&this.onCancelColor(e)}},{key:"handleEnter",value:function(e){this.show&&"popup"===this.cpDialogDisplay&&this.onAcceptColor(e)}},{key:"ngOnInit",value:function(){var e=this;this.slider=new Fe(0,0,0,0),this.sliderDimMax=new Le(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.format=this.cpCmykEnabled?Ne.CMYK:"rgba"===this.cpOutputFormat?Ne.RGBA:"hsla"===this.cpOutputFormat?Ne.HSLA:Ne.HEX,this.listenerMouseDown=function(t){e.onMouseDown(t)},this.listenerResize=function(){e.onResize()},this.openDialog(this.initialColor,!1)}},{key:"ngOnDestroy",value:function(){this.closeDialog()}},{key:"ngAfterViewInit",value:function(){230===this.cpWidth&&"inline"!==this.cpDialogDisplay||(this.sliderDimMax=new Le(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.updateColorPicker(!1),this.cdRef.detectChanges())}},{key:"openDialog",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.service.setActive(this),this.width||(this.cpWidth=this.directiveElementRef.nativeElement.offsetWidth),this.height||(this.height=320),this.setInitialColor(e),this.setColorFromString(e,t),this.openColorPicker()}},{key:"closeDialog",value:function(){this.closeColorPicker()}},{key:"setupDialog",value:function(e,t,n,i,o,r,a,c,l,s,u,d,b,m,p,h,f,v,g,O,S,T,C,y,k,M,A,E,R,I,B,N,w,x,P){this.setInitialColor(n),this.setColorMode(c),this.isIE10=10===function(){var e="";"undefined"!=typeof navigator&&(e=navigator.userAgent.toLowerCase());var t=e.indexOf("msie ");return t>0&&parseInt(e.substring(t+5,e.indexOf(".",t)),10)}(),this.directiveInstance=e,this.directiveElementRef=t,this.cpDisableInput=d,this.cpCmykEnabled=l,this.cpAlphaChannel=s,this.cpOutputFormat=u,this.cpDialogDisplay=r,this.cpIgnoredElements=b,this.cpSaveClickOutside=m,this.cpCloseClickOutside=p,this.useRootViewContainer=h,this.width=this.cpWidth=parseInt(i,10),this.height=this.cpHeight=parseInt(o,10),this.cpPosition=f,this.cpPositionOffset=parseInt(v,10),this.cpOKButton=M,this.cpOKButtonText=E,this.cpOKButtonClass=A,this.cpCancelButton=R,this.cpCancelButtonText=B,this.cpCancelButtonClass=I,this.fallbackColor=a||"#fff",this.setPresetConfig(O,S),this.cpPresetColorsClass=T,this.cpMaxPresetColorsLength=C,this.cpPresetEmptyMessage=y,this.cpPresetEmptyMessageClass=k,this.cpAddColorButton=N,this.cpAddColorButtonText=x,this.cpAddColorButtonClass=w,this.cpRemoveColorButtonClass=P,g||(this.dialogArrowOffset=0),"inline"===r&&(this.dialogArrowSize=0,this.dialogArrowOffset=0),"hex"===u&&"always"!==s&&"forced"!==s&&(this.cpAlphaChannel="disabled")}},{key:"setColorMode",value:function(e){switch(e.toString().toUpperCase()){case"1":case"C":case"COLOR":this.cpColorMode=1;break;case"2":case"G":case"GRAYSCALE":this.cpColorMode=2;break;case"3":case"P":case"PRESETS":this.cpColorMode=3;break;default:this.cpColorMode=1}}},{key:"setInitialColor",value:function(e){this.initialColor=e}},{key:"setPresetConfig",value:function(e,t){this.cpPresetLabel=e,this.cpPresetColors=t}},{key:"setColorFromString",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];("always"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel)&&((t=this.service.stringToHsva(e,!0))||this.hsva)||(t=this.service.stringToHsva(e,!1)),t||this.hsva||(t=this.service.stringToHsva(this.fallbackColor,!1)),t&&(this.hsva=t,this.sliderH=this.hsva.h,"hex"===this.cpOutputFormat&&"disabled"===this.cpAlphaChannel&&(this.hsva.a=1),this.updateColorPicker(n,i))}},{key:"onResize",value:function(){"fixed"===this.position?this.setDialogPosition():"inline"!==this.cpDialogDisplay&&this.closeColorPicker()}},{key:"onDragEnd",value:function(e){this.directiveInstance.sliderDragEnd({slider:e,color:this.outputColor})}},{key:"onDragStart",value:function(e){this.directiveInstance.sliderDragStart({slider:e,color:this.outputColor})}},{key:"onMouseDown",value:function(e){!this.show||this.isIE10||"popup"!==this.cpDialogDisplay||e.target===this.directiveElementRef.nativeElement||this.isDescendant(this.elRef.nativeElement,e.target)||this.isDescendant(this.directiveElementRef.nativeElement,e.target)||0!==this.cpIgnoredElements.filter((function(t){return t===e.target})).length||(this.cpSaveClickOutside?this.directiveInstance.colorSelected(this.outputColor):(this.hsva=null,this.setColorFromString(this.initialColor,!1),this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor),this.directiveInstance.colorCanceled()),this.cpCloseClickOutside&&this.closeColorPicker())}},{key:"onAcceptColor",value:function(e){e.stopPropagation(),this.outputColor&&this.directiveInstance.colorSelected(this.outputColor),"popup"===this.cpDialogDisplay&&this.closeColorPicker()}},{key:"onCancelColor",value:function(e){this.hsva=null,e.stopPropagation(),this.directiveInstance.colorCanceled(),this.setColorFromString(this.initialColor,!0),"popup"===this.cpDialogDisplay&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor,!0),this.closeColorPicker())}},{key:"onFormatToggle",value:function(e){var t=this.dialogInputFields.length-(this.cpCmykEnabled?0:1),n=((this.dialogInputFields.indexOf(this.format)+e)%t+t)%t;this.format=this.dialogInputFields[n]}},{key:"onColorChange",value:function(e){this.hsva.s=e.s/e.rgX,this.hsva.v=e.v/e.rgY,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"lightness",value:this.hsva.v,color:this.outputColor}),this.directiveInstance.sliderChanged({slider:"saturation",value:this.hsva.s,color:this.outputColor})}},{key:"onHueChange",value:function(e){this.hsva.h=e.v/e.rgX,this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"hue",value:this.hsva.h,color:this.outputColor})}},{key:"onValueChange",value:function(e){this.hsva.v=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"value",value:this.hsva.v,color:this.outputColor})}},{key:"onAlphaChange",value:function(e){this.hsva.a=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"alpha",value:this.hsva.a,color:this.outputColor})}},{key:"onHexInput",value:function(e){if(null===e)this.updateColorPicker();else{e&&"#"!==e[0]&&(e="#"+e);var t=/^#([a-f0-9]{3}|[a-f0-9]{6})$/gi;"always"===this.cpAlphaChannel&&(t=/^#([a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})$/gi);var n=t.test(e);n&&(e.length<5&&(e="#"+e.substring(1).split("").map((function(e){return e+e})).join("")),"forced"===this.cpAlphaChannel&&(e+=Math.round(255*this.hsva.a).toString(16)),this.setColorFromString(e,!0,!1)),this.directiveInstance.inputChanged({input:"hex",valid:n,value:e,color:this.outputColor})}}},{key:"onRedInput",value:function(e){var t=this.service.hsvaToRgba(this.hsva),n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(t.r=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"red",valid:n,value:t.r,color:this.outputColor})}},{key:"onBlueInput",value:function(e){var t=this.service.hsvaToRgba(this.hsva),n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(t.b=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"blue",valid:n,value:t.b,color:this.outputColor})}},{key:"onGreenInput",value:function(e){var t=this.service.hsvaToRgba(this.hsva),n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(t.g=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"green",valid:n,value:t.g,color:this.outputColor})}},{key:"onHueInput",value:function(e){var t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.h=e.v/e.rg,this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"hue",valid:t,value:this.hsva.h,color:this.outputColor})}},{key:"onValueInput",value:function(e){var t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.v=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"value",valid:t,value:this.hsva.v,color:this.outputColor})}},{key:"onAlphaInput",value:function(e){var t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.a=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"alpha",valid:t,value:this.hsva.a,color:this.outputColor})}},{key:"onLightnessInput",value:function(e){var t=this.service.hsva2hsla(this.hsva),n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(t.l=e.v/e.rg,this.hsva=this.service.hsla2hsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"lightness",valid:n,value:t.l,color:this.outputColor})}},{key:"onSaturationInput",value:function(e){var t=this.service.hsva2hsla(this.hsva),n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(t.s=e.v/e.rg,this.hsva=this.service.hsla2hsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"saturation",valid:n,value:t.s,color:this.outputColor})}},{key:"onCyanInput",value:function(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.c=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"cyan",valid:!0,value:this.cmyk.c,color:this.outputColor})}},{key:"onMagentaInput",value:function(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.m=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"magenta",valid:!0,value:this.cmyk.m,color:this.outputColor})}},{key:"onYellowInput",value:function(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.y=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"yellow",valid:!0,value:this.cmyk.y,color:this.outputColor})}},{key:"onBlackInput",value:function(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.k=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"black",valid:!0,value:this.cmyk.k,color:this.outputColor})}},{key:"onAddPresetColor",value:function(e,t){e.stopPropagation(),this.cpPresetColors.filter((function(e){return e===t})).length||(this.cpPresetColors=this.cpPresetColors.concat(t),this.directiveInstance.presetColorsChanged(this.cpPresetColors))}},{key:"onRemovePresetColor",value:function(e,t){e.stopPropagation(),this.cpPresetColors=this.cpPresetColors.filter((function(e){return e!==t})),this.directiveInstance.presetColorsChanged(this.cpPresetColors)}},{key:"openColorPicker",value:function(){var e=this;this.show||(this.show=!0,this.hidden=!0,setTimeout((function(){e.hidden=!1,e.setDialogPosition(),e.cdRef.detectChanges()}),0),this.directiveInstance.stateChanged(!0),this.isIE10||(document.addEventListener("mousedown",this.listenerMouseDown),document.addEventListener("touchstart",this.listenerMouseDown)),window.addEventListener("resize",this.listenerResize))}},{key:"closeColorPicker",value:function(){this.show&&(this.show=!1,this.directiveInstance.stateChanged(!1),this.isIE10||(document.removeEventListener("mousedown",this.listenerMouseDown),document.removeEventListener("touchstart",this.listenerMouseDown)),window.removeEventListener("resize",this.listenerResize),this.cdRef.destroyed||this.cdRef.detectChanges())}},{key:"updateColorPicker",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.sliderDimMax){var i,o,r;2===this.cpColorMode&&(this.hsva.s=0);var a=this.outputColor;if(o=this.service.hsva2hsla(this.hsva),this.cpCmykEnabled?(n?(r=this.service.cmykToRgb(this.service.normalizeCMYK(this.cmyk)),this.hsva=this.service.rgbaToHsva(r)):(r=this.service.hsvaToRgba(this.hsva),this.cmyk=this.service.denormalizeCMYK(this.service.rgbaToCmyk(r))),r=this.service.denormalizeRGBA(r),this.sliderH=this.hsva.h):r=this.service.denormalizeRGBA(this.service.hsvaToRgba(this.hsva)),i=this.service.denormalizeRGBA(this.service.hsvaToRgba(new xe(this.sliderH||this.hsva.h,1,1,1))),t&&(this.hslaText=new Pe(Math.round(360*o.h),Math.round(100*o.s),Math.round(100*o.l),Math.round(100*o.a)/100),this.rgbaText=new we(r.r,r.g,r.b,Math.round(100*r.a)/100),this.cpCmykEnabled&&(this.cmykText=new De(this.cmyk.c,this.cmyk.m,this.cmyk.y,this.cmyk.k,Math.round(100*this.cmyk.a)/100)),this.hexText=this.service.rgbaToHex(r,"always"===this.cpAlphaChannel),this.hexAlpha=this.rgbaText.a),"auto"===this.cpOutputFormat&&this.format!==Ne.RGBA&&this.format!==Ne.CMYK&&this.hsva.a<1&&(this.format=this.hsva.a<1?Ne.RGBA:Ne.HEX),this.hueSliderColor="rgb("+i.r+","+i.g+","+i.b+")",this.alphaSliderColor="rgb("+r.r+","+r.g+","+r.b+")",this.outputColor=this.service.outputFormat(this.hsva,this.cpOutputFormat,this.cpAlphaChannel),this.selectedColor=this.service.outputFormat(this.hsva,"rgba",null),this.format!==Ne.CMYK)this.cmykColor="";else if("always"===this.cpAlphaChannel||"enabled"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel){var c=Math.round(100*this.cmyk.a)/100;this.cmykColor="cmyka(".concat(this.cmyk.c,",").concat(this.cmyk.m,",").concat(this.cmyk.y,",").concat(this.cmyk.k,",").concat(c,")")}else this.cmykColor="cmyk(".concat(this.cmyk.c,",").concat(this.cmyk.m,",").concat(this.cmyk.y,",").concat(this.cmyk.k,")");this.slider=new Fe((this.sliderH||this.hsva.h)*this.sliderDimMax.h-8,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-8),e&&a!==this.outputColor&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.outputColor))}}},{key:"setDialogPosition",value:function(){if("inline"===this.cpDialogDisplay)this.position="relative";else{for(var e,t="static",n="",i=null,o=null,r=this.directiveElementRef.nativeElement.parentNode,a=this.dialogElement.nativeElement.offsetHeight;null!==r&&"HTML"!==r.tagName;){if("static"!==(t=(e=window.getComputedStyle(r)).getPropertyValue("position"))&&null===i&&(i=r),(n=e.getPropertyValue("transform"))&&"none"!==n&&null===o&&(o=r),"fixed"===t){i=o;break}r=r.parentNode}var c=this.createDialogBox(this.directiveElementRef.nativeElement,"fixed"!==t);if(this.useRootViewContainer||"fixed"===t&&(!i||i instanceof HTMLUnknownElement))this.top=c.top,this.left=c.left;else{null===i&&(i=r);var l=this.createDialogBox(i,"fixed"!==t);this.top=c.top-l.top,this.left=c.left-l.left}"fixed"===t&&(this.position="fixed");var s=this.cpPosition;"auto"===this.cpPosition&&(u=this.dialogElement.nativeElement.getBoundingClientRect(),d="right",b="bottom",m=u.height,p=u.width,h=u.top,f=u.bottom,v=u.left,g=u.right,O=h-m<0,S=f+m>(window.innerHeight||document.documentElement.clientHeight),T=v-p<0,C=g+p>(window.innerWidth||document.documentElement.clientWidth),S&&(b="top"),O&&(b="bottom"),T&&(d="right"),C&&(d="left"),s=O&&S&&T&&C?["left","right","top","bottom"].reduce((function(e,t){return u[e]>u[t]?e:t})):T&&C?O?"bottom":S||h>f?"top":"bottom":O&&S?T?"right":C||v>g?"left":"right":"".concat(b,"-").concat(d)),"top"===s?(this.arrowTop=a-1,this.top-=a+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*c.width-this.dialogArrowOffset):"bottom"===s?(this.top+=c.height+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*c.width-this.dialogArrowOffset):"top-left"===s||"left-top"===s?(this.top-=a-c.height+c.height*this.cpPositionOffset/100,this.left-=this.cpWidth+this.dialogArrowSize-2-this.dialogArrowOffset):"top-right"===s||"right-top"===s?(this.top-=a-c.height+c.height*this.cpPositionOffset/100,this.left+=c.width+this.dialogArrowSize-2-this.dialogArrowOffset):"left"===s||"bottom-left"===s||"left-bottom"===s?(this.top+=c.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left-=this.cpWidth+this.dialogArrowSize-2):(this.top+=c.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left+=c.width+this.dialogArrowSize-2)}var u,d,b,m,p,h,f,v,g,O,S,T,C}},{key:"isDescendant",value:function(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1}},{key:"createDialogBox",value:function(e,t){return{top:e.getBoundingClientRect().top+(t?window.pageYOffset:0),left:e.getBoundingClientRect().left+(t?window.pageXOffset:0),width:e.offsetWidth,height:e.offsetHeight}}}]),e}()).\u0275fac=function(e){return new(e||Ee)(_.Nb(_.l),_.Nb(_.h),_.Nb(Ve))},Ee.\u0275cmp=_.Hb({type:Ee,selectors:[["color-picker"]],viewQuery:function(e,t){var n;1&e&&(_.Ic(G,!0),_.Ic(H,!0),_.Ic(K,!0)),2&e&&(_.yc(n=_.fc())&&(t.dialogElement=n.first),_.yc(n=_.fc())&&(t.hueSlider=n.first),_.yc(n=_.fc())&&(t.alphaSlider=n.first))},hostBindings:function(e,t){1&e&&_.ec("keyup.esc",(function(e){return t.handleEsc(e)}),!1,_.Bc)("keyup.enter",(function(e){return t.handleEnter(e)}),!1,_.Bc)},decls:28,vars:47,consts:[[1,"color-picker",3,"click"],["dialogPopup",""],[3,"class","top",4,"ngIf"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue","dragStart","dragEnd",4,"ngIf"],[1,"hue-alpha","box"],[1,"left"],[1,"selected-color-background"],[1,"selected-color"],["type","button",3,"class","disabled","click",4,"ngIf"],[1,"right"],["style","height: 16px;",4,"ngIf"],[1,"hue",3,"slider","rgX","newValue","dragStart","dragEnd"],["hueSlider",""],[1,"cursor"],[1,"value",3,"slider","rgX","newValue","dragStart","dragEnd"],["valueSlider",""],[1,"alpha",3,"slider","rgX","newValue","dragStart","dragEnd"],["alphaSlider",""],["class","cmyk-text",3,"display",4,"ngIf"],["class","hsla-text",3,"display",4,"ngIf"],["class","rgba-text",3,"display",4,"ngIf"],["class","hex-text",3,"hex-alpha","display",4,"ngIf"],["class","value-text",4,"ngIf"],["class","type-policy",4,"ngIf"],["class","preset-area",4,"ngIf"],["class","button-area",4,"ngIf"],[1,"saturation-lightness",3,"slider","rgX","rgY","newValue","dragStart","dragEnd"],["type","button",3,"disabled","click"],[2,"height","16px"],[1,"cmyk-text"],[1,"box"],["type","number","pattern","[0-9]*","min","0","max","100",3,"text","rg","value","keyup.enter","newValue"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue",4,"ngIf"],[4,"ngIf"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue"],[1,"hsla-text"],["type","number","pattern","[0-9]*","min","0","max","360",3,"text","rg","value","keyup.enter","newValue"],[1,"rgba-text"],["type","number","pattern","[0-9]*","min","0","max","255",3,"text","rg","value","keyup.enter","newValue"],[1,"hex-text"],[3,"text","value","blur","keyup.enter","newValue"],[1,"value-text"],[1,"type-policy"],[1,"type-policy-arrow",3,"click"],[1,"preset-area"],[1,"preset-label"],[3,"class",4,"ngIf"],["class","preset-color",3,"backgroundColor","click",4,"ngFor","ngForOf"],[1,"preset-color",3,"click"],[3,"class","click",4,"ngIf"],[3,"click"],[1,"button-area"],["type","button",3,"class","click",4,"ngIf"],["type","button",3,"click"]],template:function(e,t){1&e&&(_.Tb(0,"div",0,1),_.ec("click",(function(e){return e.stopPropagation()})),_.Mc(2,W,1,5,"div",2),_.Mc(3,Y,2,8,"div",3),_.Tb(4,"div",4),_.Tb(5,"div",5),_.Ob(6,"div",6),_.Ob(7,"div",7),_.Mc(8,z,2,5,"button",8),_.Sb(),_.Tb(9,"div",9),_.Mc(10,Q,1,0,"div",10),_.Tb(11,"div",11,12),_.ec("newValue",(function(e){return t.onHueChange(e)}))("dragStart",(function(){return t.onDragStart("hue")}))("dragEnd",(function(){return t.onDragEnd("hue")})),_.Ob(13,"div",13),_.Sb(),_.Tb(14,"div",14,15),_.ec("newValue",(function(e){return t.onValueChange(e)}))("dragStart",(function(){return t.onDragStart("value")}))("dragEnd",(function(){return t.onDragEnd("value")})),_.Ob(16,"div",13),_.Sb(),_.Tb(17,"div",16,17),_.ec("newValue",(function(e){return t.onAlphaChange(e)}))("dragStart",(function(){return t.onDragStart("alpha")}))("dragEnd",(function(){return t.onDragEnd("alpha")})),_.Ob(19,"div",13),_.Sb(),_.Sb(),_.Sb(),_.Mc(20,Z,17,12,"div",18),_.Mc(21,te,14,10,"div",19),_.Mc(22,oe,14,10,"div",20),_.Mc(23,ce,8,7,"div",21),_.Mc(24,se,9,3,"div",22),_.Mc(25,ue,3,0,"div",23),_.Mc(26,he,6,3,"div",24),_.Mc(27,ge,3,2,"div",25),_.Sb()),2&e&&(_.Jc("display",t.show?"block":"none")("visibility",t.hidden?"hidden":"visible")("top",t.top,"px")("left",t.left,"px")("position",t.position)("height",t.cpHeight,"px")("width",t.cpWidth,"px"),_.Fb("open",t.show),_.Bb(2),_.oc("ngIf","popup"==t.cpDialogDisplay),_.Bb(1),_.oc("ngIf",1===(t.cpColorMode||1)),_.Bb(4),_.Jc("background-color",t.selectedColor),_.Bb(1),_.oc("ngIf",t.cpAddColorButton),_.Bb(2),_.oc("ngIf","disabled"===t.cpAlphaChannel),_.Bb(1),_.Jc("display",1===(t.cpColorMode||1)?"block":"none"),_.oc("rgX",1),_.Bb(2),_.Jc("left",null==t.slider?null:t.slider.h,"px"),_.Bb(1),_.Jc("display",2===(t.cpColorMode||1)?"block":"none"),_.oc("rgX",1),_.Bb(2),_.Jc("right",null==t.slider?null:t.slider.v,"px"),_.Bb(1),_.Jc("display","disabled"===t.cpAlphaChannel?"none":"block")("background-color",t.alphaSliderColor),_.oc("rgX",1),_.Bb(2),_.Jc("left",null==t.slider?null:t.slider.a,"px"),_.Bb(1),_.oc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),_.Bb(1),_.oc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),_.Bb(1),_.oc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),_.Bb(1),_.oc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),_.Bb(1),_.oc("ngIf",!t.cpDisableInput&&2===(t.cpColorMode||1)),_.Bb(1),_.oc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),_.Bb(1),_.oc("ngIf",(null==t.cpPresetColors?null:t.cpPresetColors.length)||t.cpAddColorButton),_.Bb(1),_.oc("ngIf",t.cpOKButton||t.cpCancelButton))},directives:[C.p,Ue,je,C.o],styles:['.color-picker{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;background-color:#fff;border:1px solid #777;cursor:default;height:auto;position:absolute;user-select:none;width:230px;z-index:1000}.color-picker *{box-sizing:border-box;font-size:11px;margin:0}.color-picker input{color:#000;font-size:13px;height:26px;min-width:0;text-align:center;width:0}.color-picker input:-moz-submit-invalid,.color-picker input:-moz-ui-invalid,.color-picker input:invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.color-picker .arrow{border-style:solid;height:0;position:absolute;width:0;z-index:999999}.color-picker .arrow.arrow-top{border-color:#777 transparent transparent;border-width:10px 5px;left:8px}.color-picker .arrow.arrow-bottom{border-color:transparent transparent #777;border-width:10px 5px;left:8px;top:-20px}.color-picker .arrow.arrow-left-top,.color-picker .arrow.arrow-top-left{border-color:transparent transparent transparent #777;border-width:5px 10px;bottom:8px;right:-21px}.color-picker .arrow.arrow-right-top,.color-picker .arrow.arrow-top-right{border-color:transparent #777 transparent transparent;border-width:5px 10px;bottom:8px;left:-20px}.color-picker .arrow.arrow-bottom-left,.color-picker .arrow.arrow-left,.color-picker .arrow.arrow-left-bottom{border-color:transparent transparent transparent #777;border-width:5px 10px;right:-21px;top:8px}.color-picker .arrow.arrow-bottom-right,.color-picker .arrow.arrow-right,.color-picker .arrow.arrow-right-bottom{border-color:transparent #777 transparent transparent;border-width:5px 10px;left:-20px;top:8px}.color-picker .cursor{border:2px solid #222;border-radius:50%;cursor:default;height:16px;position:relative;width:16px}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{padding:16px 8px;position:relative}.color-picker .right{flex:1 1 auto;padding:12px 8px}.color-picker .button-area{padding:0 16px 16px;text-align:right}.color-picker .button-area button{margin-left:8px}.color-picker .preset-area{padding:4px 15px}.color-picker .preset-area .preset-label{color:#555;font-size:11px;overflow:hidden;padding:4px;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%}.color-picker .preset-area .preset-color{border:1px solid #a9a9a9;border-radius:25%;cursor:pointer;display:inline-block;height:18px;margin:4px 6px 8px;position:relative;width:18px}.color-picker .preset-area .preset-empty-message{font-style:italic;margin-bottom:8px;margin-top:4px;min-height:18px;text-align:center}.color-picker .hex-text{font-size:11px;padding:4px 8px;width:100%}.color-picker .hex-text .box{padding:0 24px 8px 8px}.color-picker .hex-text .box div{clear:left;color:#555;flex:1 1 auto;float:left;text-align:center}.color-picker .hex-text .box input{border:1px solid #a9a9a9;flex:1 1 auto;padding:1px}.color-picker .hex-alpha .box div:first-child,.color-picker .hex-alpha .box input:first-child{flex-grow:3;margin-right:8px}.color-picker .cmyk-text,.color-picker .hsla-text,.color-picker .rgba-text,.color-picker .value-text{font-size:11px;padding:4px 8px;width:100%}.color-picker .cmyk-text .box,.color-picker .hsla-text .box,.color-picker .rgba-text .box{padding:0 24px 8px 8px}.color-picker .value-text .box{padding:0 8px 8px}.color-picker .cmyk-text .box div,.color-picker .hsla-text .box div,.color-picker .rgba-text .box div,.color-picker .value-text .box div{color:#555;flex:1 1 auto;margin-right:8px;text-align:center}.color-picker .cmyk-text .box div:last-child,.color-picker .hsla-text .box div:last-child,.color-picker .rgba-text .box div:last-child,.color-picker .value-text .box div:last-child{margin-right:0}.color-picker .cmyk-text .box input,.color-picker .hsla-text .box input,.color-picker .rgba-text .box input,.color-picker .value-text .box input{border:1px solid #a9a9a9;flex:1;float:left;margin:0 8px 0 0;padding:1px}.color-picker .cmyk-text .box input:last-child,.color-picker .hsla-text .box input:last-child,.color-picker .rgba-text .box input:last-child,.color-picker .value-text .box input:last-child{margin-right:0}.color-picker .hue-alpha{align-items:center;margin-bottom:3px}.color-picker .hue{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwkUFWbCCAAAAFxJREFUaN7t0kEKg0AQAME2x83/n2qu5qCgD1iDhCoYdpnbQC9bbY1qVO/jvc6k3ad91s7/7F1/csgPrujuQ17BDYSFsBAWwgJhISyEBcJCWAgLhIWwEBYIi2f7Ar/1TCgFH2X9AAAAAElFTkSuQmCC");direction:ltr}.color-picker .hue,.color-picker .value{background-size:100% 100%;border:none;cursor:pointer;height:16px;margin-bottom:16px;width:100%}.color-picker .value{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAACTklEQVR42u3SYUcrABhA4U2SkmRJMmWSJklKJiWZZpKUJJskKUmaTFImKZOUzMySpGRmliRNJilJSpKSJEtmSpIpmWmSdO736/6D+x7OP3gUCoWCv1cqlSQlJZGcnExKSgqpqamkpaWRnp5ORkYGmZmZqFQqsrKyyM7OJicnh9zcXNRqNXl5eeTn56PRaCgoKKCwsJCioiK0Wi3FxcWUlJRQWlpKWVkZ5eXlVFRUUFlZiU6no6qqiurqampqaqitraWurg69Xk99fT0GgwGj0UhDQwONjY00NTXR3NxMS0sLra2ttLW10d7ejslkwmw209HRQWdnJ11dXXR3d9PT00Nvby99fX309/czMDDA4OAgFouFoaEhrFYrw8PDjIyMMDo6ytjYGDabjfHxcSYmJpicnGRqagq73c709DQzMzPMzs4yNzfH/Pw8DocDp9OJy+XC7XazsLDA4uIiS0tLLC8vs7KywurqKmtra3g8HrxeLz6fD7/fz/r6OhsbG2xubrK1tcX29jaBQICdnR2CwSC7u7vs7e2xv7/PwcEBh4eHHB0dcXx8zMnJCaenp5ydnXF+fs7FxQWXl5dcXV1xfX3Nzc0Nt7e33N3dEQqFuL+/5+HhgXA4TCQS4fHxkaenJ56fn3l5eeH19ZVoNMrb2xvv7+98fHwQi8WIx+N8fn6SSCT4+vri+/ubn58ffn9/+VcKgSWwBJbAElgCS2AJLIElsASWwBJYAktgCSyBJbAElsASWAJLYAksgSWwBJbAElgCS2AJLIElsP4/WH8AmJ5Z6jHS4h8AAAAASUVORK5CYII=");direction:rtl}.color-picker .alpha{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwYQlZMa3gAAAWVJREFUaN7tmEGO6jAQRCsOArHgBpyAJYGjcGocxAm4A2IHpmoWE0eBH+ezmFlNvU06shJ3W6VEelWMUQAIIF9f6qZpimsA1LYtS2uF51/u27YVAFZVRUkEoGHdPV/sIcbIEIIkUdI/9Xa7neyv61+SWFUVAVCSct00TWn2fv6u3+Ecfd3tXzy/0+nEUu+SPjo/kqzrmiQpScN6v98XewfA8/lMkiLJ2WxGSUopcT6fM6U0NX9/frfbjev1WtfrlZfLhYfDQQHG/AIOlnGwjINlHCxjHCzjYJm/TJWdCwquJXseFFzGwDNNeiKMOJTO8xQdDQaeB29+K9efeLaBo9J7vdvtJj1RjFFjfiv7qv95tjx/7leSQgh93e1ffMeIp6O+YQjho/N791t1XVOSSI7N//K+4/GoxWLBx+PB5/Op5XLJ+/3OlJJWqxU3m83ovv5iGf8KjYNlHCxjHCzjYBkHy5gf5gusvQU7U37jTAAAAABJRU5ErkJggg==");background-size:100% 100%;border:none;cursor:pointer;direction:ltr;height:16px;width:100%}.color-picker .type-policy{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACewAAAnsB01CO3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIASURBVEiJ7ZY9axRRFIafsxMStrLQJpAgpBFhi+C9w1YSo00I6RZ/g9vZpBf/QOr4GyRgkSKNSrAadsZqQGwCkuAWyRZJsySwvhZ7N/vhzrgbLH3Ld8597jlzz50zJokyxXH8DqDVar0qi6v8BbItqSGpEcfxdlmsFWXkvX8AfAVWg3UKPEnT9GKujMzsAFgZsVaCN1VTQd77XUnrgE1kv+6935268WRpzrnHZvYRWC7YvC3pRZZl3wozqtVqiyH9IgjAspkd1Gq1xUJQtVrdB9ZKIAOthdg/Qc65LUk7wNIMoCVJO865rYFhkqjX6/d7vV4GPJwBMqofURS5JEk6FYBer/eeYb/Mo9WwFnPOvQbeAvfuAAK4BN4sAJtAG/gJIElmNuiJyba3EGNmZiPeZuEVmVell/Y/6N+CzDn3AXhEOOo7Hv/3BeAz8IzQkMPnJbuPx1wC+yYJ7/0nYIP5S/0FHKdp+rwCEEXRS/rf5Hl1Gtb2M0iSpCOpCZzPATmX1EySpHMLAsiy7MjMDoHrGSDXZnaYZdnRwBh7J91utwmczAA6CbG3GgPleX4jqUH/a1CktqRGnuc3hSCAMB32gKspkCtgb3KCQMmkjeP4WNJThrNNZval1WptTIsv7JtQ4tmIdRa8qSoEpWl6YWZNoAN0zKxZNPehpLSBZv2t+Q0CJ9lLnARQLAAAAABJRU5ErkJggg==");background-position:50%;background-repeat:no-repeat;background-size:8px 16px;height:24px;position:absolute;right:12px;top:218px;width:16px}.color-picker .type-policy .type-policy-arrow{display:block;height:50%;width:100%}.color-picker .selected-color{border:1px solid #a9a9a9;border-radius:50%;height:40px;left:8px;position:absolute;top:16px;width:40px}.color-picker .selected-color-background{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAh0lEQVRYR+2W0QlAMQgD60zdfwOdqa8TmI/wQMr5K0I5bZLIzLOa2nt37VVVbd+dDx5obgCC3KBLwJ2ff4PnVidkf+ucIhw80HQaCLo3DMH3CRK3iFsmAWVl6hPNDwt8EvNE5q+YuEXcMgkonVM6SdyCoEvAnZ8v1Hjx817MilmxSUB5rdLJDycZgUAZUch/AAAAAElFTkSuQmCC");border-radius:50%;height:40px;width:40px}.color-picker .saturation-lightness{background-image:url("data:image/png;base64,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");background-size:100% 100%;border:none;cursor:pointer;direction:ltr;height:130px;touch-action:manipulation;width:100%}.color-picker .cp-add-color-button-class{background:transparent;border:0;cursor:pointer;display:inline;margin:3px -3px;padding:0;position:absolute}.color-picker .cp-add-color-button-class:hover{text-decoration:underline}.color-picker .cp-add-color-button-class:disabled{color:#999;cursor:not-allowed}.color-picker .cp-add-color-button-class:disabled:hover{text-decoration:none}.color-picker .cp-remove-color-button-class{background:#fff;border-radius:50%;box-shadow:1px 1px 5px #333;cursor:pointer;display:block;height:10px;position:absolute;right:-5px;text-align:center;top:-5px;width:10px}.color-picker .cp-remove-color-button-class:before{bottom:3.5px;content:"x";display:inline-block;font-size:10px;position:relative}'],encapsulation:2}),Ee),_e=((Ae=function(){function e(t,n,i,o,r,a){M(this,e),this.injector=t,this.cfr=n,this.appRef=i,this.vcRef=o,this.elRef=r,this._service=a,this.dialogCreated=!1,this.ignoreChanges=!1,this.viewAttachedToAppRef=!1,this.cpWidth="230px",this.cpHeight="auto",this.cpToggle=!1,this.cpDisabled=!1,this.cpIgnoredElements=[],this.cpFallbackColor="",this.cpColorMode="color",this.cpCmykEnabled=!1,this.cpOutputFormat="auto",this.cpAlphaChannel="enabled",this.cpDisableInput=!1,this.cpDialogDisplay="popup",this.cpSaveClickOutside=!0,this.cpCloseClickOutside=!0,this.cpUseRootViewContainer=!1,this.cpPosition="auto",this.cpPositionOffset="0%",this.cpPositionRelativeToArrow=!1,this.cpOKButton=!1,this.cpOKButtonText="OK",this.cpOKButtonClass="cp-ok-button-class",this.cpCancelButton=!1,this.cpCancelButtonText="Cancel",this.cpCancelButtonClass="cp-cancel-button-class",this.cpPresetLabel="Preset colors",this.cpPresetColorsClass="cp-preset-colors-class",this.cpMaxPresetColorsLength=6,this.cpPresetEmptyMessage="No colors added",this.cpPresetEmptyMessageClass="preset-empty-message",this.cpAddColorButton=!1,this.cpAddColorButtonText="Add color",this.cpAddColorButtonClass="cp-add-color-button-class",this.cpRemoveColorButtonClass="cp-remove-color-button-class",this.cpInputChange=new _.n(!0),this.cpToggleChange=new _.n(!0),this.cpSliderChange=new _.n(!0),this.cpSliderDragEnd=new _.n(!0),this.cpSliderDragStart=new _.n(!0),this.colorPickerOpen=new _.n(!0),this.colorPickerClose=new _.n(!0),this.colorPickerCancel=new _.n(!0),this.colorPickerSelect=new _.n(!0),this.colorPickerChange=new _.n(!1),this.cpCmykColorChange=new _.n(!0),this.cpPresetColorsChange=new _.n(!0)}return y(e,[{key:"handleClick",value:function(){this.inputFocus()}},{key:"handleFocus",value:function(){this.inputFocus()}},{key:"handleInput",value:function(e){this.inputChange(e)}},{key:"ngOnDestroy",value:function(){null!=this.cmpRef&&(this.viewAttachedToAppRef&&this.appRef.detachView(this.cmpRef.hostView),this.cmpRef.destroy(),this.cmpRef=null,this.dialog=null)}},{key:"ngOnChanges",value:function(e){e.cpToggle&&!this.cpDisabled&&(e.cpToggle.currentValue?this.openDialog():e.cpToggle.currentValue||this.closeDialog()),e.colorPicker&&(this.dialog&&!this.ignoreChanges&&("inline"===this.cpDialogDisplay&&this.dialog.setInitialColor(e.colorPicker.currentValue),this.dialog.setColorFromString(e.colorPicker.currentValue,!1),this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay&&this.cmpRef.changeDetectorRef.detectChanges()),this.ignoreChanges=!1),(e.cpPresetLabel||e.cpPresetColors)&&this.dialog&&this.dialog.setPresetConfig(this.cpPresetLabel,this.cpPresetColors)}},{key:"openDialog",value:function(){if(this.dialogCreated)this.dialog&&this.dialog.openDialog(this.colorPicker);else{var e=this.vcRef;if(this.dialogCreated=!0,this.viewAttachedToAppRef=!1,this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay){var t=this.injector.get(this.appRef.componentTypes[0],_.s.NULL);t!==_.s.NULL?(e=t.vcRef||t.viewContainerRef||this.vcRef)===this.vcRef&&console.warn("You are using cpUseRootViewContainer, but the root component is not exposing viewContainerRef!Please expose it by adding 'public vcRef: ViewContainerRef' to the constructor."):this.viewAttachedToAppRef=!0}var n=this.cfr.resolveComponentFactory(qe);if(this.viewAttachedToAppRef)this.cmpRef=n.create(this.injector),this.appRef.attachView(this.cmpRef.hostView),document.body.appendChild(this.cmpRef.hostView.rootNodes[0]);else{var i=_.F.fromResolvedProviders([],e.parentInjector);this.cmpRef=e.createComponent(n,0,i,[])}this.cmpRef.instance.setupDialog(this,this.elRef,this.colorPicker,this.cpWidth,this.cpHeight,this.cpDialogDisplay,this.cpFallbackColor,this.cpColorMode,this.cpCmykEnabled,this.cpAlphaChannel,this.cpOutputFormat,this.cpDisableInput,this.cpIgnoredElements,this.cpSaveClickOutside,this.cpCloseClickOutside,this.cpUseRootViewContainer,this.cpPosition,this.cpPositionOffset,this.cpPositionRelativeToArrow,this.cpPresetLabel,this.cpPresetColors,this.cpPresetColorsClass,this.cpMaxPresetColorsLength,this.cpPresetEmptyMessage,this.cpPresetEmptyMessageClass,this.cpOKButton,this.cpOKButtonClass,this.cpOKButtonText,this.cpCancelButton,this.cpCancelButtonClass,this.cpCancelButtonText,this.cpAddColorButton,this.cpAddColorButtonClass,this.cpAddColorButtonText,this.cpRemoveColorButtonClass),this.dialog=this.cmpRef.instance,this.vcRef!==e&&this.cmpRef.changeDetectorRef.detectChanges()}}},{key:"closeDialog",value:function(){this.dialog&&"popup"===this.cpDialogDisplay&&this.dialog.closeDialog()}},{key:"cmykChanged",value:function(e){this.cpCmykColorChange.emit(e)}},{key:"stateChanged",value:function(e){this.cpToggleChange.emit(e),e?this.colorPickerOpen.emit(this.colorPicker):this.colorPickerClose.emit(this.colorPicker)}},{key:"colorChanged",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.ignoreChanges=t,this.colorPickerChange.emit(e)}},{key:"colorSelected",value:function(e){this.colorPickerSelect.emit(e)}},{key:"colorCanceled",value:function(){this.colorPickerCancel.emit()}},{key:"inputFocus",value:function(){var e=this.elRef.nativeElement,t=this.cpIgnoredElements.filter((function(t){return t===e}));this.cpDisabled||t.length||("undefined"!=typeof document&&e===document.activeElement?this.openDialog():this.dialog&&this.dialog.show?this.closeDialog():this.openDialog())}},{key:"inputChange",value:function(e){this.dialog?this.dialog.setColorFromString(e.target.value,!0):(this.colorPicker=e.target.value,this.colorPickerChange.emit(this.colorPicker))}},{key:"inputChanged",value:function(e){this.cpInputChange.emit(e)}},{key:"sliderChanged",value:function(e){this.cpSliderChange.emit(e)}},{key:"sliderDragEnd",value:function(e){this.cpSliderDragEnd.emit(e)}},{key:"sliderDragStart",value:function(e){this.cpSliderDragStart.emit(e)}},{key:"presetColorsChanged",value:function(e){this.cpPresetColorsChange.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||Ae)(_.Nb(_.s),_.Nb(_.j),_.Nb(_.g),_.Nb(_.R),_.Nb(_.l),_.Nb(Ve))},Ae.\u0275dir=_.Ib({type:Ae,selectors:[["","colorPicker",""]],hostBindings:function(e,t){1&e&&_.ec("click",(function(){return t.handleClick()}))("focus",(function(){return t.handleFocus()}))("input",(function(e){return t.handleInput(e)}))},inputs:{cpWidth:"cpWidth",cpHeight:"cpHeight",cpToggle:"cpToggle",cpDisabled:"cpDisabled",cpIgnoredElements:"cpIgnoredElements",cpFallbackColor:"cpFallbackColor",cpColorMode:"cpColorMode",cpCmykEnabled:"cpCmykEnabled",cpOutputFormat:"cpOutputFormat",cpAlphaChannel:"cpAlphaChannel",cpDisableInput:"cpDisableInput",cpDialogDisplay:"cpDialogDisplay",cpSaveClickOutside:"cpSaveClickOutside",cpCloseClickOutside:"cpCloseClickOutside",cpUseRootViewContainer:"cpUseRootViewContainer",cpPosition:"cpPosition",cpPositionOffset:"cpPositionOffset",cpPositionRelativeToArrow:"cpPositionRelativeToArrow",cpOKButton:"cpOKButton",cpOKButtonText:"cpOKButtonText",cpOKButtonClass:"cpOKButtonClass",cpCancelButton:"cpCancelButton",cpCancelButtonText:"cpCancelButtonText",cpCancelButtonClass:"cpCancelButtonClass",cpPresetLabel:"cpPresetLabel",cpPresetColorsClass:"cpPresetColorsClass",cpMaxPresetColorsLength:"cpMaxPresetColorsLength",cpPresetEmptyMessage:"cpPresetEmptyMessage",cpPresetEmptyMessageClass:"cpPresetEmptyMessageClass",cpAddColorButton:"cpAddColorButton",cpAddColorButtonText:"cpAddColorButtonText",cpAddColorButtonClass:"cpAddColorButtonClass",cpRemoveColorButtonClass:"cpRemoveColorButtonClass",colorPicker:"colorPicker",cpPresetColors:"cpPresetColors"},outputs:{cpInputChange:"cpInputChange",cpToggleChange:"cpToggleChange",cpSliderChange:"cpSliderChange",cpSliderDragEnd:"cpSliderDragEnd",cpSliderDragStart:"cpSliderDragStart",colorPickerOpen:"colorPickerOpen",colorPickerClose:"colorPickerClose",colorPickerCancel:"colorPickerCancel",colorPickerSelect:"colorPickerSelect",colorPickerChange:"colorPickerChange",cpCmykColorChange:"cpCmykColorChange",cpPresetColorsChange:"cpPresetColorsChange"},exportAs:["ngxColorPicker"],features:[_.zb]}),Ae),Ge=((Me=y((function e(){M(this,e)}))).\u0275mod=_.Lb({type:Me}),Me.\u0275inj=_.Kb({factory:function(e){return new(e||Me)},providers:[Ve],imports:[[C.c]]}),Me),He=((ke=y((function e(){M(this,e)}))).\u0275mod=_.Lb({type:ke}),ke.\u0275inj=_.Kb({factory:function(e){return new(e||ke)},imports:[[C.c,w.d,P.b,B.v,R.xb]]}),ke),Ke=((ye=y((function e(){M(this,e)}))).\u0275mod=_.Lb({type:ye}),ye.\u0275inj=_.Kb({factory:function(e){return new(e||ye)},imports:[[C.c,I.a,N.c,w.d,x.c,j.b,P.b,D.c,B.v,He,R.xb,Ge]]}),ye),We=((Ce=y((function e(){M(this,e)}))).\u0275mod=_.Lb({type:Ce}),Ce.\u0275inj=_.Kb({factory:function(e){return new(e||Ce)},imports:[[C.c,Ke,I.a,V.g,k.f,A.b,F.c,P.b,N.c,B.v,j.b,L.b,U.a,R.xb,q.a]]}),Ce),Ye=((Te=y((function e(){M(this,e)}))).\u0275mod=_.Lb({type:Te}),Te.\u0275inj=_.Kb({factory:function(e){return new(e||Te)},imports:[[C.c,Ke,I.a,N.c,w.d,x.c,P.b,D.c,B.v,He,R.xb,We,k.f]]}),Te),ze=T("mFH5"),Qe=((Ie=y((function e(){M(this,e)}))).\u0275mod=_.Lb({type:Ie}),Ie.\u0275inj=_.Kb({factory:function(e){return new(e||Ie)},imports:[[C.c,I.a,V.g,ze.q,k.f,U.a,L.b,R.xb]]}),Ie),Xe=T("O4oY"),Je=T("g6G6"),Ze=T("ROBh"),$e=T("mWib"),et=T("xVbo"),tt=T("YtkY"),nt=T("TLy2"),it=T("4e/d"),ot=T("6WTZ"),rt=T("8lHc"),at=T("J+dc"),ct=/^[a-zA-Z0-9]*$/,lt=((Be=y((function e(t){var n=this;M(this,e),this.customerService=t,this.debounceTime=400,this.uniqueCode=function(e){return function(t){return Object(rt.a)(n.debounceTime).pipe(Object(nt.a)((function(){return t.value!==e?n.customerService.exists({code:t.value}):Object(Ze.a)(!1)})),Object(at.a)(1),Object(tt.a)((function(e){return e?{uniqueCode:!0}:null})))}},this.uniqueDomain=function(e){return Object(rt.a)(n.debounceTime).pipe(Object(nt.a)((function(){return n.customerService.exists({domain:e.value})})),Object(at.a)(1),Object(tt.a)((function(e){return e?{uniqueDomain:!0}:null})))}}))).\u0275fac=function(e){return new(e||Be)(_.bc(Xe.a))},Be.\u0275prov=_.Jb({token:Be,factory:Be.\u0275fac,providedIn:"root"}),Be),st=T("HYj3"),ut=T("fAiE"),dt=T("s2Ay");function bt(e,t){if(1&e&&_.Ob(0,"mat-spinner",10),2&e){var n=_.ic();_.oc("diameter",n.spinnerDiameter)}}function mt(e,t){1&e&&(_.Tb(0,"div"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"SHARED.DOMAIN_INPUT.WRONG_FORMAT")))}function pt(e,t){1&e&&(_.Tb(0,"div"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"SHARED.DOMAIN_INPUT.DOMAIN_ALREADY_EXIST")))}function ht(e,t){1&e&&(_.Tb(0,"div"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"SHARED.DOMAIN_INPUT.DOMAIN_ALREADY_USED")))}function ft(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",11),_.ec("click",(function(){_.Dc(n);var e=t.$implicit;return _.ic().setSelected(e)})),_.Tb(1,"div",12),_.Oc(2),_.Sb(),_.Tb(3,"div",13),_.ec("click",(function(){_.Dc(n);var e=t.$implicit;return _.ic().remove(e)})),_.Tb(4,"i",14),_.Oc(5,"clear"),_.Sb(),_.Sb(),_.Sb()}if(2&e){var i=t.$implicit,o=_.ic();_.Fb("active",i===o.selected),_.Bb(2),_.Pc(i)}}var vt,gt={provide:B.o,useExisting:Object(_.V)((function(){return Ot})),multi:!0},Ot=((vt=function(){function e(){M(this,e),this.spinnerDiameter=25,this.selectedChange=new _.n,this.domains=[],this.separatorKeysCodes=[ut.e],this.control=new B.e(null,[B.x.required,B.x.pattern(/^\s*([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}\s*$/)],null)}return y(e,[{key:"writeValue",value:function(e){this.domains=(e||[]).slice()}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"add",value:function(){if(!this.control.invalid&&!this.control.pending){var e=this.control.value.trim();this.domains.includes(e)||(this.domains.push(e),this.onChange(this.domains),this.control.reset(),this.selected||this.setSelected(e))}}},{key:"remove",value:function(e){var t=this.domains.indexOf(e);t>=0&&(e===this.selected&&this.setSelected(null),this.domains.splice(t,1),this.onChange(this.domains))}},{key:"setSelected",value:function(e){this.selected=e,this.selectedChange.emit(this.selected)}},{key:"buttonAddDisabled",value:function(){return this.control.pending||this.control.invalid||this.domainExists}},{key:"domainExists",get:function(){return this.domains.includes((this.control.value||"").trim())}}]),e}()).\u0275fac=function(e){return new(e||vt)},vt.\u0275cmp=_.Hb({type:vt,selectors:[["app-domains-input"]],inputs:{placeholder:"placeholder",selected:"selected",spinnerDiameter:"spinnerDiameter"},outputs:{selectedChange:"selectedChange"},features:[_.Ab([gt])],decls:16,vars:13,consts:[[1,"domain-input-control","d-flex","align-items-center"],[1,"domain-input-wrapper","d-flex","align-items-center"],[1,"mr-3","light"],["type","text","size","10",1,"vitamui-input",3,"formControl","blur","keydown.enter"],["class","ml-2",3,"diameter",4,"ngIf"],["type","button",1,"btn","primary","ml-2",3,"disabled","click"],[1,"vitamui-input-errors"],[4,"ngIf"],[1,"vitamui-chip-list","ml-4"],["class","vitamui-chip",3,"active","click",4,"ngFor","ngForOf"],[1,"ml-2",3,"diameter"],[1,"vitamui-chip",3,"click"],[1,"vitamui-chip-content"],[1,"vitamui-remove-chip",3,"click"],[1,"material-icons"]],template:function(e,t){1&e&&(_.Tb(0,"div",0),_.Tb(1,"div",1),_.Tb(2,"h4",2),_.Oc(3,"@"),_.Sb(),_.Tb(4,"input",3),_.ec("blur",(function(){return t.onTouched()}))("keydown.enter",(function(){return t.add()})),_.Sb(),_.Mc(5,bt,1,1,"mat-spinner",4),_.Sb(),_.Tb(6,"div"),_.Tb(7,"button",5),_.ec("click",(function(){return t.add()})),_.Oc(8),_.jc(9,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(10,"div",6),_.Mc(11,mt,3,3,"div",7),_.Mc(12,pt,3,3,"div",7),_.Mc(13,ht,3,3,"div",7),_.Sb(),_.Tb(14,"div",8),_.Mc(15,ft,6,3,"div",9),_.Sb()),2&e&&(_.Bb(4),_.Jc("width",280,"px"),_.oc("formControl",t.control),_.Cb("placeholder",t.placeholder),_.Bb(1),_.oc("ngIf",t.control.pending),_.Bb(2),_.oc("disabled",t.buttonAddDisabled()),_.Bb(1),_.Pc(_.kc(9,11,"COMMON.ADD")),_.Bb(3),_.oc("ngIf",null==t.control?null:t.control.hasError("pattern")),_.Bb(1),_.oc("ngIf",t.domainExists),_.Bb(1),_.oc("ngIf",!t.domainExists&&(null==t.control?null:t.control.hasError("uniqueDomain"))),_.Bb(2),_.oc("ngForOf",t.domains))},directives:[B.c,B.q,B.f,C.p,C.o,U.b],pipes:[dt.d],styles:[""]}),vt);function St(e,t){1&e&&(_.Rb(0),_.Oc(1),_.jc(2,"translate"),_.Qb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"SHARED.DOMAIN_INPUT.DEFAULT_DOMAIN")))}function Tt(e,t){if(1&e&&(_.Tb(0,"div"),_.Oc(1),_.Mc(2,St,3,3,"ng-container",0),_.Sb()),2&e){var n=t.$implicit,i=_.ic(2);_.Bb(1),_.Qc(" ",n," "),_.Bb(1),_.oc("ngIf",n===i.defaultDomain)}}function Ct(e,t){1&e&&(_.Tb(0,"i",13),_.Oc(1,"edit"),_.Sb())}function yt(e,t){1&e&&(_.Tb(0,"div"),_.Ob(1,"mat-spinner",14),_.Sb())}function kt(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",15),_.Tb(1,"button",16),_.ec("click",(function(){return _.Dc(n),_.ic(2).confirm()})),_.Tb(2,"i",17),_.Oc(3,"check"),_.Sb(),_.Sb(),_.Tb(4,"button",18),_.ec("click",(function(){return _.Dc(n),_.ic(2).cancel()})),_.Tb(5,"i",17),_.Oc(6,"clear"),_.Sb(),_.Sb(),_.Sb()}if(2&e){var i=_.ic(2);_.Bb(1),_.oc("disabled",!i.canConfirm)}}var Mt=function(e){return{"margin-top":e}};function At(e,t){if(1&e){var n=_.Ub();_.Rb(0),_.Tb(1,"div",2,3),_.Tb(3,"div",4),_.ec("click",(function(){return _.Dc(n),_.ic().enterEditMode()})),_.Tb(4,"div",5),_.Tb(5,"label"),_.Oc(6),_.Sb(),_.Tb(7,"span",6),_.Mc(8,Tt,3,2,"div",7),_.Sb(),_.Tb(9,"div",8),_.Tb(10,"app-domains-input",9),_.ec("selectedChange",(function(e){return _.Dc(n),_.ic().selected=e}))("click",(function(){return _.Dc(n),_.ic().onDomainInputClick()})),_.jc(11,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Mc(12,Ct,2,0,"i",10),_.Mc(13,yt,2,0,"div",0),_.Sb(),_.Sb(),_.Ob(14,"div",11),_.Mc(15,kt,7,1,"ng-template",12),_.Qb()}if(2&e){var i=_.zc(2),o=_.ic();_.Bb(3),_.Fb("edit-mode",o.editMode),_.Bb(3),_.Pc(o.label),_.Bb(2),_.oc("ngForOf",o.control.value),_.Bb(1),_.oc("ngStyle",_.tc(17,Mt,o.label?"15px":"0")),_.Bb(1),_.Jc("width",100,"%"),_.oc("formControl",o.control)("selected",o.selected)("placeholder",_.kc(11,15,"CUSTOMER.INFORMATIONS.MODAL.DOMAINS_PLACEHOLDER")),_.Bb(2),_.oc("ngIf",!o.showSpinner&&!o.editMode),_.Bb(1),_.oc("ngIf",o.showSpinner),_.Bb(2),_.oc("cdkConnectedOverlayOpen",o.editMode)("cdkConnectedOverlayOrigin",i)("cdkConnectedOverlayPositions",o.positions)}}function Et(e,t){1&e&&(_.Rb(0),_.Oc(1),_.jc(2,"translate"),_.Qb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"SHARED.DOMAIN_INPUT.DEFAULT_DOMAIN")))}function Rt(e,t){if(1&e&&(_.Tb(0,"div"),_.Oc(1),_.Mc(2,Et,3,3,"ng-container",0),_.Sb()),2&e){var n=t.$implicit,i=_.ic(2);_.Bb(1),_.Qc(" ",n," "),_.Bb(1),_.oc("ngIf",n===i.defaultDomain)}}function It(e,t){if(1&e&&(_.Tb(0,"div",19),_.Tb(1,"label"),_.Oc(2),_.Sb(),_.Mc(3,Rt,3,2,"div",7),_.Sb()),2&e){var n=_.ic();_.Bb(2),_.Pc(n.label),_.Bb(1),_.oc("ngForOf",null==n.control?null:n.control.value)}}var Bt,Nt={provide:B.o,useExisting:Object(_.V)((function(){return wt})),multi:!0},wt=((Bt=function(e){function t(e){var n;return M(this,t),(n=f(this,t,[e])).defaultDomainChange=new _.n,n.domainInputClicked=!1,n}return S(t,e),y(t,[{key:"defaultDomain",get:function(){return this._defaultDomain},set:function(e){this._defaultDomain=e,this.selected=e}},{key:"canConfirm",get:function(){return this.editMode&&!this.control.pending&&this.control.valid&&(this.control.dirty||this.selected!==this.defaultDomain)}},{key:"confirm",value:function(){this.canConfirm&&(v(O(t.prototype),"confirm",this).call(this),this.defaultDomain=this.selected,this.defaultDomainChange.emit(this.defaultDomain))}},{key:"cancel",value:function(){v(O(t.prototype),"cancel",this).call(this),this.selected=this.defaultDomain}},{key:"onClick",value:function(e){if(this.editMode)if(this.domainInputClicked)this.domainInputClicked=!1;else{var t=this.cdkConnectedOverlay.overlayRef;this.isInside(e,this.elementRef.nativeElement)||this.isInside(e,t.hostElement)||this.cancel()}}},{key:"onDomainInputClick",value:function(){this.domainInputClicked=!0}}]),t}(R.D)).\u0275fac=function(e){return new(e||Bt)(_.Nb(_.l))},Bt.\u0275cmp=_.Hb({type:Bt,selectors:[["app-editable-domain-input"]],inputs:{defaultDomain:"defaultDomain"},outputs:{defaultDomainChange:"defaultDomainChange"},features:[_.Ab([Nt]),_.yb],decls:2,vars:2,consts:[[4,"ngIf"],["class","read-only-field disabled-input",4,"ngIf"],["cdkOverlayOrigin",""],["origin","cdkOverlayOrigin"],[1,"vitamui-input","editable-field",3,"click"],[1,"editable-field-content"],[1,"editable-field-text-content"],[4,"ngFor","ngForOf"],[1,"editable-field-control",3,"ngStyle"],["spinnerDiameter","18",3,"formControl","selected","placeholder","selectedChange","click"],["class","material-icons edit-icon",4,"ngIf"],[1,"vitamui-input-errors"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions"],[1,"material-icons","edit-icon"],[1,"vitamui-spinner","small"],[1,"editable-field-actions"],["type","button",1,"editable-field-confirm",3,"disabled","click"],[1,"material-icons"],["type","button",1,"editable-field-cancel",3,"click"],[1,"read-only-field","disabled-input"]],template:function(e,t){1&e&&(_.Mc(0,At,16,19,"ng-container",0),_.Mc(1,It,4,2,"div",1)),2&e&&(_.oc("ngIf",!t.disabled),_.Bb(1),_.oc("ngIf",t.disabled))},directives:[C.p,st.b,C.o,C.q,Ot,B.q,B.f,st.a,U.b],pipes:[dt.d],encapsulation:2}),Bt);function xt(e,t){if(1&e&&_.Ob(0,"vitamui-common-editable-option",24),2&e){var n=t.$implicit;_.oc("value",n.code)("content",n.name)}}function Pt(e,t){if(1&e&&(_.Tb(0,"div",1),_.Tb(1,"div",13),_.Tb(2,"vitamui-common-editable-input",33),_.Zb(3,34),_.Tb(4,"vitamui-common-field-error",4),_.Xb(5,35),_.Sb(),_.Tb(6,"vitamui-common-field-error",5),_.Xb(7,36),_.Sb(),_.Tb(8,"vitamui-common-field-error",37),_.Xb(9,38),_.Sb(),_.Sb(),_.Sb(),_.Sb()),2&e){var n=_.ic(),i=null,o=null,r=null;_.Bb(2),_.oc("disabled",n.gdprReadOnlyStatus&&!(null!=n.form&&null!=(i=n.form.get("gdprAlert"))&&i.value))("validator",null==n.form||null==(o=n.form.get("gdprAlertDelay"))?null:o.validator)("asyncValidator",null==n.form||null==(r=n.form.get("gdprAlertDelay"))?null:r.asyncValidator)}}var Dt,jt,Ut,Ft=function(e){return{max:e}},Lt=((Dt=function(){function e(t,n,i,o,r){M(this,e),this.formBuilder=t,this.customerService=n,this.customerCreateValidators=i,this.countryService=o,this.startupService=r,this.customerCodeMaxLength=15,this.maxStreetLength=this.startupService.getConfigNumberValue("MAX_STREET_LENGTH"),this.form=this.formBuilder.group({id:[null,B.x.required],identifier:[{value:null,disabled:!0},B.x.required],code:[null,[B.x.required,B.x.pattern(ct),B.x.maxLength(this.customerCodeMaxLength)],this.customerCreateValidators.uniqueCode()],name:[null,B.x.required],companyName:[null,B.x.required],passwordRevocationDelay:[null,B.x.required],otp:[null],address:this.formBuilder.group({street:[null,[B.x.required,B.x.maxLength(this.maxStreetLength)]],zipCode:[null,B.x.required],city:[null,B.x.required],country:[null,B.x.required]}),internalCode:[null],language:[null,B.x.required],emailDomains:[null,B.x.required],defaultEmailDomain:[null,B.x.required],gdprAlert:!1,gdprAlertDelay:[72,[B.x.required,B.x.min(1),B.x.pattern(/^[0-9]{1,20}$/)]]})}return y(e,[{key:"customer",get:function(){return this._customer},set:function(e){this._customer=e,this.resetForm(this.customer)}},{key:"gdprReadOnlyStatus",get:function(){return this._gdprReadOnlyStatus},set:function(e){this._gdprReadOnlyStatus=e,e&&(this.form.get("gdprAlertDelay").disable({emitEvent:!1}),this.form.get("gdprAlert").disable({emitEvent:!1}))}},{key:"readOnly",set:function(e){e&&this.form.enabled?this.form.disable({emitEvent:!1}):this.form.disabled&&(this.form.enable({emitEvent:!1}),this._gdprReadOnlyStatus&&(this.form.get("gdprAlertDelay").disable({emitEvent:!1}),this.form.get("gdprAlert").disable({emitEvent:!1}),this.form.get("identifier").disable({emitEvent:!1})))}},{key:"ngOnInit",value:function(){var e=this;this.sub=Object(Je.a)(this.form.statusChanges,this.form.valueChanges).pipe(Object($e.a)(200),Object(et.a)((function(){return e.form.valid})),Object(tt.a)((function(){return Object(R.Ib)(e.form.value,e.previousValue)})),Object(et.a)((function(e){return!Object(ot.c)(e)})),Object(tt.a)((function(t){return Object(ot.a)({id:e.customer.id},t)})),Object(nt.a)((function(t){return e.customerService.patch(t).pipe(Object(it.a)((function(){return Object(Ze.a)(null)})))}))).subscribe((function(t){return e.resetForm(t)})),this.countryService.getAvailableCountries().subscribe((function(t){e.countries=t}))}},{key:"ngOnDestroy",value:function(){this.sub&&this.sub.unsubscribe()}},{key:"resetForm",value:function(e){e&&this.form.get("code").setAsyncValidators(this.customerCreateValidators.uniqueCode(e.code)),this.form.reset(e,{emitEvent:!1}),this.previousValue=this.form.value}}]),e}()).\u0275fac=function(e){return new(e||Dt)(_.Nb(B.d),_.Nb(Xe.a),_.Nb(lt),_.Nb(R.u),_.Nb(R.lb))},Dt.\u0275cmp=_.Hb({type:Dt,selectors:[["app-information-tab"]],inputs:{customer:"customer",readOnly:"readOnly",gdprReadOnlyStatus:"gdprReadOnlyStatus"},decls:102,vars:130,consts:function(){return[[3,"formGroup"],[1,"row"],[1,"col-6","form-control"],["formControlName","code",3,"label","validator","asyncValidator"],["errorKey","required"],["errorKey","pattern"],["errorKey","maxlength"],["errorKey","uniqueCode"],[1,"col-6"],["formControlName","identifier","maxlength","12",3,"label","validator","asyncValidator"],["formControlName","name","maxlength","100",3,"label","validator","asyncValidator"],["formControlName","companyName","maxlength","250",3,"label","validator","asyncValidator"],["formGroupName","address"],[1,"col-12","form-control"],["formControlName","street",3,"maxlength","label","validator","asyncValidator"],["formControlName","zipCode","maxlength","10",3,"label","validator","asyncValidator"],["formControlName","city","maxlength","100",3,"label","validator","asyncValidator"],["formControlName","country",3,"label","validator","asyncValidator"],[3,"value","content",4,"ngFor","ngForOf"],["formControlName","internalCode","maxlength","20",3,"label"],["formControlName","language",3,"label","validator","asyncValidator"],["value","ENGLISH",3,"content"],["value","FRENCH",3,"content"],["formControlName","passwordRevocationDelay",3,"label","validator","asyncValidator"],[3,"value","content"],["formControlName","otp",3,"label","validator","asyncValidator"],["value","DISABLED",3,"content"],["value","OPTIONAL",3,"content"],["value","MANDATORY",3,"content"],["formControlName","emailDomains",3,"label","validator","asyncValidator","defaultDomain","defaultDomainChange"],["formControlName","gdprAlert",3,"disabled"],$localize(e||(e=h([":gdprAlert Account@@accountgdprAlertToggleLabel\u241ffef8b7e7e612dc909f0c857e6c8f471fb2c9dabc\u241f9046380844444205031: Alerte sur les utilisateurs inactifs "]))),["class","row",4,"ngIf"],["formControlName","gdprAlertDelay",3,"disabled","validator","asyncValidator",6,"label"],["label",$localize(t||(t=h([":gdprAlertDelay@@CustomerDetailLabelgdprAlertDelay\u241f9d2c4acce4ab9cbe94c7666eb7e859cc524ce235\u241f3570467827955734463:Dur\xe9e d'alerte sur les utilisateurs inactifs (mois)"])))],$localize(n||(n=h([":Required field error hint@@formErrorRequiredFieldAndMinValue\u241fdd5c3f479773a9f5e40443185ec849b8ddeeb741\u241f572853113484173122:Champ obligatoire et il faut une valeur sup\xe9rieure \xe0 0 "]))),$localize(i||(i=h([":Wrong format error hint@@formErrorFormatField\u241fc7444ff7ebfc17980e6acf35929818051c7b0e6b\u241f8276310730326317481:Format incorrecte "]))),["errorKey","min"],$localize(o||(o=h([":Required a min value error hint@@formErrorRequiredMinValue\u241fd275ed6117f6bf6ea984fa3c8dec0dd302886ed3\u241f4728329757513770159:Il faut une valeur sup\xe9rieure \xe0 0 "])))]},template:function(e,t){if(1&e&&(_.Tb(0,"form",0),_.Tb(1,"div",1),_.Tb(2,"div",2),_.Tb(3,"vitamui-common-editable-input",3),_.jc(4,"translate"),_.Tb(5,"vitamui-common-field-error",4),_.Oc(6),_.jc(7,"translate"),_.Sb(),_.Tb(8,"vitamui-common-field-error",5),_.Oc(9),_.jc(10,"translate"),_.Sb(),_.Tb(11,"vitamui-common-field-error",6),_.Oc(12),_.jc(13,"translate"),_.Sb(),_.Tb(14,"vitamui-common-field-error",7),_.Oc(15),_.jc(16,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(17,"div",8),_.Ob(18,"vitamui-common-editable-input",9),_.jc(19,"translate"),_.Sb(),_.Sb(),_.Tb(20,"div",1),_.Tb(21,"div",2),_.Tb(22,"vitamui-common-editable-input",10),_.jc(23,"translate"),_.Tb(24,"vitamui-common-field-error",4),_.Oc(25),_.jc(26,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(27,"div",2),_.Tb(28,"vitamui-common-editable-input",11),_.jc(29,"translate"),_.Tb(30,"vitamui-common-field-error",4),_.Oc(31),_.jc(32,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Rb(33,12),_.Tb(34,"div",1),_.Tb(35,"div",13),_.Tb(36,"vitamui-common-editable-input",14),_.jc(37,"translate"),_.Tb(38,"vitamui-common-field-error",4),_.Oc(39),_.jc(40,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Tb(41,"div",1),_.Tb(42,"div",2),_.Tb(43,"vitamui-common-editable-input",15),_.jc(44,"translate"),_.Tb(45,"vitamui-common-field-error",4),_.Oc(46),_.jc(47,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(48,"div",2),_.Tb(49,"vitamui-common-editable-input",16),_.jc(50,"translate"),_.Tb(51,"vitamui-common-field-error",4),_.Oc(52),_.jc(53,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Tb(54,"div",1),_.Tb(55,"div",13),_.Tb(56,"vitamui-common-editable-select",17),_.jc(57,"translate"),_.Mc(58,xt,1,2,"vitamui-common-editable-option",18),_.Sb(),_.Sb(),_.Sb(),_.Qb(),_.Tb(59,"div",1),_.Tb(60,"div",13),_.Ob(61,"vitamui-common-editable-input",19),_.jc(62,"translate"),_.Sb(),_.Sb(),_.Tb(63,"div",1),_.Tb(64,"div",13),_.Tb(65,"vitamui-common-editable-select",20),_.jc(66,"translate"),_.Ob(67,"vitamui-common-editable-option",21),_.jc(68,"translate"),_.Ob(69,"vitamui-common-editable-option",22),_.jc(70,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(71,"div",1),_.Tb(72,"div",13),_.Tb(73,"vitamui-common-editable-select",23),_.jc(74,"translate"),_.Ob(75,"vitamui-common-editable-option",24),_.jc(76,"translate"),_.Ob(77,"vitamui-common-editable-option",24),_.jc(78,"translate"),_.Ob(79,"vitamui-common-editable-option",24),_.jc(80,"translate"),_.Ob(81,"vitamui-common-editable-option",24),_.jc(82,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(83,"div",1),_.Tb(84,"div",13),_.Tb(85,"vitamui-common-editable-toggle-group",25),_.jc(86,"translate"),_.Ob(87,"vitamui-common-editable-button-toggle",26),_.jc(88,"translate"),_.Ob(89,"vitamui-common-editable-button-toggle",27),_.jc(90,"translate"),_.Ob(91,"vitamui-common-editable-button-toggle",28),_.jc(92,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(93,"div",1),_.Tb(94,"div",13),_.Tb(95,"app-editable-domain-input",29),_.ec("defaultDomainChange",(function(e){return t.form.get("defaultEmailDomain").setValue(e)})),_.jc(96,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(97,"div",1),_.Tb(98,"div",13),_.Tb(99,"vitamui-common-slide-toggle",30),_.Xb(100,31),_.Sb(),_.Sb(),_.Sb(),_.Mc(101,Pt,10,3,"div",32),_.Sb()),2&e){var n=null,i=null,o=null,r=null,a=null,c=null,l=null,s=null,u=null,d=null,b=null,m=null,p=null,h=null,f=null,v=null,g=null,O=null,S=null,T=null,C=null,y=null,k=null,M=null,A=null;_.oc("formGroup",t.form),_.Bb(3),_.oc("label",_.kc(4,65,"CUSTOMER.INFORMATIONS.CODE"))("validator",null==t.form||null==(n=t.form.get("code"))?null:n.validator)("asyncValidator",null==t.form||null==(i=t.form.get("code"))?null:i.asyncValidator),_.Bb(3),_.Pc(_.kc(7,67,"COMMON.ERROR.REQUIRED")),_.Bb(3),_.Pc(_.kc(10,69,"COMMON.ERROR.WRONG_FORMAT")),_.Bb(3),_.Pc(_.lc(13,71,"COMMON.ERROR.STRING_MAX_LENGTH",_.tc(128,Ft,t.customerCodeMaxLength))),_.Bb(3),_.Pc(_.kc(16,74,"CUSTOMER.INFORMATIONS.CODE_ALREADY_EXIST")),_.Bb(3),_.oc("label",_.kc(19,76,"COMMON.ID"))("validator",null==t.form||null==(o=t.form.get("identifier"))?null:o.validator)("asyncValidator",null==t.form||null==(r=t.form.get("identifier"))?null:r.asyncValidator),_.Bb(4),_.oc("label",_.kc(23,78,"CUSTOMER.INFORMATIONS.NAME"))("validator",null==t.form||null==(a=t.form.get("name"))?null:a.validator)("asyncValidator",null==t.form||null==(c=t.form.get("name"))?null:c.asyncValidator),_.Bb(3),_.Qc("",_.kc(26,80,"COMMON.ERROR.REQUIRED")," "),_.Bb(3),_.oc("label",_.kc(29,82,"CUSTOMER.INFORMATIONS.SOCIAL_REASON"))("validator",null==t.form||null==(l=t.form.get("companyName"))?null:l.validator)("asyncValidator",null==t.form||null==(s=t.form.get("companyName"))?null:s.asyncValidator),_.Bb(3),_.Qc("",_.kc(32,84,"COMMON.ERROR.REQUIRED")," "),_.Bb(5),_.pc("maxlength",t.maxStreetLength),_.oc("label",_.kc(37,86,"COMMON.ADRESS.STREET"))("validator",null==t.form||null==(u=t.form.get("address.street"))?null:u.validator)("asyncValidator",null==t.form||null==(d=t.form.get("address.street"))?null:d.asyncValidator),_.Bb(3),_.Qc("",_.kc(40,88,"COMMON.ERROR.REQUIRED")," "),_.Bb(4),_.oc("label",_.kc(44,90,"COMMON.ADRESS.ZIPCODE"))("validator",null==t.form||null==(b=t.form.get("address.zipCode"))?null:b.validator)("asyncValidator",null==t.form||null==(m=t.form.get("address.zipCode"))?null:m.asyncValidator),_.Bb(3),_.Qc("",_.kc(47,92,"COMMON.ERROR.REQUIRED")," "),_.Bb(3),_.oc("label",_.kc(50,94,"COMMON.ADRESS.CITY"))("validator",null==t.form||null==(p=t.form.get("address.city"))?null:p.validator)("asyncValidator",null==t.form||null==(h=t.form.get("address.city"))?null:h.asyncValidator),_.Bb(3),_.Qc("",_.kc(53,96,"COMMON.ERROR.REQUIRED")," "),_.Bb(4),_.oc("label",_.kc(57,98,"COMMON.ADRESS.COUNTRY"))("validator",null==t.form||null==(f=t.form.get("address.country"))?null:f.validator)("asyncValidator",null==t.form||null==(v=t.form.get("address.country"))?null:v.asyncValidator),_.Bb(2),_.oc("ngForOf",t.countries),_.Bb(3),_.oc("label",_.kc(62,100,"CUSTOMER.INFORMATIONS.INTERNAL_CODE")),_.Bb(4),_.oc("label",_.kc(66,102,"CUSTOMER.INFORMATIONS.DEFAULT_LANGUAGE"))("validator",null==t.form||null==(g=t.form.get("language"))?null:g.validator)("asyncValidator",null==t.form||null==(O=t.form.get("language"))?null:O.asyncValidator),_.Bb(2),_.oc("content",_.kc(68,104,"COMMON.LANGUAGE.ENGLISH")),_.Bb(2),_.oc("content",_.kc(70,106,"COMMON.LANGUAGE.FRENCH")),_.Bb(4),_.oc("label",_.kc(74,108,"CUSTOMER.INFORMATIONS.PASSWORD_DURATION"))("validator",null==t.form||null==(S=t.form.get("passwordRevocationDelay"))?null:S.validator)("asyncValidator",null==t.form||null==(T=t.form.get("passwordRevocationDelay"))?null:T.asyncValidator),_.Bb(2),_.oc("value",3)("content",_.kc(76,110,"CUSTOMER.INFORMATIONS.PWD_REVOCATION_THREE")),_.Bb(2),_.oc("value",6)("content",_.kc(78,112,"CUSTOMER.INFORMATIONS.PWD_REVOCATION_SIX")),_.Bb(2),_.oc("value",9)("content",_.kc(80,114,"CUSTOMER.INFORMATIONS.PWD_REVOCATION_NINE")),_.Bb(2),_.oc("value",12)("content",_.kc(82,116,"CUSTOMER.INFORMATIONS.PWD_REVOCATION_TWELVE")),_.Bb(4),_.oc("label",_.kc(86,118,"CUSTOMER.INFORMATIONS.VALIDATIONS"))("validator",null==t.form||null==(C=t.form.get("otp"))?null:C.validator)("asyncValidator",null==t.form||null==(y=t.form.get("otp"))?null:y.asyncValidator),_.Bb(2),_.oc("content",_.kc(88,120,"CUSTOMER.INFORMATIONS.OTP_DISABLED")),_.Bb(2),_.oc("content",_.kc(90,122,"CUSTOMER.INFORMATIONS.OTP_OPTIONAL")),_.Bb(2),_.oc("content",_.kc(92,124,"CUSTOMER.INFORMATIONS.OTP_MANDATORY")),_.Bb(4),_.oc("label",_.kc(96,126,"CUSTOMER.INFORMATIONS.DOMAINS"))("validator",null==t.form||null==(k=t.form.get("emailDomains"))?null:k.validator)("asyncValidator",null==t.form||null==(M=t.form.get("emailDomains"))?null:M.asyncValidator)("defaultDomain",t.form.get("defaultEmailDomain").value),_.Bb(4),_.oc("disabled",t.gdprReadOnlyStatus),_.Bb(2),_.oc("ngIf",null==t.form||null==(A=t.form.get("gdprAlert"))?null:A.value)}},directives:[B.y,B.r,B.i,R.F,B.q,B.g,R.zb,B.l,B.j,R.I,C.o,R.H,R.K,R.B,wt,R.ac,C.p],pipes:[dt.d],styles:[""]}),Dt),Vt=T("f7+R"),qt=T("ZTXN"),_t=T("8j5Y"),Gt=T("vobO"),Ht=((Ut=function(e){function t(e,n){return M(this,t),f(this,t,[e,n+"/providers"])}return S(t,e),y(t,[{key:"create",value:function(e,t){var n=new FormData;return e.keystore&&e.idpMetadata&&(n.append("keystore",e.keystore,e.keystore.name),n.append("idpMetadata",e.idpMetadata,e.idpMetadata.name)),n.append("provider",JSON.stringify({protocoleType:e.protocoleType,customerId:e.customerId,name:e.name,internal:e.internal,keystorePassword:e.keystorePassword,patterns:e.patterns,enabled:e.enabled,mailAttribute:e.mailAttribute,identifierAttribute:e.identifierAttribute,authnRequestBinding:e.authnRequestBinding,authnRequestSigned:e.authnRequestSigned,wantsAssertionsSigned:e.wantsAssertionsSigned,propagateLogout:e.propagateLogout,maximumAuthenticationLifetime:e.maximumAuthenticationLifetime,autoProvisioningEnabled:e.autoProvisioningEnabled,clientId:e.clientId,clientSecret:e.clientSecret,discoveryUrl:e.discoveryUrl,scope:e.scope,preferredJwsAlgorithm:e.preferredJwsAlgorithm,customParams:e.customParams,useState:e.useState,useNonce:e.useNonce,usePkce:e.usePkce})),this.http.post(this.apiUrl,n,{headers:t})}},{key:"patch",value:function(e,n){return v(O(t.prototype),"patch",this).call(this,e,n)}},{key:"patchProviderIdpMetadata",value:function(e,t,n){var i=new FormData;return i.append("idpMetadata",t,t.name),i.append("provider",JSON.stringify({id:e})),this.http.patch(this.apiUrl+"/"+e+"/idpMetadata",i,{headers:n})}},{key:"patchProviderSpMetadata",value:function(e,t,n){var i=new FormData;return i.append("spMetadata",t,t.name),i.append("provider",JSON.stringify({id:e})),this.http.patch(this.apiUrl+"/"+e+"/spMetadata",i,{headers:n})}},{key:"patchProviderKeystore",value:function(e,t,n,i){var o=new FormData;return o.append("keystore",t,t.name),o.append("provider",JSON.stringify({id:e,keystorePassword:n})),this.http.patch(this.apiUrl+"/"+e+"/keystore",o,{headers:i})}},{key:"getAll",value:function(e,t){return this.http.get(this.apiUrl,{params:e,headers:t})}},{key:"getFileByUrl",value:function(e){return this.http.get(e,{observe:"response",responseType:"blob"})}},{key:"buildMetadataUrl",value:function(e){return this.apiUrl+"/".concat(e,"/idpMetadata")}},{key:"buildSpMetadataUrl",value:function(e){return this.apiUrl+"/".concat(e,"/spMetadata")}}]),t}(R.o)).\u0275fac=function(e){return new(e||Ut)(_.bc(Gt.c),_.bc(R.n))},Ut.\u0275prov=_.Jb({token:Ut,factory:Ut.\u0275fac,providedIn:"root"}),Ut),Kt=((jt=function(){function e(t,n){M(this,e),this.providerApi=t,this.snackBarService=n,this.updated=new qt.a}return y(e,[{key:"create",value:function(e){var t=this;return this.providerApi.create(e).pipe(Object(tt.a)((function(e){return t.addMetadataUrl(e)})),Object(tt.a)((function(e){return t.addSpMetadataUrl(e)})),Object(_t.a)((function(e){t.snackBarService.open({message:"SHARED.SNACKBAR.PROVIDER_CREATE",translateParams:{param1:e.name}})}),(function(e){t.snackBarService.open({message:e.error.message,translate:!1})})))}},{key:"patch",value:function(e){var t=this;return this.providerApi.patch(e).pipe(Object(tt.a)((function(e){return t.addMetadataUrl(e)})),Object(tt.a)((function(e){return t.addSpMetadataUrl(e)})),Object(_t.a)((function(e){return t.updated.next(e)})),Object(_t.a)((function(e){t.snackBarService.open({message:"SHARED.SNACKBAR.PROVIDER_UPDATE",translateParams:{param1:e.name}})}),(function(e){t.snackBarService.open({message:e.error.message,translate:!1})})))}},{key:"updateMetadataFile",value:function(e,t){var n=this;return this.providerApi.patchProviderIdpMetadata(e,t).pipe(Object(tt.a)((function(e){return n.addMetadataUrl(e)})),Object(tt.a)((function(e){return n.addSpMetadataUrl(e)})),Object(_t.a)((function(e){return n.updated.next(e)})),Object(_t.a)((function(e){n.snackBarService.open({message:"SHARED.SNACKBAR.PROVIDER_UPDATE",translateParams:{param1:e.name}})}),(function(e){n.snackBarService.open({message:e.error.message,translate:!1})})))}},{key:"updateKeystore",value:function(e,t,n){var i=this;return this.providerApi.patchProviderKeystore(e,t,n).pipe(Object(tt.a)((function(e){return i.addMetadataUrl(e)})),Object(_t.a)((function(e){return i.updated.next(e)})),Object(_t.a)((function(e){i.snackBarService.open({message:"SHARED.SNACKBAR.PROVIDER_UPDATE",translateParams:{param1:e.name}})}),(function(e){i.snackBarService.open({message:e.error.message,translate:!1})})))}},{key:"updateSpMetadataFile",value:function(e,t){var n=this;return this.providerApi.patchProviderSpMetadata(e,t).pipe(Object(tt.a)((function(e){return n.addSpMetadataUrl(e)})),Object(_t.a)((function(e){return n.updated.next(e)})),Object(_t.a)((function(e){n.snackBarService.open({message:"SHARED.SNACKBAR.PROVIDER_UPDATE",translateParams:{param1:e.name}})}),(function(e){n.snackBarService.open({message:e.error.message,translate:!1})})))}},{key:"getAll",value:function(e){var t=this,n=[];e&&n.push({key:"customerId",value:e,operator:R.W.equals});var i={criteria:n},o=(new Gt.g).set("criteria",JSON.stringify(i));return this.providerApi.getAll(o).pipe(Object(tt.a)((function(e){return e.map((function(e){return t.addMetadataUrl(e)}))})),Object(tt.a)((function(e){return e.map((function(e){return t.addSpMetadataUrl(e)}))})))}},{key:"getDomainByCustomerId",value:function(e){return this.getAll(e).pipe(Object(tt.a)((function(e){return e.reduce((function(e,t){return e.concat(t.patterns.map((function(e){return e.replace(".*@","")})))}),[])})))}},{key:"addMetadataUrl",value:function(e){return e.idpMetadataUrl=this.providerApi.buildMetadataUrl(e.id),e}},{key:"addSpMetadataUrl",value:function(e){return e.spMetadataUrl=this.providerApi.buildSpMetadataUrl(e.id),e}}]),e}()).\u0275fac=function(e){return new(e||jt)(_.bc(Ht),_.bc(R.Ab))},jt.\u0275prov=_.Jb({token:jt,factory:jt.\u0275fac,providedIn:"root"}),jt),Wt=function(e){return e.SAML="SAML",e.OIDC="OIDC",e.CERTIFICAT="CERTIFICAT",e}({}),Yt=["","HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES256K","ES384","ES512","PS256","PS384","PS512"],zt=T("IrDo"),Qt=["select"];function Xt(e,t){1&e&&(_.Tb(0,"span"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"SHARED.PATTERN_ALREADY_USED")))}function Jt(e,t){if(1&e&&(_.Tb(0,"mat-option",11),_.Oc(1),_.Mc(2,Xt,3,3,"span",12),_.Sb()),2&e){var n=t.$implicit;_.oc("value",n.value)("disabled",n.disabled),_.Bb(1),_.Qc(" ",n.value," "),_.Bb(1),_.oc("ngIf",null==n?null:n.disabled)}}function Zt(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",13),_.Tb(1,"div",14),_.Oc(2),_.Sb(),_.Tb(3,"div",15),_.ec("click",(function(){_.Dc(n);var e=t.$implicit;return _.ic().remove(e)})),_.Tb(4,"i",6),_.Oc(5,"clear"),_.Sb(),_.Sb(),_.Sb()}if(2&e){var i=t.$implicit;_.Bb(2),_.Pc(i)}}var $t,en={provide:B.o,useExisting:Object(_.V)((function(){return tn})),multi:!0},tn=(($t=function(){function e(){M(this,e),this.vitamuiMiniMode=!1,this.control=new B.e}return y(e,[{key:"writeValue",value:function(e){this.patterns=(e||[]).slice()}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"add",value:function(){this.controlValueValid()&&(this.patterns.push(this.control.value),this.onChange(this.patterns),this.enabledOptions.length<=0&&this.control.enabled&&this.control.disable())}},{key:"remove",value:function(e){this.patterns=this.patterns.filter((function(t){return t!==e})),this.onChange(this.patterns),this.enabledOptions.length>0&&this.control.disabled&&this.control.enable()}},{key:"availableOptions",get:function(){var e=this;return(this.options||[]).filter((function(t){return e.isAvailable(t.value)}))}},{key:"enabledOptions",get:function(){return this.availableOptions.filter((function(e){return!e.disabled}))}},{key:"controlValueValid",value:function(){return!(this.patterns||[]).includes(this.control.value)&&!!this.control.value}},{key:"isAvailable",value:function(e){return!this.patterns.includes(e)}}]),e}()).\u0275fac=function(e){return new(e||$t)},$t.\u0275cmp=_.Hb({type:$t,selectors:[["app-pattern"]],viewQuery:function(e,t){var n;1&e&&_.Ic(Qt,!0),2&e&&_.yc(n=_.fc())&&(t.select=n.first)},inputs:{options:"options",vitamuiMiniMode:"vitamuiMiniMode"},features:[_.Ab([en])],decls:15,vars:15,consts:[[1,"d-flex","mt-2"],[1,"vitamui-mat-select","d-flex","align-items-center"],["required","","panelClass","vitamui-mat-select",3,"formControl","placeholder"],["select",""],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"select-arrow"],[1,"material-icons"],[1,"btn","primary","btn-circle","mt-2",3,"disabled","click"],[1,"vitamui-icon","vitamui-icon-add"],[1,"mt-3","vitamui-chip-list"],["class","vitamui-chip",4,"ngFor","ngForOf"],[3,"value","disabled"],[4,"ngIf"],[1,"vitamui-chip"],[1,"vitamui-chip-content"],[1,"vitamui-remove-chip",3,"click"]],template:function(e,t){1&e&&(_.Tb(0,"div",0),_.Tb(1,"mat-form-field",1),_.Tb(2,"mat-select",2,3),_.jc(4,"translate"),_.Mc(5,Jt,3,4,"mat-option",4),_.Sb(),_.Tb(6,"div",5),_.Tb(7,"i",6),_.Oc(8,"keyboard_arrow_up"),_.Sb(),_.Tb(9,"i",6),_.Oc(10,"keyboard_arrow_down"),_.Sb(),_.Sb(),_.Sb(),_.Tb(11,"button",7),_.ec("click",(function(){return t.add()})),_.Ob(12,"i",8),_.Sb(),_.Sb(),_.Tb(13,"div",9),_.Mc(14,Zt,6,1,"div",10),_.Sb()),2&e&&(_.Fb("pattern-mini",t.vitamuiMiniMode),_.Bb(1),_.Jc("width",50,"%"),_.Fb("vitamui-mat-select-mini",t.vitamuiMiniMode),_.Bb(1),_.oc("formControl",t.control)("placeholder",_.kc(4,13,"SHARED.PATTERN")),_.Bb(3),_.oc("ngForOf",t.availableOptions),_.Bb(6),_.Fb("btn-small",t.vitamuiMiniMode),_.oc("disabled",!t.controlValueValid()),_.Bb(3),_.oc("ngForOf",t.patterns))},directives:[w.b,P.a,B.w,B.q,B.f,C.o,ze.k,C.p],pipes:[dt.d],styles:["[_nghost-%COMP%]  mat-form-field{width:50%}[_nghost-%COMP%]  .mat-form-field-wrapper{width:83%}[_nghost-%COMP%]  .mat-form-field-flex{height:100%}[_nghost-%COMP%]  .mat-form-field-infix{padding:.5rem 0!important}[_nghost-%COMP%]  .mat-form-field-label span{line-height:15px}"]}),$t);function nn(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",9),_.Tb(1,"div",10),_.Oc(2),_.Sb(),_.Tb(3,"div",11),_.ec("click",(function(){_.Dc(n);var e=t.$implicit;return _.ic().remove(e.key)})),_.Tb(4,"i",12),_.Oc(5,"clear"),_.Sb(),_.Sb(),_.Sb()}if(2&e){var i=t.$implicit;_.Bb(2),_.Rc("",i.key," : ",i.value,"")}}var on,rn=[[["vitamui-common-field-error"]]],an=["vitamui-common-field-error"],cn={provide:B.o,useExisting:Object(_.V)((function(){return ln})),multi:!0},ln=((on=function(){function e(){M(this,e),this.spinnerDiameter=25,this.values=new Map,this.separatorKeysCodes=[ut.e],this.controlKey=new B.e(null),this.controlValue=new B.e(null)}return y(e,[{key:"ngAfterContentInit",value:function(){var e=this;this.controlKey.statusChanges.subscribe((function(){e.errors.forEach((function(t){t.show=!!e.controlKey.errors&&!!e.controlKey.errors[t.errorKey]}))}))}},{key:"writeValue",value:function(e){var t=this;null!=e&&Object.keys(e).forEach((function(n){t.values.set(n,e[n])}))}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"add",value:function(){var e,t;if(!this.controlKey.invalid&&!this.controlKey.pending){var n=null===(e=this.controlKey.value)||void 0===e?void 0:e.trim(),i=null===(t=this.controlValue.value)||void 0===t?void 0:t.trim();!this.values.get(n)&&n&&i&&(this.values.set(n,i),this.onChange(this.strMapToObj(this.values)),this.controlKey.reset(),this.controlValue.reset())}}},{key:"remove",value:function(e){this.values.get(e)&&(this.values.delete(e),this.onChange(this.strMapToObj(this.values)))}},{key:"buttonAddDisabled",value:function(){var e,t;return!(null===(e=this.controlValue.value)||void 0===e?void 0:e.trim())||!(null===(t=this.controlKey.value)||void 0===t?void 0:t.trim())||this.valueExists}},{key:"valueExists",get:function(){return!this.controlKey.value||!!this.values.get(this.controlKey.value)}},{key:"strMapToObj",value:function(e){var t,n=Object.create(null),i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=m(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw r}}}}(e);try{for(i.s();!(t=i.n()).done;){var o=b(t.value,2),r=o[0],a=o[1];n[r]=a}}catch(c){i.e(c)}finally{i.f()}return n}}]),e}()).\u0275fac=function(e){return new(e||on)},on.\u0275cmp=_.Hb({type:on,selectors:[["app-custom-params"]],contentQueries:function(e,t,n){var i;1&e&&_.Gb(n,R.zb,!1),2&e&&_.yc(i=_.fc())&&(t.errors=i)},inputs:{keyPlaceholder:"keyPlaceholder",valuePlaceholder:"valuePlaceholder",spinnerDiameter:"spinnerDiameter",selectedValues:"selectedValues"},features:[_.Ab([cn])],ngContentSelectors:an,decls:15,vars:15,consts:[[1,"row","mt-2"],[1,"col-9"],[1,"p-0","col-5",3,"formControl","placeholder","blur","keydown.enter"],[1,"p-0","col-5","ml-4",3,"formControl","placeholder","blur","keydown.enter"],[1,"col-2"],["type","button",1,"btn","primary",3,"disabled","click"],[1,"vitamui-input-errors"],[1,"vitamui-chip-list","mt-1"],["class","vitamui-chip",4,"ngFor","ngForOf"],[1,"vitamui-chip"],[1,"vitamui-chip-content"],[1,"vitamui-remove-chip",3,"click"],[1,"material-icons"]],template:function(e,t){1&e&&(_.nc(rn),_.Tb(0,"div",0),_.Tb(1,"div",1),_.Tb(2,"vitamui-common-input",2),_.ec("blur",(function(){return t.onTouched()}))("keydown.enter",(function(){return t.add()})),_.jc(3,"translate"),_.Sb(),_.Tb(4,"vitamui-common-input",3),_.ec("blur",(function(){return t.onTouched()}))("keydown.enter",(function(){return t.add()})),_.jc(5,"translate"),_.Sb(),_.Sb(),_.Tb(6,"div",4),_.Tb(7,"button",5),_.ec("click",(function(){return t.add()})),_.Oc(8),_.jc(9,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(10,"div",6),_.mc(11),_.Sb(),_.Tb(12,"div",7),_.Mc(13,nn,6,2,"div",8),_.jc(14,"keyvalue"),_.Sb()),2&e&&(_.Bb(2),_.oc("formControl",t.controlKey)("placeholder",_.kc(3,7,t.keyPlaceholder)),_.Bb(2),_.oc("formControl",t.controlValue)("placeholder",_.kc(5,9,t.valuePlaceholder)),_.Bb(3),_.oc("disabled",t.buttonAddDisabled()),_.Bb(1),_.Pc(_.kc(9,11,"COMMON.ADD")),_.Bb(5),_.oc("ngForOf",_.kc(14,13,t.values)))},directives:[R.Qb,B.q,B.f,C.o],pipes:[dt.d,C.i],styles:["[_nghost-%COMP%]{width:100%;display:block}mat-chip[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], mat-chip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.list-input-control[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:stretch}.list-input-control[_ngcontent-%COMP%]   .list-input-wrapper[_ngcontent-%COMP%]{position:relative;margin-right:15px;flex-grow:0.5}.list-input-control[_ngcontent-%COMP%]   .list-input-wrapper[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{position:absolute;right:12px;top:12px}.vitamui-chip-list[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.5rem}.list-input-mini[_nghost-%COMP%]   .list-input-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .list-input-mini[_nghost-%COMP%]   .list-input-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:34px;border-radius:17px}.list-input-mini[_nghost-%COMP%]   .list-input-control[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:18px}.list-input-mini[_nghost-%COMP%]   .list-input-control[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{right:8px;top:8px}.list-input-mini[_nghost-%COMP%]   .vitamui-chip-list[_ngcontent-%COMP%]{padding-left:27px}.required-marker[_ngcontent-%COMP%]{color:red}.vitamui-input[_ngcontent-%COMP%]{width:45%!important}"]}),on);function sn(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"COMMON.ERROR.REQUIRED")))}function un(e,t){if(1&e&&(_.Rb(0),_.Mc(1,sn,3,3,"vitamui-common-input-error",15),_.Qb()),2&e){var n=_.ic(),i=null;_.Bb(1),_.oc("ngIf",!(null==n.form||null==(i=n.form.get("name"))||null==i.errors||!i.errors.required))}}function dn(e,t){if(1&e){var n=_.Ub();_.Tb(0,"button",26),_.ec("click",(function(){return _.Dc(n),_.ic().onSubmit()})),_.Oc(1),_.jc(2,"translate"),_.Sb()}if(2&e){var i=_.ic();_.oc("disabled",i.disableNextButton),_.Bb(1),_.Qc(" ",_.kc(2,2,"COMMON.SUBMIT")," ")}}function bn(e,t){if(1&e&&(_.Tb(0,"button",27),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e){var n=_.ic();_.oc("disabled",n.disableNextButton),_.Bb(1),_.Qc(" ",_.kc(2,2,"COMMON.NEXT")," ")}}function mn(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"COMMON.ERROR.REQUIRED")))}function pn(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"CUSTOMER.SSO.MODAL.WRONG_PASSWORD")))}function hn(e,t){if(1&e&&(_.Rb(0),_.Mc(1,mn,3,3,"vitamui-common-input-error",15),_.Mc(2,pn,3,3,"vitamui-common-input-error",15),_.Qb()),2&e){var n=_.ic(3),i=null,o=null;_.Bb(1),_.oc("ngIf",!(null==n.form||null==(i=n.form.get("keystorePassword"))||null==i.errors||!i.errors.required)),_.Bb(1),_.oc("ngIf",!(null==n.form||null==(o=n.form.get("keystorePassword"))||null==o.errors||!o.errors.badPassword))}}function fn(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",4),_.Tb(1,"div",5),_.Oc(2),_.jc(3,"translate"),_.Sb(),_.Tb(4,"div",30),_.Oc(5),_.jc(6,"translate"),_.Sb(),_.Tb(7,"div",31),_.Tb(8,"div",32),_.Tb(9,"mat-button-toggle-group",33,9),_.Tb(11,"mat-button-toggle",34),_.Oc(12,"GET "),_.Sb(),_.Tb(13,"mat-button-toggle",35),_.Oc(14,"POST "),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Tb(15,"div",31),_.Tb(16,"div",32),_.Tb(17,"label",36),_.Tb(18,"span",37),_.Oc(19),_.jc(20,"translate"),_.Sb(),_.Tb(21,"div",38),_.Oc(22),_.Sb(),_.Sb(),_.Tb(23,"input",39),_.ec("change",(function(e){return _.Dc(n),_.ic(2).setKeystore(e.target.files)})),_.Sb(),_.Sb(),_.Sb(),_.Tb(24,"div",31),_.Tb(25,"vitamui-common-input",40),_.jc(26,"translate"),_.Mc(27,hn,3,2,"ng-container",15),_.Sb(),_.Sb(),_.Tb(28,"div",41),_.Tb(29,"label",42),_.Tb(30,"span",37),_.Oc(31),_.jc(32,"translate"),_.Sb(),_.Tb(33,"div",38),_.Oc(34),_.Sb(),_.Sb(),_.Tb(35,"input",43),_.ec("change",(function(e){return _.Dc(n),_.ic(2).setIdpMetadata(e.target.files)})),_.Sb(),_.Sb(),_.Tb(36,"div",44),_.Ob(37,"vitamui-common-input",45),_.jc(38,"translate"),_.Tb(39,"div",46),_.Tb(40,"vitamui-common-slide-toggle",47),_.Tb(41,"span"),_.Oc(42),_.jc(43,"translate"),_.Sb(),_.Sb(),_.Tb(44,"vitamui-common-slide-toggle",48),_.Tb(45,"span"),_.Oc(46),_.jc(47,"translate"),_.Sb(),_.Sb(),_.Tb(48,"vitamui-common-slide-toggle",49),_.Tb(49,"span"),_.Oc(50),_.jc(51,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Tb(52,"div",22),_.Tb(53,"button",50),_.ec("click",(function(){return _.Dc(n),_.ic(2).onSubmit()})),_.Oc(54),_.jc(55,"translate"),_.Sb(),_.Tb(56,"button",25),_.ec("click",(function(){return _.Dc(n),_.ic(2).onCancel()})),_.Oc(57),_.jc(58,"translate"),_.Sb(),_.Sb(),_.Tb(59,"button",51),_.Ob(60,"i",52),_.Rb(61),_.Tb(62,"span",53),_.Oc(63),_.jc(64,"translate"),_.Sb(),_.Qb(),_.Sb(),_.Sb()}if(2&e){var i,o=_.ic(2);_.Bb(2),_.Rc("",_.kc(3,17,"CUSTOMER.SSO.MODAL.TITLE"),' "',null==o.data||null==o.data.customer?null:o.data.customer.name,'"'),_.Bb(3),_.Pc(_.kc(6,19,"CUSTOMER.SSO.MODAL.SUBTITLE_SAML")),_.Bb(14),_.Pc(_.kc(20,21,"CUSTOMER.SSO.MODAL.UPLOAD_KEYSTORE")),_.Bb(3),_.Pc(null==o.keystore?null:o.keystore.name),_.Bb(3),_.oc("placeholder",_.kc(26,23,"CUSTOMER.SSO.MODAL.KEYSTORE_PWD")),_.Bb(2),_.oc("ngIf",null==(i=o.form.get("keystorePassword"))?null:i.touched),_.Bb(4),_.Pc(_.kc(32,25,"CUSTOMER.SSO.MODAL.UPLOAD_METADATA")),_.Bb(3),_.Pc(null==o.idpMetadata?null:o.idpMetadata.name),_.Bb(3),_.oc("placeholder",_.kc(38,27,"CUSTOMER.SSO.MAXIMUM_AUTHENTICATION_LIFETIME")),_.Bb(5),_.Pc(_.kc(43,29,"CUSTOMER.SSO.WANTS_ASSERTION_SIGNED")),_.Bb(4),_.Pc(_.kc(47,31,"CUSTOMER.SSO.AUTHN_REQUEST_SIGNED")),_.Bb(4),_.Pc(_.kc(51,33,"CUSTOMER.SSO.PROPAGATE_LOGOUT")),_.Bb(3),_.oc("disabled",!o.isFormValid),_.Bb(1),_.Qc(" ",_.kc(55,35,"COMMON.SUBMIT")," "),_.Bb(3),_.Qc(" ",_.kc(58,37,"COMMON.UNDO")," "),_.Bb(6),_.Pc(_.kc(64,39,"COMMON.BACK"))}}function vn(e,t){if(1&e&&(_.Tb(0,"mat-option",77),_.Oc(1),_.Sb()),2&e){var n=t.$implicit;_.oc("value",n),_.Bb(1),_.Pc(n)}}function gn(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",4),_.Tb(1,"div",54),_.Oc(2),_.jc(3,"translate"),_.Sb(),_.Tb(4,"div",55),_.Oc(5),_.jc(6,"translate"),_.Sb(),_.Tb(7,"div",56),_.Ob(8,"vitamui-common-input",57),_.jc(9,"translate"),_.Sb(),_.Tb(10,"div",56),_.Ob(11,"vitamui-common-input",58),_.jc(12,"translate"),_.Sb(),_.Tb(13,"div",56),_.Ob(14,"vitamui-common-input",59),_.jc(15,"translate"),_.Sb(),_.Tb(16,"div",56),_.Ob(17,"vitamui-common-input",60),_.jc(18,"translate"),_.Sb(),_.Tb(19,"div",61),_.Tb(20,"div"),_.Tb(21,"mat-form-field",62),_.Tb(22,"mat-select",63),_.jc(23,"translate"),_.Mc(24,vn,2,2,"mat-option",64),_.Sb(),_.Tb(25,"div",65),_.Tb(26,"i",66),_.Oc(27,"keyboard_arrow_down"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Tb(28,"div",67),_.Tb(29,"div",44),_.Tb(30,"vitamui-common-slide-toggle",68),_.Tb(31,"span"),_.Oc(32),_.jc(33,"translate"),_.Sb(),_.Sb(),_.Tb(34,"vitamui-common-slide-toggle",69),_.Tb(35,"span"),_.Oc(36),_.jc(37,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(38,"div",44),_.Tb(39,"vitamui-common-slide-toggle",70),_.Tb(40,"span"),_.Oc(41),_.jc(42,"translate"),_.Sb(),_.Sb(),_.Tb(43,"vitamui-common-slide-toggle",71),_.Tb(44,"span"),_.Oc(45),_.jc(46,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Tb(47,"div",72),_.Tb(48,"div",55),_.Tb(49,"label",73),_.Oc(50),_.jc(51,"translate"),_.Sb(),_.Sb(),_.Ob(52,"app-custom-params",74),_.Sb(),_.Tb(53,"div",75),_.Tb(54,"button",76),_.ec("click",(function(){return _.Dc(n),_.ic(2).onSubmit()})),_.Oc(55),_.jc(56,"translate"),_.Sb(),_.Tb(57,"button",25),_.ec("click",(function(){return _.Dc(n),_.ic(2).onCancel()})),_.Oc(58),_.jc(59,"translate"),_.Sb(),_.Sb(),_.Tb(60,"button",51),_.Ob(61,"i",52),_.Rb(62),_.Tb(63,"span",53),_.Oc(64),_.jc(65,"translate"),_.Sb(),_.Qb(),_.Sb(),_.Sb()}if(2&e){var i=_.ic(2);_.Bb(2),_.Rc("",_.kc(3,21,"CUSTOMER.SSO.MODAL.TITLE"),' "',null==i.data||null==i.data.customer?null:i.data.customer.name,'"'),_.Bb(3),_.Pc(_.kc(6,23,"CUSTOMER.SSO.MODAL.SUBTITLE_OIDC")),_.Bb(3),_.oc("placeholder",_.kc(9,25,"CUSTOMER.SSO.CLIENT_IDENTIFIER")),_.Bb(3),_.oc("placeholder",_.kc(12,27,"CUSTOMER.SSO.CLIENT_SECRET")),_.Bb(3),_.oc("placeholder",_.kc(15,29,"CUSTOMER.SSO.URL_DISCOVERY")),_.Bb(3),_.oc("placeholder",_.kc(18,31,"CUSTOMER.SSO.PERIMETER")),_.Bb(5),_.oc("required",!1)("placeholder",_.kc(23,33,"CUSTOMER.SSO.JWS_ALGORITHME")),_.Bb(2),_.oc("ngForOf",i.jwsAlgorithms),_.Bb(8),_.Pc(_.kc(33,35,"CUSTOMER.SSO.STATEFUL")),_.Bb(4),_.Pc(_.kc(37,37,"CUSTOMER.SSO.USE_PKCE")),_.Bb(5),_.Pc(_.kc(42,39,"CUSTOMER.SSO.USE_NONCE")),_.Bb(4),_.Pc(_.kc(46,41,"CUSTOMER.SSO.PROPAGATE_LOGOUT")),_.Bb(5),_.Qc("",_.kc(51,43,"SHARED.EDITABLE_PARAMS.CUSTOM_SETTINGS")," "),_.Bb(2),_.oc("keyPlaceholder","SHARED.EDITABLE_PARAMS.KEY")("valuePlaceholder","SHARED.EDITABLE_PARAMS.VALUE"),_.Bb(2),_.oc("disabled",!i.form.valid),_.Bb(1),_.Qc(" ",_.kc(56,45,"COMMON.SUBMIT")," "),_.Bb(3),_.Qc(" ",_.kc(59,47,"COMMON.UNDO")," "),_.Bb(6),_.Pc(_.kc(65,49,"COMMON.BACK"))}}function On(e,t){if(1&e&&(_.Tb(0,"cdk-step"),_.Mc(1,fn,65,41,"div",28),_.Mc(2,gn,66,51,"ng-template",null,29,_.Nc),_.Sb()),2&e){var n=_.zc(3),i=_.ic();_.Bb(1),_.oc("ngIf","SAML"===i.form.get("protocoleType").value)("ngIfElse",n)}}var Sn,Tn=((Sn=function(){function e(t,n,i,o,r){M(this,e),this.dialogRef=t,this.data=n,this.formBuilder=i,this.identityProviderService=o,this.confirmDialogService=r,this.stepCount=2,this.stepIndex=0,this.protocoleType=Wt,this.jwsAlgorithms=Yt,this.samlSpecificControls=this.initializeSamlControls(),this.oidcSpecificControls=this.initializeOIDCControls(),this.commonControls=this.initializeCommonControls(),this.form=this.formBuilder.group(Object.assign(Object.assign({},this.commonControls.controls),this.samlSpecificControls.controls))}return y(e,[{key:"ngOnInit",value:function(){var e=this;this.keyPressSubscription=this.confirmDialogService.listenToEscapeKeyPress(this.dialogRef).subscribe((function(){return e.onCancel()})),this.form.get("protocoleType").setValue(Wt.SAML)}},{key:"onProtocoleTypeChange",value:function(e){switch(e){case Wt.CERTIFICAT:this.stepCount=1,this.form=this.formBuilder.group(Object.assign({},this.commonControls.controls));break;case Wt.SAML:this.form=this.formBuilder.group(Object.assign(Object.assign({},this.commonControls.controls),this.samlSpecificControls.controls)),this.stepCount=2;break;case Wt.OIDC:this.form=this.formBuilder.group(Object.assign(Object.assign({},this.commonControls.controls),this.oidcSpecificControls.controls)),this.stepCount=2}}},{key:"initializeSamlControls",value:function(){return this.formBuilder.group({keystorePassword:[null,B.x.required],authnRequestBinding:[R.m.POST,B.x.required],maximumAuthenticationLifetime:[null,B.x.pattern("^[0-9]*$")],wantsAssertionsSigned:[!0],authnRequestSigned:[!0],propagateLogout:[!1]})}},{key:"initializeOIDCControls",value:function(){return this.formBuilder.group({clientId:[null,B.x.required],clientSecret:[null,B.x.required],discoveryUrl:[null,B.x.required],scope:[],preferredJwsAlgorithm:[],customParams:[],useState:[!0],useNonce:[!0],usePkce:[!1],propagateLogout:[!1]})}},{key:"initializeCommonControls",value:function(){return this.formBuilder.group({protocoleType:[Wt.CERTIFICAT,B.x.required],customerId:[this.data.customer.id,B.x.required],enabled:[!0,B.x.required],name:[null,B.x.required],internal:[{value:!1,disabled:!0},B.x.required],patterns:[null,B.x.required],mailAttribute:[null],identifierAttribute:[null],autoProvisioningEnabled:[!1,B.x.required]})}},{key:"ngOnDestroy",value:function(){this.keyPressSubscription.unsubscribe()}},{key:"onCancel",value:function(){this.form.dirty?this.confirmDialogService.confirmBeforeClosing(this.dialogRef):this.dialogRef.close()}},{key:"onSubmit",value:function(){var e,t=this;this.form.valid&&((e=this.form.value).keystore=this.keystore,e.idpMetadata=this.idpMetadata,e.internal=!1,this.identityProviderService.create(e).subscribe((function(e){return t.dialogRef.close(e)}),(function(e){e&&e.error&&e.error.error&&"INVALID_KEYSTORE_PASSWORD"===e.error.error&&t.form.get("keystorePassword").setErrors({badPassword:!0})})))}},{key:"setKeystore",value:function(e){this.keystore=e.item(0)}},{key:"setIdpMetadata",value:function(e){this.idpMetadata=e.item(0)}},{key:"displayNextButton",get:function(){return this.form.get("protocoleType").value!==Wt.CERTIFICAT}},{key:"disableNextButton",get:function(){return!this.form.get("patterns").valid||!this.form.get("name").valid}},{key:"isFormValid",get:function(){return!this.form.pending&&this.form.valid&&!!this.keystore&&!!this.idpMetadata}}]),e}()).\u0275fac=function(e){return new(e||Sn)(_.Nb(k.g),_.Nb(k.a),_.Nb(B.d),_.Nb(Kt),_.Nb(R.t))},Sn.\u0275cmp=_.Hb({type:Sn,selectors:[["app-identity-provider-create"]],decls:47,vars:30,consts:[[1,"header"],[3,"index","count"],[3,"formGroup"],[3,"selectionChange"],[1,"content"],[1,"text","large","bold"],["formControlName","enabled",1,"col-4","p-0"],[1,"d-flex"],["formControlName","protocoleType",1,"vitamui-button-toggle-group","mt-3","mr-4"],["group","matButtonToggleGroup"],["value","SAML",3,"change"],["value","OIDC",3,"change"],["value","CERTIFICAT",3,"change"],[1,"d-flex","align-items-start","justify-content-between"],["formControlName","name","maxlength","100","required","",1,"mt-3",3,"placeholder"],[4,"ngIf"],[1,"row","mt-3"],["formControlName","mailAttribute",1,"col-6",3,"placeholder"],["formControlName","identifierAttribute",1,"col-6",3,"placeholder"],[1,"mt-3"],["formControlName","patterns",3,"options"],["formControlName","autoProvisioningEnabled",1,"p-0"],[1,"actions","mt-3"],["class","btn primary",3,"disabled","click",4,"ngIf"],["cdkStepperNext","","class","btn primary",3,"disabled",4,"ngIf"],["type","button",1,"btn","cancel","link",3,"click"],[1,"btn","primary",3,"disabled","click"],["cdkStepperNext","",1,"btn","primary",3,"disabled"],["class","content",4,"ngIf","ngIfElse"],["specific_oidc",""],[1,"text","small","lighter","mb-4"],[1,"row","mt-3","align-items-center"],[1,"col-6","vitamui-input-file"],["formControlName","authnRequestBinding",1,"vitamui-button-toggle-group"],["value","GET"],["value","POST"],["for","keystore"],[1,"text","link","bold","primary"],[1,"vitamui-input-file-filename"],["id","keystore","type","file","accept",".jks",3,"change"],["formControlName","keystorePassword","type","password","required","","maxlength","50",1,"col-6",3,"placeholder"],[1,"mt-3","vitamui-input-file"],["for","idpMetadata"],["id","idpMetadata","type","file","accept",".xml",3,"change"],[1,"row"],["formControlName","maximumAuthenticationLifetime",1,"col-6",3,"placeholder"],[1,"row","ml-0"],["formControlName","wantsAssertionsSigned",1,"col-12"],["formControlName","authnRequestSigned",1,"col-12"],["formControlName","propagateLogout",1,"col-12"],["type","submit",1,"btn","primary",3,"disabled","click"],["type","button","cdkStepperPrevious","",1,"btn","link"],[1,"vitamui-icon","vitamui-icon-chevron-left"],[1,"underline"],[1,"text","large","bold","oidc-row"],[1,"text","small","lighter","mb-4","oidc-row"],[1,"oidc-row"],["formControlName","clientId","required","",1,"col-11","p-0",3,"placeholder"],["formControlName","clientSecret","required","",1,"col-11","p-0",3,"placeholder"],["formControlName","discoveryUrl","required","",1,"col-11","p-0",3,"placeholder"],["formControlName","scope",1,"col-11","p-0",3,"placeholder"],[1,"d-flex","oidc-row"],[1,"vitamui-mat-select"],["formControlName","preferredJwsAlgorithm","panelclass","vitamui-mat-select",3,"required","placeholder"],[3,"value",4,"ngFor","ngForOf"],[1,"select-arrow"],[1,"material-icons"],[1,"oidc-row","mt-2","ml-4"],["formControlName","useState",1,"col-6"],["formControlName","usePkce",1,"col-6"],["formControlName","useNonce",1,"col-6"],["formControlName","propagateLogout",1,"col-6"],[1,"oidc-row","mt-4"],[1,"custom-label"],["formControlName","customParams",1,"col-11","p-0",3,"keyPlaceholder","valuePlaceholder"],[1,"actions"],["type","button",1,"btn","primary",3,"disabled","click"],[3,"value"]],template:function(e,t){var n;1&e&&(_.Tb(0,"div",0),_.Ob(1,"vitamui-common-progress-bar",1),_.Sb(),_.Tb(2,"form",2),_.Tb(3,"vitamui-common-stepper",3),_.ec("selectionChange",(function(e){return t.stepIndex=e.selectedIndex})),_.Tb(4,"cdk-step"),_.Tb(5,"div",4),_.Tb(6,"div",5),_.Oc(7),_.jc(8,"translate"),_.Sb(),_.Tb(9,"div"),_.Tb(10,"vitamui-common-slide-toggle",6),_.Oc(11),_.jc(12,"translate"),_.Sb(),_.Sb(),_.Tb(13,"div",7),_.Tb(14,"mat-button-toggle-group",8,9),_.Tb(16,"mat-button-toggle",10),_.ec("change",(function(e){return t.onProtocoleTypeChange(e.value)})),_.Tb(17,"span"),_.Oc(18,"SAML"),_.Sb(),_.Sb(),_.Tb(19,"mat-button-toggle",11),_.ec("change",(function(e){return t.onProtocoleTypeChange(e.value)})),_.Tb(20,"span"),_.Oc(21,"OIDC"),_.Sb(),_.Sb(),_.Tb(22,"mat-button-toggle",12),_.ec("change",(function(e){return t.onProtocoleTypeChange(e.value)})),_.Tb(23,"span"),_.Oc(24,"Certificat"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Tb(25,"div",13),_.Tb(26,"vitamui-common-input",14),_.jc(27,"translate"),_.Mc(28,un,2,1,"ng-container",15),_.Sb(),_.Sb(),_.Tb(29,"div",16),_.Ob(30,"vitamui-common-input",17),_.jc(31,"translate"),_.Ob(32,"vitamui-common-input",18),_.jc(33,"translate"),_.Sb(),_.Tb(34,"div",19),_.Ob(35,"app-pattern",20),_.Sb(),_.Tb(36,"div",19),_.Tb(37,"vitamui-common-slide-toggle",21),_.Oc(38),_.jc(39,"translate"),_.Sb(),_.Sb(),_.Tb(40,"div",22),_.Mc(41,dn,3,4,"button",23),_.Mc(42,bn,3,4,"button",24),_.Tb(43,"button",25),_.ec("click",(function(){return t.onCancel()})),_.Oc(44),_.jc(45,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Mc(46,On,4,2,"cdk-step",15),_.Sb(),_.Sb()),2&e&&(_.Bb(1),_.oc("index",t.stepIndex)("count",t.stepCount),_.Bb(1),_.oc("formGroup",t.form),_.Bb(5),_.Rc("",_.kc(8,16,"CUSTOMER.SSO.MODAL.TITLE"),' "',null==t.data||null==t.data.customer?null:t.data.customer.name,'"'),_.Bb(4),_.Qc(" ",_.kc(12,18,"CUSTOMER.SSO.ACTIVE_SWITCH")," "),_.Bb(15),_.oc("placeholder",_.kc(27,20,"CUSTOMER.SSO.NAME")),_.Bb(2),_.oc("ngIf",null==(n=t.form.get("name"))?null:n.touched),_.Bb(2),_.oc("placeholder",_.kc(31,22,"CUSTOMER.SSO.MAIL_ATTRIBUTE")),_.Bb(2),_.oc("placeholder",_.kc(33,24,"CUSTOMER.SSO.IDENTIFIER_ATTRIBUTE")),_.Bb(3),_.oc("options",null==t.data?null:t.data.domains),_.Bb(3),_.Pc(_.kc(39,26,"CUSTOMER.SSO.AUTO_PROVISIONING")),_.Bb(3),_.oc("ngIf",!t.displayNextButton),_.Bb(1),_.oc("ngIf",t.displayNextButton),_.Bb(2),_.Qc(" ",_.kc(45,28,"COMMON.UNDO")," "),_.Bb(2),_.oc("ngIf","CERTIFICAT"!==t.form.get("protocoleType").value))},directives:[R.dc,B.y,B.r,B.i,R.mb,zt.a,R.ac,B.q,B.g,N.b,N.a,R.Qb,B.l,B.w,C.p,tn,R.Rb,zt.d,zt.e,w.b,P.a,C.o,ln,ze.k],pipes:[dt.d],styles:[""]}),Sn);function Cn(e,t){if(1&e&&(_.Tb(0,"div"),_.Oc(1),_.Sb()),2&e){var n=t.$implicit;_.Bb(1),_.Pc(n)}}function yn(e,t){1&e&&(_.Tb(0,"i",13),_.Oc(1,"edit"),_.Sb())}function kn(e,t){1&e&&(_.Tb(0,"div"),_.Ob(1,"mat-spinner",14),_.Sb())}function Mn(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",15),_.Tb(1,"button",16),_.ec("click",(function(){return _.Dc(n),_.ic(2).confirm()})),_.Tb(2,"i",17),_.Oc(3,"check"),_.Sb(),_.Sb(),_.Tb(4,"button",18),_.ec("click",(function(){return _.Dc(n),_.ic(2).cancel()})),_.Tb(5,"i",17),_.Oc(6,"clear"),_.Sb(),_.Sb(),_.Sb()}if(2&e){var i=_.ic(2);_.Bb(1),_.oc("disabled",!i.canConfirm)}}function An(e,t){if(1&e){var n=_.Ub();_.Rb(0),_.Tb(1,"div",2,3),_.Tb(3,"div",4),_.ec("click",(function(){return _.Dc(n),_.ic().enterEditMode()})),_.Tb(4,"div",5),_.Tb(5,"label"),_.Oc(6),_.Sb(),_.Tb(7,"span",6),_.Mc(8,Cn,2,1,"div",7),_.Sb(),_.Tb(9,"div",8),_.Tb(10,"app-pattern",9),_.ec("click",(function(){return _.Dc(n),_.ic().onPatternClick()})),_.Sb(),_.Sb(),_.Sb(),_.Mc(11,yn,2,0,"i",10),_.Mc(12,kn,2,0,"div",0),_.Sb(),_.Sb(),_.Ob(13,"div",11),_.Mc(14,Mn,7,1,"ng-template",12),_.Qb()}if(2&e){var i=_.zc(2),o=_.ic();_.Bb(3),_.Fb("edit-mode",o.editMode),_.Bb(3),_.Pc(o.label),_.Bb(2),_.oc("ngForOf",o.control.value),_.Bb(2),_.Jc("width",100,"%"),_.oc("formControl",o.control)("options",o.options),_.Bb(1),_.oc("ngIf",!o.showSpinner&&!o.editMode),_.Bb(1),_.oc("ngIf",o.showSpinner),_.Bb(2),_.oc("cdkConnectedOverlayOpen",o.editMode)("cdkConnectedOverlayOrigin",i)("cdkConnectedOverlayPositions",o.positions)}}function En(e,t){if(1&e&&(_.Tb(0,"div"),_.Oc(1),_.Sb()),2&e){var n=t.$implicit;_.Bb(1),_.Pc(n)}}function Rn(e,t){if(1&e&&(_.Tb(0,"div",19),_.Tb(1,"label"),_.Oc(2),_.Sb(),_.Mc(3,En,2,1,"div",7),_.Sb()),2&e){var n=_.ic();_.Bb(2),_.Pc(n.label),_.Bb(1),_.oc("ngForOf",null==n.control?null:n.control.value)}}var In,Bn={provide:B.o,useExisting:Object(_.V)((function(){return Nn})),multi:!0},Nn=((In=function(e){function t(e){var n;return M(this,t),(n=f(this,t,[e])).patternClicked=!1,n}return S(t,e),y(t,[{key:"onClick",value:function(e){if(this.editMode)if(this.patternClicked)this.patternClicked=!1;else{var t=this.cdkConnectedOverlay.overlayRef,n=this.pattern.select.overlayDir.overlayRef;this.isInside(e,this.elementRef.nativeElement)||this.isInside(e,t.hostElement)||this.isInside(e,n?n.overlayElement:null)||this.isInside(e,n?n.backdropElement:null)||this.cancel()}}},{key:"onPatternClick",value:function(){this.patternClicked=!0}},{key:"isInside",value:function(e,t){return t&&(e===t||t.contains(e))}}]),t}(R.D)).\u0275fac=function(e){return new(e||In)(_.Nb(_.l))},In.\u0275cmp=_.Hb({type:In,selectors:[["app-editable-patterns"]],viewQuery:function(e,t){var n;1&e&&_.Uc(tn,!0),2&e&&_.yc(n=_.fc())&&(t.pattern=n.first)},inputs:{options:"options"},features:[_.Ab([Bn]),_.yb],decls:2,vars:2,consts:[[4,"ngIf"],["class","read-only-field",4,"ngIf"],["cdkOverlayOrigin",""],["origin","cdkOverlayOrigin"],[1,"vitamui-input","editable-field","squarish",3,"click"],[1,"editable-field-content"],[1,"editable-field-text-content"],[4,"ngFor","ngForOf"],[1,"mt-2","editable-field-control"],[3,"formControl","options","click"],["class","material-icons edit-icon",4,"ngIf"],[1,"vitamui-input-errors"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions"],[1,"material-icons","edit-icon"],[1,"vitamui-spinner","small"],[1,"editable-field-actions"],["type","button",1,"editable-field-confirm",3,"disabled","click"],[1,"material-icons"],["type","button",1,"editable-field-cancel",3,"click"],[1,"read-only-field"]],template:function(e,t){1&e&&(_.Mc(0,An,15,13,"ng-container",0),_.Mc(1,Rn,4,2,"div",1)),2&e&&(_.oc("ngIf",!t.disabled),_.Bb(1),_.oc("ngIf",t.disabled))},directives:[C.p,st.b,C.o,tn,B.q,B.f,st.a,U.b],encapsulation:2}),In),wn=["fileInput"];function xn(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"SHARED.EDITABLE_FIELD.WRONG_PASSWORD")))}function Pn(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",17),_.Tb(1,"button",18),_.ec("click",(function(){return _.Dc(n),_.ic(2).confirm()})),_.Tb(2,"i",19),_.Oc(3,"check"),_.Sb(),_.Sb(),_.Tb(4,"button",20),_.ec("click",(function(){return _.Dc(n),_.ic(2).cancel()})),_.Tb(5,"i",19),_.Oc(6,"clear"),_.Sb(),_.Sb(),_.Sb()}if(2&e){var i=_.ic(2);_.Bb(1),_.oc("disabled",!i.canConfirm)}}function Dn(e,t){if(1&e){var n=_.Ub();_.Rb(0),_.Tb(1,"div",2,3),_.Tb(3,"div",4),_.ec("click",(function(){return _.Dc(n),_.ic().enterEditMode()})),_.Tb(4,"div",5),_.Tb(5,"label"),_.Oc(6),_.jc(7,"translate"),_.Sb(),_.Tb(8,"span",6),_.Oc(9),_.Sb(),_.Tb(10,"div",7),_.Tb(11,"div",8),_.Tb(12,"label",9),_.Tb(13,"span",10),_.Oc(14),_.jc(15,"translate"),_.Sb(),_.Tb(16,"div",11),_.Oc(17),_.Sb(),_.Sb(),_.Tb(18,"input",12,13),_.ec("change",(function(e){return _.Dc(n),_.ic().setFile(e.target.files)})),_.Sb(),_.Sb(),_.Tb(20,"div"),_.Ob(21,"input",14),_.jc(22,"translate"),_.Tb(23,"div",15),_.Mc(24,xn,3,3,"vitamui-common-input-error",0),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Tb(25,"div",15),_.mc(26),_.Sb(),_.Mc(27,Pn,7,1,"ng-template",16),_.Qb()}if(2&e){var i=_.zc(2),o=_.ic();_.Bb(3),_.Fb("edit-mode",o.editMode),_.Bb(3),_.Pc(_.kc(7,12,"CUSTOMER.SSO.KEYSTORE")),_.Bb(3),_.Pc(null==o.originValue?null:o.originValue.name),_.Bb(5),_.Pc(_.kc(15,14,"SHARED.EDITABLE_FIELD.UPLOAD_FILE")),_.Bb(3),_.Pc(null==o.file?null:o.file.name),_.Bb(4),_.oc("formControl",o.control)("placeholder",_.kc(22,16,"SHARED.EDITABLE_FIELD.PASSWORD_PLACEHOLDER")),_.Bb(3),_.oc("ngIf",null==o.control?null:o.control.hasError("badPassword")),_.Bb(3),_.oc("cdkConnectedOverlayOpen",o.editMode)("cdkConnectedOverlayOrigin",i)("cdkConnectedOverlayPositions",o.positions)}}function jn(e,t){if(1&e&&(_.Tb(0,"div",21),_.Tb(1,"label"),_.Oc(2),_.jc(3,"translate"),_.Sb(),_.Tb(4,"div"),_.Oc(5),_.Sb(),_.Sb()),2&e){var n=_.ic();_.Bb(2),_.Pc(_.kc(3,2,"CUSTOMER.SSO.KEYSTORE")),_.Bb(3),_.Pc(null==n.originValue?null:n.originValue.name)}}var Un,Fn=[[["vitamui-field-error"]]],Ln=["vitamui-field-error"],Vn=((Un=function(e){function t(e,n){var i;return M(this,t),(i=f(this,t,[n])).identityProviderService=e,i.originValue=Object(R.Mb)([""],"keystore.jks"),i}return S(t,e),y(t,[{key:"canConfirm",get:function(){return this.editMode&&!!this.file&&this.control.valid}},{key:"setFile",value:function(e){this.file=e.item(0)}},{key:"confirm",value:function(){var e=this;this.canConfirm&&this.identityProviderService.updateKeystore(this.identityProvider.id,this.file,this.control.value).subscribe((function(){e.originValue=e.file,e.cancel()}),(function(){e.control.setErrors({badPassword:!0})}))}},{key:"cancel",value:function(){this.editMode&&(this.editMode=!1,this.file=null,this.fileInput.nativeElement.value=null,this.control.reset())}}]),t}(R.D)).\u0275fac=function(e){return new(e||Un)(_.Nb(Kt),_.Nb(_.l))},Un.\u0275cmp=_.Hb({type:Un,selectors:[["app-editable-keystore"]],viewQuery:function(e,t){var n;1&e&&_.Uc(wn,!0),2&e&&_.yc(n=_.fc())&&(t.fileInput=n.first)},inputs:{identityProvider:"identityProvider"},features:[_.yb],ngContentSelectors:Ln,decls:2,vars:2,consts:[[4,"ngIf"],["class","read-only-field",4,"ngIf"],["cdkOverlayOrigin",""],["origin","cdkOverlayOrigin"],[1,"vitamui-input","editable-field",3,"click"],[1,"editable-field-content"],[1,"editable-field-text-content"],[1,"editable-field-control"],[1,"vitamui-input-file"],["for","vitamui-input-keystore"],[1,"text","primary","underline"],[1,"vitamui-input-file-filename"],["id","vitamui-input-keystore","type","file","accept",".jks",3,"change"],["fileInput",""],["type","password","required","","maxlength","50",1,"vitamui-input","vitamui-small",3,"formControl","placeholder"],[1,"vitamui-input-errors"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions"],[1,"editable-field-actions"],["type","button",1,"editable-field-confirm",3,"disabled","click"],[1,"material-icons"],["type","button",1,"editable-field-cancel",3,"click"],[1,"read-only-field"]],template:function(e,t){1&e&&(_.nc(Fn),_.Mc(0,Dn,28,18,"ng-container",0),_.Mc(1,jn,6,4,"div",1)),2&e&&(_.oc("ngIf",!t.disabled),_.Bb(1),_.oc("ngIf",t.disabled))},directives:[C.p,st.b,B.c,B.w,B.l,B.q,B.f,st.a,R.Rb],pipes:[dt.d],styles:[".editable-field-control[_ngcontent-%COMP%]{flex-direction:column}.vitamui-input-file[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:10px}input.vitamui-input[_ngcontent-%COMP%]{width:100%;padding:0 17px}.vitamui-input-errors[_ngcontent-%COMP%]{padding:4px 17px}"]}),Un);function qn(e,t){if(1&e&&(_.Tb(0,"div"),_.Oc(1),_.Sb()),2&e){var n=t.$implicit;_.Bb(1),_.Rc("",n.key," : ",n.value,"")}}function _n(e,t){1&e&&(_.Tb(0,"i",13),_.Oc(1,"edit"),_.Sb())}function Gn(e,t){1&e&&(_.Tb(0,"div"),_.Ob(1,"mat-spinner",14),_.Sb())}function Hn(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",15),_.Tb(1,"button",16),_.ec("click",(function(){return _.Dc(n),_.ic(2).confirm()})),_.Tb(2,"i",17),_.Oc(3,"check"),_.Sb(),_.Sb(),_.Tb(4,"button",18),_.ec("click",(function(){return _.Dc(n),_.ic(2).cancel()})),_.Tb(5,"i",17),_.Oc(6,"clear"),_.Sb(),_.Sb(),_.Sb()}if(2&e){var i=_.ic(2);_.Bb(1),_.oc("disabled",!i.canConfirm)}}function Kn(e,t){if(1&e){var n=_.Ub();_.Rb(0),_.Tb(1,"div",2,3),_.Tb(3,"div",4),_.ec("click",(function(){return _.Dc(n),_.ic().enterEditMode()})),_.Tb(4,"div",5),_.Tb(5,"label"),_.Oc(6),_.jc(7,"translate"),_.Sb(),_.Tb(8,"span",6),_.Mc(9,qn,2,2,"div",7),_.jc(10,"keyvalue"),_.Sb(),_.Tb(11,"div",8),_.Tb(12,"app-custom-params",9),_.ec("click",(function(){return _.Dc(n),_.ic().onDomainInputClick()})),_.Sb(),_.Sb(),_.Sb(),_.Mc(13,_n,2,0,"i",10),_.Mc(14,Gn,2,0,"div",0),_.Sb(),_.Sb(),_.Ob(15,"div",11),_.Mc(16,Hn,7,1,"ng-template",12),_.Qb()}if(2&e){var i=_.zc(2),o=_.ic();_.Bb(3),_.Fb("edit-mode",o.editMode),_.Bb(3),_.Pc(_.kc(7,15,"SHARED.EDITABLE_PARAMS.CUSTOM_SETTINGS")),_.Bb(3),_.oc("ngForOf",_.kc(10,17,o.getList(o.control.value))),_.Bb(3),_.Jc("width",90,"%"),_.oc("formControl",o.control)("selectedValues",null==o.control?null:o.control.value)("keyPlaceholder","SHARED.EDITABLE_PARAMS.KEY")("valuePlaceholder","SHARED.EDITABLE_PARAMS.VALUE"),_.Bb(1),_.oc("ngIf",!o.showSpinner&&!o.editMode),_.Bb(1),_.oc("ngIf",o.showSpinner),_.Bb(2),_.oc("cdkConnectedOverlayOpen",o.editMode)("cdkConnectedOverlayOrigin",i)("cdkConnectedOverlayPositions",o.positions)}}function Wn(e,t){1&e&&_.Ob(0,"div",19)}var Yn,zn={provide:B.o,useExisting:Object(_.V)((function(){return Qn})),multi:!0},Qn=((Yn=function(e){function t(e){var n;return M(this,t),(n=f(this,t,[e])).array=[],n.domainInputClicked=!1,n.defaultDomainChange=new _.n,n}return S(t,e),y(t,[{key:"canConfirm",get:function(){return this.editMode&&!this.control.pending&&this.control.valid&&this.control.dirty}},{key:"defaultDomain",get:function(){return this._defaultDomain},set:function(e){this._defaultDomain=e,this.selected=e}},{key:"ngOnInit",value:function(){}},{key:"getList",value:function(e){var t=new Map;return e&&Object.entries(e).forEach((function(e){t.set(e[0],e[1])})),t}},{key:"cancel",value:function(){v(O(t.prototype),"cancel",this).call(this),this.selected=this.defaultDomain}},{key:"onClick",value:function(e){if(this.editMode)if(this.domainInputClicked)this.domainInputClicked=!1;else{var t=this.cdkConnectedOverlay.overlayRef;this.isInside(e,this.elementRef.nativeElement)||this.isInside(e,t.hostElement)||this.cancel()}}},{key:"onDomainInputClick",value:function(){this.domainInputClicked=!0}},{key:"enterEditMode",value:function(){v(O(t.prototype),"enterEditMode",this).call(this)}}]),t}(R.D)).\u0275fac=function(e){return new(e||Yn)(_.Nb(_.l))},Yn.\u0275cmp=_.Hb({type:Yn,selectors:[["editable-custom-params"]],inputs:{defaultDomain:"defaultDomain",placeholder:"placeholder"},outputs:{defaultDomainChange:"defaultDomainChange"},features:[_.Ab([zn]),_.yb],decls:2,vars:2,consts:[[4,"ngIf"],["class","read-only-field disabled-input",4,"ngIf"],["cdkOverlayOrigin",""],["origin","cdkOverlayOrigin"],[1,"vitamui-input","editable-field",3,"click"],[1,"editable-field-content"],[1,"editable-field-text-content"],[4,"ngFor","ngForOf"],[1,"editable-field-control","mt-1"],[3,"formControl","selectedValues","keyPlaceholder","valuePlaceholder","click"],["class","material-icons edit-icon",4,"ngIf"],[1,"vitamui-input-errors"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions"],[1,"material-icons","edit-icon"],[1,"vitamui-spinner","small"],[1,"editable-field-actions"],["type","button",1,"editable-field-confirm",3,"disabled","click"],[1,"material-icons"],["type","button",1,"editable-field-cancel",3,"click"],[1,"read-only-field","disabled-input"]],template:function(e,t){1&e&&(_.Mc(0,Kn,17,19,"ng-container",0),_.Mc(1,Wn,1,0,"div",1)),2&e&&(_.oc("ngIf",!t.disabled),_.Bb(1),_.oc("ngIf",!1))},directives:[C.p,st.b,C.o,ln,B.q,B.f,st.a,U.b],pipes:[dt.d,C.i],encapsulation:2}),Yn);function Xn(e,t){1&e&&(_.Tb(0,"div",6),_.Tb(1,"div",15),_.Tb(2,"vitamui-common-editable-toggle-group",20),_.jc(3,"translate"),_.Ob(4,"vitamui-common-editable-button-toggle",21),_.Ob(5,"vitamui-common-editable-button-toggle",22),_.Ob(6,"vitamui-common-editable-button-toggle",23),_.Tb(7,"vitamui-common-field-error",11),_.Oc(8),_.jc(9,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb()),2&e&&(_.Bb(2),_.oc("label",_.kc(3,2,"CUSTOMER.SSO.PROTOCOL_TYPE")),_.Bb(6),_.Pc(_.kc(9,4,"COMMON.ERROR.REQUIRED")))}function Jn(e,t){if(1&e&&(_.Tb(0,"div",6),_.Tb(1,"div",15),_.Tb(2,"vitamui-common-editable-input",29),_.jc(3,"translate"),_.Tb(4,"vitamui-common-field-error",11),_.Oc(5),_.jc(6,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb()),2&e){var n=_.ic(2),i=null,o=null;_.Bb(2),_.pc("label",_.kc(3,4,"CUSTOMER.SSO.MAXIMUM_AUTHENTICATION_LIFETIME")),_.oc("validator",null==n.form||null==(i=n.form.get("maximumAuthenticationLifetime"))?null:i.validator)("asyncValidator",null==n.form||null==(o=n.form.get("maximumAuthenticationLifetime"))?null:o.asyncValidator),_.Bb(3),_.Pc(_.kc(6,6,"COMMON.ERROR.REQUIRED"))}}function Zn(e,t){1&e&&(_.Tb(0,"div",6),_.Tb(1,"div",30),_.Tb(2,"vitamui-common-slide-toggle",31),_.Oc(3),_.jc(4,"translate"),_.Sb(),_.Sb(),_.Tb(5,"div",2),_.Tb(6,"vitamui-common-slide-toggle",32),_.Oc(7),_.jc(8,"translate"),_.Sb(),_.Sb(),_.Tb(9,"div",2),_.Tb(10,"vitamui-common-slide-toggle",33),_.Oc(11),_.jc(12,"translate"),_.Sb(),_.Sb(),_.Sb()),2&e&&(_.Bb(3),_.Qc(" ",_.kc(4,3,"CUSTOMER.SSO.WANTS_ASSERTION_SIGNED")," "),_.Bb(4),_.Qc(" ",_.kc(8,5,"CUSTOMER.SSO.AUTHN_REQUEST_SIGNED")," "),_.Bb(4),_.Qc(" ",_.kc(12,7,"CUSTOMER.SSO.PROPAGATE_LOGOUT")," "))}function $n(e,t){if(1&e&&(_.Tb(0,"div"),_.Tb(1,"div",6),_.Tb(2,"div",2),_.Tb(3,"vitamui-common-editable-toggle-group",24),_.Ob(4,"vitamui-common-editable-button-toggle",25),_.Ob(5,"vitamui-common-editable-button-toggle",26),_.Tb(6,"vitamui-common-field-error",11),_.Oc(7),_.jc(8,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Mc(9,Jn,7,8,"div",5),_.Tb(10,"div",6),_.Tb(11,"div",2),_.Ob(12,"app-editable-keystore",27),_.Sb(),_.Tb(13,"div",2),_.Tb(14,"vitamui-common-editable-file",28),_.jc(15,"translate"),_.Tb(16,"vitamui-common-field-error",11),_.Oc(17),_.jc(18,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Mc(19,Zn,13,9,"div",5),_.Sb()),2&e){var n=_.ic(),i=null,o=null;_.Bb(3),_.oc("validator",null==n.form||null==(i=n.form.get("authnRequestBinding"))?null:i.validator)("asyncValidator",null==n.form||null==(o=n.form.get("authnRequestBinding"))?null:o.asyncValidator),_.Bb(4),_.Pc(_.kc(8,12,"COMMON.ERROR.REQUIRED")),_.Bb(2),_.oc("ngIf",!n.identityProvider.internal),_.Bb(3),_.oc("identityProvider",n.identityProvider)("disabled",n.readOnly),_.Bb(2),_.oc("formControl",n.idpMetadata)("label",_.kc(15,14,"CUSTOMER.SSO.IDP_METADATA"))("validator",null==n.idpMetadata?null:n.idpMetadata.validator)("asyncValidator",null==n.idpMetadata?null:n.idpMetadata.asyncValidator),_.Bb(3),_.Pc(_.kc(18,16,"COMMON.ERROR.REQUIRED")),_.Bb(2),_.oc("ngIf",!n.identityProvider.internal)}}function ei(e,t){if(1&e&&_.Ob(0,"vitamui-common-editable-option",9),2&e){var n=t.$implicit;_.oc("value",n)("content",n)}}function ti(e,t){if(1&e&&(_.Tb(0,"div"),_.Tb(1,"div",6),_.Tb(2,"div",2),_.Tb(3,"vitamui-common-editable-input",34),_.jc(4,"translate"),_.Tb(5,"vitamui-common-field-error",11),_.Oc(6),_.jc(7,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(8,"div",2),_.Tb(9,"vitamui-common-editable-input",35),_.jc(10,"translate"),_.Tb(11,"vitamui-common-field-error",11),_.Oc(12),_.jc(13,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Tb(14,"div",6),_.Tb(15,"div",15),_.Tb(16,"vitamui-common-editable-input",36),_.jc(17,"translate"),_.Tb(18,"vitamui-common-field-error",11),_.Oc(19),_.jc(20,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Tb(21,"div",6),_.Tb(22,"div",15),_.Ob(23,"vitamui-common-editable-input",37),_.jc(24,"translate"),_.Sb(),_.Sb(),_.Tb(25,"div",6),_.Tb(26,"div",15),_.Ob(27,"editable-custom-params",38),_.Sb(),_.Sb(),_.Tb(28,"div",6),_.Tb(29,"div",39),_.Tb(30,"vitamui-common-editable-select",40),_.jc(31,"translate"),_.Mc(32,ei,1,2,"vitamui-common-editable-option",41),_.Sb(),_.Sb(),_.Sb(),_.Tb(33,"div",1),_.Tb(34,"div",42),_.Tb(35,"vitamui-common-slide-toggle",43),_.Oc(36),_.jc(37,"translate"),_.Sb(),_.Sb(),_.Tb(38,"div",42),_.Tb(39,"vitamui-common-slide-toggle",44),_.Oc(40),_.jc(41,"translate"),_.Sb(),_.Sb(),_.Tb(42,"div",42),_.Tb(43,"vitamui-common-slide-toggle",45),_.Oc(44),_.jc(45,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(46,"div",46),_.Tb(47,"vitamui-common-slide-toggle",33),_.Oc(48),_.jc(49,"translate"),_.Sb(),_.Sb(),_.Sb()),2&e){var n=_.ic(),i=null,o=null,r=null;_.Bb(3),_.oc("validator",null==n.form||null==(i=n.form.get("clientId"))?null:i.validator)("label",_.kc(4,16,"CUSTOMER.SSO.CLIENT_IDENTIFIER")),_.Bb(3),_.Pc(_.kc(7,18,"COMMON.ERROR.REQUIRED")),_.Bb(3),_.oc("validator",null==n.form||null==(o=n.form.get("clientSecret"))?null:o.validator)("label",_.kc(10,20,"CUSTOMER.SSO.CLIENT_SECRET")),_.Bb(3),_.Pc(_.kc(13,22,"COMMON.ERROR.REQUIRED")),_.Bb(4),_.oc("validator",null==n.form||null==(r=n.form.get("discoveryUrl"))?null:r.validator)("label",_.kc(17,24,"CUSTOMER.SSO.URL_DISCOVERY")),_.Bb(3),_.Pc(_.kc(20,26,"COMMON.ERROR.REQUIRED")),_.Bb(4),_.oc("label",_.kc(24,28,"CUSTOMER.SSO.PERIMETER")),_.Bb(7),_.oc("label",_.kc(31,30,"CUSTOMER.SSO.JWS_ALGORITHME")),_.Bb(2),_.oc("ngForOf",n.jwsAlgorithms),_.Bb(4),_.Pc(_.kc(37,32,"CUSTOMER.SSO.STATEFUL")),_.Bb(4),_.Qc("",_.kc(41,34,"CUSTOMER.SSO.USE_NONCE")," "),_.Bb(4),_.Pc(_.kc(45,36,"CUSTOMER.SSO.USE_PKCE")),_.Bb(4),_.Qc(" ",_.kc(49,38,"CUSTOMER.SSO.PROPAGATE_LOGOUT")," ")}}var ni,ii=((ni=function(){function e(t,n,i){M(this,e),this.formBuilder=t,this.identityProviderService=n,this.snackBarService=i,this._domains=[],this.displayOIDCSAMLBLOCKS=!1,this.jwsAlgorithms=Yt,this.commonsControls=this.initializeCommonControls(),this.specificSamlControls=this.initializeSamlControls(),this.specificOidcControls=this.initializeOidcControls(),this.form=this.formBuilder.group(Object.assign({},this.commonsControls.controls)),this.idpMetadata=new B.e({value:Object(R.Mb)([""],"metadata.xml"),disabled:!0})}return y(e,[{key:"identityProvider",get:function(){return this._identityProvider},set:function(e){this._identityProvider=e,this._identityProvider.internal||this.idpMetadata.enable({emitEvent:!1}),e&&this.manageForm(e),this.previousValue=this.form.value}},{key:"domains",get:function(){return this._domains},set:function(e){var t=this;this._domains=e.map((function(e){return t.identityProvider.patterns.includes(e.value)?{value:e.value,disabled:!1}:e}))}},{key:"readOnly",get:function(){return this._readOnly},set:function(e){this._readOnly=e||this._identityProvider.internal,e?(this.form.enabled&&this.form.disable({emitEvent:!1}),this.idpMetadata.enabled&&this.idpMetadata.disable({emitEvent:!1})):(this.form.disabled&&this.form.enable({emitEvent:!1}),this.idpMetadata.disabled&&this.idpMetadata.enable({emitEvent:!1}))}},{key:"updateForm",value:function(){var e,t;(null===(e=this.form.value)||void 0===e?void 0:e.protocoleType)!==(null===(t=this.previousValue)||void 0===t?void 0:t.protocoleType)&&(this.displayOIDCSAMLBLOCKS=!1,this.manageForm(this.form.getRawValue()))}},{key:"initializeCommonControls",value:function(){var e=this,t=this.formBuilder.group({protocoleType:[],identifier:[{value:null,disabled:!0},B.x.required],enabled:[!0,B.x.required],name:[null,B.x.required],internal:[{value:null,disabled:!0},B.x.required],patterns:[null,B.x.required],mailAttribute:[null],identifierAttribute:[null],autoProvisioningEnabled:[!1,B.x.required]});return t.get("protocoleType").valueChanges.subscribe((function(t){t===e.previousValue.protocoleType&&e.manageForm(e.previousValue)})),t}},{key:"initializeSamlControls",value:function(){return this.formBuilder.group({authnRequestBinding:[R.m.POST,B.x.required],maximumAuthenticationLifetime:[null],wantsAssertionsSigned:[this.identityProvider?this.identityProvider.wantsAssertionsSigned:null,B.x.required],authnRequestSigned:[this.identityProvider?this.identityProvider.authnRequestSigned:null,B.x.required],propagateLogout:[this.identityProvider?this.identityProvider.propagateLogout:null,B.x.required]})}},{key:"initializeOidcControls",value:function(){return this.formBuilder.group({clientId:[null,B.x.required],clientSecret:[null,B.x.required],discoveryUrl:[null,B.x.required],scope:[],preferredJwsAlgorithm:[],customParams:[],useState:[!0],useNonce:[!0],usePkce:[!1],propagateLogout:[!1]})}},{key:"manageChanges",value:function(){var e=this;Object(Je.a)(this.form.statusChanges,this.form.valueChanges).pipe(Object(et.a)((function(){return e.updateForm(),e.form.valid})),Object($e.a)(200),Object(tt.a)((function(){return e.diff(e.form.value,e.previousValue)})),Object(et.a)((function(e){return!Object(ot.c)(e)})),Object(tt.a)((function(t){return Object(ot.a)({id:e.identityProvider.id},t)})),Object(nt.a)((function(t){return e.identityProviderService.patch(t)}))).subscribe((function(){e.previousValue=e.form.value})),this.idpMetadata.valueChanges.pipe(Object($e.a)(200),Object(et.a)((function(){return e.idpMetadata.valid})),Object(nt.a)((function(){return e.identityProviderService.updateMetadataFile(e.identityProvider.id,e.idpMetadata.value)}))).subscribe()}},{key:"diff",value:function(e,t){var n={};if(e.protocoleType!==t.protocoleType)switch(t.protocoleType){case Wt.OIDC:n={clientId:null,clientSecret:null,discoveryUrl:null,scope:null,preferredJwsAlgorithm:null,customParams:null,useState:null,useNonce:null,usePkce:null};break;case Wt.SAML:n={idpMetadata:null,keystoreBase64:null,keystorePassword:null,maximumAuthenticationLifetime:null,wantsAssertionsSigned:!0,authnRequestSigned:!0}}var i=Object(ot.g)(e,(function(e,n){return Object(ot.e)(e)?Object(ot.d)(t[n],e):t[n]===e}));return n=Object.assign(Object.assign({},n),i),Object(ot.f)(n,(function(e){return e}))}},{key:"manageForm",value:function(e){switch(this.displayOIDCSAMLBLOCKS=!1,e.protocoleType){case Wt.CERTIFICAT:this.form=this.formBuilder.group(Object.assign({},this.commonsControls.controls));break;case Wt.SAML:this.form=this.formBuilder.group(Object.assign(Object.assign({},this.commonsControls.controls),this.specificSamlControls.controls)),e.authnRequestBinding||(e.authnRequestBinding=R.m.POST),null==e.authnRequestSigned&&(e.authnRequestSigned=!0),null==e.wantsAssertionsSigned&&(e.wantsAssertionsSigned=!0);break;case Wt.OIDC:this.form=this.formBuilder.group(Object.assign(Object.assign({},this.commonsControls.controls),this.specificOidcControls.controls)),null==e.useState&&(e.useState=!0,e.useNonce=!0,e.usePkce=!1)}this.form.reset(e,{emitEvent:!1}),this.manageChanges(),this.form.invalid&&e.protocoleType===Wt.OIDC?this.snackBarService.open({message:"SHARED.SNACKBAR.OIDC_UPDATE"}):this.form.invalid&&e.protocoleType===Wt.SAML&&this.snackBarService.open({message:"SHARED.SNACKBAR.SAML_UPDATE_ERROR"}),this.displayOIDCSAMLBLOCKS=!0}}]),e}()).\u0275fac=function(e){return new(e||ni)(_.Nb(B.d),_.Nb(Kt),_.Nb(R.Ab))},ni.\u0275cmp=_.Hb({type:ni,selectors:[["app-identity-provider-details"]],inputs:{identityProvider:"identityProvider",domains:"domains",readOnly:"readOnly"},decls:51,vars:52,consts:[[3,"formGroup"],[1,"row","align-items-center"],[1,"col-6"],["formControlName","enabled"],[1,"read-only-field"],["class","row",4,"ngIf"],[1,"row"],["formControlName","identifier","maxlength","12","disabled","",3,"label","validator","asyncValidator"],["formControlName","internal",3,"label","validator","asyncValidator"],[3,"value","content"],["formControlName","name","maxlength","100",3,"label","validator","asyncValidator"],["errorKey","required"],["formControlName","mailAttribute","maxlength","100",3,"label"],["formControlName","identifierAttribute","maxlength","100",3,"label"],[1,"row","pattern-row"],[1,"col-12"],["formControlName","patterns",3,"label","options","validator","asyncValidator"],[1,"row","mt-2"],["formControlName","autoProvisioningEnabled",1,"col-4"],[4,"ngIf"],["formControlName","protocoleType",3,"label"],["value","SAML","content","SAML"],["value","OIDC","content","OIDC"],["value","CERTIFICAT","content","CERTIFICAT"],["formControlName","authnRequestBinding","label","Request Binding",3,"validator","asyncValidator"],["value","GET","content","GET"],["value","POST","content","POST"],[3,"identityProvider","disabled"],["accept",".xml",3,"formControl","label","validator","asyncValidator"],["type","number","formControlName","maximumAuthenticationLifetime",3,"label","validator","asyncValidator"],[1,"col-5"],["formControlName","wantsAssertionsSigned"],["formControlName","authnRequestSigned"],["formControlName","propagateLogout"],["formControlName","clientId",3,"validator","label"],["formControlName","clientSecret",3,"validator","label"],["formControlName","discoveryUrl",3,"validator","label"],["formControlName","scope",3,"label"],["formControlName","customParams"],[1,"col-12","form-control"],["formControlName","preferredJwsAlgorithm",3,"label"],[3,"value","content",4,"ngFor","ngForOf"],[1,"col-4"],["formControlName","useState"],["formControlName","usePkce"],["formControlName","useNonce"],[1,"col-6","padding0"]],template:function(e,t){if(1&e&&(_.Tb(0,"form",0),_.Tb(1,"div",1),_.Tb(2,"div",2),_.Tb(3,"vitamui-common-slide-toggle",3),_.Oc(4),_.jc(5,"translate"),_.Sb(),_.Sb(),_.Tb(6,"div",2),_.Tb(7,"div",4),_.Tb(8,"label"),_.Oc(9,"Identifiant SSO"),_.Sb(),_.Tb(10,"div"),_.Oc(11),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Mc(12,Xn,10,6,"div",5),_.Tb(13,"div",6),_.Tb(14,"div",2),_.Ob(15,"vitamui-common-editable-input",7),_.jc(16,"translate"),_.Sb(),_.Tb(17,"div",2),_.Tb(18,"vitamui-common-editable-toggle-group",8),_.jc(19,"translate"),_.Ob(20,"vitamui-common-editable-button-toggle",9),_.jc(21,"translate"),_.Ob(22,"vitamui-common-editable-button-toggle",9),_.jc(23,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(24,"div",6),_.Tb(25,"div",2),_.Tb(26,"vitamui-common-editable-input",10),_.jc(27,"translate"),_.Tb(28,"vitamui-common-field-error",11),_.Oc(29),_.jc(30,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Tb(31,"div",6),_.Tb(32,"div",2),_.Ob(33,"vitamui-common-editable-input",12),_.jc(34,"translate"),_.Sb(),_.Tb(35,"div",2),_.Ob(36,"vitamui-common-editable-input",13),_.jc(37,"translate"),_.Sb(),_.Sb(),_.Tb(38,"div",14),_.Tb(39,"div",15),_.Tb(40,"app-editable-patterns",16),_.jc(41,"translate"),_.Tb(42,"vitamui-common-field-error",11),_.Oc(43),_.jc(44,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Tb(45,"div",17),_.Tb(46,"vitamui-common-slide-toggle",18),_.Oc(47),_.jc(48,"translate"),_.Sb(),_.Sb(),_.Mc(49,$n,20,18,"div",19),_.Mc(50,ti,50,40,"div",19),_.Sb()),2&e){var n=null,i=null,o=null,r=null,a=null,c=null,l=null,s=null;_.oc("formGroup",t.form),_.Bb(4),_.Pc(_.kc(5,28,"CUSTOMER.SSO.ACTIVE_SWITCH")),_.Bb(7),_.Pc(t.identityProvider.technicalName),_.Bb(1),_.oc("ngIf",!t.form.get("internal").value),_.Bb(3),_.oc("label",_.kc(16,30,"COMMON.ID"))("validator",null==t.form||null==(n=t.form.get("identifier"))?null:n.validator)("asyncValidator",null==t.form||null==(i=t.form.get("identifier"))?null:i.asyncValidator),_.Bb(3),_.oc("label",_.kc(19,32,"CUSTOMER.SSO.TYPE"))("validator",null==t.form||null==(o=t.form.get("internal"))?null:o.validator)("asyncValidator",null==t.form||null==(r=t.form.get("internal"))?null:r.asyncValidator),_.Bb(2),_.oc("value",!0)("content",_.kc(21,34,"CUSTOMER.SSO.TYPE_INTERNAL")),_.Bb(2),_.oc("value",!1)("content",_.kc(23,36,"CUSTOMER.SSO.TYPE_EXTERNAL")),_.Bb(4),_.oc("label",_.kc(27,38,"CUSTOMER.SSO.IDP_NAME"))("validator",null==t.form||null==(a=t.form.get("name"))?null:a.validator)("asyncValidator",null==t.form||null==(c=t.form.get("name"))?null:c.asyncValidator),_.Bb(3),_.Pc(_.kc(30,40,"COMMON.ERROR.REQUIRED")),_.Bb(4),_.oc("label",_.kc(34,42,"CUSTOMER.SSO.MAIL_ATTRIBUTE")),_.Bb(3),_.oc("label",_.kc(37,44,"CUSTOMER.SSO.IDENTIFIER_ATTRIBUTE")),_.Bb(4),_.oc("label",_.kc(41,46,"CUSTOMER.SSO.PATTERNS"))("options",t.domains)("validator",null==t.form||null==(l=t.form.get("patterns"))?null:l.validator)("asyncValidator",null==t.form||null==(s=t.form.get("patterns"))?null:s.asyncValidator),_.Bb(3),_.Pc(_.kc(44,48,"COMMON.ERROR.REQUIRED")),_.Bb(4),_.Pc(_.kc(48,50,"CUSTOMER.SSO.AUTO_PROVISIONING")),_.Bb(2),_.oc("ngIf","SAML"===t.form.value.protocoleType&&t.displayOIDCSAMLBLOCKS),_.Bb(1),_.oc("ngIf","OIDC"===t.form.value.protocoleType&&t.displayOIDCSAMLBLOCKS)}},directives:[B.y,B.r,B.i,R.ac,B.q,B.g,C.p,R.F,B.l,R.K,R.B,R.zb,Nn,Vn,R.E,B.f,Qn,R.I,C.o,R.H],pipes:[dt.d],styles:[".pattern-row[_ngcontent-%COMP%]{padding-bottom:10px}.padding0[_ngcontent-%COMP%]{padding:0}"]}),ni);function oi(e,t){if(1&e){var n=_.Ub();_.Tb(0,"button",5),_.ec("click",(function(){return _.Dc(n),_.ic(2).openCreateIDPDialog()})),_.Tb(1,"div",6),_.jc(2,"translate"),_.Oc(3),_.jc(4,"translate"),_.Sb(),_.Sb()}if(2&e){var i=_.ic(2);_.oc("disabled",!i.domainsAvailable),_.Bb(1),_.oc("matTooltipDisabled",i.domainsAvailable)("matTooltip",_.kc(2,4,"CUSTOMER.SSO.UNAVAILABLE_DOMAINS")),_.Bb(2),_.Qc(" ",_.kc(4,6,"CUSTOMER.SSO.BUTTON")," ")}}function ri(e,t){1&e&&(_.Tb(0,"div"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"CUSTOMER.SSO.TYPE_INTERNAL")))}function ai(e,t){1&e&&(_.Tb(0,"div"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"CUSTOMER.SSO.TYPE_EXTERNAL")))}function ci(e,t){if(1&e&&(_.Tb(0,"div"),_.Oc(1),_.Sb()),2&e){var n=t.$implicit;_.Bb(1),_.Pc(n)}}function li(e,t){1&e&&(_.Tb(0,"div",20),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"CUSTOMER.SSO.STATUS_ACTIVE")))}function si(e,t){1&e&&(_.Tb(0,"div",21),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"CUSTOMER.SSO.STATUS_INACTIVE")))}function ui(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",7),_.Tb(1,"div",8),_.ec("click",(function(){_.Dc(n);var e=t.$implicit;return _.ic(2).selectIdentityProvider(e)})),_.Tb(2,"div",9),_.Tb(3,"label"),_.Oc(4),_.jc(5,"translate"),_.Sb(),_.Tb(6,"div"),_.Oc(7),_.Sb(),_.Sb(),_.Tb(8,"div",10),_.Tb(9,"label"),_.Oc(10),_.jc(11,"translate"),_.Sb(),_.Mc(12,ri,3,3,"div",11),_.Mc(13,ai,3,3,"div",11),_.Sb(),_.Tb(14,"div",12),_.Tb(15,"label"),_.Oc(16),_.jc(17,"translate"),_.Sb(),_.Mc(18,ci,2,1,"div",13),_.Sb(),_.Tb(19,"div",14),_.Mc(20,li,3,3,"div",15),_.Mc(21,si,3,3,"div",16),_.Sb(),_.Sb(),_.Tb(22,"a",17),_.ec("click",(function(){_.Dc(n);var e=t.$implicit;return _.ic(2).downloadFile(null==e?null:e.internal,null==e?null:e.idpMetadataUrl)})),_.Tb(23,"i",18),_.Oc(24,"file_download"),_.Sb(),_.Tb(25,"span",19),_.Oc(26),_.jc(27,"translate"),_.Sb(),_.Sb(),_.Tb(28,"a",17),_.ec("click",(function(){_.Dc(n);var e=t.$implicit;return _.ic(2).downloadFile(null==e?null:e.internal,null==e?null:e.spMetadataUrl)})),_.Tb(29,"i",18),_.Oc(30,"file_download"),_.Sb(),_.Tb(31,"span",19),_.Oc(32),_.jc(33,"translate"),_.Sb(),_.Sb(),_.Sb()}if(2&e){var i=t.$implicit;_.Bb(4),_.Pc(_.kc(5,15,"CUSTOMER.SSO.NAME")),_.Bb(3),_.Pc(null==i?null:i.name),_.Bb(3),_.Pc(_.kc(11,17,"CUSTOMER.SSO.TYPE")),_.Bb(2),_.oc("ngIf",null==i?null:i.internal),_.Bb(1),_.oc("ngIf",!(null!=i&&i.internal)),_.Bb(3),_.Pc(_.kc(17,19,"CUSTOMER.SSO.PATTERNS")),_.Bb(2),_.oc("ngForOf",null==i?null:i.patterns),_.Bb(2),_.oc("ngIf",null==i?null:i.enabled),_.Bb(1),_.oc("ngIf",!(null!=i&&i.enabled)),_.Bb(1),_.Fb("disabled",null==i?null:i.internal),_.Bb(4),_.Pc(_.kc(27,21,"CUSTOMER.SSO.METADATA")),_.Bb(2),_.Fb("disabled",null==i?null:i.internal),_.Bb(4),_.Pc(_.kc(33,23,"CUSTOMER.SSO.SP_METADATA"))}}function di(e,t){if(1&e&&(_.Tb(0,"div",2),_.Mc(1,oi,5,8,"button",3),_.Mc(2,ui,34,25,"div",4),_.Sb()),2&e){var n=_.ic();_.Bb(1),_.oc("ngIf",!n.readOnly),_.Bb(1),_.oc("ngForOf",n.providers)}}function bi(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",2),_.Tb(1,"div"),_.Tb(2,"button",22),_.ec("click",(function(){return _.Dc(n),_.ic().selectedIdentityProvider=null})),_.Ob(3,"i",23),_.Rb(4),_.Tb(5,"span",24),_.Oc(6),_.jc(7,"translate"),_.Sb(),_.Qb(),_.Sb(),_.Ob(8,"app-identity-provider-details",25),_.Sb(),_.Sb()}if(2&e){var i=_.ic();_.Bb(6),_.Pc(_.kc(7,4,"CUSTOMER.SSO.RETURN")),_.Bb(2),_.oc("identityProvider",i.selectedIdentityProvider)("domains",i.domains)("readOnly",i.readOnly||i.selectedIdentityProvider.readonly)}}var mi,pi=((mi=function(){function e(t,n,i){M(this,e),this.dialog=t,this.identityProviderService=n,this.providerApi=i,this.panel1Position="current",this.panel2Position="next",this.domains=[]}return y(e,[{key:"customer",get:function(){return this._customer},set:function(e){var t=this;this._customer=e,this.selectedIdentityProvider=null,this._customer&&(this.identityProviderService.getAll(this.customer.id).subscribe((function(e){t.providers=e})),this.refreshAvailableDomains())}},{key:"ngOnInit",value:function(){var e=this;this.updatedProviderSub=this.identityProviderService.updated.subscribe((function(t){var n=e.providers.findIndex((function(e){return t.id===e.id}));n>-1&&(e.providers[n]=t),e.refreshAvailableDomains()}))}},{key:"ngOnDestroy",value:function(){this.updatedProviderSub.unsubscribe()}},{key:"openCreateIDPDialog",value:function(){var e=this;this.dialog.open(Tn,{data:{customer:this.customer,domains:this.domains},disableClose:!0,panelClass:"vitamui-modal"}).afterClosed().subscribe((function(t){t&&(e.providers.push(t),e.refreshAvailableDomains())}))}},{key:"selectIdentityProvider",value:function(e){this.selectedIdentityProvider=e}},{key:"domainsAvailable",get:function(){return this.domains.filter((function(e){return!e.disabled})).length>0}},{key:"downloadFile",value:function(e,t){e||this.providerApi.getFileByUrl(t).subscribe((function(e){return R.z.loadFromBlob(e,e.body.type)}))}},{key:"refreshAvailableDomains",value:function(){var e=this;this.identityProviderService.getDomainByCustomerId(this.customer.id).subscribe((function(t){e.domains=e.customer.emailDomains.map((function(e){return{value:e,disabled:t.includes(e)}}))}))}}]),e}()).\u0275fac=function(e){return new(e||mi)(_.Nb(k.b),_.Nb(Kt),_.Nb(Ht))},mi.\u0275cmp=_.Hb({type:mi,selectors:[["app-sso-tab"]],inputs:{customer:"customer",readOnly:"readOnly"},decls:4,vars:6,consts:[[1,"vitamui-panel"],["class","vitamui-panel-content",4,"ngIf"],[1,"vitamui-panel-content"],["class","btn primary",3,"disabled","click",4,"ngIf"],["class","provider-list d-flex align-items-center mb-2",4,"ngFor","ngForOf"],[1,"btn","primary",3,"disabled","click"],["matTooltipClass","vitamui-tooltip",3,"matTooltipDisabled","matTooltip"],[1,"provider-list","d-flex","align-items-center","mb-2"],[1,"provider-item-content","d-flex","py-3","px-1",3,"click"],[1,"col-3"],[1,"col-2"],[4,"ngIf"],[1,"col-5"],[4,"ngFor","ngForOf"],[1,"col-2","d-flex","align-items-center"],["class","provider-status active",4,"ngIf"],["class","provider-status",4,"ngIf"],[1,"provider-item-link","clickable",3,"click"],[1,"material-icons"],[1,"p-0"],[1,"provider-status","active"],[1,"provider-status"],["type","button",1,"btn","link",3,"click"],[1,"vitamui-icon","vitamui-icon-chevron-left"],[1,"underline"],[3,"identityProvider","domains","readOnly"]],template:function(e,t){1&e&&(_.Tb(0,"div",0),_.Mc(1,di,3,2,"div",1),_.Sb(),_.Tb(2,"div",0),_.Mc(3,bi,9,6,"div",1),_.Sb()),2&e&&(_.Fb("active",!t.selectedIdentityProvider),_.Bb(1),_.oc("ngIf",!t.selectedIdentityProvider),_.Bb(1),_.Fb("active",t.selectedIdentityProvider),_.Bb(1),_.oc("ngIf",t.selectedIdentityProvider))},directives:[C.p,C.o,L.a,ii],pipes:[dt.d],styles:["[_nghost-%COMP%]   .vitamui-panel-content[_ngcontent-%COMP%]{padding:0!important}button.back[_ngcontent-%COMP%]{margin-bottom:30px}.vitamui-panel[_ngcontent-%COMP%]   .vitamui-panel-content[_ngcontent-%COMP%]{padding:30px 60px 0 40px;overflow:visible;height:100%;width:100%;transform:none}button.btn[_ngcontent-%COMP%]{margin-bottom:20px}.provider-list[_ngcontent-%COMP%]{width:100%;font-size:14px}.provider-list[_ngcontent-%COMP%]   .provider-item-content[_ngcontent-%COMP%]{border-radius:5px;background-color:var(--vitamui-grey-100);color:var(--vitamui-grey-900);min-height:60px;width:90%;cursor:pointer}.provider-list[_ngcontent-%COMP%]   .provider-item-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:500}.provider-list[_ngcontent-%COMP%]   .provider-item-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:400}.provider-list[_ngcontent-%COMP%]   .provider-item-centered[_ngcontent-%COMP%]{align-self:center}.provider-list[_ngcontent-%COMP%]   .provider-item-link[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:60px;border-radius:3px;border:1px solid var(--vitamui-primary);margin-left:10px;color:var(--vitamui-primary);font-size:9px;text-align:center;text-decoration:none}.provider-list[_ngcontent-%COMP%]   .provider-item-link.disabled[_ngcontent-%COMP%]{opacity:.4;pointer-events:none}.provider-list[_ngcontent-%COMP%]   .provider-status[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:var(--vitamui-grey-600);width:100%;text-align:right}.provider-list[_ngcontent-%COMP%]   .provider-status.active[_ngcontent-%COMP%]{color:#27740a}"],data:{animation:[Object(Vt.o)("panelTransition",[Object(Vt.l)("previous",Object(Vt.m)({transform:"translate3d(-100%, 0, 0)"})),Object(Vt.l)("next",Object(Vt.m)({transform:"translate3d(100%, 0, 0)"})),Object(Vt.l)("current",Object(Vt.m)({transform:"translate3d(0, 0, 0)"})),Object(Vt.n)("* <=> current",Object(Vt.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))]),Object(Vt.o)("slideLeftTransition",[Object(Vt.n)(":enter",[Object(Vt.m)({transform:"translate3d(-100%, 0, 0)"}),Object(Vt.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)")]),Object(Vt.n)(":leave",[Object(Vt.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)",Object(Vt.m)({transform:"translate3d(-100%, 0, 0)"}))])]),Object(Vt.o)("slideRightTransition",[Object(Vt.l)("*",Object(Vt.m)({transform:"translate3d(0, 0, 0)"})),Object(Vt.n)(":enter",[Object(Vt.m)({transform:"translate3d(100%, 0, 0)"}),Object(Vt.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)")]),Object(Vt.n)(":leave",[Object(Vt.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)",Object(Vt.m)({transform:"translate3d(100%, 0, 0)"}))])])]}}),mi),hi=T("kuMc"),fi=function(e){return e[e.NONE=0]="NONE",e[e.COLOR_INVALID=1]="COLOR_INVALID",e[e.COLOR_TOO_LIGHT=2]="COLOR_TOO_LIGHT",e[e.COLOR_TOO_DARK=3]="COLOR_TOO_DARK",e}({}),vi=["colorPickerInput"];function gi(e,t){1&e&&(_.Tb(0,"div"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"GRAPHIC_IDENTITY.INVALID")))}function Oi(e,t){1&e&&(_.Rb(0),_.Tb(1,"div"),_.Oc(2),_.jc(3,"translate"),_.Sb(),_.Tb(4,"div"),_.Oc(5),_.jc(6,"translate"),_.Sb(),_.Qb()),2&e&&(_.Bb(2),_.Pc(_.kc(3,2,"CUSTOMER.GRAPHIC_IDENTITY.TOO_LIGHT")),_.Bb(3),_.Pc(_.kc(6,4,"CUSTOMER.GRAPHIC_IDENTITY.INCOMPATIBLE")))}function Si(e,t){1&e&&(_.Rb(0),_.Tb(1,"div"),_.Oc(2),_.jc(3,"translate"),_.Sb(),_.Tb(4,"div"),_.Oc(5),_.jc(6,"translate"),_.Sb(),_.Qb()),2&e&&(_.Bb(2),_.Pc(_.kc(3,2,"CUSTOMER.GRAPHIC_IDENTITY.TOO_DARK")),_.Bb(3),_.Pc(_.kc(6,4,"CUSTOMER.GRAPHIC_IDENTITY.INCOMPATIBLE")))}function Ti(e,t){if(1&e&&(_.Tb(0,"vitamui-common-input-error",4),_.Ob(1,"i",5),_.Tb(2,"div",6),_.Mc(3,gi,3,3,"div",7),_.Mc(4,Oi,7,6,"ng-container",7),_.Mc(5,Si,7,6,"ng-container",7),_.Sb(),_.Sb()),2&e){var n=_.ic();_.Bb(1),_.Jc("font-size",20,"px"),_.Bb(1),_.oc("ngSwitch",n.colorError),_.Bb(1),_.oc("ngSwitchCase",n.colorErrorEnum.COLOR_INVALID),_.Bb(1),_.oc("ngSwitchCase",n.colorErrorEnum.COLOR_TOO_LIGHT),_.Bb(1),_.oc("ngSwitchCase",n.colorErrorEnum.COLOR_TOO_DARK)}}var Ci,yi=((Ci=function(){function e(){M(this,e),this.colorErrorEnum=fi,this.colorError=fi.NONE}return y(e,[{key:"ngOnInit",value:function(){var e=this;this.color=this.colorInput.value,this.colorInput.valueChanges.subscribe((function(t){e.color=t,e.checkWarning&&e.checkColor500(t)}))}},{key:"checkColor500",value:function(e){this.colorError=fi.NONE;var t=Object(R.Jb)(e);if(t){var n=Object(R.Nb)(t);n?n.l>60?this.colorError=fi.COLOR_TOO_LIGHT:n.l<40&&(this.colorError=fi.COLOR_TOO_DARK):this.colorError=fi.COLOR_INVALID}else this.colorError=fi.COLOR_INVALID}},{key:"onPickerOpen",value:function(){this.disabled&&this.colorPicker.closeDialog()}},{key:"openPicker",value:function(){this.disabled||this.colorPicker.openDialog()}},{key:"forceHex",value:function(){this.colorInput.value.startsWith("#")||this.colorInput.setValue("#"+this.colorInput.value)}},{key:"handlePicker",value:function(e){var t=this.colorInput.value.toUpperCase();if(e=e.toUpperCase(),t.startsWith("#")&&(t=t.substring(1)),e.startsWith("#")&&(e=e.substring(1)),3===t.length&&6===e.length)for(var n=0;n<3;n++)if(t.charAt(n)===e.charAt(2*n)&&t.charAt(n)===e.charAt(2*n+1))return;this.colorInput.setValue("#"+e)}}]),e}()).\u0275fac=function(e){return new(e||Ci)},Ci.\u0275cmp=_.Hb({type:Ci,selectors:[["app-input-color"]],viewQuery:function(e,t){var n;1&e&&_.Uc(vi,!0,_e),2&e&&_.yc(n=_.fc())&&(t.colorPicker=n.first)},inputs:{placeholder:"placeholder",disabled:"disabled",colorInput:"colorInput",checkWarning:"checkWarning"},decls:5,vars:9,consts:[["cpAlphaChannel","disabled","cpDisableInput","true","cpOutputFormat","hex","cpFallbackColor","#000","maxlength","7",3,"colorPicker","disabled","formControl","placeholder","colorPickerChange","colorPickerOpen","change","keyup"],["colorPickerInput",""],["class","d-flex align-items-center",4,"ngIf"],[1,"input-color-preview",3,"click"],[1,"d-flex","align-items-center"],[1,"vitamui-icon","vitamui-icon-anomalie","mr-1"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(e,t){1&e&&(_.Tb(0,"vitamui-common-input",0,1),_.ec("colorPickerChange",(function(e){return t.handlePicker(e)}))("colorPickerOpen",(function(){return t.onPickerOpen()}))("change",(function(){return t.forceHex()}))("keyup",(function(){return t.forceHex()})),_.Mc(2,Ti,6,6,"vitamui-common-input-error",2),_.Sb(),_.Tb(3,"div",3),_.ec("click",(function(){return t.openPicker()})),_.jc(4,"safeStyle"),_.Sb()),2&e&&(_.pc("placeholder",t.placeholder),_.oc("colorPicker",t.color)("disabled",t.disabled)("formControl",t.colorInput),_.Bb(2),_.oc("ngIf",t.colorError!==t.colorErrorEnum.NONE),_.Bb(1),_.Jc("background-color",_.kc(4,7,t.color)))},directives:[R.Qb,B.l,_e,B.q,B.f,C.p,R.Rb,C.r,C.s],pipes:[R.pc,dt.d],styles:["[_nghost-%COMP%]{position:relative;width:300px;display:block}[_nghost-%COMP%]   .input-color-preview[_ngcontent-%COMP%]{padding:0;position:absolute;right:10px;top:10px;width:40px;height:40px;border-radius:5px}vitamui-common-input[_ngcontent-%COMP%]{width:300px!important}"]}),Ci);function ki(e,t){if(1&e&&(_.Tb(0,"div"),_.Ob(1,"app-input-color",4),_.jc(2,"translate"),_.Sb()),2&e){var n=t.$implicit,i=_.ic();_.Bb(1),_.oc("disabled",i.disabled)("colorInput",i.formGroup.get(n))("checkWarning",!0)("placeholder",_.kc(2,4,i.baseColors[n]))}}function Mi(e,t){if(1&e){var n=_.Ub();_.Rb(0),_.Tb(1,"small",7),_.ec("click",(function(){_.Dc(n);var e=_.ic();return e.displayTertiary=!e.displayTertiary})),_.Oc(2),_.jc(3,"translate"),_.Sb(),_.Qb()}2&e&&(_.Bb(2),_.Pc(_.kc(3,1,"CUSTOMER.GRAPHIC_IDENTITY.TERTIARY_COLOR_SHOW")))}function Ai(e,t){if(1&e){var n=_.Ub();_.Tb(0,"small",7),_.ec("click",(function(){_.Dc(n);var e=_.ic();return e.displayTertiary=!e.displayTertiary})),_.Oc(1),_.jc(2,"translate"),_.Sb()}2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"CUSTOMER.GRAPHIC_IDENTITY.TERTIARY_COLOR_HIDE")))}var Ei,Ri=function(e,t){return[e,t]},Ii=function(e,t){return{unselected:e,selected:t}},Bi=((Ei=function(){function e(t){M(this,e),this.themeService=t,this.isUpdating=!1,this.displayTertiary=!1,this.backgroundColors=[],this.THEME_COLORS=R.ub}return y(e,[{key:"ngOnInit",value:function(){this.baseColors=this.themeService.getBaseColors(),this.colors=this.themeService.getThemeColors(),this.backgroundColors=this.themeService.backgroundChoice.map((function(e){return{id:e.value,label:e.class,isDefault:e.isDefault}}))}}]),e}()).\u0275fac=function(e){return new(e||Ei)(_.Nb(R.vb))},Ei.\u0275cmp=_.Hb({type:Ei,selectors:[["app-customer-colors-input"]],inputs:{formGroup:"formGroup",themeOverloadSelector:"themeOverloadSelector",disabled:"disabled",isUpdating:"isUpdating"},decls:12,vars:31,consts:[[3,"formGroup"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["closeTertiary",""],[3,"disabled","colorInput","checkWarning","placeholder"],[3,"colorInput","disabled","placeholder"],[1,"mb-4",3,"disabled","data","messages","selected","selectedChange"],[1,"mb-4","pb-2",3,"click"]],template:function(e,t){if(1&e&&(_.Rb(0,0),_.Mc(1,ki,3,6,"div",1),_.Mc(2,Mi,4,3,"ng-container",2),_.Mc(3,Ai,3,3,"ng-template",null,3,_.Nc),_.Ob(5,"app-input-color",4),_.jc(6,"translate"),_.Ob(7,"app-input-color",5),_.jc(8,"translate"),_.Tb(9,"vitamui-common-select",6),_.ec("selectedChange",(function(e){return t.formGroup.get(t.THEME_COLORS.VITAMUI_BACKGROUND).setValue(e)})),_.jc(10,"translate"),_.jc(11,"translate"),_.Sb(),_.Qb()),2&e){var n=_.zc(4);_.oc("formGroup",t.formGroup),_.Bb(1),_.oc("ngForOf",_.uc(25,Ri,t.THEME_COLORS.VITAMUI_PRIMARY,t.THEME_COLORS.VITAMUI_SECONDARY)),_.Bb(1),_.oc("ngIf",!t.displayTertiary)("ngIfElse",n),_.Bb(3),_.Jc("display",t.displayTertiary?"block":"none"),_.oc("disabled",t.disabled)("colorInput",t.formGroup.get(t.THEME_COLORS.VITAMUI_TERTIARY))("checkWarning",!0)("placeholder",_.kc(6,17,"COLOR.TERTIARY")),_.Bb(2),_.oc("colorInput",t.formGroup.get(t.THEME_COLORS.VITAMUI_HEADER_FOOTER))("disabled",t.disabled)("placeholder",_.kc(8,19,"COLOR.HEADER_FOOTER")),_.Bb(2),_.oc("disabled",t.disabled)("data",t.backgroundColors)("messages",_.uc(28,Ii,_.kc(10,21,"COLOR.BACKGROUND"),_.kc(11,23,"COLOR.BACKGROUND")))("selected",t.formGroup.get(t.THEME_COLORS.VITAMUI_BACKGROUND).value)}},directives:[B.r,B.i,C.o,C.p,yi,R.kc],pipes:[dt.d],styles:["[_nghost-%COMP%]   small[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer;color:var(--vitamui-primary)}"]}),Ei),Ni=function(){return{width:280,height:100}};function wi(e,t){if(1&e){var n=_.Ub();_.Tb(0,"form",1),_.Tb(1,"div",2),_.Tb(2,"div",3),_.Tb(3,"div",4),_.Oc(4),_.jc(5,"translate"),_.Sb(),_.Ob(6,"app-customer-colors-input",5),_.Sb(),_.Tb(7,"div",6),_.Tb(8,"div",4),_.Oc(9),_.jc(10,"translate"),_.Sb(),_.Tb(11,"div",7),_.Tb(12,"div"),_.Tb(13,"label",8),_.Oc(14),_.jc(15,"translate"),_.Sb(),_.Tb(16,"vitamui-common-drag-drop-file",9),_.ec("file",(function(e){_.Dc(n);var t=_.ic();return t.addOrReplaceLogo(t.ATTACHMENT_TYPE.Portal,e)})),_.jc(17,"translate"),_.jc(18,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(19,"div",7),_.Tb(20,"div",10),_.Tb(21,"label",8),_.Oc(22),_.jc(23,"translate"),_.Sb(),_.Tb(24,"vitamui-common-drag-drop-file",11),_.ec("file",(function(e){_.Dc(n);var t=_.ic();return t.addOrReplaceLogo(t.ATTACHMENT_TYPE.Header,e)})),_.jc(25,"translate"),_.jc(26,"translate"),_.Sb(),_.Sb(),_.Tb(27,"div"),_.Tb(28,"label",8),_.Oc(29),_.jc(30,"translate"),_.Sb(),_.Tb(31,"vitamui-common-drag-drop-file",11),_.ec("file",(function(e){_.Dc(n);var t=_.ic();return t.addOrReplaceLogo(t.ATTACHMENT_TYPE.Footer,e)})),_.jc(32,"translate"),_.jc(33,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Sb()}if(2&e){var i,o,r,a=_.ic();_.oc("formGroup",a.graphicIdentityForm),_.Bb(4),_.Pc(_.kc(5,27,"CUSTOMER.GRAPHIC_IDENTITY.COLOR_TITLE")),_.Bb(2),_.oc("formGroup",a.graphicIdentityForm.get("themeColors"))("isUpdating",!0)("disabled",a.disabled),_.Bb(3),_.Pc(_.kc(10,29,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_TITLE")),_.Bb(5),_.Pc(_.kc(15,31,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_PORTAL_TITLE")),_.Bb(2),_.oc("disabled",a.disabled)("fileUrl",null==(i=a.graphicIdentityForm.get("portalUrl"))?null:i.value)("logoSize",_.sc(49,Ni))("canDelete",!1)("messContent",_.kc(17,33,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_DROP"))("messPj",_.kc(18,35,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_ATTACH")),_.Bb(6),_.Pc(_.kc(23,37,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_HEADER_TITLE")),_.Bb(2),_.oc("disabled",a.disabled)("fileUrl",null==(o=a.graphicIdentityForm.get("headerUrl"))?null:o.value)("logoSize",_.sc(50,Ni))("canDelete",!1)("messContent",_.kc(25,39,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_DROP"))("messPj",_.kc(26,41,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_ATTACH")),_.Bb(5),_.Pc(_.kc(30,43,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_FOOTER_TITLE")),_.Bb(2),_.oc("disabled",a.disabled)("fileUrl",null==(r=a.graphicIdentityForm.get("footerUrl"))?null:r.value)("logoSize",_.sc(51,Ni))("canDelete",!1)("messContent",_.kc(32,45,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_DROP"))("messPj",_.kc(33,47,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_ATTACH"))}}var xi,Pi=((xi=function(){function e(t){M(this,e),this.themeService=t,this.disabled=!1,this.formChange=new _.n,this.ATTACHMENT_TYPE=R.i,this.logos=[]}return y(e,[{key:"ngOnInit",value:function(){var e=this;this.applyTheme(),this.graphicIdentityForm.valueChanges.subscribe((function(){e.formChange.emit({form:e.graphicIdentityForm,logos:e.logos})})),this.graphicIdentityForm.get("themeColors").valueChanges.subscribe((function(){e.graphicIdentityForm.updateValueAndValidity(),e.applyTheme(),e.formChange.emit({form:e.graphicIdentityForm,logos:e.logos})}))}},{key:"applyTheme",value:function(){if(this.graphicIdentityForm.valid){var e=this.themeService.getThemeColors(this.graphicIdentityForm.get("themeColors").value);this.themeService.overloadLocalTheme(e,"#toOverride")}}},{key:"addOrReplaceLogo",value:function(e,t){var n={attr:e,file:t},i=this.logos.findIndex((function(e){return e.attr===n.attr}));-1===i?this.logos.push(n):this.logos[i]=n,this.formChange.emit({form:this.graphicIdentityForm,logos:this.logos})}}]),e}()).\u0275fac=function(e){return new(e||xi)(_.Nb(R.vb))},xi.\u0275cmp=_.Hb({type:xi,selectors:[["app-graphic-identity-form"]],inputs:{graphicIdentityForm:"graphicIdentityForm",disabled:"disabled"},outputs:{formChange:"formChange"},decls:1,vars:1,consts:[["id","graphicIdentityForm",3,"formGroup",4,"ngIf"],["id","graphicIdentityForm",3,"formGroup"],[1,"d-flex","justify-content-between"],[1,"container-color"],[1,"text","large","bold","mb-4"],["themeOverloadSelector","form#graphicIdentityForm",1,"d-inline-flex","flex-column",3,"formGroup","isUpdating","disabled"],[1,"pl-4","d-flex","flex-column"],[1,"d-flex"],[1,"text","normal","bold"],[1,"color-background","image-area-big",3,"disabled","fileUrl","logoSize","canDelete","messContent","messPj","file"],[1,"mr-4"],[1,"color-header-footer","image-area-small",3,"disabled","fileUrl","logoSize","canDelete","messContent","messPj","file"]],template:function(e,t){1&e&&_.Mc(0,wi,34,52,"form",0),2&e&&_.oc("ngIf",t.graphicIdentityForm)},directives:[C.p,B.y,B.r,B.i,Bi,R.lc],pipes:[dt.d],styles:["[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}[_nghost-%COMP%]     .color-header-footer>*>.drag-and-drop-area{background-color:var(--vitamui-header-footer)}[_nghost-%COMP%]     .color-background>*>.drag-and-drop-area{background-color:var(--vitamui-background)}[_nghost-%COMP%]     .image-area-big>*>.drag-and-drop-area>.image-area{height:230px;width:410px;max-width:100%}[_nghost-%COMP%]     .image-area-big>*>.drag-and-drop-area>.image-area img{max-height:120px;max-width:100%}[_nghost-%COMP%]     .image-area-small>*>.drag-and-drop-area>.image-area{width:200px}[_nghost-%COMP%]   .container-color[_ngcontent-%COMP%]{min-width:295px}[_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:20px}[_nghost-%COMP%]   .container-color[_ngcontent-%COMP%]{margin-right:80px}[_nghost-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-left:10px}[_nghost-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}[_nghost-%COMP%]   vitamui-common-input[_ngcontent-%COMP%]{width:47%}[_nghost-%COMP%]   vitamui-common-textarea[_ngcontent-%COMP%] + small[_ngcontent-%COMP%]{text-align:end;color:var(--vitamui-grey-900)}"]}),xi);function Di(e,t){if(1&e&&_.Ob(0,"app-graphic-identity-form",4),2&e){var n=_.ic();_.oc("graphicIdentityForm",n.defaultForm)("disabled",!0)}}function ji(e,t){if(1&e){var n=_.Ub();_.Tb(0,"app-graphic-identity-form",5),_.ec("formChange",(function(e){return _.Dc(n),_.ic().sendForm(e)})),_.Sb()}if(2&e){var i=_.ic();_.oc("graphicIdentityForm",i.customerForm)}}var Ui,Fi,Li=((Fi=function(){function e(t,n,i){M(this,e),this.dialogRef=t,this.formBuilder=n,this.themeService=i,this.hexValidator=B.x.pattern(/#([0-9A-Fa-f]{6})/),this.destroy=new qt.a,this.formToSend=new _.n,this.customerTheme={colors:null,headerUrl:"",footerUrl:"",portalUrl:""},this.defaultTheme=this.themeService.defaultTheme,this.displayCustomGraphicIdentity=new B.e(!1)}return y(e,[{key:"ngOnDestroy",value:function(){this.destroy.next()}},{key:"ngOnInit",value:function(){var e=this;this.graphicIdentityForm=this.formBuilder.group({id:null,hasCustomGraphicIdentity:!1,themeColors:this.formBuilder.group(d(d(d(d(d({},R.ub.VITAMUI_PRIMARY,new B.e("",[this.hexValidator,B.x.required])),R.ub.VITAMUI_SECONDARY,new B.e("",[this.hexValidator,B.x.required])),R.ub.VITAMUI_TERTIARY,new B.e("",this.hexValidator)),R.ub.VITAMUI_HEADER_FOOTER,new B.e("",[this.hexValidator,B.x.required])),R.ub.VITAMUI_BACKGROUND,new B.e("",[this.hexValidator,B.x.required]))),headerUrl:"",footerUrl:"",portalUrl:""}),this.customerTheme={colors:this.customer&&this.customer.themeColors?this.themeService.getThemeColors(this.customer.themeColors):this.defaultTheme.colors,headerUrl:this.customerLogosUrl?this.customerLogosUrl.headerUrl:this.defaultTheme.headerUrl,footerUrl:this.customerLogosUrl?this.customerLogosUrl.footerUrl:this.defaultTheme.footerUrl,portalUrl:this.customerLogosUrl?this.customerLogosUrl.portalUrl:this.defaultTheme.portalUrl},this.customer&&(this.customer.id&&this.graphicIdentityForm.get("id").setValue(this.customer.id),this.customer.hasCustomGraphicIdentity&&this.displayCustomGraphicIdentity.patchValue(!0)),this.defaultForm=this.setTheme(this.defaultTheme),this.customerForm=this.setTheme(this.customerTheme),!0===this.displayCustomGraphicIdentity.value?(this.customerForm.get("hasCustomGraphicIdentity").patchValue(!0),this.formToSend.emit({form:this.customerForm,logos:null})):this.formToSend.emit({form:this.formBuilder.group({id:this.graphicIdentityForm.get("id").value,hasCustomGraphicIdentity:!1}),logos:null}),this.displayCustomGraphicIdentity.valueChanges.subscribe((function(t){t?(e.customerForm.get("hasCustomGraphicIdentity").patchValue(!0),e.formToSend.emit({form:e.customerForm,logos:null})):e.formToSend.emit({form:e.formBuilder.group({id:e.graphicIdentityForm.get("id").value,hasCustomGraphicIdentity:!1}),logos:null})}))}},{key:"sendForm",value:function(e){this.customerForm=e.form,this.formToSend.emit(e)}},{key:"setTheme",value:function(e){var t=this.formBuilder.group(this.graphicIdentityForm.get("themeColors").value);e.colors&&(t=new B.h(d(d(d(d(d({},R.ub.VITAMUI_PRIMARY,new B.e(e.colors[R.ub.VITAMUI_PRIMARY],[this.hexValidator,B.x.required])),R.ub.VITAMUI_SECONDARY,new B.e(e.colors[R.ub.VITAMUI_SECONDARY],[this.hexValidator,B.x.required])),R.ub.VITAMUI_TERTIARY,new B.e(e.colors[R.ub.VITAMUI_TERTIARY],this.hexValidator)),R.ub.VITAMUI_HEADER_FOOTER,new B.e(e.colors[R.ub.VITAMUI_HEADER_FOOTER],[this.hexValidator,B.x.required])),R.ub.VITAMUI_BACKGROUND,new B.e(e.colors[R.ub.VITAMUI_BACKGROUND],[this.hexValidator,B.x.required])))),this.graphicIdentityForm.get("headerUrl").setValue(e.headerUrl),this.graphicIdentityForm.get("footerUrl").setValue(e.footerUrl),this.graphicIdentityForm.get("portalUrl").setValue(e.portalUrl);var n=this.formBuilder.group(this.graphicIdentityForm.value);return n.controls.themeColors=t,n}}]),e}()).\u0275fac=function(e){return new(e||Fi)(_.Nb(k.g),_.Nb(B.d),_.Nb(R.vb))},Fi.\u0275cmp=_.Hb({type:Fi,selectors:[["app-graphic-identity"]],inputs:{customer:"customer",customerLogosUrl:"customerLogosUrl"},outputs:{formToSend:"formToSend"},decls:6,vars:6,consts:[[3,"formControl"],[1,"mt-4"],[3,"graphicIdentityForm","disabled",4,"ngIf"],[3,"graphicIdentityForm","formChange",4,"ngIf"],[3,"graphicIdentityForm","disabled"],[3,"graphicIdentityForm","formChange"]],template:function(e,t){1&e&&(_.Ob(0,"vitamui-common-slide-toggle",0),_.Oc(1),_.jc(2,"translate"),_.Tb(3,"div",1),_.Mc(4,Di,1,2,"app-graphic-identity-form",2),_.Mc(5,ji,1,1,"app-graphic-identity-form",3),_.Sb()),2&e&&(_.oc("formControl",t.displayCustomGraphicIdentity),_.Bb(1),_.Qc("",_.kc(2,4,"CUSTOMER.GRAPHIC_IDENTITY.TOGGLE_TITLE")," "),_.Bb(3),_.oc("ngIf",!t.displayCustomGraphicIdentity.value&&t.defaultForm),_.Bb(1),_.oc("ngIf",t.displayCustomGraphicIdentity.value&&t.customerForm))},directives:[R.ac,B.q,B.f,C.p,Pi],pipes:[dt.d],styles:[""]}),Fi),Vi=((Ui=function(){function e(t,n,i){M(this,e),this.dialogRef=t,this.data=n,this.customerService=i,this.destroy=new qt.a,this.disabled=!0}return y(e,[{key:"customForm",get:function(){return this._customForm},set:function(e){this._customForm=e,this.disabled=!(this._customForm&&this._customForm.valid)}},{key:"ngOnDestroy",value:function(){this.destroy.next()}},{key:"ngOnInit",value:function(){this.customerLogosUrl=this.data.logos}},{key:"onCancel",value:function(){this.dialogRef.close()}},{key:"updateGraphicIdentity",value:function(){var e=this;this.customForm.valid&&this.customerService.patch(this.customForm.value,this.logos).pipe(Object(hi.a)(this.destroy)).subscribe((function(){e.dialogRef.close(!0)}),(function(t){e.dialogRef.close(!1),console.error(t)}))}}]),e}()).\u0275fac=function(e){return new(e||Ui)(_.Nb(k.g),_.Nb(k.a),_.Nb(Xe.a))},Ui.\u0275cmp=_.Hb({type:Ui,selectors:[["app-graphic-identity-update"]],decls:9,vars:9,consts:[["id","toOverride",1,"content"],[3,"customerLogosUrl","customer","formToSend"],[1,"d-flex"],["type","button",1,"btn","primary","mr-4",3,"disabled","click"],["type","button",1,"btn","cancel","link",3,"click"]],template:function(e,t){1&e&&(_.Tb(0,"div",0),_.Tb(1,"app-graphic-identity",1),_.ec("formToSend",(function(e){return t.customForm=e.form,t.logos=e.logos})),_.Sb(),_.Tb(2,"div",2),_.Tb(3,"button",3),_.ec("click",(function(){return t.updateGraphicIdentity()})),_.Oc(4),_.jc(5,"translate"),_.Sb(),_.Tb(6,"button",4),_.ec("click",(function(){return t.onCancel()})),_.Oc(7),_.jc(8,"translate"),_.Sb(),_.Sb(),_.Sb()),2&e&&(_.Bb(1),_.oc("customerLogosUrl",t.customerLogosUrl)("customer",t.data.customer),_.Bb(2),_.oc("disabled",t.disabled),_.Bb(1),_.Qc(" ",_.kc(5,5,"CUSTOMER.GRAPHIC_IDENTITY.SUBMIT")," "),_.Bb(3),_.Pc(_.kc(8,7,"COMMON.UNDO")))},directives:[Li],pipes:[dt.d],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{padding:30px 60px 60px}"]}),Ui);function qi(e,t){1&e&&(_.Tb(0,"div"),_.Ob(1,"mat-spinner",15),_.Sb())}function _i(e,t){if(1&e&&_.Ob(0,"img",16),2&e){var n=_.ic();_.oc("src",null==n.theme?null:n.theme.portalUrl,_.Fc)}}function Gi(e,t){1&e&&(_.Tb(0,"div"),_.Ob(1,"mat-spinner",15),_.Sb())}function Hi(e,t){if(1&e&&_.Ob(0,"img",16),2&e){var n=_.ic();_.oc("src",null==n.theme?null:n.theme.headerUrl,_.Fc)}}function Ki(e,t){1&e&&(_.Tb(0,"div"),_.Ob(1,"mat-spinner",15),_.Sb())}function Wi(e,t){if(1&e&&_.Ob(0,"img",16),2&e){var n=_.ic();_.oc("src",null==n.theme?null:n.theme.footerUrl,_.Fc)}}function Yi(e,t){if(1&e&&(_.Tb(0,"span",14),_.jc(1,"safeStyle"),_.Sb()),2&e){var n=t.$implicit,i=_.ic().$implicit,o=_.ic();_.Jc("background-color",_.kc(1,2,o.theme.colors[i+n]))}}var zi=function(){return["-900","-800","-700","-600","","-400","-300","-200","-100","-50"]};function Qi(e,t){if(1&e&&(_.Tb(0,"div",11),_.Tb(1,"div",12),_.Tb(2,"label",4),_.Oc(3),_.jc(4,"translate"),_.Sb(),_.Oc(5),_.Sb(),_.Tb(6,"div",13),_.Mc(7,Yi,2,4,"span",17),_.Sb(),_.Sb()),2&e){var n=t.$implicit,i=_.ic();_.Bb(3),_.Pc(_.kc(4,3,i.COLOR_NAME[n])),_.Bb(2),_.Qc(" ",i.theme.colors[n]," "),_.Bb(2),_.oc("ngForOf",_.sc(5,zi))}}var Xi,Ji=function(e,t){return[e,t]},Zi=((Xi=function(){function e(t,n,i){M(this,e),this.customerService=t,this.dialog=n,this.themeService=i,this.destroy=new qt.a,this.isLoading=!1,this.customerLogos={},this.THEME_COLORS=R.ub}return y(e,[{key:"customer",get:function(){return this._customer},set:function(e){this._customer=e,this.resetTab(this.customer)}},{key:"readOnly",set:function(e){this._readonly=e}},{key:"readonly",get:function(){return this._readonly}},{key:"ngOnDestroy",value:function(){this.destroy.next()}},{key:"ngOnInit",value:function(){this.COLOR_NAME=this.themeService.getBaseColors()}},{key:"majTheme",value:function(e){return{colors:e}}},{key:"resetTab",value:function(e){var t=this;if(e.hasCustomGraphicIdentity){var n=this.themeService.getThemeColors(e.themeColors);this.theme=this.majTheme(n)}else this.theme=this.majTheme(this.themeService.getThemeColors(this.themeService.defaultTheme.colors)),this.theme.headerUrl=this.themeService.defaultTheme.headerUrl,this.theme.portalUrl=this.themeService.defaultTheme.portalUrl,this.theme.footerUrl=this.themeService.defaultTheme.footerUrl;e.hasCustomGraphicIdentity&&(this.isLoading=!0),this.customerService.getLogos(e.id).pipe(Object(hi.a)(this.destroy)).subscribe((function(n){t.customerLogos={headerUrl:n[0],footerUrl:n[1],portalUrl:n[2]},e.hasCustomGraphicIdentity&&(t.theme.headerUrl=t.customerLogos.headerUrl,t.theme.footerUrl=t.customerLogos.footerUrl,t.theme.portalUrl=t.customerLogos.portalUrl),t.isLoading=!1})),this.themeService.overloadLocalTheme(this.theme.colors,"div.vitamui-sidepanel")}},{key:"openUpdateCustomerLogo",value:function(){this.dialog.open(Vi,{panelClass:"vitamui-modal",disableClose:!0,data:{customer:this.customer,logos:this.customerLogos}}).afterClosed().subscribe()}}]),e}()).\u0275fac=function(e){return new(e||Xi)(_.Nb(Xe.a),_.Nb(k.b),_.Nb(R.vb))},Xi.\u0275cmp=_.Hb({type:Xi,selectors:[["app-graphic-identity-tab"]],inputs:{customer:"customer",readOnly:"readOnly"},decls:59,vars:59,consts:[[1,"d-flex"],[1,"col-6","mr-4","d-flex","justify-content-center","align-items-center"],[1,"btn","primary","mb-20",3,"disabled","click"],[1,"col-6"],[1,"text","normal","light"],[1,"image-area","small","d-flex","flex-column","justify-content-center","align-items-center"],[4,"ngIf"],[3,"src",4,"ngIf"],[1,"d-flex","mt-4"],[1,"col-6","mr-4"],["class","col-12 d-flex mt-4",4,"ngFor","ngForOf"],[1,"col-12","d-flex","mt-4"],[1,"label-color","p-0","col-4"],[1,"pl-2"],[1,"field-color-preview"],[1,"vitamui-spinner","normal"],[3,"src"],["class","field-color-preview",3,"background-color",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(_.Tb(0,"div",0),_.Tb(1,"div",1),_.Tb(2,"button",2),_.ec("click",(function(){return t.openUpdateCustomerLogo()})),_.Tb(3,"div"),_.Oc(4),_.jc(5,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(6,"div",3),_.Tb(7,"label",4),_.Oc(8),_.jc(9,"translate"),_.Sb(),_.Tb(10,"div",5),_.jc(11,"safeStyle"),_.Mc(12,qi,2,0,"div",6),_.Mc(13,_i,1,1,"img",7),_.Sb(),_.Sb(),_.Sb(),_.Tb(14,"div",8),_.Tb(15,"div",9),_.Tb(16,"label",4),_.Oc(17),_.jc(18,"translate"),_.Sb(),_.Tb(19,"div",5),_.jc(20,"safeStyle"),_.Mc(21,Gi,2,0,"div",6),_.Mc(22,Hi,1,1,"img",7),_.Sb(),_.Sb(),_.Tb(23,"div",3),_.Tb(24,"label",4),_.Oc(25),_.jc(26,"translate"),_.Sb(),_.Tb(27,"div",5),_.jc(28,"safeStyle"),_.Mc(29,Ki,2,0,"div",6),_.Mc(30,Wi,1,1,"img",7),_.Sb(),_.Sb(),_.Sb(),_.Mc(31,Qi,8,6,"div",10),_.Tb(32,"div",11),_.Tb(33,"div",12),_.Tb(34,"label",4),_.Oc(35),_.jc(36,"translate"),_.Sb(),_.Oc(37),_.Sb(),_.Tb(38,"div",13),_.Tb(39,"span",14),_.jc(40,"safeStyle"),_.Sb(),_.Sb(),_.Sb(),_.Tb(41,"div",11),_.Tb(42,"div",12),_.Tb(43,"label",4),_.Oc(44),_.jc(45,"translate"),_.Sb(),_.Oc(46),_.Sb(),_.Tb(47,"div",13),_.Tb(48,"span",14),_.jc(49,"safeStyle"),_.Sb(),_.Sb(),_.Sb(),_.Tb(50,"div",11),_.Tb(51,"div",12),_.Tb(52,"label",4),_.Oc(53),_.jc(54,"translate"),_.Sb(),_.Oc(55),_.Sb(),_.Tb(56,"div",13),_.Tb(57,"span",14),_.jc(58,"safeStyle"),_.Sb(),_.Sb(),_.Sb()),2&e&&(_.Bb(2),_.oc("disabled",t.readonly),_.Bb(2),_.Qc(" ",_.kc(5,30,"COMMON.UPDATE")," "),_.Bb(4),_.Pc(_.kc(9,32,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_PORTAL_TITLE")),_.Bb(2),_.Jc("background-color",_.kc(11,34,t.theme.colors[t.THEME_COLORS.VITAMUI_BACKGROUND])),_.Bb(2),_.oc("ngIf",t.isLoading),_.Bb(1),_.oc("ngIf",!t.isLoading),_.Bb(4),_.Pc(_.kc(18,36,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_HEADER_TITLE")),_.Bb(2),_.Jc("background-color",_.kc(20,38,t.theme.colors[t.THEME_COLORS.VITAMUI_HEADER_FOOTER])),_.Bb(2),_.oc("ngIf",t.isLoading),_.Bb(1),_.oc("ngIf",!t.isLoading),_.Bb(3),_.Pc(_.kc(26,40,"CUSTOMER.GRAPHIC_IDENTITY.LOGO_FOOTER_TITLE")),_.Bb(2),_.Jc("background-color",_.kc(28,42,t.theme.colors[t.THEME_COLORS.VITAMUI_HEADER_FOOTER])),_.Bb(2),_.oc("ngIf",t.isLoading),_.Bb(1),_.oc("ngIf",!t.isLoading),_.Bb(1),_.oc("ngForOf",_.uc(56,Ji,t.THEME_COLORS.VITAMUI_PRIMARY,t.THEME_COLORS.VITAMUI_SECONDARY)),_.Bb(4),_.Pc(_.kc(36,44,"COLOR.TERTIARY")),_.Bb(2),_.Qc(" ",t.theme.colors[t.THEME_COLORS.VITAMUI_TERTIARY]," "),_.Bb(2),_.Jc("background-color",_.kc(40,46,t.theme.colors[t.THEME_COLORS.VITAMUI_TERTIARY])),_.Bb(5),_.Pc(_.kc(45,48,"COLOR.HEADER_FOOTER")),_.Bb(2),_.Qc(" ",t.theme.colors[t.THEME_COLORS.VITAMUI_HEADER_FOOTER]," "),_.Bb(2),_.Jc("background-color",_.kc(49,50,t.theme.colors[t.THEME_COLORS.VITAMUI_HEADER_FOOTER])),_.Bb(5),_.Pc(_.kc(54,52,"COLOR.BACKGROUND")),_.Bb(2),_.Qc(" ",t.theme.colors[t.THEME_COLORS.VITAMUI_BACKGROUND]," "),_.Bb(2),_.Jc("background-color",_.kc(58,54,t.theme.colors[t.THEME_COLORS.VITAMUI_BACKGROUND])))},directives:[C.p,C.o,U.b],pipes:[dt.d,R.pc],styles:["[_nghost-%COMP%]   .label-color[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   label[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}[_nghost-%COMP%]   .field-color-preview[_ngcontent-%COMP%]{padding:0;margin:0 5px 0 0;display:inline-block;width:30px;height:30px;border-radius:100%;position:relative;top:10px}"]}),Xi);function $i(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Qc(" ",_.kc(2,1,"COMMON.ERROR.REQUIRED"),""))}function eo(e,t){if(1&e&&(_.Tb(0,"mat-option",17),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e){var n=t.$implicit;_.oc("value",n.key),_.Bb(1),_.Qc(" ",_.kc(2,2,"COMMON.LANGUAGE."+n.key)," ")}}function to(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Qc(" ",_.kc(2,1,"COMMON.ERROR.REQUIRED"),""))}function no(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Qc(" ",_.kc(2,1,"COMMON.ERROR.REQUIRED"),""))}var io,oo=((io=function(){function e(){M(this,e),this.formChange=new _.n,this.formRemove=new _.n}return y(e,[{key:"ngOnInit",value:function(){var e=this;this.subscription=this.form.valueChanges.subscribe((function(){e.formChange.emit({form:e.form})}))}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"onRemove",value:function(){this.formRemove.emit({form:this.form})}}]),e}()).\u0275fac=function(e){return new(e||io)},io.\u0275cmp=_.Hb({type:io,selectors:[["app-homepage-message-translation"]],inputs:{form:"form",index:"index",languages:"languages"},outputs:{formChange:"formChange",formRemove:"formRemove"},decls:32,vars:25,consts:[["id","translationForm",3,"formGroup"],[1,"col-12","d-flex","align-items-center"],["for","language",1,"mr-4","mb-0"],[1,"text","medium","bold"],[1,"text","normal","danger"],[1,"text","caption","danger"],[4,"ngIf"],[1,"mt-4","mb-4","vitamui-mat-select"],["formControlName","language","required","","panelClass","vitamui-mat-select"],[3,"value",4,"ngFor","ngForOf"],[1,"select-arrow"],[1,"material-icons"],[1,"pl-4","btn","link",3,"click"],[1,"d-flex","flex-column"],["formControlName","portalTitle","required","",1,"pb-2",3,"placeholder"],["formControlName","portalMessage","required","",1,"pb-2",3,"placeholder","maxlength"],[1,"d-flex","justify-content-end"],[3,"value"]],template:function(e,t){if(1&e&&(_.Tb(0,"form",0),_.Tb(1,"div",1),_.Tb(2,"label",2),_.Tb(3,"div",3),_.Oc(4),_.jc(5,"translate"),_.Tb(6,"span",4),_.Oc(7,"*"),_.Sb(),_.Sb(),_.Tb(8,"div",5),_.Mc(9,$i,3,3,"vitamui-common-input-error",6),_.Sb(),_.Sb(),_.Tb(10,"mat-form-field",7),_.Tb(11,"mat-select",8),_.Mc(12,eo,3,4,"mat-option",9),_.Sb(),_.Tb(13,"div",10),_.Tb(14,"i",11),_.Oc(15,"keyboard_arrow_up"),_.Sb(),_.Tb(16,"i",11),_.Oc(17,"keyboard_arrow_down"),_.Sb(),_.Sb(),_.Sb(),_.Tb(18,"button",12),_.ec("click",(function(){return t.onRemove()})),_.Tb(19,"span"),_.Oc(20),_.jc(21,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(22,"div",13),_.Tb(23,"vitamui-common-input",14),_.jc(24,"translate"),_.Mc(25,to,3,3,"vitamui-common-input-error",6),_.Sb(),_.Tb(26,"vitamui-common-textarea",15),_.jc(27,"translate"),_.Mc(28,no,3,3,"vitamui-common-input-error",6),_.Sb(),_.Tb(29,"small",16),_.Oc(30),_.jc(31,"translate"),_.Sb(),_.Sb(),_.Sb()),2&e){var n,i=null,o=null,r=null;_.oc("formGroup",t.form),_.Bb(4),_.Rc(" ",_.kc(5,15,"COMMON.LANGUAGE.TITLE")," ",t.index," "),_.Bb(5),_.oc("ngIf",(null==(i=t.form.get("language"))?null:i.touched)&&!(null==(i=t.form.get("language"))||null==i.errors||!i.errors.required)),_.Bb(3),_.oc("ngForOf",t.languages),_.Bb(8),_.Qc(" ",_.kc(21,17,"CUSTOMER.HOMEPAGE_MESSAGE.DELETE_LANGUAGE"),""),_.Bb(3),_.rc("placeholder","",_.kc(24,19,"CUSTOMER.HOMEPAGE_MESSAGE.LANGUAGE_TITLE")," ",t.index,""),_.Bb(2),_.oc("ngIf",(null==(o=t.form.get("portalTitle"))?null:o.touched)&&!(null==(o=t.form.get("portalTitle"))||null==o.errors||!o.errors.required)),_.Bb(1),_.rc("placeholder","",_.kc(27,21,"CUSTOMER.HOMEPAGE_MESSAGE.LANGUAGE_PORTAL_MESSAGE")," ",t.index,""),_.oc("maxlength",500),_.Bb(2),_.oc("ngIf",(null==(r=t.form.get("portalMessage"))?null:r.touched)&&!(null==(r=t.form.get("portalMessage"))||null==r.errors||!r.errors.required)),_.Bb(2),_.Rc("",null==(n=t.form.get("portalMessage"))||null==n.value?null:n.value.length," ",_.kc(31,23,"CUSTOMER.HOMEPAGE_MESSAGE.PORTAL_MESSAGE_LENGTH"),"")}},directives:[B.y,B.r,B.i,C.p,w.b,P.a,B.q,B.g,B.w,C.o,R.Qb,R.Sb,B.l,R.Rb,ze.k],pipes:[dt.d],styles:[".vitamui-input[_ngcontent-%COMP%]{width:100%!important}"]}),io);function ro(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Qc(" ",_.kc(2,1,"COMMON.ERROR.REQUIRED"),""))}function ao(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Qc(" ",_.kc(2,1,"COMMON.ERROR.REQUIRED"),""))}function co(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div"),_.Tb(1,"app-homepage-message-translation",10),_.ec("formChange",(function(){return _.Dc(n),_.ic().update()}))("formRemove",(function(){_.Dc(n);var e=t.index;return _.ic().remove(e)})),_.Sb(),_.Sb()}if(2&e){var i=t.$implicit,o=t.index,r=_.ic();_.Bb(1),_.oc("form",i)("index",o+1)("languages",r.getLanguages(o))}}var lo,so,uo=((so=function(){function e(t,n,i,o){M(this,e),this.dialogRef=t,this.formBuilder=n,this.startupService=i,this.languageService=o,this.formToSend=new _.n,this.portalTitles={},this.portalMessages={},this.destroy=new qt.a}return y(e,[{key:"ngOnInit",value:function(){this.homepageMessageForm=this.formBuilder.group({id:null,portalTitle:["",[B.x.required]],portalMessage:["",[B.x.required,B.x.maxLength(500)]],translations:this.formBuilder.array([])})}},{key:"ngAfterViewInit",value:function(){var e=this;this.languageService.getAvailableLanguagesOptions().pipe(Object(at.a)(1)).subscribe((function(t){e.languages=t,e.setMessages(),e.formToSend.emit({form:e.homepageMessageForm,portalTitles:e.portalTitles,portalMessages:e.portalMessages}),e.homepageMessageForm.valueChanges.pipe(Object(hi.a)(e.destroy)).subscribe((function(){e.sendForm()}))}))}},{key:"ngOnDestroy",value:function(){this.destroy.next(),this.destroy.complete()}},{key:"setMessages",value:function(){var e=this,t=null,n=this.startupService.getConfigStringValue("PORTAL_TITLE"),i=this.startupService.getConfigStringValue("PORTAL_MESSAGE");this.customer&&(this.customer.id&&(t=this.customer.id),this.customer.language&&(this.language=this.customer.language),this.customer.portalMessages&&(this.portalMessages=this.customer.portalMessages),this.customer.portalTitles&&(this.portalTitles=this.customer.portalTitles));var o=this.portalTitles&&this.portalTitles[this.language]?this.portalTitles[this.language]:n,r=this.portalMessages&&this.portalMessages[this.language]?this.portalMessages[this.language]:i;this.homepageMessageForm.get("id").patchValue(t),this.homepageMessageForm.get("portalTitle").patchValue(o),this.homepageMessageForm.get("portalMessage").patchValue(r),this.languages.forEach((function(t){if(e.portalTitles[t.key]&&e.portalMessages[t.key]&&e.language!==t.key){var n=e.formBuilder.group({language:[t.key,B.x.required],portalTitle:[e.portalTitles[t.key],[B.x.required]],portalMessage:[e.portalMessages[t.key],[B.x.required,B.x.maxLength(500)]]});e.homepageMessageForm.get("translations").value.push(n)}}))}},{key:"onAdd",value:function(){var e=this.formBuilder.group({language:["",B.x.required],portalTitle:["",[B.x.required]],portalMessage:["",[B.x.required,B.x.maxLength(500)]]});this.homepageMessageForm.get("translations").value.push(e),this.sendForm()}},{key:"update",value:function(){this.sendForm()}},{key:"remove",value:function(e){this.homepageMessageForm.get("translations").value.splice(e,1),this.sendForm()}},{key:"sendForm",value:function(){this.getTranslations(),this.formToSend.emit({form:this.homepageMessageForm,portalTitles:this.portalTitles,portalMessages:this.portalMessages})}},{key:"getTranslations",value:function(){var e={},t={};e[this.language]=this.homepageMessageForm.get("portalTitle").value,t[this.language]=this.homepageMessageForm.get("portalMessage").value,this.homepageMessageForm.get("translations").value.forEach((function(n){var i=n.get("language").value,o=n.get("portalTitle").value,r=n.get("portalMessage").value;e[i]=o,t[i]=r})),this.portalTitles=e,this.portalMessages=t}},{key:"getLanguages",value:function(e){var t=this,n=u(this.homepageMessageForm.get("translations").value);n.splice(e,1);var i=n.map((function(e){return e.get("language").value}));return this.languages.filter((function(e){return e.key!==t.language&&i.indexOf(e.key)<0}))}},{key:"isLanguageSet",value:function(){var e=this.homepageMessageForm.get("translations").value,t=!0;return e.forEach((function(e){e.get("language").valid||(t=!1)})),t}}]),e}()).\u0275fac=function(e){return new(e||so)(_.Nb(k.g),_.Nb(B.d),_.Nb(R.lb),_.Nb(R.Q))},so.\u0275cmp=_.Hb({type:so,selectors:[["app-homepage-message"]],inputs:{homepageMessageForm:"homepageMessageForm",customer:"customer"},outputs:{formToSend:"formToSend"},decls:20,vars:22,consts:[["id","homepageMessageForm",3,"formGroup"],[1,"justify-content-between"],[1,"d-flex","flex-column"],[1,"text","large","bold","mb-4"],["formControlName","portalTitle","required","",1,"pb-2",3,"placeholder"],[4,"ngIf"],["formControlName","portalMessage","required","",1,"pb-2",3,"placeholder","maxlength"],[1,"d-flex","justify-content-end"],[4,"ngFor","ngForOf"],[1,"pl-4","btn","link",3,"disabled","click"],[3,"form","index","languages","formChange","formRemove"]],template:function(e,t){if(1&e&&(_.Tb(0,"form",0),_.Tb(1,"div",1),_.Tb(2,"div",2),_.Tb(3,"div",3),_.Oc(4),_.jc(5,"translate"),_.Sb(),_.Tb(6,"vitamui-common-input",4),_.jc(7,"translate"),_.Mc(8,ro,3,3,"vitamui-common-input-error",5),_.Sb(),_.Tb(9,"vitamui-common-textarea",6),_.jc(10,"translate"),_.Mc(11,ao,3,3,"vitamui-common-input-error",5),_.Sb(),_.Tb(12,"small",7),_.Oc(13),_.jc(14,"translate"),_.Sb(),_.Sb(),_.Mc(15,co,2,3,"div",8),_.Tb(16,"button",9),_.ec("click",(function(){return t.onAdd()})),_.Tb(17,"span"),_.Oc(18),_.jc(19,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb()),2&e){var n,i,o=null,r=null;_.oc("formGroup",t.homepageMessageForm),_.Bb(4),_.Qc(" ",_.kc(5,12,"CUSTOMER.HOMEPAGE_MESSAGE.TITLE")," "),_.Bb(2),_.oc("placeholder",_.kc(7,14,"CUSTOMER.HOMEPAGE_MESSAGE.DEFAULT_PORTAL_TITLE")),_.Bb(2),_.oc("ngIf",(null==(o=t.homepageMessageForm.get("portalTitle"))?null:o.touched)&&!(null==(o=t.homepageMessageForm.get("portalTitle"))||null==o.errors||!o.errors.required)),_.Bb(1),_.oc("placeholder",_.kc(10,16,"CUSTOMER.HOMEPAGE_MESSAGE.DEFAULT_PORTAL_MESSAGE"))("maxlength",500),_.Bb(2),_.oc("ngIf",(null==(r=t.homepageMessageForm.get("portalMessage"))?null:r.touched)&&!(null==(r=t.homepageMessageForm.get("portalMessage"))||null==r.errors||!r.errors.required)),_.Bb(2),_.Rc("",null==(n=t.homepageMessageForm.get("portalMessage"))||null==n.value?null:n.value.length," ",_.kc(14,18,"CUSTOMER.HOMEPAGE_MESSAGE.PORTAL_MESSAGE_LENGTH"),""),_.Bb(2),_.oc("ngForOf",t.homepageMessageForm.get("translations").value),_.Bb(1),_.oc("disabled",!((null==(i=t.homepageMessageForm.get("translations"))||null==i.value?null:i.value.length)<(null==t.languages?null:t.languages.length)-1&&t.isLanguageSet())),_.Bb(2),_.Qc(" ",_.kc(19,20,"CUSTOMER.HOMEPAGE_MESSAGE.ADD_LANGUAGE"),"")}},directives:[B.y,B.r,B.i,R.Qb,B.q,B.g,B.w,C.p,R.Sb,B.l,C.o,R.Rb,oo],pipes:[dt.d],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{padding:30px 60px 60px}"]}),so),bo=((lo=function(){function e(t,n,i,o){M(this,e),this.dialogRef=t,this.data=n,this.customerService=i,this.confirmDialogService=o,this.destroy=new qt.a,this.disabled=!0}return y(e,[{key:"customForm",get:function(){return this._customForm},set:function(e){this._customForm=e,this.disabled=!(this._customForm&&this._customForm.valid&&this.checkValidation(this._customForm.value.translations))}},{key:"ngOnDestroy",value:function(){this.destroy.next()}},{key:"ngOnInit",value:function(){}},{key:"onCancel",value:function(){this.customForm.dirty?this.confirmDialogService.confirmBeforeClosing(this.dialogRef):this.dialogRef.close()}},{key:"checkValidation",value:function(e){var t=!0;return e.forEach((function(e){e.valid||(t=!1)})),t}},{key:"updateHomepageMessage",value:function(){var e=this;if(this.customForm.valid&&this.checkValidation(this.customForm.value.translations)){var t=Object.assign({id:this.customForm.get("id").value,portalTitles:this.portalTitles,portalMessages:this.portalMessages});this.customerService.patch(t).pipe(Object(hi.a)(this.destroy)).subscribe((function(){e.dialogRef.close(!0)}),(function(t){e.dialogRef.close(!1),console.error(t)}))}}}]),e}()).\u0275fac=function(e){return new(e||lo)(_.Nb(k.g),_.Nb(k.a),_.Nb(Xe.a),_.Nb(R.t))},lo.\u0275cmp=_.Hb({type:lo,selectors:[["app-homepage-message-update"]],decls:9,vars:8,consts:[[1,"content"],[3,"customer","formToSend"],[1,"d-flex","mt-4"],["type","button",1,"btn","primary","mr-4",3,"disabled","click"],["type","button",1,"btn","cancel","link",3,"click"]],template:function(e,t){1&e&&(_.Tb(0,"div",0),_.Tb(1,"app-homepage-message",1),_.ec("formToSend",(function(e){return t.customForm=e.form,t.portalTitles=e.portalTitles,t.portalMessages=e.portalMessages})),_.Sb(),_.Tb(2,"div",2),_.Tb(3,"button",3),_.ec("click",(function(){return t.updateHomepageMessage()})),_.Oc(4),_.jc(5,"translate"),_.Sb(),_.Tb(6,"button",4),_.ec("click",(function(){return t.onCancel()})),_.Oc(7),_.jc(8,"translate"),_.Sb(),_.Sb(),_.Sb()),2&e&&(_.Bb(1),_.oc("customer",t.data.customer),_.Bb(2),_.oc("disabled",t.disabled),_.Bb(1),_.Qc(" ",_.kc(5,4,"COMMON.APPLY_UPDATE")," "),_.Bb(3),_.Qc(" ",_.kc(8,6,"COMMON.UNDO")," "))},directives:[uo],pipes:[dt.d],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{padding:30px 60px 60px}"]}),lo);function mo(e,t){if(1&e&&(_.Tb(0,"div",2),_.Tb(1,"label",3),_.Oc(2),_.jc(3,"translate"),_.jc(4,"translate"),_.Sb(),_.Oc(5),_.Sb()),2&e){var n=_.ic(2).$implicit,i=_.ic();_.Bb(2),_.Rc("",_.kc(3,3,"CUSTOMER.HOMEPAGE_MESSAGE.LANGUAGE_PORTAL_MESSAGE")," ",_.kc(4,5,"COMMON.LANGUAGE."+n.key),""),_.Bb(3),_.Qc(" ",i.portalMessages[n.key]," ")}}function po(e,t){if(1&e&&(_.Tb(0,"div"),_.Tb(1,"div",2),_.Tb(2,"label",3),_.Oc(3),_.jc(4,"translate"),_.jc(5,"translate"),_.Sb(),_.Tb(6,"span"),_.Oc(7),_.Sb(),_.Sb(),_.Mc(8,mo,6,7,"div",6),_.Sb()),2&e){var n=_.ic().$implicit,i=_.ic();_.Bb(3),_.Rc("",_.kc(4,4,"CUSTOMER.HOMEPAGE_MESSAGE.LANGUAGE_TITLE")," ",_.kc(5,6,"COMMON.LANGUAGE."+n.key),""),_.Bb(4),_.Pc(n.value),_.Bb(1),_.oc("ngIf",i.portalMessages[n.key])}}function ho(e,t){if(1&e&&(_.Tb(0,"div"),_.Mc(1,po,9,8,"div",5),_.Sb()),2&e){var n=t.$implicit,i=_.ic();_.Bb(1),_.oc("ngIf",n.key&&n.key!==i.language)}}var fo,vo,go,Oo,So,To,Co,yo,ko,Mo,Ao,Eo=((yo=function(){function e(t,n){M(this,e),this.dialog=t,this.startupService=n,this.destroy=new qt.a}return y(e,[{key:"customer",get:function(){return this._customer},set:function(e){this._customer=e,this.resetTab(this.customer)}},{key:"readOnly",set:function(e){this._readonly=e}},{key:"readonly",get:function(){return this._readonly}},{key:"ngOnDestroy",value:function(){this.destroy.next()}},{key:"ngOnInit",value:function(){}},{key:"resetTab",value:function(e){var t=this.startupService.getConfigStringValue("PORTAL_TITLE"),n=this.startupService.getConfigStringValue("PORTAL_MESSAGE");e&&(e.language&&(this.language=e.language),e.portalMessages&&(this.portalMessages=e.portalMessages),e.portalTitles&&(this.portalTitles=this.customer.portalTitles)),this.portalTitle=this.portalTitles&&this.portalTitles[this.language]?this.portalTitles[this.language]:t,this.portalMessage=this.portalMessages&&this.portalMessages[this.language]?this.portalMessages[this.language]:n}},{key:"openUpdateHomepageMessage",value:function(){this.dialog.open(bo,{panelClass:"vitamui-modal",disableClose:!0,data:{customer:this.customer}}).afterClosed().subscribe()}}]),e}()).\u0275fac=function(e){return new(e||yo)(_.Nb(k.b),_.Nb(R.lb))},yo.\u0275cmp=_.Hb({type:yo,selectors:[["app-homepage-message-tab"]],inputs:{customer:"customer",readOnly:"readOnly"},decls:18,vars:15,consts:[[1,"d-flex"],[1,"btn","primary","mb-20",3,"disabled","click"],[1,"col-12","d-flex","flex-column","mt-4"],[1,"text","normal","light"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","col-12 d-flex flex-column mt-4",4,"ngIf"]],template:function(e,t){1&e&&(_.Tb(0,"div",0),_.Tb(1,"button",1),_.ec("click",(function(){return t.openUpdateHomepageMessage()})),_.Tb(2,"div"),_.Oc(3),_.jc(4,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(5,"div",2),_.Tb(6,"label",3),_.Oc(7),_.jc(8,"translate"),_.Sb(),_.Tb(9,"span"),_.Oc(10),_.Sb(),_.Sb(),_.Tb(11,"div",2),_.Tb(12,"label",3),_.Oc(13),_.jc(14,"translate"),_.Sb(),_.Oc(15),_.Sb(),_.Mc(16,ho,2,1,"div",4),_.jc(17,"keyvalue")),2&e&&(_.Bb(1),_.oc("disabled",t.readonly),_.Bb(2),_.Qc(" ",_.kc(4,7,"COMMON.UPDATE")," "),_.Bb(4),_.Pc(_.kc(8,9,"CUSTOMER.HOMEPAGE_MESSAGE.PORTAL_TITLE")),_.Bb(3),_.Pc(t.portalTitle),_.Bb(3),_.Pc(_.kc(14,11,"CUSTOMER.HOMEPAGE_MESSAGE.PORTAL_MESSAGE")),_.Bb(2),_.Qc(" ",t.portalMessage,"\n"),_.Bb(1),_.oc("ngForOf",_.kc(17,13,t.portalTitles)))},directives:[C.o,C.p],pipes:[dt.d,C.i],styles:[""]}),yo),Ro=((Co=function(){function e(t,n){M(this,e),this.customerService=t,this.startupService=n,this.previewClose=new _.n}return y(e,[{key:"ngOnInit",value:function(){var e=this;this.customerUpdatedSub=this.customerService.updated.subscribe((function(t){e.customer=t}))}},{key:"openPopup",value:function(){window.open(this.startupService.getConfigStringValue("UI_URL")+"/customer/"+this.customer.id,"detailPopup","width=584, height=713, resizable=no, location=no"),this.emitClose()}},{key:"emitClose",value:function(){this.previewClose.emit()}},{key:"ngOnDestroy",value:function(){this.customerUpdatedSub.unsubscribe()}},{key:"filterEvents",value:function(e){return e.outDetail&&(e.outDetail.includes("EXT_VITAMUI_UPDATE_CUSTOMER")||e.outDetail.includes("EXT_VITAMUI_CREATE_CUSTOMER"))}}]),e}()).\u0275fac=function(e){return new(e||Co)(_.Nb(Xe.a),_.Nb(R.lb))},Co.\u0275cmp=_.Hb({type:Co,selectors:[["app-customer-preview"]],inputs:{customer:"customer",isPopup:"isPopup",gdprReadOnlyStatus:"gdprReadOnlyStatus"},outputs:{previewClose:"previewClose"},decls:18,vars:30,consts:[[3,"title","subtitle","icon","onclose"],[1,"vitamui-sidepanel-body"],[1,"preview-tab-group","show-pagination"],[3,"label"],[3,"customer","readOnly","gdprReadOnlyStatus"],[1,"no-padding",3,"label"],[3,"customer","readOnly"],["collectionName","customers",3,"id","identifier","filter"]],template:function(e,t){1&e&&(_.Tb(0,"vitamui-common-sidenav-header",0),_.ec("onclose",(function(){return t.emitClose()})),_.Sb(),_.Tb(1,"div",1),_.Tb(2,"mat-tab-group",2),_.Tb(3,"mat-tab",3),_.jc(4,"translate"),_.Ob(5,"app-information-tab",4),_.Sb(),_.Tb(6,"mat-tab",5),_.jc(7,"translate"),_.Ob(8,"app-sso-tab",6),_.Sb(),_.Tb(9,"mat-tab",3),_.jc(10,"translate"),_.Ob(11,"app-graphic-identity-tab",6),_.Sb(),_.Tb(12,"mat-tab",3),_.jc(13,"translate"),_.Ob(14,"app-homepage-message-tab",6),_.Sb(),_.Tb(15,"mat-tab",3),_.jc(16,"translate"),_.Ob(17,"vitamui-common-operation-history-tab",7),_.Sb(),_.Sb(),_.Sb()),2&e&&(_.oc("title",null==t.customer?null:t.customer.name)("subtitle","("+(null==t.customer?null:t.customer.code)+")")("icon","vitamui-icon-bank"),_.Bb(3),_.oc("label",_.kc(4,20,"CUSTOMER.TAB.INFORMATION")),_.Bb(2),_.oc("customer",t.customer)("readOnly",t.isPopup||(null==t.customer?null:t.customer.readonly))("gdprReadOnlyStatus",t.gdprReadOnlyStatus),_.Bb(1),_.oc("label",_.kc(7,22,"CUSTOMER.TAB.SSO")),_.Bb(2),_.oc("customer",t.customer)("readOnly",t.isPopup||(null==t.customer?null:t.customer.readonly)),_.Bb(1),_.oc("label",_.kc(10,24,"CUSTOMER.TAB.GRAPHIC_ID")),_.Bb(2),_.oc("customer",t.customer)("readOnly",t.isPopup||(null==t.customer?null:t.customer.readonly)),_.Bb(1),_.oc("label",_.kc(13,26,"CUSTOMER.TAB.HOMEPAGE_MESSAGE")),_.Bb(2),_.oc("customer",t.customer)("readOnly",t.isPopup||(null==t.customer?null:t.customer.readonly)),_.Bb(1),_.oc("label",_.kc(16,28,"CUSTOMER.TAB.HISTORY")),_.Bb(2),_.oc("id",null==t.customer?null:t.customer.id)("identifier",null==t.customer?null:t.customer.identifier)("filter",t.filterEvents))},directives:[R.mc,F.b,F.a,Lt,pi,Zi,Eo,R.Xb],pipes:[dt.d],styles:[".no-padding[_ngcontent-%COMP%]{padding:0}.pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),Co),Io=((To=function(){function e(t){M(this,e),this.route=t,this.customer=this.route.snapshot.data.customer}return y(e,[{key:"ngOnInit",value:function(){}},{key:"closePopup",value:function(){window.close()}}]),e}()).\u0275fac=function(e){return new(e||To)(_.Nb(V.a))},To.\u0275cmp=_.Hb({type:To,selectors:[["app-customer-popup"]],decls:1,vars:2,consts:[[3,"customer","isPopup","previewClose"]],template:function(e,t){1&e&&(_.Tb(0,"app-customer-preview",0),_.ec("previewClose",(function(){return t.closePopup()})),_.Sb()),2&e&&_.oc("customer",t.customer)("isPopup",!0)},directives:[Ro],encapsulation:2}),To),Bo=((So=function(){function e(t,n){M(this,e),this.customerService=t,this.router=n}return y(e,[{key:"resolve",value:function(e){var t=this,n=e.paramMap.get("id");return this.customerService.get(n).pipe(Object(at.a)(1),Object(tt.a)((function(e){return e||(t.router.navigate(["/"]),null)})))}}]),e}()).\u0275fac=function(e){return new(e||So)(_.bc(Xe.a),_.bc(V.d))},So.\u0275prov=_.Jb({token:So,factory:So.\u0275fac,providedIn:"root"}),So),No=((Oo=function(e){function t(e,n){return M(this,t),f(this,t,[e,n+"/tenants"])}return S(t,e),y(t,[{key:"getOne",value:function(e){return v(O(t.prototype),"getOne",this).call(this,e)}},{key:"getAllByParams",value:function(e,n){return v(O(t.prototype),"getAllByParams",this).call(this,e,n)}},{key:"create",value:function(e){return v(O(t.prototype),"create",this).call(this,e)}},{key:"patch",value:function(e){return v(O(t.prototype),"patch",this).call(this,e)}},{key:"checkExistsByParam",value:function(e){return v(O(t.prototype),"checkExistsByParam",this).call(this,e)}}]),t}(R.o)).\u0275fac=function(e){return new(e||Oo)(_.bc(Gt.c),_.bc(R.n))},Oo.\u0275prov=_.Jb({token:Oo,factory:Oo.\u0275fac,providedIn:"root"}),Oo),wo=((go=function(){function e(t,n){M(this,e),this.tenantApi=t,this.snackBarService=n,this.updated=new qt.a}return y(e,[{key:"get",value:function(e){return this.tenantApi.getOne(e)}},{key:"getAll",value:function(){return this.tenantApi.getAllByParams(new Gt.g)}},{key:"getTenantsByCustomerIds",value:function(e){var t=[];t.push({key:"customerId",value:e,operator:R.W.in});var n={criteria:t},i=(new Gt.g).set("criteria",JSON.stringify(n));return this.tenantApi.getAllByParams(i)}},{key:"create",value:function(e,t){var n=this;return this.tenantApi.create(e).pipe(Object(_t.a)((function(e){n.snackBarService.open({message:"SHARED.SNACKBAR.SAFE_CREATE",translateParams:{param1:e.name,param2:t},icon:"vitamui-icon-safe"})}),(function(){n.snackBarService.open({message:"SHARED.SNACKBAR.SAFE_CREATE_ERROR",icon:"vitamui-icon-danger"})})))}},{key:"patch",value:function(e,t){var n=this;return this.tenantApi.patch(e).pipe(Object(_t.a)((function(e){return n.updated.next(e)})),Object(_t.a)((function(e){n.snackBarService.open({message:"SHARED.SNACKBAR.SAFE_UPDATE",translateParams:{param1:e.name,param2:t},icon:"vitamui-icon-safe"})}),(function(e){n.snackBarService.open({message:e.error.message,translate:!1})})))}},{key:"exists",value:function(e){var t=[];t.push({key:"name",value:e,operator:R.W.equals});var n=[{key:"criteria",value:JSON.stringify({criteria:t})}];return this.tenantApi.checkExistsByParam(n)}}]),e}()).\u0275fac=function(e){return new(e||go)(_.bc(No),_.bc(R.Ab))},go.\u0275prov=_.Jb({token:go,factory:go.\u0275fac,providedIn:"root"}),go),xo=((vo=y((function e(t){var n=this;M(this,e),this.tenantService=t,this.debounceTime=400,this.uniqueName=function(e){return function(t){return Object(rt.a)(n.debounceTime).pipe(Object(nt.a)((function(){return t.value!==e?n.tenantService.exists(t.value):Object(Ze.a)(!1)})),Object(at.a)(1),Object(tt.a)((function(e){return e?{uniqueName:!0}:null})))}}}))).\u0275fac=function(e){return new(e||vo)(_.bc(wo))},vo.\u0275prov=_.Jb({token:vo,factory:vo.\u0275fac,providedIn:"root"}),vo),Po=((fo=function(){function e(){M(this,e)}return y(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||fo)},fo.\u0275cmp=_.Hb({type:fo,selectors:[["app-customer-alerting"]],decls:8,vars:1,consts:function(){return[$localize(r||(r=h([":@@disabledGdprAlertConfirm\u241f4347a788d934ed7b0f199ad7d8aa51f6c40d6f8c\u241f4645850704435947410: Vous \xeates sur le point de d\xe9sactiver les alertes sur utilisateurs inactifs dont les donn\xe9es personnelles sont arriv\xe9es \xe0 \xe9ch\xe9ance dans cette organisation. Voulez-vous continuer ? "]))),["align","end"],[1,"btn","primary","btn-confirm-dialog",3,"matDialogClose"],$localize(a||(a=h([":@@confirmDialogConfirmButton\u241fe3da3c1369460b490b9077d027b9d04a8656ff74\u241f4247263368529700262:Confirmer"]))),["matDialogClose","",1,"btn","cancel"],$localize(c||(c=h([":@@confirmDialogCancelButton\u241f12380235948088ddf227ad226ce8a2ae63878fe5\u241f1711750570766225138:Annuler"])))]},template:function(e,t){1&e&&(_.Tb(0,"mat-dialog-content"),_.Tb(1,"p"),_.Xb(2,0),_.Sb(),_.Sb(),_.Tb(3,"mat-dialog-actions",1),_.Tb(4,"button",2),_.Xb(5,3),_.Sb(),_.Tb(6,"button",4),_.Xb(7,5),_.Sb(),_.Sb()),2&e&&(_.Bb(4),_.oc("matDialogClose",!0))},directives:[k.e,k.c,k.d],styles:[""]}),fo),Do=T("Ohay"),jo=((Mo=function(e){function t(e,n){return M(this,t),f(this,t,[e,n+"/owners"])}return S(t,e),y(t,[{key:"getOne",value:function(e){return v(O(t.prototype),"getOne",this).call(this,e)}},{key:"checkExistsByParam",value:function(e){return v(O(t.prototype),"checkExistsByParam",this).call(this,e)}},{key:"create",value:function(e){return v(O(t.prototype),"create",this).call(this,e)}},{key:"patch",value:function(e){return v(O(t.prototype),"patch",this).call(this,e)}}]),t}(R.o)).\u0275fac=function(e){return new(e||Mo)(_.bc(Gt.c),_.bc(R.n))},Mo.\u0275prov=_.Jb({token:Mo,factory:Mo.\u0275fac,providedIn:"root"}),Mo),Uo=((ko=function(){function e(t,n){M(this,e),this.ownerApi=t,this.snackBarService=n,this.updated=new qt.a}return y(e,[{key:"get",value:function(e){return this.ownerApi.getOne(e)}},{key:"create",value:function(e){var t=this;return this.ownerApi.create(e).pipe(Object(_t.a)((function(e){t.snackBarService.open({message:"SHARED.SNACKBAR.OWNER_CREATE",translateParams:{param1:e.name}})}),(function(e){t.snackBarService.open({message:e.error.message,translate:!1})})))}},{key:"exists",value:function(e){var t=[];t.push({key:"code",value:e,operator:R.W.equals});var n=[{key:"criteria",value:JSON.stringify({criteria:t})}];return this.ownerApi.checkExistsByParam(n)}},{key:"patch",value:function(e){var t=this;return this.ownerApi.patch(e).pipe(Object(_t.a)((function(e){return t.updated.next(e)})),Object(_t.a)((function(e){t.snackBarService.open({message:"SHARED.SNACKBAR.OWNER_UPDATE",translateParams:{param1:e.name}})}),(function(e){t.snackBarService.open({message:e.error.message,translate:!1})})))}}]),e}()).\u0275fac=function(e){return new(e||ko)(_.bc(jo),_.bc(R.Ab))},ko.\u0275prov=_.Jb({token:ko,factory:ko.\u0275fac,providedIn:"root"}),ko),Fo=/^[a-zA-Z0-9]*$/,Lo=((Ao=y((function e(t){var n=this;M(this,e),this.ownerService=t,this.debounceTime=400,this.uniqueCode=function(e){return function(t){return Object(rt.a)(n.debounceTime).pipe(Object(nt.a)((function(){return t.value!==e?n.ownerService.exists(t.value):Object(Ze.a)(!1)})),Object(at.a)(1),Object(tt.a)((function(e){return e?{uniqueCode:!0}:null})))}}}))).\u0275fac=function(e){return new(e||Ao)(_.bc(Uo))},Ao.\u0275prov=_.Jb({token:Ao,factory:Ao.\u0275fac,providedIn:"root"}),Ao);function Vo(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"COMMON.ERROR.REQUIRED")))}function qo(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"COMMON.ERROR.WRONG_FORMAT")))}var _o=function(e){return{max:e}};function Go(e,t){if(1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e){var n=_.ic(2);_.Bb(1),_.Pc(_.lc(2,1,"COMMON.ERROR.STRING_MAX_LENGTH",_.tc(4,_o,n.ownerCodeMaxLength)))}}function Ho(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"CUSTOMER.OWNER.MODAL.CODE_ALREADY_EXIST")))}function Ko(e,t){if(1&e&&(_.Rb(0),_.Mc(1,Vo,3,3,"vitamui-common-input-error",2),_.Mc(2,qo,3,3,"vitamui-common-input-error",2),_.Mc(3,Go,3,6,"vitamui-common-input-error",2),_.Mc(4,Ho,3,3,"vitamui-common-input-error",2),_.Qb()),2&e){var n=_.ic(),i=null,o=null,r=null,a=null;_.Bb(1),_.oc("ngIf",!(null==n.form||null==(i=n.form.get("code"))||null==i.errors||!i.errors.required)),_.Bb(1),_.oc("ngIf",!(null==n.form||null==(o=n.form.get("code"))||null==o.errors||!o.errors.pattern)),_.Bb(1),_.oc("ngIf",!(null==n.form||null==(r=n.form.get("code"))||null==r.errors||!r.errors.maxlength)),_.Bb(1),_.oc("ngIf",!(null==n.form||null==(a=n.form.get("code"))||null==a.errors||!a.errors.uniqueCode))}}function Wo(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"COMMON.ERROR.REQUIRED")))}function Yo(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"COMMON.ERROR.REQUIRED")))}function zo(e,t){if(1&e&&(_.Tb(0,"mat-option",16),_.Oc(1),_.Sb()),2&e){var n=t.$implicit;_.oc("value",n.code),_.Bb(1),_.Qc(" ",n.name," ")}}var Qo,Xo={provide:B.o,useExisting:Object(_.V)((function(){return Jo})),multi:!0},Jo=((Qo=function(){function e(t,n,i,o){M(this,e),this.formBuilder=t,this.ownerFormValidators=n,this.countryService=i,this.startupService=o,this.ownerCodeMaxLength=15,this.onChange=function(e){},this.onTouched=function(){},this.maxStreetLength=this.startupService.getConfigNumberValue("MAX_STREET_LENGTH"),this.form=this.formBuilder.group({id:null,customerId:[null],identifier:null,code:[null,[B.x.required,B.x.pattern(Fo),B.x.maxLength(this.ownerCodeMaxLength)],this.ownerFormValidators.uniqueCode()],name:[null,B.x.required],companyName:[null,B.x.required],internalCode:[null],address:this.formBuilder.group({street:[null,B.x.maxLength(this.maxStreetLength)],zipCode:null,city:null,country:"FR"}),readonly:!1})}return y(e,[{key:"customerId",get:function(){return this._customerId},set:function(e){this._customerId=e,this.form&&this.form.get("customerId").setValue(e)}},{key:"customerInfo",get:function(){return this._customerInfo},set:function(e){this._customerInfo=e,e&&this.form&&this.form.patchValue({code:e.code,name:e.name,companyName:e.companyName})}},{key:"ngOnInit",value:function(){var e=this;this.subscribeToValueChanges(),this.countryService.getAvailableCountries().subscribe((function(t){e.countries=t}))}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe()}},{key:"writeValue",value:function(e){this.sub.unsubscribe(),this.form.reset(e||{customerId:this.customerId,code:null,name:null,companyName:null,internalCode:null,address:{street:null,zipCode:null,city:null,country:"FR"},readonly:!1}),this.subscribeToValueChanges()}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"subscribeToValueChanges",value:function(){var e=this;this.sub=Object(Je.a)(this.form.statusChanges,this.form.valueChanges).pipe(Object(tt.a)((function(){return e.form.pending||e.form.invalid?null:e.form.value})),Object(Do.a)()).subscribe((function(t){return e.onChange(t)}))}}]),e}()).\u0275fac=function(e){return new(e||Qo)(_.Nb(B.d),_.Nb(Lo),_.Nb(R.u),_.Nb(R.lb))},Qo.\u0275cmp=_.Hb({type:Qo,selectors:[["app-owner-form"]],inputs:{customerId:"customerId",customerInfo:"customerInfo"},features:[_.Ab([Xo])],decls:30,vars:30,consts:[[3,"formGroup"],["maxlength","20","required","","formControlName","code",1,"col-6","pl-0",3,"placeholder"],[4,"ngIf"],[1,"d-flex"],["formControlName","name","maxlength","100","required","",1,"col-6","pl-0",3,"placeholder"],["formControlName","companyName","maxlength","250","required","",1,"col-6",3,"placeholder"],["formGroupName","address"],["formControlName","street",1,"col-12","pl-0",3,"maxlength","placeholder"],["formControlName","zipCode","maxlength","10",1,"col-4","pl-0",3,"placeholder"],["formControlName","city","maxlength","100",1,"col-4",3,"placeholder"],[1,"vitamui-mat-select","col-4"],["formControlName","country","panelClass","vitamui-mat-select",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[1,"select-arrow"],[1,"material-icons"],["formControlName","internalCode","maxlength","20",1,"col-12","pl-0",3,"placeholder"],[3,"value"]],template:function(e,t){if(1&e&&(_.Rb(0,0),_.Tb(1,"vitamui-common-input",1),_.jc(2,"translate"),_.Mc(3,Ko,5,4,"ng-container",2),_.Sb(),_.Tb(4,"div",3),_.Tb(5,"vitamui-common-input",4),_.jc(6,"translate"),_.Mc(7,Wo,3,3,"vitamui-common-input-error",2),_.Sb(),_.Tb(8,"vitamui-common-input",5),_.jc(9,"translate"),_.Mc(10,Yo,3,3,"vitamui-common-input-error",2),_.Sb(),_.Sb(),_.Rb(11,6),_.Ob(12,"vitamui-common-input",7),_.jc(13,"translate"),_.Tb(14,"div",3),_.Ob(15,"vitamui-common-input",8),_.jc(16,"translate"),_.Ob(17,"vitamui-common-input",9),_.jc(18,"translate"),_.Tb(19,"mat-form-field",10),_.Tb(20,"mat-select",11),_.jc(21,"translate"),_.Mc(22,zo,2,2,"mat-option",12),_.Sb(),_.Tb(23,"div",13),_.Tb(24,"i",14),_.Oc(25,"keyboard_arrow_up"),_.Sb(),_.Tb(26,"i",14),_.Oc(27,"keyboard_arrow_down"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Qb(),_.Ob(28,"vitamui-common-input",15),_.jc(29,"translate"),_.Qb()),2&e){var n,i=null,o=null;_.oc("formGroup",t.form),_.Bb(1),_.oc("placeholder",_.kc(2,14,"CUSTOMER.OWNER.CODE")),_.Bb(2),_.oc("ngIf",null==(n=t.form.get("code"))?null:n.touched),_.Bb(2),_.oc("placeholder",_.kc(6,16,"CUSTOMER.OWNER.NAME")),_.Bb(2),_.oc("ngIf",(null==(i=t.form.get("name"))?null:i.touched)&&!(null==(i=t.form.get("name"))||null==i.errors||!i.errors.required)),_.Bb(1),_.oc("placeholder",_.kc(9,18,"CUSTOMER.OWNER.SOCIAL_REASON")),_.Bb(2),_.oc("ngIf",(null==(o=t.form.get("companyName"))?null:o.touched)&&!(null==(o=t.form.get("companyName"))||null==o.errors||!o.errors.required)),_.Bb(2),_.pc("maxlength",t.maxStreetLength),_.oc("placeholder",_.kc(13,20,"COMMON.ADRESS.STREET")),_.Bb(3),_.oc("placeholder",_.kc(16,22,"COMMON.ADRESS.ZIPCODE")),_.Bb(2),_.oc("placeholder",_.kc(18,24,"COMMON.ADRESS.CITY")),_.Bb(3),_.oc("placeholder",_.kc(21,26,"COMMON.ADRESS.COUNTRY")),_.Bb(2),_.oc("ngForOf",t.countries),_.Bb(6),_.oc("placeholder",_.kc(29,28,"CUSTOMER.OWNER.INTERNAL_CODE"))}},directives:[B.r,B.i,R.Qb,B.l,B.w,B.q,B.g,C.p,B.j,w.b,P.a,C.o,R.Rb,ze.k],pipes:[dt.d],styles:[""]}),Qo);function Zo(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"COMMON.ERROR.REQUIRED")))}function $o(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"COMMON.ERROR.WRONG_FORMAT")))}var er=function(e){return{max:e}};function tr(e,t){if(1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e){var n=_.ic(2);_.Bb(1),_.Pc(_.lc(2,1,"COMMON.ERROR.STRING_MAX_LENGTH",_.tc(4,er,n.customerCodeMaxLength)))}}function nr(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Qc("",_.kc(2,1,"CUSTOMER.INFORMATIONS.MODAL.CODE_ALREADY_EXIST")," "))}function ir(e,t){if(1&e&&(_.Rb(0),_.Mc(1,Zo,3,3,"vitamui-common-input-error",7),_.Mc(2,$o,3,3,"vitamui-common-input-error",7),_.Mc(3,tr,3,6,"vitamui-common-input-error",7),_.Mc(4,nr,3,3,"vitamui-common-input-error",7),_.Qb()),2&e){var n=_.ic(),i=null,o=null,r=null,a=null;_.Bb(1),_.oc("ngIf",!(null==n.form||null==(i=n.form.get("code"))||null==i.errors||!i.errors.required)),_.Bb(1),_.oc("ngIf",!(null==n.form||null==(o=n.form.get("code"))||null==o.errors||!o.errors.pattern)),_.Bb(1),_.oc("ngIf",!(null==n.form||null==(r=n.form.get("code"))||null==r.errors||!r.errors.maxlength)),_.Bb(1),_.oc("ngIf",!(null==n.form||null==(a=n.form.get("code"))||null==a.errors||!a.errors.uniqueCode))}}function or(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Qc("",_.kc(2,1,"COMMON.ERROR.REQUIRED")," "))}function rr(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Qc("",_.kc(2,1,"COMMON.ERROR.REQUIRED")," "))}function ar(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Qc("",_.kc(2,1,"COMMON.ERROR.REQUIRED")," "))}function cr(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Qc("",_.kc(2,1,"COMMON.ERROR.REQUIRED")," "))}function lr(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Qc("",_.kc(2,1,"COMMON.ERROR.REQUIRED")," "))}function sr(e,t){if(1&e&&(_.Tb(0,"mat-option",40),_.Oc(1),_.Sb()),2&e){var n=t.$implicit;_.oc("value",n.code),_.Bb(1),_.Qc(" ",n.name," ")}}function ur(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Xb(1,59),_.Sb())}function dr(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Xb(1,60),_.Sb())}function br(e,t){1&e&&_.Pb(0)}function mr(e,t){1&e&&_.Pb(0)}function pr(e,t){1&e&&_.Pb(0)}function hr(e,t){1&e&&_.Pb(0)}function fr(e,t){1&e&&_.Pb(0)}function vr(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",61),_.Tb(1,"app-graphic-identity",62),_.ec("formToSend",(function(e){_.Dc(n);var t=_.ic();return t.customerForm=e.form,t.logos=e.logos})),_.Sb(),_.Tb(2,"div",32),_.Tb(3,"button",33),_.Oc(4),_.jc(5,"translate"),_.Sb(),_.Mc(6,hr,1,0,"ng-container",34),_.Sb(),_.Mc(7,fr,1,0,"ng-container",34),_.Sb()}if(2&e){var i=_.ic(),o=_.zc(186),r=_.zc(188);_.Bb(1),_.oc("customer",i.customer),_.Bb(2),_.oc("disabled",!i.thirdStepValid()),_.Bb(1),_.Qc(" ",_.kc(5,5,"COMMON.NEXT")," "),_.Bb(2),_.oc("ngTemplateOutlet",o),_.Bb(1),_.oc("ngTemplateOutlet",r)}}function gr(e,t){1&e&&_.Pb(0)}function Or(e,t){1&e&&_.Pb(0)}function Sr(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",63),_.Tb(1,"app-homepage-message",62),_.ec("formToSend",(function(e){_.Dc(n);var t=_.ic();return t.homepageMessageForm=e.form,t.portalTitles=e.portalTitles,t.portalMessages=e.portalMessages})),_.Sb(),_.Tb(2,"div",32),_.Tb(3,"button",33),_.Oc(4),_.jc(5,"translate"),_.Sb(),_.Mc(6,gr,1,0,"ng-container",34),_.Sb(),_.Mc(7,Or,1,0,"ng-container",34),_.Sb()}if(2&e){var i=_.ic(),o=_.zc(186),r=_.zc(188);_.Bb(1),_.oc("customer",i.getCustomerFromForm()),_.Bb(2),_.oc("disabled",!i.fourthStepValid()),_.Bb(1),_.Qc(" ",_.kc(5,5,"COMMON.NEXT")," "),_.Bb(2),_.oc("ngTemplateOutlet",o),_.Bb(1),_.oc("ngTemplateOutlet",r)}}function Tr(e,t){1&e&&_.Pb(0)}function Cr(e,t){1&e&&_.Pb(0)}function yr(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Qc("",_.kc(2,1,"COMMON.ERROR.REQUIRED")," "))}function kr(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Qc("",_.kc(2,1,"CUSTOMER.OWNER.MODAL.NAME_ALREADY_EXIST")," "))}function Mr(e,t){1&e&&_.Pb(0)}function Ar(e,t){1&e&&_.Pb(0)}function Er(e,t){if(1&e){var n=_.Ub();_.Tb(0,"button",64),_.ec("click",(function(){return _.Dc(n),_.ic().onCancel()})),_.Oc(1),_.jc(2,"translate"),_.Sb()}2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"COMMON.UNDO")))}function Rr(e,t){1&e&&(_.Tb(0,"button",65),_.Ob(1,"i",66),_.Tb(2,"span",67),_.Oc(3),_.jc(4,"translate"),_.Sb(),_.Sb()),2&e&&(_.Bb(3),_.Pc(_.kc(4,1,"COMMON.BACK")))}var Ir,Br,Nr=function(){return["owners",0]},wr=((Ir=function(){function e(t,n,i,o,r,a,c,l,s,u){var d=this;M(this,e),this.dialogRef=t,this.data=n,this.formBuilder=i,this.customerService=o,this.customerCreateValidators=r,this.confirmDialogService=a,this.tenantFormValidators=c,this.countryService=l,this.startupService=s,this.matDialog=u,this.customerCodeMaxLength=15,this.stepIndex=0,this.stepCount=6,this.hasError=!0,this.creating=!1,this.customerInfo={code:null,name:null,companyName:null},this.destroy=new qt.a,this.maxStreetLength=this.startupService.getConfigNumberValue("MAX_STREET_LENGTH"),this.form=this.formBuilder.group({gdprAlert:!0,gdprAlertDelay:[72,B.x.min(1)],enabled:[!0,B.x.required],code:[null,[B.x.required,B.x.pattern(ct),B.x.maxLength(this.customerCodeMaxLength)],this.customerCreateValidators.uniqueCode()],name:[null,B.x.required],companyName:[null,B.x.required],passwordRevocationDelay:6,otp:R.Y.OPTIONAL,address:this.formBuilder.group({street:[null,[B.x.required,B.x.maxLength(this.maxStreetLength)]],zipCode:[null,B.x.required],city:[null,B.x.required],country:["FR",B.x.required]}),internalCode:[null],language:["FRENCH",B.x.required],emailDomains:[null,B.x.required],defaultEmailDomain:[null,B.x.required],hasCustomGraphicIdentity:!1,themeColors:[null],portalMessages:[null],portalTitles:[null],owners:this.formBuilder.array([this.formBuilder.control(null,B.x.required)]),tenantName:[null,[B.x.required],this.tenantFormValidators.uniqueName()]}),this.data&&(this.gdprReadOnlyStatus=this.data.gdprReadOnlySettingStatus),this.form.get("gdprAlert").valueChanges.subscribe((function(){d.form.get("gdprAlert").value||d.confirm(Po).subscribe((function(){return d.form.get("gdprAlert").setValue(!0)}))}))}return y(e,[{key:"customerForm",get:function(){return this._customerForm},set:function(e){this._customerForm=e}},{key:"homepageMessageForm",get:function(){return this._homepageMessageForm},set:function(e){this._homepageMessageForm=e}},{key:"ngOnInit",value:function(){var e=this;this.onChanges(),this.customerService.getMyCustomer().subscribe((function(t){e.customer=t})),this.confirmDialogService.listenToEscapeKeyPress(this.dialogRef).pipe(Object(hi.a)(this.destroy)).subscribe((function(){return e.onCancel()})),this.countryService.getAvailableCountries().subscribe((function(t){e.countries=t}))}},{key:"ngOnDestroy",value:function(){this.destroy.next()}},{key:"onChanges",value:function(){var e=this;Object(Je.a)(this.form.get("code").valueChanges,this.form.get("name").valueChanges,this.form.get("companyName").valueChanges).subscribe((function(){e.customerInfo={code:e.form.get("code").value,name:e.form.get("name").value,companyName:e.form.get("companyName").value}}))}},{key:"getOwnerName",value:function(){return this.form.get(["owners",0]).value?this.form.get(["owners",0]).value.name:""}},{key:"onCancel",value:function(){this.form.dirty?this.confirmDialogService.confirmBeforeClosing(this.dialogRef):this.dialogRef.close()}},{key:"confirm",value:function(e){return this.matDialog.open(e,{panelClass:"vitamui-dialog"}).beforeClosed().pipe(Object(et.a)((function(e){return!e})))}},{key:"onSubmit",value:function(){var e=this;if(!this.lastStepIsInvalid()&&this.stepIndex===this.stepCount-1){this.creating=!0;var t=this.getCustomerFromForm();this.customerService.create(t,this.logos).pipe(Object(hi.a)(this.destroy)).subscribe((function(){e.dialogRef.close(!0)}),(function(t){e.creating=!1,console.error(t)}))}}},{key:"getCustomerFromForm",value:function(){var e=this.form.value;return this.customerForm&&!0===this.customerForm.get("hasCustomGraphicIdentity").value&&(e=Object.assign(Object.assign({},this.form.value),{hasCustomGraphicIdentity:this.customerForm.get("hasCustomGraphicIdentity").value,themeColors:this.customerForm.get("themeColors").value})),this.homepageMessageForm&&(e=Object.assign(Object.assign({},e),{id:this.homepageMessageForm.get("id").value,portalTitles:this.portalTitles,portalMessages:this.portalMessages})),e}},{key:"isDurationNotValid",value:function(){var e=this;return this.form.get("gdprAlert").value?this.form.get("gdprAlertDelay").invalid||this.form.get("gdprAlertDelay").pending:(this.form.get("gdprAlert").valueChanges.subscribe((function(){e.form.get("gdprAlertDelay").setValue(72)})),!1)}},{key:"firstStepInvalid",value:function(){return this.form.get("code").invalid||this.form.get("code").pending||this.form.get("name").invalid||this.form.get("name").pending||this.form.get("companyName").invalid||this.form.get("companyName").pending||this.form.get("address.street").invalid||this.form.get("address.street").pending||this.form.get("address.zipCode").invalid||this.form.get("address.zipCode").pending||this.form.get("address.city").invalid||this.form.get("address.city").pending||this.isDurationNotValid()||this.form.get("internalCode").invalid||this.form.get("internalCode").pending||this.form.get("address.country").invalid||this.form.get("address.country").pending}},{key:"secondStepInvalid",value:function(){return this.form.get("passwordRevocationDelay").invalid||this.form.get("otp").invalid||this.form.get("emailDomains").invalid||this.form.get("defaultEmailDomain").invalid}},{key:"thirdStepValid",value:function(){return!this.customerForm||this.customerForm&&this.customerForm.valid}},{key:"fourthStepValid",value:function(){return this.homepageMessageForm&&this.homepageMessageForm.valid&&this.checkValidation(this.homepageMessageForm.value.translations)}},{key:"checkValidation",value:function(e){var t=!0;return e.forEach((function(e){e.valid||(t=!1)})),t}},{key:"lastStepIsInvalid",value:function(){var e=this.firstStepInvalid()||this.secondStepInvalid()||!this.thirdStepValid()||!this.fourthStepValid();return this.form.pending||this.form.invalid||e||this.creating}}]),e}()).\u0275fac=function(e){return new(e||Ir)(_.Nb(k.g),_.Nb(k.a),_.Nb(B.d),_.Nb(Xe.a),_.Nb(lt),_.Nb(R.t),_.Nb(xo),_.Nb(R.u),_.Nb(R.lb),_.Nb(k.b))},Ir.\u0275cmp=_.Hb({type:Ir,selectors:[["app-customer-create"]],decls:189,vars:150,consts:function(){return[[1,"header"],[3,"index","count"],["id","formCreateCustomer",3,"formGroup","ngSubmit"],[3,"selectionChange"],[1,"content"],[1,"text","large","bold"],["formControlName","code","required","",1,"col-6","pl-0",3,"placeholder"],[4,"ngIf"],[1,"d-flex"],["formControlName","name","maxlength","100","required","",1,"col-6","pl-0",3,"placeholder"],["formControlName","companyName","maxlength","250","required","",1,"col-6",3,"placeholder"],["formGroupName","address"],["formControlName","street","required","",1,"col-12","pl-0",3,"maxlength","placeholder"],["formControlName","zipCode","maxlength","10","required","",1,"col-4","pl-0",3,"placeholder"],["formControlName","city","maxlength","100","required","",1,"col-4",3,"placeholder"],[1,"vitamui-mat-select"],["formControlName","country","required","","panelClass","vitamui-mat-select",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[1,"select-arrow"],[1,"material-icons"],["formControlName","internalCode","maxlength","20",1,"col-12","pl-0",3,"placeholder"],["for","alerte",1,"inline-label","label-alerte"],[1,"required-marker"],["formControlName","gdprAlert",3,"disabled"],["for","dur\xe9ealerte",1,"inline-label","label-alertDelay"],["formControlName","gdprAlertDelay","maxlength","250","required","","placeholder","Dur\xe9e d'alerte",3,"disabled"],[1,"col-12","d-flex","align-items-center"],["for","language",1,"mr-4","mb-0"],[1,"font-weight-bold"],["formControlName","language","required","","panelClass","vitamui-mat-select"],["value","ENGLISH"],["value","FRENCH"],[1,"actions"],["type","button","cdkStepperNext","",1,"btn","primary",3,"disabled"],[4,"ngTemplateOutlet"],[1,"col-12","p-0","d-flex","align-items-center"],[1,"text","medium","bold"],[1,"text","normal","bold","light"],[1,"vitamui-mat-select","ml-5"],["formControlName","passwordRevocationDelay","panelClass","vitamui-mat-select",3,"placeholder"],[3,"value"],[1,"col-12","p-0","mt-3"],[1,"text","danger"],["formControlName","otp",1,"vitamui-button-toggle-group","mt-2"],["group","matButtonToggleGroup"],["value","DISABLED"],["value","OPTIONAL"],["value","MANDATORY"],[1,"col-12","p-0","mt-4","mb-3"],[1,"mb-4","text","normal","bold","light"],["formControlName","emailDomains",3,"placeholder","selected","selectedChange"],["id","toOverride","class","content mt-4",4,"ngIf"],["class","content mt-4",4,"ngIf"],[3,"formControl","customerInfo"],[1,"hint"],["formControlName","tenantName","required","",3,"placeholder"],["type","submit",1,"btn","primary",3,"disabled"],["cancel",""],["back",""],$localize(l||(l=h([":Required field error hint@@formErrorRequiredField\u241f280938ad72007d81e91ee0f9502065c65fc5e86c\u241f2006890700163375412:Champ requis "]))),$localize(s||(s=h([":Required field error hint@@formErrorRequiredField\u241f64f0577d627b50efbe97df1474bcad8af18ad40f\u241f7264927525496483276:Il faut une valeur sup\xe9rieure \xe0 0 "]))),["id","toOverride",1,"content","mt-4"],[3,"customer","formToSend"],[1,"content","mt-4"],["type","button",1,"btn","cancel","link","ml-3",3,"click"],["type","button","cdkStepperPrevious","",1,"btn","link","mt-1","ml-1","primary"],[1,"vitamui-icon","vitamui-icon-chevron-left"],[1,"underline"]]},template:function(e,t){if(1&e&&(_.Tb(0,"div",0),_.Ob(1,"vitamui-common-progress-bar",1),_.Sb(),_.Tb(2,"form",2),_.ec("ngSubmit",(function(){return t.onSubmit()})),_.Tb(3,"vitamui-common-stepper",3),_.ec("selectionChange",(function(e){return t.stepIndex=e.selectedIndex})),_.Tb(4,"cdk-step"),_.Tb(5,"div",4),_.Tb(6,"div",5),_.Oc(7),_.jc(8,"translate"),_.Sb(),_.Tb(9,"vitamui-common-input",6),_.jc(10,"translate"),_.Mc(11,ir,5,4,"ng-container",7),_.Sb(),_.Tb(12,"div",8),_.Tb(13,"vitamui-common-input",9),_.jc(14,"translate"),_.Mc(15,or,3,3,"vitamui-common-input-error",7),_.Sb(),_.Tb(16,"vitamui-common-input",10),_.jc(17,"translate"),_.Mc(18,rr,3,3,"vitamui-common-input-error",7),_.Sb(),_.Sb(),_.Rb(19,11),_.Tb(20,"vitamui-common-input",12),_.jc(21,"translate"),_.Mc(22,ar,3,3,"vitamui-common-input-error",7),_.Sb(),_.Tb(23,"div",8),_.Tb(24,"vitamui-common-input",13),_.jc(25,"translate"),_.Mc(26,cr,3,3,"vitamui-common-input-error",7),_.Sb(),_.Tb(27,"vitamui-common-input",14),_.jc(28,"translate"),_.Mc(29,lr,3,3,"vitamui-common-input-error",7),_.Sb(),_.Tb(30,"mat-form-field",15),_.Tb(31,"mat-select",16),_.jc(32,"translate"),_.Mc(33,sr,2,2,"mat-option",17),_.Sb(),_.Tb(34,"div",18),_.Tb(35,"i",19),_.Oc(36,"keyboard_arrow_up"),_.Sb(),_.Tb(37,"i",19),_.Oc(38,"keyboard_arrow_down"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Qb(),_.Ob(39,"vitamui-common-input",20),_.jc(40,"translate"),_.Tb(41,"div",8),_.Tb(42,"label",21),_.Oc(43," Alerte pour les utilisateurs inactifs "),_.Tb(44,"span",22),_.Oc(45,"*"),_.Sb(),_.Ob(46,"br"),_.Sb(),_.Ob(47,"vitamui-common-slide-toggle",23),_.Tb(48,"label",24),_.Oc(49," Dur\xe9e d'alerte sur les utilisateurs inactifs (par mois) "),_.Tb(50,"span",22),_.Oc(51,"*"),_.Sb(),_.Sb(),_.Tb(52,"vitamui-common-input",25),_.Mc(53,ur,2,0,"vitamui-common-input-error",7),_.Mc(54,dr,2,0,"vitamui-common-input-error",7),_.Sb(),_.Sb(),_.Tb(55,"div",26),_.Tb(56,"label",27),_.Tb(57,"div",28),_.Oc(58),_.jc(59,"translate"),_.Tb(60,"span",22),_.Oc(61,"*"),_.Sb(),_.Sb(),_.Tb(62,"div",28),_.Tb(63,"small"),_.Oc(64),_.jc(65,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(66,"mat-form-field",15),_.Tb(67,"mat-select",29),_.Tb(68,"mat-option",30),_.Oc(69),_.jc(70,"translate"),_.Sb(),_.Tb(71,"mat-option",31),_.Oc(72),_.jc(73,"translate"),_.Sb(),_.Sb(),_.Tb(74,"div",18),_.Tb(75,"i",19),_.Oc(76,"keyboard_arrow_up"),_.Sb(),_.Tb(77,"i",19),_.Oc(78,"keyboard_arrow_down"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Tb(79,"div",32),_.Tb(80,"button",33),_.Oc(81),_.jc(82,"translate"),_.Sb(),_.Mc(83,br,1,0,"ng-container",34),_.Sb(),_.Sb(),_.Sb(),_.Tb(84,"cdk-step"),_.Tb(85,"div",4),_.Tb(86,"div",5),_.Oc(87),_.jc(88,"translate"),_.Sb(),_.Tb(89,"div",35),_.Tb(90,"div"),_.Tb(91,"div",36),_.Oc(92),_.jc(93,"translate"),_.Sb(),_.Tb(94,"div",37),_.Tb(95,"small"),_.Oc(96),_.jc(97,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(98,"mat-form-field",38),_.Tb(99,"mat-select",39),_.jc(100,"translate"),_.Tb(101,"mat-option",40),_.Oc(102),_.jc(103,"translate"),_.Sb(),_.Tb(104,"mat-option",40),_.Oc(105),_.jc(106,"translate"),_.Sb(),_.Tb(107,"mat-option",40),_.Oc(108),_.jc(109,"translate"),_.Sb(),_.Tb(110,"mat-option",40),_.Oc(111),_.jc(112,"translate"),_.Sb(),_.Sb(),_.Tb(113,"div",18),_.Tb(114,"i",19),_.Oc(115,"keyboard_arrow_up"),_.Sb(),_.Tb(116,"i",19),_.Oc(117,"keyboard_arrow_down"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Tb(118,"div",41),_.Tb(119,"div",36),_.Oc(120),_.jc(121,"translate"),_.Tb(122,"span",42),_.Oc(123,"*"),_.Sb(),_.Sb(),_.Tb(124,"mat-button-toggle-group",43,44),_.Tb(126,"mat-button-toggle",45),_.Oc(127),_.jc(128,"translate"),_.Sb(),_.Tb(129,"mat-button-toggle",46),_.Oc(130),_.jc(131,"translate"),_.Sb(),_.Tb(132,"mat-button-toggle",47),_.Oc(133),_.jc(134,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(135,"div",48),_.Tb(136,"div",36),_.Oc(137),_.jc(138,"translate"),_.Sb(),_.Tb(139,"div",49),_.Oc(140),_.jc(141,"translate"),_.Sb(),_.Tb(142,"app-domains-input",50),_.ec("selectedChange",(function(e){return t.form.get("defaultEmailDomain").setValue(e)})),_.jc(143,"translate"),_.Sb(),_.Sb(),_.Tb(144,"div",32),_.Tb(145,"button",33),_.Oc(146),_.jc(147,"translate"),_.Sb(),_.Mc(148,mr,1,0,"ng-container",34),_.Sb(),_.Mc(149,pr,1,0,"ng-container",34),_.Sb(),_.Sb(),_.Tb(150,"cdk-step"),_.Mc(151,vr,8,7,"div",51),_.Sb(),_.Tb(152,"cdk-step"),_.Mc(153,Sr,8,7,"div",52),_.Sb(),_.Tb(154,"cdk-step"),_.Tb(155,"div",4),_.Tb(156,"div",5),_.Oc(157),_.jc(158,"translate"),_.Sb(),_.Tb(159,"div"),_.Ob(160,"app-owner-form",53),_.Tb(161,"p",54),_.Oc(162),_.jc(163,"translate"),_.Sb(),_.Sb(),_.Tb(164,"div",32),_.Tb(165,"button",33),_.Oc(166),_.jc(167,"translate"),_.Sb(),_.Mc(168,Tr,1,0,"ng-container",34),_.Sb(),_.Mc(169,Cr,1,0,"ng-container",34),_.Sb(),_.Sb(),_.Tb(170,"cdk-step"),_.Tb(171,"div",4),_.Tb(172,"div",5),_.Oc(173),_.jc(174,"translate"),_.Sb(),_.Tb(175,"vitamui-common-input",55),_.jc(176,"translate"),_.Mc(177,yr,3,3,"vitamui-common-input-error",7),_.Mc(178,kr,3,3,"vitamui-common-input-error",7),_.Sb(),_.Tb(179,"div",32),_.Tb(180,"button",56),_.Oc(181),_.jc(182,"translate"),_.Sb(),_.Mc(183,Mr,1,0,"ng-container",34),_.Sb(),_.Mc(184,Ar,1,0,"ng-container",34),_.Sb(),_.Sb(),_.Mc(185,Er,3,3,"ng-template",null,57,_.Nc),_.Mc(187,Rr,5,3,"ng-template",null,58,_.Nc),_.Sb(),_.Sb()),2&e){var n,i=_.zc(186),o=_.zc(188),r=null,a=null,c=null,l=null,s=null,u=null,d=null,b=null,m=null;_.Bb(1),_.oc("index",t.stepIndex)("count",t.stepCount),_.Bb(1),_.oc("formGroup",t.form),_.Bb(5),_.Pc(_.kc(8,75,"CUSTOMER.HOME.CREATE_TITLE")),_.Bb(2),_.oc("placeholder",_.kc(10,77,"CUSTOMER.INFORMATIONS.CODE")),_.Bb(2),_.oc("ngIf",null==(n=t.form.get("code"))?null:n.touched),_.Bb(2),_.oc("placeholder",_.kc(14,79,"CUSTOMER.INFORMATIONS.NAME")),_.Bb(2),_.oc("ngIf",(null==(r=t.form.get("name"))?null:r.touched)&&!(null==(r=t.form.get("name"))||null==r.errors||!r.errors.required)),_.Bb(1),_.oc("placeholder",_.kc(17,81,"CUSTOMER.INFORMATIONS.SOCIAL_REASON")),_.Bb(2),_.oc("ngIf",(null==(a=t.form.get("companyName"))?null:a.touched)&&!(null==(a=t.form.get("companyName"))||null==a.errors||!a.errors.required)),_.Bb(2),_.pc("maxlength",t.maxStreetLength),_.oc("placeholder",_.kc(21,83,"COMMON.ADRESS.STREET")),_.Bb(2),_.oc("ngIf",(null==(c=t.form.get("address.street"))?null:c.touched)&&!(null==(c=t.form.get("address.street"))||null==c.errors||!c.errors.required)),_.Bb(2),_.oc("placeholder",_.kc(25,85,"COMMON.ADRESS.ZIPCODE")),_.Bb(2),_.oc("ngIf",(null==(l=t.form.get("address.zipCode"))?null:l.touched)&&!(null==(l=t.form.get("address.zipCode"))||null==l.errors||!l.errors.required)),_.Bb(1),_.oc("placeholder",_.kc(28,87,"COMMON.ADRESS.CITY")),_.Bb(2),_.oc("ngIf",(null==(s=t.form.get("address.city"))?null:s.touched)&&!(null==(s=t.form.get("address.city"))||null==s.errors||!s.errors.required)),_.Bb(2),_.oc("placeholder",_.kc(32,89,"COMMON.ADRESS.COUNTRY")),_.Bb(2),_.oc("ngForOf",t.countries),_.Bb(6),_.oc("placeholder",_.kc(40,91,"CUSTOMER.INFORMATIONS.INTERNAL_CODE")),_.Bb(8),_.oc("disabled",t.gdprReadOnlyStatus),_.Bb(5),_.oc("disabled",t.gdprReadOnlyStatus||!t.form.get("gdprAlert").value),_.Bb(1),_.oc("ngIf",t.form.get("gdprAlert").value&&(null==(u=t.form.get("gdprAlertDelay"))?null:u.touched)&&!(null==(u=t.form.get("gdprAlertDelay"))||null==u.errors||!u.errors.required)),_.Bb(1),_.oc("ngIf",t.form.get("gdprAlert").value&&!(null==(d=t.form.get("gdprAlertDelay"))||null==d.errors||!d.errors.min)),_.Bb(4),_.Qc(" ",_.kc(59,93,"CUSTOMER.INFORMATIONS.DEFAULT_LANGUAGE_1")," "),_.Bb(6),_.Pc(_.kc(65,95,"CUSTOMER.INFORMATIONS.DEFAULT_LANGUAGE_2")),_.Bb(5),_.Pc(_.kc(70,97,"COMMON.LANGUAGE.ENGLISH")),_.Bb(3),_.Pc(_.kc(73,99,"COMMON.LANGUAGE.FRENCH")),_.Bb(8),_.oc("disabled",t.firstStepInvalid()),_.Bb(1),_.Pc(_.kc(82,101,"COMMON.NEXT")),_.Bb(2),_.oc("ngTemplateOutlet",i),_.Bb(4),_.Pc(_.kc(88,103,"CUSTOMER.INFORMATIONS.MODAL.ACCESS_TITLE")),_.Bb(5),_.Qc(" ",_.kc(93,105,"CUSTOMER.INFORMATIONS.PASSWORD_DURATION_1")," "),_.Bb(4),_.Pc(_.kc(97,107,"CUSTOMER.INFORMATIONS.PASSWORD_DURATION_2")),_.Bb(3),_.oc("placeholder",_.kc(100,109,"CUSTOMER.INFORMATIONS.PASSWORDS_DURATION")),_.Bb(2),_.oc("value",3),_.Bb(1),_.Qc("",_.kc(103,111,"CUSTOMER.INFORMATIONS.MODAL.PWD_REVOCATION_THREE")," "),_.Bb(2),_.oc("value",6),_.Bb(1),_.Qc("",_.kc(106,113,"CUSTOMER.INFORMATIONS.MODAL.PWD_REVOCATION_SIX")," "),_.Bb(2),_.oc("value",9),_.Bb(1),_.Qc("",_.kc(109,115,"CUSTOMER.INFORMATIONS.MODAL.PWD_REVOCATION_NINE")," "),_.Bb(2),_.oc("value",12),_.Bb(1),_.Qc("",_.kc(112,117,"CUSTOMER.INFORMATIONS.MODAL.PWD_REVOCATION_TWELVE")," "),_.Bb(9),_.Qc("",_.kc(121,119,"CUSTOMER.INFORMATIONS.VALIDATIONS")," "),_.Bb(7),_.Qc("",_.kc(128,121,"CUSTOMER.INFORMATIONS.MODAL.OTP_DISABLED")," "),_.Bb(3),_.Qc("",_.kc(131,123,"CUSTOMER.INFORMATIONS.MODAL.OTP_OPTIONAL")," "),_.Bb(3),_.Qc(" ",_.kc(134,125,"CUSTOMER.INFORMATIONS.MODAL.OTP_MANDATORY")," "),_.Bb(4),_.Qc(" ",_.kc(138,127,"CUSTOMER.INFORMATIONS.MODAL.DOMAINS_RESTRICTION")," "),_.Bb(3),_.Pc(_.kc(141,129,"CUSTOMER.INFORMATIONS.MODAL.DOMAINS_RESTRICTION_DESC")),_.Bb(2),_.oc("placeholder",_.kc(143,131,"CUSTOMER.INFORMATIONS.MODAL.DOMAINS_PLACEHOLDER"))("selected",t.form.get("defaultEmailDomain").value),_.Bb(3),_.oc("disabled",t.secondStepInvalid()),_.Bb(1),_.Pc(_.kc(147,133,"COMMON.NEXT")),_.Bb(2),_.oc("ngTemplateOutlet",i),_.Bb(1),_.oc("ngTemplateOutlet",o),_.Bb(2),_.oc("ngIf",2===t.stepIndex),_.Bb(2),_.oc("ngIf",3===t.stepIndex),_.Bb(4),_.Rc("",_.kc(158,135,"CUSTOMER.OWNER.CREATE.TITLE"),' "',t.customerInfo.name,'"'),_.Bb(3),_.oc("formControl",t.form.get(_.sc(147,Nr)))("customerInfo",t.customerInfo),_.Bb(2),_.Qc(" ",_.kc(163,137,"CUSTOMER.OWNER.CREATE.PROOF_ELEMENTS")," "),_.Bb(3),_.oc("disabled",t.form.get(_.sc(148,Nr)).pending||t.form.get(_.sc(149,Nr)).invalid),_.Bb(1),_.Qc(" ",_.kc(167,139,"CUSTOMER.OWNER.MODAL.ACTION_BUTTON")," "),_.Bb(2),_.oc("ngTemplateOutlet",i),_.Bb(1),_.oc("ngTemplateOutlet",o),_.Bb(4),_.Rc("",_.kc(174,141,"CUSTOMER.OWNER.MODAL.SAFE_TITLE"),' "',t.getOwnerName(),'"'),_.Bb(2),_.oc("placeholder",_.kc(176,143,"CUSTOMER.OWNER.SAFE_NAME")),_.Bb(2),_.oc("ngIf",(null==t.form||null==(b=t.form.get("tenantName"))?null:b.touched)&&(null==t.form||null==(b=t.form.get("tenantName"))?null:b.hasError("required"))),_.Bb(1),_.oc("ngIf",(null==t.form||null==(m=t.form.get("tenantName"))?null:m.touched)&&(null==t.form||null==(m=t.form.get("tenantName"))?null:m.hasError("uniqueName"))),_.Bb(2),_.oc("disabled",t.form.pending||t.form.invalid),_.Bb(1),_.Pc(_.kc(182,145,"COMMON.SUBMIT")),_.Bb(2),_.oc("ngTemplateOutlet",i),_.Bb(1),_.oc("ngTemplateOutlet",o)}},directives:[R.dc,B.y,B.r,B.i,R.mb,zt.a,R.Qb,B.q,B.g,B.w,C.p,B.l,B.j,w.b,P.a,C.o,R.ac,ze.k,zt.d,C.u,N.b,N.a,Ot,Jo,B.f,R.Rb,Li,uo,zt.e],pipes:[dt.d],styles:[""]}),Ir),xr=T("C05f"),Pr=((Br=function(){function e(){M(this,e),this.tenantsUpdatedSource=new xr.a([]),this._tenants=[]}return y(e,[{key:"tenants",get:function(){return this._tenants},set:function(e){this._tenants=e}},{key:"addTenants",value:function(e){this._tenants=Array.from(new Set([].concat(u(this.tenants),u(e)))),this.tenantsUpdatedSource.next(this.tenants)}},{key:"updateTenant",value:function(e){var t=(this.tenants||[]).findIndex((function(t){return e.id===t.id}));t>-1&&(this.tenants[t]=e),this.tenantsUpdatedSource.next(this.tenants)}},{key:"tenantsUpdated$",get:function(){return this.tenantsUpdatedSource.asObservable()}}]),e}()).\u0275fac=function(e){return new(e||Br)},Br.\u0275prov=_.Jb({token:Br,factory:Br.\u0275fac,providedIn:"root"}),Br);function Dr(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"COMMON.ERROR.REQUIRED")))}function jr(e,t){1&e&&(_.Tb(0,"vitamui-common-input-error"),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"CUSTOMER.OWNER.MODAL.NAME_ALREADY_EXIST")))}var Ur,Fr,Lr,Vr=((Ur=function(){function e(t,n,i,o,r,a,c){M(this,e),this.dialogRef=t,this.data=n,this.formBuilder=i,this.ownerService=o,this.tenantService=r,this.tenantFormValidators=a,this.confirmDialogService=c,this.stepIndex=0}return y(e,[{key:"ngOnInit",value:function(){var e=this;this.ownerForm=this.formBuilder.group({owner:[null,B.x.required]}),this.tenantForm=this.formBuilder.group({name:[null,[B.x.required],this.tenantFormValidators.uniqueName()],ownerId:[null],customerId:[this.data.customer.id],enabled:[!0,B.x.required]}),this.keyPressSubscription=this.confirmDialogService.listenToEscapeKeyPress(this.dialogRef).subscribe((function(){return e.onCancel()}))}},{key:"ngOnDestroy",value:function(){this.keyPressSubscription.unsubscribe()}},{key:"onCancel",value:function(){this.ownerForm.dirty||this.tenantForm.dirty?this.confirmDialogService.confirmBeforeClosing(this.dialogRef):this.dialogRef.close()}},{key:"onOwnerSubmit",value:function(){var e=this;this.ownerForm.pending||this.ownerForm.invalid||this.ownerService.create(this.ownerForm.value.owner).subscribe((function(t){return e.dialogRef.close({owner:t})}),(function(e){console.error(e)}))}},{key:"onTenantSubmit",value:function(){var e=this;this.ownerForm.pending||this.ownerForm.invalid||this.tenantForm.pending||this.tenantForm.invalid||this.ownerService.create(this.ownerForm.value.owner).subscribe((function(t){e.tenantForm.get("ownerId").setValue(t.id),e.tenantService.create(e.tenantForm.value,t.name).subscribe((function(n){e.dialogRef.close({owner:t,tenant:n})}),(function(t){console.error(t),e.dialogRef.close()}))}),(function(e){console.error(e)}))}}]),e}()).\u0275fac=function(e){return new(e||Ur)(_.Nb(k.g),_.Nb(k.a),_.Nb(B.d),_.Nb(Uo),_.Nb(wo),_.Nb(xo),_.Nb(R.t))},Ur.\u0275cmp=_.Hb({type:Ur,selectors:[["app-owner-create"]],decls:43,vars:40,consts:[[1,"header"],[3,"index","count"],[3,"selectedIndex","selectionChange"],[3,"formGroup","ngSubmit"],[1,"content"],[1,"text","large","bold"],["formControlName","owner",3,"customerId"],[1,"actions"],["type","button","cdkStepperNext","",1,"btn","primary",3,"disabled"],["type","submit",1,"btn","primary",3,"disabled"],["type","button",1,"btn","cancel","link",3,"click"],["formControlName","name","required","",3,"placeholder"],[4,"ngIf"],["type","button","cdkStepperPrevious","",1,"btn","link"],[1,"vitamui-icon","vitamui-icon-chevron-left"],[1,"underline"]],template:function(e,t){if(1&e&&(_.Tb(0,"div",0),_.Ob(1,"vitamui-common-progress-bar",1),_.Sb(),_.Tb(2,"vitamui-common-stepper",2),_.ec("selectionChange",(function(e){return t.stepIndex=e.selectedIndex})),_.Tb(3,"cdk-step"),_.Tb(4,"form",3),_.ec("ngSubmit",(function(){return t.onOwnerSubmit()})),_.Tb(5,"div",4),_.Tb(6,"div",5),_.Oc(7),_.jc(8,"translate"),_.Sb(),_.Ob(9,"app-owner-form",6),_.Tb(10,"div",7),_.Tb(11,"button",8),_.Oc(12),_.jc(13,"translate"),_.Sb(),_.Tb(14,"button",9),_.Oc(15),_.jc(16,"translate"),_.Sb(),_.Tb(17,"button",10),_.ec("click",(function(){return t.onCancel()})),_.Oc(18),_.jc(19,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Tb(20,"cdk-step"),_.Tb(21,"form",3),_.ec("ngSubmit",(function(){return t.onTenantSubmit()})),_.Tb(22,"div",4),_.Tb(23,"div",5),_.Oc(24),_.jc(25,"translate"),_.Sb(),_.Tb(26,"vitamui-common-input",11),_.jc(27,"translate"),_.Mc(28,Dr,3,3,"vitamui-common-input-error",12),_.Mc(29,jr,3,3,"vitamui-common-input-error",12),_.Sb(),_.Tb(30,"div",7),_.Tb(31,"button",9),_.Oc(32),_.jc(33,"translate"),_.Sb(),_.Tb(34,"button",10),_.ec("click",(function(){return t.onCancel()})),_.Oc(35),_.jc(36,"translate"),_.Sb(),_.Sb(),_.Tb(37,"button",13),_.Ob(38,"i",14),_.Rb(39),_.Tb(40,"span",15),_.Oc(41),_.jc(42,"translate"),_.Sb(),_.Qb(),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Sb()),2&e){var n=null,i=null;_.Bb(1),_.oc("index",t.stepIndex)("count",2),_.Bb(1),_.oc("selectedIndex",t.stepIndex),_.Bb(2),_.oc("formGroup",t.ownerForm),_.Bb(3),_.Rc("",_.kc(8,22,"CUSTOMER.OWNER.CREATE.TITLE"),' "',null==t.data||null==t.data.customer?null:t.data.customer.name,'"'),_.Bb(2),_.oc("customerId",null==t.data||null==t.data.customer?null:t.data.customer.id),_.Bb(2),_.oc("disabled",t.ownerForm.pending||t.ownerForm.invalid),_.Bb(1),_.Qc(" ",_.kc(13,24,"CUSTOMER.OWNER.MODAL.ACTION_BUTTON")," "),_.Bb(2),_.oc("disabled",t.ownerForm.pending||t.ownerForm.invalid),_.Bb(1),_.Qc(" ",_.kc(16,26,"COMMON.SUBMIT")," "),_.Bb(3),_.Pc(_.kc(19,28,"COMMON.UNDO")),_.Bb(3),_.oc("formGroup",t.tenantForm),_.Bb(3),_.Rc("",_.kc(25,30,"CUSTOMER.OWNER.MODAL.SAFE_TITLE"),' "',null==t.ownerForm||null==t.ownerForm.value||null==t.ownerForm.value.owner?null:t.ownerForm.value.owner.name,'"'),_.Bb(2),_.oc("placeholder",_.kc(27,32,"CUSTOMER.OWNER.SAFE_NAME")),_.Bb(2),_.oc("ngIf",(null==t.tenantForm||null==(n=t.tenantForm.get("name"))?null:n.touched)&&(null==t.tenantForm||null==(n=t.tenantForm.get("name"))?null:n.hasError("required"))),_.Bb(1),_.oc("ngIf",(null==t.tenantForm||null==(i=t.tenantForm.get("name"))?null:i.touched)&&(null==t.tenantForm||null==(i=t.tenantForm.get("name"))?null:i.hasError("uniqueName"))),_.Bb(2),_.oc("disabled",t.tenantForm.pending||t.tenantForm.invalid),_.Bb(1),_.Qc(" ",_.kc(33,34,"COMMON.SUBMIT")," "),_.Bb(3),_.Pc(_.kc(36,36,"COMMON.UNDO")),_.Bb(6),_.Pc(_.kc(42,38,"COMMON.BACK"))}},directives:[R.dc,R.mb,zt.a,B.y,B.r,B.i,Jo,B.q,B.g,zt.d,R.Qb,B.w,C.p,zt.e,R.Rb],pipes:[dt.d],styles:[""]}),Ur),qr=T("guXd"),_r=((Lr=function(e){function t(e){var n;return M(this,t),(n=f(this,t,[e,"OWNER,TENANT"])).customerApi=e,n}return S(t,e),y(t,[{key:"search",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new R.Z(0,R.w,"code",R.x.ASCENDANT);return this.pageRequest=t,this.customerApi.getAllPaginated(this.pageRequest,"OWNER,TENANT").pipe(Object(tt.a)((function(t){return e.data=t.values.map((function(t){return e.transformCustomer(t)})),e.pageRequest.page=t.pageNum,e.hasMore=t.hasMore,e.data})))}},{key:"loadMore",value:function(){var e=this;return this.hasMore?(this.pageRequest.page+=1,this.customerApi.getAllPaginated(this.pageRequest,"OWNER,TENANT").pipe(Object(tt.a)((function(t){return e.data=e.data.concat(t.values.map((function(t){return e.transformCustomer(t)}))),e.pageRequest.page=t.pageNum,e.hasMore=t.hasMore,e.data})))):Object(Ze.a)(this.data)}},{key:"transformCustomer",value:function(e){return{id:e.id,identifier:e.identifier,enabled:e.enabled,code:e.code,name:e.name,companyName:e.companyName,passwordRevocationDelay:e.passwordRevocationDelay,otp:e.otp,address:e.address,internalCode:e.internalCode,language:e.language,emailDomains:e.emailDomains,defaultEmailDomain:e.defaultEmailDomain,owners:this.filteredOwners(e),portalMessages:e.portalMessages,portalTitles:e.portalTitles,readonly:e.readonly,hasCustomGraphicIdentity:e.hasCustomGraphicIdentity,themeColors:e.themeColors,gdprAlert:e.gdprAlert,gdprAlertDelay:e.gdprAlertDelay}}},{key:"filteredOwners",value:function(e){return e.owners}}]),t}(R.jb)).\u0275fac=function(e){return new(e||Lr)(_.bc(qr.a))},Lr.\u0275prov=_.Jb({token:Lr,factory:Lr.\u0275fac,providedIn:"root"}),Lr),Gr=((Fr=function(){function e(t,n,i,o,r,a){M(this,e),this.dialogRef=t,this.data=n,this.formBuilder=i,this.tenantService=o,this.tenantFormValidators=r,this.confirmDialogService=a}return y(e,[{key:"ngOnInit",value:function(){var e=this;this.form=this.formBuilder.group({ownerId:[this.data.owner.id],customerId:[this.data.owner.customerId],name:[null,[B.x.required],this.tenantFormValidators.uniqueName()],enabled:[!0,B.x.required]}),this.keyPressSubscription=this.confirmDialogService.listenToEscapeKeyPress(this.dialogRef).subscribe((function(){return e.onCancel()}))}},{key:"ngOnDestroy",value:function(){this.keyPressSubscription.unsubscribe()}},{key:"onCancel",value:function(){this.form.dirty?this.confirmDialogService.confirmBeforeClosing(this.dialogRef):this.dialogRef.close()}},{key:"onSubmit",value:function(){var e=this;this.form.pending||this.form.invalid||this.tenantService.create(this.form.value,this.data.owner.name).subscribe((function(t){e.dialogRef.close(t)}),(function(t){console.error(t),e.dialogRef.close(null)}))}}]),e}()).\u0275fac=function(e){return new(e||Fr)(_.Nb(k.g),_.Nb(k.a),_.Nb(B.d),_.Nb(wo),_.Nb(xo),_.Nb(R.t))},Fr.\u0275cmp=_.Hb({type:Fr,selectors:[["app-tenant-create"]],decls:16,vars:17,consts:[[1,"header"],[3,"index","count"],[3,"formGroup","ngSubmit"],[1,"content"],[1,"text","large","bold"],["formControlName","name","required","",3,"placeholder"],[1,"actions"],["type","submit",1,"btn","primary",3,"disabled"],["type","button",1,"btn","cancel","link",3,"click"]],template:function(e,t){1&e&&(_.Tb(0,"div",0),_.Ob(1,"vitamui-common-progress-bar",1),_.Sb(),_.Tb(2,"form",2),_.ec("ngSubmit",(function(){return t.onSubmit()})),_.Tb(3,"div",3),_.Tb(4,"div",4),_.Oc(5),_.jc(6,"translate"),_.Sb(),_.Ob(7,"vitamui-common-input",5),_.jc(8,"translate"),_.Tb(9,"div",6),_.Tb(10,"button",7),_.Oc(11),_.jc(12,"translate"),_.Sb(),_.Tb(13,"button",8),_.ec("click",(function(){return t.onCancel()})),_.Oc(14),_.jc(15,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb()),2&e&&(_.Bb(1),_.oc("index",0)("count",1),_.Bb(1),_.oc("formGroup",t.form),_.Bb(3),_.Rc("",_.kc(6,9,"CUSTOMER.OWNER.MODAL.SAFE_TITLE"),' "',null==t.data||null==t.data.owner?null:t.data.owner.name,'"'),_.Bb(2),_.oc("placeholder",_.kc(8,11,"CUSTOMER.OWNER.SAFE_NAME")),_.Bb(3),_.oc("disabled",t.form.pending||t.form.invalid),_.Bb(1),_.Pc(_.kc(12,13,"COMMON.SUBMIT")),_.Bb(3),_.Pc(_.kc(15,15,"COMMON.UNDO")))},directives:[R.dc,B.y,B.r,B.i,R.Qb,B.q,B.g,B.w],pipes:[dt.d],styles:[""]}),Fr);function Hr(e,t){1&e&&_.Ob(0,"div")}function Kr(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",12),_.ec("click",(function(e){_.Dc(n);var i=t.$implicit,o=_.ic();return o.clickTenant(i,o.getOwner(null==i?null:i.ownerId))})),_.Tb(1,"div",13),_.Mc(2,Hr,1,0,"div",14),_.Sb(),_.Tb(3,"div",15),_.Oc(4),_.Sb(),_.Tb(5,"div",16),_.Oc(6),_.Sb(),_.Tb(7,"div",15),_.Oc(8),_.Sb(),_.Sb()}if(2&e){var i,o,r=t.$implicit,a=_.ic(),c=_.zc(23),l=_.zc(25);_.Bb(2),_.oc("ngIf",r.proof)("ngIfThen",c)("ngIfElse",l),_.Bb(2),_.Pc(null==(i=a.getOwner(null==r?null:r.ownerId))?null:i.code),_.Bb(2),_.Pc(null==(o=a.getOwner(null==r?null:r.ownerId))?null:o.name),_.Bb(2),_.Pc(null==r?null:r.identifier)}}function Wr(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",12),_.ec("click",(function(e){_.Dc(n);var i=t.$implicit;return _.ic().ownerClick.emit(i)})),_.Tb(1,"div",13),_.Ob(2,"i",17),_.Sb(),_.Tb(3,"div",15),_.Oc(4),_.Sb(),_.Tb(5,"div",16),_.Oc(6),_.Sb(),_.Tb(7,"div",18),_.Tb(8,"div"),_.Tb(9,"button",19),_.ec("click",(function(e){_.Dc(n);var i=t.$implicit,o=_.ic();return e.stopPropagation(),o.openCreateTenantDialog(i)})),_.Ob(10,"i",20),_.Sb(),_.Sb(),_.Sb(),_.Sb()}if(2&e){var i=t.$implicit;_.Bb(2),_.Jc("font-size",25,"px"),_.Bb(2),_.Pc(null==i?null:i.code),_.Bb(2),_.Pc(null==i?null:i.name),_.Bb(4),_.Jc("font-size",25,"px")}}function Yr(e,t){1&e&&(_.Tb(0,"div",21),_.jc(1,"translate"),_.Ob(2,"i",22),_.Ob(3,"i",23),_.Sb()),2&e&&(_.oc("matTooltip",_.kc(1,5,"CUSTOMER.OWNER.LIST.PROOF_ELEMENTS")),_.Bb(2),_.Jc("font-size",25,"px"),_.Bb(1),_.Jc("font-size",15,"px"))}function zr(e,t){1&e&&(_.Ob(0,"i",24),_.Ob(1,"i",17)),2&e&&(_.Jc("font-size",25,"px"),_.Bb(1),_.Jc("font-size",15,"px"))}var Qr,Xr=((Qr=function(){function e(t,n,i,o){M(this,e),this.dialog=t,this.ownerService=n,this.tenantService=i,this.customerDataService=o,this._customer=null,this.ownerClick=new _.n,this.tenantClick=new _.n}return y(e,[{key:"customer",get:function(){return this._customer},set:function(e){this._customer=e}},{key:"ngOnInit",value:function(){var e=this;this.filteredData(this.customerDataService.tenants),this.customerDataService.tenantsUpdated$.subscribe((function(t){e.filteredData(t)})),this.updatedOwnerSub=this.ownerService.updated.subscribe((function(t){var n=(e.customer.owners||[]).findIndex((function(e){return t.id===e.id}));n>-1&&(e.customer.owners[n]=t),e.filteredData(e.myTenants)})),this.updatedTenantSub=this.tenantService.updated.subscribe((function(t){e.customerDataService.updateTenant(t)}))}},{key:"ngOnDestroy",value:function(){this.updatedOwnerSub.unsubscribe(),this.updatedTenantSub.unsubscribe()}},{key:"openCreateOwnerDialog",value:function(){var e=this;this.dialog.open(Vr,{data:{customer:this.customer},disableClose:!0,panelClass:"vitamui-modal"}).afterClosed().pipe(Object(et.a)((function(e){return!!e}))).subscribe((function(t){t.owner&&(e.customer.owners=e.customer.owners.concat([t.owner]),e.filteredData(e.myTenants)),t.tenant&&e.customerDataService.addTenants([t.tenant])}))}},{key:"filteredData",value:function(e){var t=this;if(e){this.myTenants=e.sort((function(e,t){return e.identifier-t.identifier})).filter((function(e){return e.customerId===t.customer.id}));var n=this.myTenants.map((function(e){return e.ownerId}));this.ownersWithoutTenant=this.customer.owners.filter((function(e){return!n.includes(e.id)}))}}},{key:"clickTenant",value:function(e,t){var n=this;this.tenantService.get(e.id).subscribe((function(e){n.tenantClick.emit({tenant:e,owner:t})}))}},{key:"getOwner",value:function(e){return e?this.customer.owners.filter((function(t){return t.id===e}))[0]:null}},{key:"openCreateTenantDialog",value:function(e){var t=this;this.dialog.open(Gr,{disableClose:!0,data:{owner:e},panelClass:"vitamui-modal"}).afterClosed().pipe(Object(et.a)((function(e){return!!e}))).subscribe((function(e){t.customerDataService.addTenants([e])}))}}]),e}()).\u0275fac=function(e){return new(e||Qr)(_.Nb(k.b),_.Nb(Uo),_.Nb(wo),_.Nb(Pr))},Qr.\u0275cmp=_.Hb({type:Qr,selectors:[["app-owner-list"]],inputs:{customer:"customer"},outputs:{ownerClick:"ownerClick",tenantClick:"tenantClick"},decls:26,vars:14,consts:[[1,"vitamui-subtable","p-0"],[1,"vitamui-table-head"],[1,"col-3"],[1,"col-2"],[1,"col-4"],[1,"vitamui-table-body"],[1,"vitamui-table-rows"],["class","vitamui-row d-flex align-items-center clickable",3,"click",4,"ngFor","ngForOf"],[1,"footer-action"],[1,"text","normal","link","bold","primary",3,"click"],["proofIcons",""],["notProofIcons",""],[1,"vitamui-row","d-flex","align-items-center","clickable",3,"click"],[1,"col-3","d-flex","justify-content-center","align-items-end"],[4,"ngIf","ngIfThen","ngIfElse"],["vitamuiCommonEllipsis","",1,"col-2"],["vitamuiCommonEllipsis","",1,"col-3"],[1,"vitamui-icon","vitamui-icon-key"],[1,"col-3","sub-actions"],[1,"btn","btn-circle","primary",3,"click"],[1,"vitamui-icon","vitamui-icon-home-add"],["matTooltipClass","vitamui-tooltip",3,"matTooltip"],[1,"vitamui-icon","vitamui-icon-safe","secondary","mr-1"],[1,"vitamui-icon","vitamui-icon-key","secondary"],[1,"vitamui-icon","vitamui-icon-safe","mr-1"]],template:function(e,t){1&e&&(_.Tb(0,"div",0),_.Tb(1,"div",1),_.Ob(2,"div",2),_.Tb(3,"div",3),_.Oc(4),_.jc(5,"translate"),_.Sb(),_.Tb(6,"div",2),_.Oc(7),_.jc(8,"translate"),_.Sb(),_.Tb(9,"div",3),_.Oc(10),_.jc(11,"translate"),_.Sb(),_.Ob(12,"div",4),_.Sb(),_.Tb(13,"div",5),_.Tb(14,"div",6),_.Mc(15,Kr,9,6,"div",7),_.Sb(),_.Tb(16,"div",6),_.Mc(17,Wr,11,6,"div",7),_.Sb(),_.Tb(18,"div",8),_.Tb(19,"div",9),_.ec("click",(function(e){return t.openCreateOwnerDialog()})),_.Oc(20),_.jc(21,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Mc(22,Yr,4,7,"ng-template",null,10,_.Nc),_.Mc(24,zr,2,4,"ng-template",null,11,_.Nc)),2&e&&(_.Bb(4),_.Pc(_.kc(5,6,"CUSTOMER.OWNER.CODE")),_.Bb(3),_.Pc(_.kc(8,8,"CUSTOMER.OWNER.NAME")),_.Bb(3),_.Pc(_.kc(11,10,"CUSTOMER.OWNER.SAFE_CODE")),_.Bb(5),_.oc("ngForOf",t.myTenants),_.Bb(2),_.oc("ngForOf",t.ownersWithoutTenant),_.Bb(3),_.Qc(" ",_.kc(21,12,"CUSTOMER.HOME.RESULTS_TABLE.ADD_OWNER")," "))},directives:[C.o,C.p,R.Zb,L.a],pipes:[dt.d],styles:["[_nghost-%COMP%]{display:block;width:100%}"]}),Qr);function Jr(e,t){if(1&e){var n=_.Ub();_.Rb(0),_.Tb(1,"div",14,15),_.ec("click",(function(){_.Dc(n);var e=t.$implicit;return _.ic().customerClick.emit(e)})),_.Tb(3,"div",16),_.Tb(4,"div",17),_.ec("click",(function(e){_.Dc(n);var t=_.zc(2);return e.stopPropagation(),t.toggle()})),_.Ob(5,"i",4),_.Tb(6,"i",18),_.Oc(7,"keyboard_arrow_up"),_.Sb(),_.Sb(),_.Tb(8,"div",19),_.Oc(9),_.Sb(),_.Tb(10,"div",19),_.Oc(11),_.Sb(),_.Tb(12,"div",20),_.Oc(13),_.Sb(),_.Tb(14,"div",19),_.Oc(15),_.jc(16,"translate"),_.Sb(),_.Tb(17,"div",21),_.Tb(18,"span",22),_.Oc(19),_.jc(20,"translate"),_.Sb(),_.Tb(21,"div"),_.Tb(22,"button",23),_.ec("click",(function(e){_.Dc(n);var i=t.$implicit,o=_.ic();return e.stopPropagation(),o.openCreateOwnerDialog(i,o.tenants)})),_.Ob(23,"i",24),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Tb(24,"app-owner-list",25),_.ec("ownerClick",(function(e){return _.Dc(n),_.ic().ownerClick.emit(e)}))("tenantClick",(function(e){return _.Dc(n),_.ic().tenantClick.emit(e)})),_.Sb(),_.Qb()}if(2&e){var i=t.$implicit,o=_.zc(2);_.Bb(1),_.Fb("no-hover","expanded"===o.state),_.Bb(5),_.Jc("font-size",20,"px"),_.oc("@rotateAnimation",o.state),_.Bb(3),_.Pc(null==i?null:i.code),_.Bb(2),_.Pc(null==i?null:i.name),_.Bb(2),_.Pc(null==i?null:i.companyName),_.Bb(2),_.Pc(_.kc(16,12,"YES")),_.Bb(4),_.Pc(_.kc(20,14,"CUSTOMER.INFORMATIONS.OTP_"+(null==i?null:i.otp))),_.Bb(5),_.oc("@collapseAnimation",o.state)("customer",i)}}function Zr(e,t){1&e&&_.Ob(0,"div")}function $r(e,t){1&e&&_.Ob(0,"div")}function ea(e,t){1&e&&_.Ob(0,"div")}function ta(e,t){1&e&&(_.Tb(0,"div",26),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"COMMON.NO_RESULT")))}function na(e,t){if(1&e){var n=_.Ub();_.Tb(0,"div",27),_.ec("click",(function(){return _.Dc(n),_.ic().customerListService.loadMore()})),_.Tb(1,"span",28),_.Oc(2),_.jc(3,"translate"),_.Sb(),_.Sb()}2&e&&(_.Bb(2),_.Pc(_.kc(3,1,"COMMON.SHOW_MORE_RESULTS")))}function ia(e,t){1&e&&(_.Tb(0,"div",29),_.Ob(1,"mat-spinner",30),_.Sb())}var oa,ra=((oa=function(e){function t(e,n,i,o,r){var a;return M(this,t),(a=f(this,t,[e])).customerListService=e,a.customerService=n,a.tenantService=i,a.customerDataService=o,a.dialog=r,a.customerClick=new _.n,a.ownerClick=new _.n,a.tenantClick=new _.n,a.tenants=[],a.loaded=!1,a}return S(t,e),y(t,[{key:"ngOnInit",value:function(){var e=this;this.searchCustomersOrderedByCode(),this.customerDataService.tenantsUpdated$.subscribe((function(t){e.tenants=t})),this.updatedData.subscribe((function(){var t=e.dataSource.filter((function(t){return!e.tenants.find((function(e){return e.customerId===t.id}))})).map((function(e){return e.id}));t&&t.length>0?e.tenantService.getTenantsByCustomerIds(t).subscribe((function(t){e.customerDataService.addTenants(t),e.loaded=!0,e.pending=!1})):(e.loaded=!0,e.pending=!1)})),this.updatedCustomerSub=this.customerService.updated.subscribe((function(t){var n=e.dataSource.findIndex((function(e){return t.id===e.id}));n>-1&&(e.dataSource[n]=t)}))}},{key:"ngOnDestroy",value:function(){this.updatedCustomerSub.unsubscribe(),this.updatedData.unsubscribe()}},{key:"searchCustomersOrderedByCode",value:function(){this.search(new R.Z(0,R.w,"code",R.x.ASCENDANT))}},{key:"openCreateOwnerDialog",value:function(e){this.dialog.open(Vr,{disableClose:!0,data:{customer:e},panelClass:"vitamui-modal"}).afterClosed().pipe(Object(et.a)((function(e){return!!e}))).subscribe((function(t){t.owner&&e.owners.push(t.owner)}))}}]),t}(R.O)).\u0275fac=function(e){return new(e||oa)(_.Nb(_r),_.Nb(Xe.a),_.Nb(wo),_.Nb(Pr),_.Nb(k.b))},oa.\u0275cmp=_.Hb({type:oa,selectors:[["app-customer-list"]],outputs:{customerClick:"customerClick",ownerClick:"ownerClick",tenantClick:"tenantClick"},features:[_.yb],decls:32,vars:22,consts:[["vitamuiCommonInfiniteScroll","",3,"vitamuiScroll"],[1,"vitamui-table"],[1,"vitamui-table-head"],[1,"col-1"],[1,"vitamui-icon","vitamui-icon-bank"],[1,"col-2"],[1,"col-3"],[1,"vitamui-table-body"],[1,"vitamui-table-rows"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfThen"],["noResults",""],["loadMore",""],["loadingSpinner",""],[1,"vitamui-row",3,"vitamuiCommonCollapse","click"],["row","vitamuiCommonCollapse"],[1,"d-flex","align-items-center","clickable"],[1,"col-1","d-flex",3,"click"],[1,"material-icons","caret","ml-1"],["vitamuiCommonEllipsis","",1,"col-2"],["vitamuiCommonEllipsis","",1,"col-3"],[1,"col-2","actions"],["vitamuiCommonEllipsis",""],[1,"btn","btn-circle","primary",3,"click"],[1,"vitamui-icon","vitamui-icon-key-plus","btn-icon"],[3,"customer","ownerClick","tenantClick"],[1,"vitamui-min-content","vitamui-table-message"],[1,"vitamui-min-content","vitamui-table-message",3,"click"],[1,"clickable"],[1,"vitamui-min-content"],[1,"vitamui-spinner","medium"]],template:function(e,t){if(1&e&&(_.Tb(0,"div",0),_.ec("vitamuiScroll",(function(){return t.onScroll()})),_.Tb(1,"div",1),_.Tb(2,"div",2),_.Tb(3,"div",3),_.Ob(4,"i",4),_.Sb(),_.Tb(5,"div",5),_.Oc(6),_.jc(7,"translate"),_.Sb(),_.Tb(8,"div",5),_.Oc(9),_.jc(10,"translate"),_.Sb(),_.Tb(11,"div",6),_.Oc(12),_.jc(13,"translate"),_.Sb(),_.Tb(14,"div",5),_.Oc(15),_.jc(16,"translate"),_.Sb(),_.Tb(17,"div",5),_.Oc(18),_.jc(19,"translate"),_.Sb(),_.Sb(),_.Tb(20,"div",7),_.Tb(21,"div",8),_.Mc(22,Jr,25,16,"ng-container",9),_.Sb(),_.Sb(),_.Sb(),_.Mc(23,Zr,1,0,"div",10),_.Mc(24,$r,1,0,"div",10),_.Mc(25,ea,1,0,"div",10),_.Sb(),_.Mc(26,ta,3,3,"ng-template",null,11,_.Nc),_.Mc(28,na,4,3,"ng-template",null,12,_.Nc),_.Mc(30,ia,2,0,"ng-template",null,13,_.Nc)),2&e){var n=_.zc(27),i=_.zc(29),o=_.zc(31);_.Bb(6),_.Pc(_.kc(7,12,"CUSTOMER.HOME.RESULTS_TABLE.CODE")),_.Bb(3),_.Pc(_.kc(10,14,"CUSTOMER.HOME.RESULTS_TABLE.NAME")),_.Bb(3),_.Pc(_.kc(13,16,"CUSTOMER.HOME.RESULTS_TABLE.SOCIAL_REASON")),_.Bb(3),_.Pc(_.kc(16,18,"CUSTOMER.HOME.RESULTS_TABLE.SSO")),_.Bb(3),_.Pc(_.kc(19,20,"CUSTOMER.HOME.RESULTS_TABLE.VALIDATIONS")),_.Bb(4),_.oc("ngForOf",t.dataSource),_.Bb(1),_.oc("ngIf",!t.dataSource||t.pending)("ngIfThen",o),_.Bb(1),_.oc("ngIf",!t.pending&&0===(null==t.dataSource?null:t.dataSource.length))("ngIfThen",n),_.Bb(1),_.oc("ngIf",t.infiniteScrollDisabled&&t.customerListService.canLoadMore&&!t.pending)("ngIfThen",i)}},directives:[R.N,C.o,C.p,R.q,R.Zb,Xr,U.b],pipes:[dt.d],styles:[""],data:{animation:[R.Hb,R.Ob]}}),oa),aa=T("zmEM");function ca(e,t){if(1&e&&_.Ob(0,"vitamui-common-editable-option",24),2&e){var n=t.$implicit;_.oc("value",n.code)("content",n.name)}}function la(e,t){1&e&&_.Ob(0,"mat-divider")}function sa(e,t){if(1&e&&(_.Tb(0,"form",0),_.Tb(1,"div",1),_.Tb(2,"div",8),_.Tb(3,"div",25),_.Tb(4,"label"),_.Oc(5),_.jc(6,"translate"),_.Sb(),_.Tb(7,"div"),_.Oc(8),_.Sb(),_.Sb(),_.Sb(),_.Tb(9,"div",8),_.Tb(10,"vitamui-common-editable-input",10),_.jc(11,"translate"),_.Tb(12,"vitamui-common-field-error",4),_.Oc(13),_.jc(14,"translate"),_.Sb(),_.Tb(15,"vitamui-common-field-error",26),_.Oc(16),_.jc(17,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Tb(18,"div",1),_.Tb(19,"div",27),_.Ob(20,"vitamui-common-editable-input",28),_.jc(21,"translate"),_.Sb(),_.Sb(),_.Tb(22,"div",1),_.Tb(23,"div",27),_.Ob(24,"vitamui-common-editable-input",29),_.jc(25,"translate"),_.Sb(),_.Sb(),_.Tb(26,"div",1),_.Tb(27,"div",27),_.Ob(28,"vitamui-common-editable-input",30),_.jc(29,"translate"),_.Sb(),_.Tb(30,"div",27),_.Ob(31,"vitamui-common-editable-input",31),_.jc(32,"translate"),_.Sb(),_.Sb(),_.Sb()),2&e){var n=_.ic(),i=null,o=null,r=null,a=null,c=null,l=null,s=null,u=null,d=null,b=null;_.oc("formGroup",n.tenantForm),_.Bb(5),_.Pc(_.kc(6,20,"CUSTOMER.OWNER.SAFE_CODE")),_.Bb(3),_.Pc(null==n.tenant?null:n.tenant.identifier),_.Bb(2),_.oc("label",_.kc(11,22,"CUSTOMER.OWNER.SAFE_NAME"))("validator",null==n.tenantForm||null==(i=n.tenantForm.get("name"))?null:i.validator)("asyncValidator",null==n.tenantForm||null==(o=n.tenantForm.get("name"))?null:o.asyncValidator),_.Bb(3),_.Pc(_.kc(14,24,"COMMON.ERROR.REQUIRED")),_.Bb(3),_.Qc(" ",_.kc(17,26,"CUSTOMER.OWNER.MODAL.NAME_ALREADY_EXIST"),""),_.Bb(4),_.oc("label",_.kc(21,28,"CUSTOMER.OWNER.ACCESS_CONTRACT"))("validator",null==n.tenantForm||null==(r=n.tenantForm.get("accessContractHoldingIdentifier"))?null:r.validator)("asyncValidator",null==n.tenantForm||null==(a=n.tenantForm.get("accessContractHoldingIdentifier"))?null:a.asyncValidator),_.Bb(4),_.oc("label",_.kc(25,30,"CUSTOMER.OWNER.INGEST_CONTRACT"))("validator",null==n.tenantForm||null==(c=n.tenantForm.get("ingestContractHoldingIdentifier"))?null:c.validator)("asyncValidator",null==n.tenantForm||null==(l=n.tenantForm.get("ingestContractHoldingIdentifier"))?null:l.asyncValidator),_.Bb(4),_.oc("label",_.kc(29,32,"CUSTOMER.OWNER.LOGBOOK_ACCESS_CONTRACT"))("validator",null==n.tenantForm||null==(s=n.tenantForm.get("accessContractLogbookIdentifier"))?null:s.validator)("asyncValidator",null==n.tenantForm||null==(u=n.tenantForm.get("accessContractLogbookIdentifier"))?null:u.asyncValidator),_.Bb(3),_.oc("label",_.kc(32,34,"CUSTOMER.OWNER.SLIPS_INGEST_CONTRACT"))("validator",null==n.tenantForm||null==(d=n.tenantForm.get("itemIngestContractIdentifier"))?null:d.validator)("asyncValidator",null==n.tenantForm||null==(b=n.tenantForm.get("itemIngestContractIdentifier"))?null:b.asyncValidator)}}var ua=function(e){return{max:e}},da=function(){var e=function(){function e(t,n,i,o,r,a,c){M(this,e),this.formBuilder=t,this.ownerFormValidators=n,this.ownerService=i,this.tenantService=o,this.tenantFormValidators=r,this.countryService=a,this.startupService=c,this.ownerCodeMaxLength=15,this.maxStreetLength=this.startupService.getConfigNumberValue("MAX_STREET_LENGTH"),this.ownerForm=this.formBuilder.group({id:[null,B.x.required],identifier:[{value:null,disabled:!0},B.x.required],customerId:[null,B.x.required],code:[null,[B.x.required,B.x.pattern(Fo),B.x.maxLength(this.ownerCodeMaxLength)],this.ownerFormValidators.uniqueCode()],name:[null,B.x.required],companyName:[null,B.x.required],address:this.formBuilder.group({street:[null,B.x.maxLength(this.maxStreetLength)],zipCode:null,city:null,country:"FR"}),internalCode:[null]}),this.tenantForm=this.formBuilder.group({id:[null,B.x.required],identifier:[null,B.x.required],customerId:[null,B.x.required],ownerId:[null,B.x.required],name:[null,[B.x.required],this.tenantFormValidators.uniqueName()],enabled:[!0,B.x.required],ingestContractHoldingIdentifier:[null],itemIngestContractIdentifier:[null],accessContractHoldingIdentifier:[null],accessContractLogbookIdentifier:[null]})}return y(e,[{key:"ngOnInit",value:function(){var e=this;Object(Je.a)(this.ownerForm.valueChanges,this.ownerForm.statusChanges).pipe(Object($e.a)(200),Object(tt.a)((function(){return Object(R.Ib)(e.ownerForm.value,e.previousOwner)})),Object(et.a)((function(e){return!Object(ot.c)(e)})),Object(tt.a)((function(t){return Object(ot.a)({id:e.owner.id},t)})),Object(nt.a)((function(t){return e.ownerService.patch(t).pipe(Object(it.a)((function(){return Object(Ze.a)(null)})))}))).subscribe((function(t){return e.resetOwnerForm(t)})),Object(Je.a)(this.tenantForm.valueChanges,this.tenantForm.statusChanges).pipe(Object($e.a)(200),Object(tt.a)((function(){return Object(R.Ib)(e.tenantForm.value,e.previousTenant)})),Object(et.a)((function(e){return!Object(ot.c)(e)})),Object(tt.a)((function(t){return Object(ot.a)({id:e.tenant.id},t)})),Object(nt.a)((function(t){return e.tenantService.patch(t,e.ownerForm.value.name).pipe(Object(it.a)((function(){return Object(Ze.a)(null)})))}))).subscribe((function(t){e.resetTenantForm(t)})),this.countryService.getAvailableCountries().subscribe((function(t){e.countries=t}))}},{key:"ngOnChanges",value:function(){this.readOnly?this.ownerForm.disable({emitEvent:!1}):this.ownerForm.disabled&&this.ownerForm.enable({emitEvent:!1}),this.readOnly?this.tenantForm.disable({emitEvent:!1}):this.tenantForm.disabled&&this.tenantForm.enable({emitEvent:!1}),this.tenant&&(this.tenantForm.reset(this.tenant,{emitEvent:!1}),this.tenantForm.get("name").setAsyncValidators(this.tenantFormValidators.uniqueName(this.tenant.name)),this.previousTenant=this.tenantForm.value),this.owner&&this.resetOwnerForm(this.owner)}},{key:"resetOwnerForm",value:function(e){this.ownerForm.reset(e,{emitEvent:!1}),this.ownerForm.get("code").setAsyncValidators(this.ownerFormValidators.uniqueCode(e.code)),this.ownerForm.get("identifier").disable({emitEvent:!1}),this.previousOwner=this.ownerForm.value}},{key:"resetTenantForm",value:function(e){this.tenant.name=e.name,this.tenantForm.reset(e,{emitEvent:!1}),this.tenantForm.get("name").setAsyncValidators(this.tenantFormValidators.uniqueName(e.name)),this.previousTenant=this.tenantForm.value}}]),e}();return e.\u0275fac=function(t){return new(t||e)(_.Nb(B.d),_.Nb(Lo),_.Nb(Uo),_.Nb(wo),_.Nb(xo),_.Nb(R.u),_.Nb(R.lb))},e.\u0275cmp=_.Hb({type:e,selectors:[["app-information-tab"]],inputs:{owner:"owner",tenant:"tenant",readOnly:"readOnly"},features:[_.zb],decls:56,vars:61,consts:[[3,"formGroup"],[1,"row"],[1,"col-6","form-control"],["formControlName","code","maxlength","20",3,"label","validator","asyncValidator"],["errorKey","required"],["errorKey","pattern"],["errorKey","maxlength"],["errorKey","uniqueCode"],[1,"col-6"],["formControlName","identifier","maxlength","12",3,"label","validator","asyncValidator"],["formControlName","name","maxlength","100",3,"label","validator","asyncValidator"],["formControlName","companyName","maxlength","250",3,"label","validator","asyncValidator"],["formGroupName","address"],[1,"col-12","form-control"],["formControlName","street",3,"maxlength","label"],[1,"col-5","form-control"],["formControlName","zipCode","maxlength","10",3,"label"],[1,"col-7","form-control"],["formControlName","city","maxlength","100",3,"label"],["formControlName","country",3,"label"],[3,"value","content",4,"ngFor","ngForOf"],["formControlName","internalCode","maxlength","20",3,"label"],[4,"ngIf"],[3,"formGroup",4,"ngIf"],[3,"value","content"],[1,"read-only-field","disabled-input"],["errorKey","uniqueName"],[1,"col-12"],["formControlName","accessContractHoldingIdentifier",3,"label","validator","asyncValidator"],["formControlName","ingestContractHoldingIdentifier",3,"label","validator","asyncValidator"],["formControlName","accessContractLogbookIdentifier",3,"label","validator","asyncValidator"],["formControlName","itemIngestContractIdentifier",3,"label","validator","asyncValidator"]],template:function(e,t){if(1&e&&(_.Tb(0,"form",0),_.Tb(1,"div",1),_.Tb(2,"div",2),_.Tb(3,"vitamui-common-editable-input",3),_.jc(4,"translate"),_.Tb(5,"vitamui-common-field-error",4),_.Oc(6),_.jc(7,"translate"),_.Sb(),_.Tb(8,"vitamui-common-field-error",5),_.Oc(9),_.jc(10,"translate"),_.Sb(),_.Tb(11,"vitamui-common-field-error",6),_.Oc(12),_.jc(13,"translate"),_.Sb(),_.Tb(14,"vitamui-common-field-error",7),_.Oc(15),_.jc(16,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(17,"div",8),_.Ob(18,"vitamui-common-editable-input",9),_.jc(19,"translate"),_.Sb(),_.Sb(),_.Tb(20,"div",1),_.Tb(21,"div",2),_.Tb(22,"vitamui-common-editable-input",10),_.jc(23,"translate"),_.Tb(24,"vitamui-common-field-error",4),_.Oc(25),_.jc(26,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Tb(27,"div",2),_.Tb(28,"vitamui-common-editable-input",11),_.jc(29,"translate"),_.Tb(30,"vitamui-common-field-error",4),_.Oc(31),_.jc(32,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Rb(33,12),_.Tb(34,"div",1),_.Tb(35,"div",13),_.Ob(36,"vitamui-common-editable-input",14),_.jc(37,"translate"),_.Sb(),_.Sb(),_.Tb(38,"div",1),_.Tb(39,"div",15),_.Ob(40,"vitamui-common-editable-input",16),_.jc(41,"translate"),_.Sb(),_.Tb(42,"div",17),_.Ob(43,"vitamui-common-editable-input",18),_.jc(44,"translate"),_.Sb(),_.Sb(),_.Tb(45,"div",1),_.Tb(46,"div",2),_.Tb(47,"vitamui-common-editable-select",19),_.jc(48,"translate"),_.Mc(49,ca,1,2,"vitamui-common-editable-option",20),_.Sb(),_.Sb(),_.Sb(),_.Qb(),_.Tb(50,"div",1),_.Tb(51,"div",13),_.Ob(52,"vitamui-common-editable-input",21),_.jc(53,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Mc(54,la,1,0,"mat-divider",22),_.Mc(55,sa,33,36,"form",23)),2&e){var n=null,i=null,o=null,r=null,a=null,c=null,l=null,s=null;_.oc("formGroup",t.ownerForm),_.Bb(3),_.oc("label",_.kc(4,28,"CUSTOMER.OWNER.CODE"))("validator",null==t.ownerForm||null==(n=t.ownerForm.get("code"))?null:n.validator)("asyncValidator",null==t.ownerForm||null==(i=t.ownerForm.get("code"))?null:i.asyncValidator),_.Bb(3),_.Pc(_.kc(7,30,"COMMON.ERROR.REQUIRED")),_.Bb(3),_.Pc(_.kc(10,32,"COMMON.ERROR.WRONG_FORMAT")),_.Bb(3),_.Pc(_.lc(13,34,"COMMON.ERROR.STRING_MAX_LENGTH",_.tc(59,ua,t.ownerCodeMaxLength))),_.Bb(3),_.Pc(_.kc(16,37,"CUSTOMER.OWNER.MODAL.CODE_ALREADY_EXIST")),_.Bb(3),_.oc("label",_.kc(19,39,"COMMON.ID"))("validator",null==t.ownerForm||null==(o=t.ownerForm.get("identifier"))?null:o.validator)("asyncValidator",null==t.ownerForm||null==(r=t.ownerForm.get("identifier"))?null:r.asyncValidator),_.Bb(4),_.oc("label",_.kc(23,41,"CUSTOMER.OWNER.NAME"))("validator",null==t.ownerForm||null==(a=t.ownerForm.get("name"))?null:a.validator)("asyncValidator",null==t.ownerForm||null==(c=t.ownerForm.get("name"))?null:c.asyncValidator),_.Bb(3),_.Pc(_.kc(26,43,"COMMON.ERROR.REQUIRED")),_.Bb(3),_.oc("label",_.kc(29,45,"CUSTOMER.OWNER.SOCIAL_REASON"))("validator",null==t.ownerForm||null==(l=t.ownerForm.get("companyName"))?null:l.validator)("asyncValidator",null==t.ownerForm||null==(s=t.ownerForm.get("companyName"))?null:s.asyncValidator),_.Bb(3),_.Pc(_.kc(32,47,"COMMON.ERROR.REQUIRED")),_.Bb(5),_.pc("maxlength",t.maxStreetLength),_.oc("label",_.kc(37,49,"COMMON.ADRESS.STREET")),_.Bb(4),_.oc("label",_.kc(41,51,"COMMON.ADRESS.ZIPCODE")),_.Bb(3),_.oc("label",_.kc(44,53,"COMMON.ADRESS.CITY")),_.Bb(4),_.oc("label",_.kc(48,55,"COMMON.ADRESS.COUNTRY")),_.Bb(2),_.oc("ngForOf",t.countries),_.Bb(3),_.oc("label",_.kc(53,57,"CUSTOMER.OWNER.INTERNAL_CODE")),_.Bb(2),_.oc("ngIf",t.tenant),_.Bb(1),_.oc("ngIf",t.tenant)}},directives:[B.y,B.r,B.i,R.F,B.q,B.g,B.l,R.zb,B.j,R.I,C.o,C.p,R.H,aa.a],pipes:[dt.d],styles:[".mat-divider[_ngcontent-%COMP%]{margin-bottom:20px}"]}),e}();function ba(e,t){1&e&&(_.Tb(0,"div"),_.Ob(1,"mat-spinner",2),_.Sb())}function ma(e,t){1&e&&(_.Tb(0,"div",4),_.Oc(1),_.jc(2,"translate"),_.Sb()),2&e&&(_.Bb(1),_.Pc(_.kc(2,1,"COMMON.HISTORY.NO_HISTORY")))}function pa(e,t){if(1&e&&(_.Tb(0,"vitamui-common-collapse",5),_.jc(1,"translate"),_.Ob(2,"vitamui-common-history-events",6),_.Sb()),2&e){var n=_.ic(2);_.oc("collapseTitle",_.kc(1,2,"COMMON.HISTORY.OPERATIONS")),_.Bb(2),_.oc("events",n.events)}}function ha(e,t){if(1&e&&(_.Mc(0,ma,3,3,"div",3),_.Mc(1,pa,3,4,"ng-template",null,1,_.Nc)),2&e){var n=_.zc(2),i=_.ic();_.oc("ngIf",!(null!=i.events&&i.events.length))("ngIfElse",n)}}var fa,va,ga=((va=function(){function e(t,n){M(this,e),this.authService=t,this.logbookService=n,this.events=[],this.loading=!1}return y(e,[{key:"ngOnChanges",value:function(e){(e.hasOwnProperty("id")||e.hasOwnProperty("externalParamId"))&&this.id&&this.externalParamId&&this.initEvent()}},{key:"initEvent",value:function(){var e=this;this.loading=!0,this.events=[];var t=Number(this.authService.user.proofTenantIdentifier);this.logbookService.listHistoryForOwner(this.id,this.identifier,this.externalParamId,t).subscribe((function(t){e.loading=!1,e.events=t.filter((function(t){return!e.filter||e.filter(t)})).slice(0,100)}),(function(){return e.loading=!1}))}}]),e}()).\u0275fac=function(e){return new(e||va)(_.Nb(R.k),_.Nb(R.T))},va.\u0275cmp=_.Hb({type:va,selectors:[["app-owner-operation-history-tab"]],inputs:{id:"id",identifier:"identifier",externalParamId:"externalParamId",filter:"filter"},features:[_.zb],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"vitamui-spinner","medium"],["class","no-result",4,"ngIf","ngIfElse"],[1,"no-result"],[3,"collapseTitle"],[3,"events"]],template:function(e,t){if(1&e&&(_.Mc(0,ba,2,0,"div",0),_.Mc(1,ha,3,2,"ng-template",null,1,_.Nc)),2&e){var n=_.zc(2);_.oc("ngIf",t.loading)("ngIfElse",n)}},directives:[C.p,U.b,R.Vb,R.Wb],pipes:[dt.d],styles:[""]}),va),Oa=((fa=function(){function e(t){M(this,e),this.startupService=t,this.previewClose=new _.n}return y(e,[{key:"openPopup",value:function(){var e=this.tenant?"/customer/tenant/"+this.tenant.id:"/customer/owner/"+this.owner.id;window.open(this.startupService.getConfigStringValue("UI_URL")+e,"detailPopup","width=584, height=713, resizable=no, location=no"),this.emitClose()}},{key:"emitClose",value:function(){this.previewClose.emit()}},{key:"filterEvents",value:function(e){return e.outDetail&&(e.outDetail.includes("EXT_VITAMUI_UPDATE_OWNER")||e.outDetail.includes("EXT_VITAMUI_CREATE_OWNER")||e.outDetail.includes("EXT_VITAMUI_CREATE_TENANT")||e.outDetail.includes("EXT_VITAMUI_UPDATE_TENANT"))}}]),e}()).\u0275fac=function(e){return new(e||fa)(_.Nb(R.lb))},fa.\u0275cmp=_.Hb({type:fa,selectors:[["app-owner-preview"]],inputs:{owner:"owner",tenant:"tenant",isPopup:"isPopup"},outputs:{previewClose:"previewClose"},decls:9,vars:16,consts:[[3,"title","subtitle","icon","onclose"],[1,"vitamui-sidepanel-body"],[1,"preview-tab-group"],[3,"label"],[3,"owner","tenant","readOnly"],[3,"id","identifier","externalParamId","filter"]],template:function(e,t){1&e&&(_.Tb(0,"vitamui-common-sidenav-header",0),_.ec("onclose",(function(){return t.emitClose()})),_.Sb(),_.Tb(1,"div",1),_.Tb(2,"mat-tab-group",2),_.Tb(3,"mat-tab",3),_.jc(4,"translate"),_.Ob(5,"app-information-tab",4),_.Sb(),_.Tb(6,"mat-tab",3),_.jc(7,"translate"),_.Ob(8,"app-owner-operation-history-tab",5),_.Sb(),_.Sb(),_.Sb()),2&e&&(_.oc("title",null==t.owner?null:t.owner.name)("subtitle","("+(null==t.owner?null:t.owner.code)+")")("icon",t.tenant?"vitamui-icon-safe":"vitamui-icon-key"),_.Bb(3),_.oc("label",_.kc(4,12,"CUSTOMER.TAB.OWNER")),_.Bb(2),_.oc("owner",t.owner)("tenant",t.tenant)("readOnly",t.isPopup||(null==t.tenant?null:t.tenant.readonly)||(null==t.owner?null:t.owner.readonly)),_.Bb(1),_.oc("label",_.kc(7,14,"CUSTOMER.TAB.HISTORY")),_.Bb(2),_.oc("id",null==t.owner?null:t.owner.id)("identifier",null==t.owner?null:t.owner.identifier)("externalParamId",null==t.tenant?null:t.tenant.id)("filter",t.filterEvents))},directives:[R.mc,F.b,F.a,da,ga],pipes:[dt.d],styles:[""]}),fa);function Sa(e,t){if(1&e){var n=_.Ub();_.Tb(0,"app-customer-preview",11),_.ec("previewClose",(function(){return _.Dc(n),_.ic().closePanel()})),_.Sb()}if(2&e){var i=_.ic();_.oc("customer",i.openedItem)("gdprReadOnlyStatus",i.gdprReadOnlySettingStatus)}}function Ta(e,t){if(1&e){var n=_.Ub();_.Tb(0,"app-owner-preview",12),_.ec("previewClose",(function(){return _.Dc(n),_.ic().closePanel()})),_.Sb()}if(2&e){var i=_.ic();_.oc("owner",i.openedItem)}}function Ca(e,t){if(1&e){var n=_.Ub();_.Tb(0,"app-owner-preview",13),_.ec("previewClose",(function(){return _.Dc(n),_.ic().closePanel()})),_.Sb()}if(2&e){var i=_.ic();_.oc("owner",i.owner)("tenant",i.openedItem)}}var ya,ka,Ma,Aa,Ea,Ra,Ia,Ba,Na,wa=((ka=function(e){function t(e,n,i,o){var r;return M(this,t),(r=f(this,t,[n,i])).dialog=e,r.route=n,r.globalEventService=i,r.customerService=o,r.gdprReadOnlySettingStatus=!0,r}return S(t,e),y(t,[{key:"ngOnInit",value:function(){var e=this;this.customerService.getGdprReadOnlySettingStatus().subscribe((function(t){e.gdprReadOnlySettingStatus=t}))}},{key:"openCreateCustomerDialog",value:function(){var e=this;this.dialog.open(wr,{data:{gdprReadOnlySettingStatus:this.gdprReadOnlySettingStatus},panelClass:"vitamui-modal",disableClose:!0}).afterClosed().subscribe((function(t){t&&e.refreshList()}))}},{key:"openCustomerPanel",value:function(e){this.previewType="CUSTOMER",this.openPanel(e)}},{key:"openOwnerPanel",value:function(e){this.previewType="OWNER",this.openPanel(e)}},{key:"openTenantPanel",value:function(e){this.previewType="TENANT",this.owner=e.owner,this.openPanel(e.tenant)}},{key:"refreshList",value:function(){this.customerListComponent&&this.customerListComponent.searchCustomersOrderedByCode()}}]),t}(R.kb)).\u0275fac=function(e){return new(e||ka)(_.Nb(k.b),_.Nb(V.a),_.Nb(R.M),_.Nb(Xe.a))},ka.\u0275cmp=_.Hb({type:ka,selectors:[["app-customer"]],viewQuery:function(e,t){var n;1&e&&_.Ic(ra,!0),2&e&&_.yc(n=_.fc())&&(t.customerListComponent=n.first)},features:[_.yb],decls:19,vars:16,consts:[[3,"autosize","hasBackdrop"],["mode","side","position","end",3,"fixedInViewport"],["panel",""],[3,"customer","gdprReadOnlyStatus","previewClose",4,"ngIf"],[3,"owner","previewClose",4,"ngIf"],[3,"owner","tenant","previewClose",4,"ngIf"],[1,"vitamui-heading"],[3,"searchbarPlaceholder","disableSearchBar"],[1,"btn","primary","ml-5",3,"click"],[1,"vitamui-content"],[3,"customerClick","ownerClick","tenantClick"],[3,"customer","gdprReadOnlyStatus","previewClose"],[3,"owner","previewClose"],[3,"owner","tenant","previewClose"]],template:function(e,t){1&e&&(_.Tb(0,"mat-sidenav-container",0),_.Tb(1,"mat-sidenav",1,2),_.Mc(3,Sa,1,2,"app-customer-preview",3),_.Mc(4,Ta,1,1,"app-owner-preview",4),_.Mc(5,Ca,1,2,"app-owner-preview",5),_.Sb(),_.Tb(6,"mat-sidenav-content"),_.Tb(7,"div",6),_.Tb(8,"vitamui-common-title-breadcrumb"),_.Oc(9),_.jc(10,"translate"),_.Sb(),_.Tb(11,"vitamui-common-banner",7),_.jc(12,"translate"),_.Tb(13,"button",8),_.ec("click",(function(){return t.openCreateCustomerDialog()})),_.Tb(14,"span"),_.Oc(15),_.jc(16,"translate"),_.Sb(),_.Sb(),_.Sb(),_.Sb(),_.Tb(17,"div",9),_.Tb(18,"app-customer-list",10),_.ec("customerClick",(function(e){return t.openCustomerPanel(e)}))("ownerClick",(function(e){return t.openOwnerPanel(e)}))("tenantClick",(function(e){return t.openTenantPanel(e)})),_.Sb(),_.Sb(),_.Sb(),_.Sb()),2&e&&(_.oc("autosize",!0)("hasBackdrop",!1),_.Bb(1),_.oc("fixedInViewport",!0),_.Bb(2),_.oc("ngIf","CUSTOMER"===t.previewType),_.Bb(1),_.oc("ngIf","OWNER"===t.previewType),_.Bb(1),_.oc("ngIf","TENANT"===t.previewType),_.Bb(4),_.Qc(" ",_.kc(10,10,"CUSTOMER.HOME.TITLE")," "),_.Bb(2),_.oc("searchbarPlaceholder",_.kc(12,12,"CUSTOMER.INFORMATIONS.CODE"))("disableSearchBar",!0),_.Bb(4),_.Pc(_.kc(16,14,"CUSTOMER.HOME.CREATE_TITLE")))},directives:[E.b,E.a,C.p,E.c,R.cc,R.jc,ra,Ro,Oa],pipes:[dt.d],styles:[""]}),ka),xa=((ya=function(){function e(t,n){var i=this;M(this,e),this.route=t,this.ownerService=n,this.route.snapshot.data.tenant?(this.tenant=this.route.snapshot.data.tenant,this.owner=this.route.snapshot.data.owner,this.owner||this.ownerService.get(this.tenant.ownerId).subscribe((function(e){return i.owner=e}))):this.owner=this.route.snapshot.data.owner}return y(e,[{key:"ngOnInit",value:function(){}},{key:"closePopup",value:function(){window.close()}}]),e}()).\u0275fac=function(e){return new(e||ya)(_.Nb(V.a),_.Nb(Uo))},ya.\u0275cmp=_.Hb({type:ya,selectors:[["app-owner-popup"]],decls:1,vars:3,consts:[[3,"owner","tenant","isPopup","previewClose"]],template:function(e,t){1&e&&(_.Tb(0,"app-owner-preview",0),_.ec("previewClose",(function(){return t.closePopup()})),_.Sb()),2&e&&_.oc("owner",t.owner)("tenant",t.tenant)("isPopup",!0)},directives:[Oa],encapsulation:2}),ya),Pa=[{path:"",component:wa,pathMatch:"full"},{path:":id",component:Io,resolve:{customer:Bo},data:{isPopup:!0,appId:"CUSTOMERS_APP"}},{path:"owner/:id",component:xa,resolve:{owner:(Aa=function(){function e(t,n){M(this,e),this.ownerService=t,this.router=n}return y(e,[{key:"resolve",value:function(e){var t=this,n=e.paramMap.get("id");return this.ownerService.get(n).pipe(Object(at.a)(1),Object(tt.a)((function(e){return e||(t.router.navigate(["/"]),null)})))}}]),e}(),Aa.\u0275fac=function(e){return new(e||Aa)(_.bc(Uo),_.bc(V.d))},Aa.\u0275prov=_.Jb({token:Aa,factory:Aa.\u0275fac,providedIn:"root"}),Aa)},data:{isPopup:!0,appId:"CUSTOMERS_APP"}},{path:"tenant/:id",component:xa,resolve:{tenant:(Ma=function(){function e(t,n){M(this,e),this.tenantService=t,this.router=n}return y(e,[{key:"resolve",value:function(e){var t=this,n=e.paramMap.get("id");return this.tenantService.get(n).pipe(Object(at.a)(1),Object(tt.a)((function(e){return e||(t.router.navigate(["/"]),null)})))}}]),e}(),Ma.\u0275fac=function(e){return new(e||Ma)(_.bc(wo),_.bc(V.d))},Ma.\u0275prov=_.Jb({token:Ma,factory:Ma.\u0275fac,providedIn:"root"}),Ma)},data:{isPopup:!0,appId:"CUSTOMERS_APP"}}],Da=((Na=y((function e(){M(this,e)}))).\u0275mod=_.Lb({type:Na}),Na.\u0275inj=_.Kb({factory:function(e){return new(e||Na)},imports:[[C.c,V.g.forChild(Pa)],V.g]}),Na),ja=((Ba=y((function e(){M(this,e)}))).\u0275mod=_.Lb({type:Ba}),Ba.\u0275inj=_.Kb({factory:function(e){return new(e||Ba)},imports:[[C.c,j.b,B.v,He,R.xb]]}),Ba),Ua=((Ia=y((function e(){M(this,e)}))).\u0275mod=_.Lb({type:Ia}),Ia.\u0275inj=_.Kb({factory:function(e){return new(e||Ia)},imports:[[C.c,I.a,A.b,F.c,B.v,aa.b,R.xb,U.a]]}),Ia),Fa=((Ra=y((function e(){M(this,e)}))).\u0275mod=_.Lb({type:Ra}),Ra.\u0275inj=_.Kb({factory:function(e){return new(e||Ra)},imports:[[C.c,j.b,B.v,R.xb]]}),Ra),La=((Ea=y((function e(){M(this,e)}))).\u0275mod=_.Lb({type:Ea}),Ea.\u0275inj=_.Kb({factory:function(e){return new(e||Ea)},imports:[[C.c,I.a,R.xb,Ye,Qe,We,k.f,A.b,Ua,ja,Fa,E.d,Da]]}),Ea)}}])}();