(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{bwqd:function(e,t,r){"use strict";r.r(t),r.d(t,"ExternalParamProfileModule",(function(){return he}));var i=r("2kYt"),a=r("nIj0"),n=r("jdnZ"),o=r("Jb3d"),l=r("66mq"),c=r("csyo"),s=r("R7+U"),b=r("lQ7A"),m=r("KZIX"),u=r("OWX3"),d=r("PCNd"),f=r("l7x+"),P=r("sEIs"),h=r("OZ4H"),p=r("vobO"),O=r("ZTXN"),v=r("YtkY"),T=r("8j5Y"),E=r("EM62");let S=(()=>{class e extends u.jb{constructor(e,t,r){super(e),this.externalParamProfileApi=e,this.accessContractApiService=t,this.snackBarService=r,this.updated=new O.a}getOne(e){return this.externalParamProfileApi.getOne(e)}getAllActiveAccessContracts(e){const t=new p.g,r=(new p.f).append("X-Tenant-Id",e);return this.accessContractApiService.getAllAccessContracts(t,r).pipe(Object(v.a)(e=>e.filter(e=>"ACTIVE"===e.status)))}create(e){return this.externalParamProfileApi.create(e).pipe(Object(T.a)(e=>{this.snackBarService.open({message:"EXTERNAL_PARAM_PROFILE.NOTIF_EXTERNAL_PARAM_PROFILE_CREATED",icon:"vitamui-icon-admin-key",translateParams:{name:e.name}})}))}patch(e){return this.externalParamProfileApi.patch(e).pipe(Object(T.a)(e=>this.updated.next(e)),Object(T.a)(e=>{this.snackBarService.open({message:"EXTERNAL_PARAM_PROFILE.NOTIF_EXTERNAL_PARAM_PROFILE_UPDATED",icon:"vitamui-icon-admin-key",translateParams:{name:e.name}})},e=>this.snackBarService.open({message:e.error.message,translate:!1})))}exists(e,t,r){const i=[];i.push({key:"name",value:r,operator:u.W.equalsIgnoreCase},{key:"tenantIdentifier",value:e,operator:u.W.equals},{key:"applicationName",value:t,operator:u.W.equals});const a=[{key:"criteria",value:JSON.stringify({criteria:i})}];return this.externalParamProfileApi.checkExistsByParam(a,this.headers)}}return e.\u0275fac=function(t){return new(t||e)(E.bc(u.L),E.bc(u.a),E.bc(u.Ab))},e.\u0275prov=E.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var A=r("8lHc"),R=r("ROBh"),g=r("TLy2"),x=r("J+dc");let _=(()=>{class e{constructor(e){this.externalParamProfileService=e,this.debounceTime=400,this.nameExists=(e,t,r)=>i=>Object(A.a)(this.debounceTime).pipe(Object(g.a)(()=>i.value!==r?this.externalParamProfileService.exists(e,t,i.value):Object(R.a)(!1)),Object(x.a)(1),Object(v.a)(e=>e?{nameExists:!0}:null))}}return e.\u0275fac=function(t){return new(t||e)(E.bc(S))},e.\u0275prov=E.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var I=r("IrDo"),L=r("29Wa"),N=r("mFH5"),M=r("Y2X+"),C=r("s2Ay");function y(e,t){1&e&&(E.Tb(0,"span"),E.Oc(1,"in"),E.Sb())}function F(e,t){1&e&&(E.Tb(0,"vitamui-common-input-error"),E.Oc(1),E.jc(2,"translate"),E.Sb()),2&e&&(E.Bb(1),E.Pc(E.kc(2,1,"COMMON.ERROR.REQUIRED")))}function B(e,t){1&e&&(E.Tb(0,"vitamui-common-input-error"),E.Oc(1),E.jc(2,"translate"),E.Sb()),2&e&&(E.Bb(1),E.Pc(E.kc(2,1,"COMMON.ERROR.NAME_ALREADY_EXISTS")))}function k(e,t){1&e&&(E.Tb(0,"vitamui-common-input-error"),E.Oc(1),E.jc(2,"translate"),E.Sb()),2&e&&(E.Bb(1),E.Pc(E.kc(2,1,"COMMON.ERROR.REQUIRED")))}function j(e,t){if(1&e&&(E.Tb(0,"mat-option",28),E.Oc(1),E.Sb()),2&e){const e=t.$implicit;E.oc("value",e.identifier),E.Bb(1),E.Qc("",e.identifier," ")}}const w=function(e){return{threshold:e}};function X(e,t){if(1&e&&(E.Tb(0,"mat-option",28),E.Oc(1),E.jc(2,"translate"),E.jc(3,"number"),E.Sb()),2&e){const e=t.$implicit;E.oc("value",e),E.Bb(1),E.Qc(" ",E.lc(2,2,"EXTERNAL_PARAM_PROFILE.MAX_BULK_OPERATIONS_THRESHOLD_VALUES",E.tc(7,w,E.kc(3,5,e)))," ")}}function D(e,t){if(1&e){const e=E.Ub();E.Tb(0,"div",29),E.Tb(1,"mat-form-field",13),E.Tb(2,"mat-select",30),E.ec("valueChange",(function(t){return E.Dc(e),E.ic().selectedThreshold=t})),E.jc(3,"translate"),E.Mc(4,X,4,9,"mat-option",15),E.Sb(),E.Tb(5,"div",16),E.Tb(6,"i",17),E.Oc(7,"keyboard_arrow_down"),E.Sb(),E.Sb(),E.Sb(),E.Ob(8,"i",31),E.jc(9,"translate"),E.Sb()}if(2&e){const e=E.ic();E.Bb(2),E.pc("placeholder",E.kc(3,5,"EXTERNAL_PARAM_PROFILE.USE_PLATFORM_BULK_OPERATIONS_THRESHOLD_TITLE")),E.oc("value",e.selectedThreshold),E.Bb(2),E.oc("ngForOf",e.thresholdValues),E.Bb(4),E.oc("matTooltip",E.kc(9,7,"EXTERNAL_PARAM_PROFILE.MAX_BULK_OPERATIONS_THRESHOLD_HELPER"))("matTooltipShowDelay",300)}}let U=(()=>{class e{constructor(e,t,r,i,a,n){this.formBuilder=e,this.dialogRef=t,this.externalParamProfileService=r,this.externalParamProfileValidators=i,this.confirmDialogService=a,this.data=n,this.thresholdValues=[100,1e4,1e5,1e6,1e7,1e8,1e9],this.stepIndex=0,this.stepCount=2,this.selectedThreshold=""}ngOnInit(){this.initForm(this.data.tenantIdentifier),this.tenantIdentifier=this.data.tenantIdentifier,this.activeAccessContracts$=this.externalParamProfileService.getAllActiveAccessContracts(this.data.tenantIdentifier),this.keyPressSubscription=this.confirmDialogService.listenToEscapeKeyPress(this.dialogRef).subscribe(()=>this.onCancel())}ngOnDestroy(){this.keyPressSubscription.unsubscribe()}initForm(e){this.externalParamProfileForm=this.formBuilder.group({enabled:!0,accessContract:[null,a.x.required],description:[null,a.x.required],name:[null,a.x.required],usePlatformThreshold:!0,bulkOperationsThreshold:[null,[]]}),this.externalParamProfileForm.get("name").setAsyncValidators(this.externalParamProfileValidators.nameExists(+e,u.h.EXTERNAL_PARAM_PROFILE_APP))}onSubmit(){if(this.externalParamProfileForm.invalid)return;const e=this.externalParamProfileForm.getRawValue();e.usePlatformThreshold&&(e.bulkOperationsThreshold=null),this.externalParamProfileService.create(e).subscribe(e=>{console.log("response = ",e),this.dialogRef.close(!0)},e=>{console.error(e)})}onCancel(){this.externalParamProfileForm.dirty?this.confirmDialogService.confirmBeforeClosing(this.dialogRef):this.dialogRef.close()}onValidate(){return!1}firstStepInvalid(){return this.externalParamProfileForm.get("name").invalid||this.externalParamProfileForm.get("description").invalid}formValid(){return this.externalParamProfileForm.pending||this.externalParamProfileForm.invalid}}return e.\u0275fac=function(t){return new(t||e)(E.Nb(a.d),E.Nb(h.g),E.Nb(S),E.Nb(_),E.Nb(u.t),E.Nb(h.a))},e.\u0275cmp=E.Hb({type:e,selectors:[["app-external-param-profile-create"]],decls:66,vars:55,consts:[[1,"header"],[3,"index","count"],[3,"formGroup","ngSubmit"],[3,"selectionChange"],[1,"content"],[1,"vitamui-form"],[1,"text","large","bold","header-title"],[1,"text","large","bold","header-subtitle"],[1,"mb-2"],["formControlName","enabled"],[4,"ngIf"],["formControlName","name","minlength","2","maxlength","100","required","",1,"col-9","px-0",3,"placeholder"],["formControlName","description","minlength","2","maxlength","250","required","",1,"col-9","px-0",3,"placeholder"],[1,"vitamui-mat-select"],["formControlName","accessContract","required","required","panelclass","vitamui-mat-select",1,"w-100",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[1,"select-arrow"],[1,"material-icons"],[1,"actions"],["type","button","cdkStepperNext","",1,"btn","primary",3,"disabled"],["type","button",1,"btn","link","cancel",3,"click"],[1,"text","large","bold"],["formControlName","usePlatformThreshold"],["class","select-threshold",4,"ngIf"],["type","submit",1,"btn","primary","mr-4",3,"disabled"],["type","button","cdkStepperPrevious","",1,"btn","link"],[1,"vitamui-icon","vitamui-icon-chevron-left"],[1,"underline"],[3,"value"],[1,"select-threshold"],["formControlName","bulkOperationsThreshold","required","required","panelclass","vitamui-mat-select",1,"w-100",3,"placeholder","value","valueChange"],["matTooltipClass","vitamui-tooltip",1,"vitamui-icon","vitamui-icon-info-circle","vitamui-row-icon","icon-information",3,"matTooltip","matTooltipShowDelay"]],template:function(e,t){if(1&e&&(E.Tb(0,"div",0),E.Ob(1,"vitamui-common-progress-bar",1),E.Sb(),E.Tb(2,"form",2),E.ec("ngSubmit",(function(){return t.onSubmit()})),E.Tb(3,"vitamui-common-stepper",3),E.ec("selectionChange",(function(e){return t.stepIndex=e.selectedIndex})),E.Tb(4,"cdk-step"),E.Tb(5,"div",4),E.Tb(6,"div",5),E.Tb(7,"div",6),E.Oc(8),E.jc(9,"translate"),E.Sb(),E.Tb(10,"div",7),E.Oc(11),E.jc(12,"translate"),E.Sb(),E.Tb(13,"div",8),E.Tb(14,"vitamui-common-slide-toggle",9),E.Oc(15),E.jc(16,"translate"),E.Mc(17,y,2,0,"span",10),E.Oc(18),E.jc(19,"translate"),E.Sb(),E.Sb(),E.Tb(20,"vitamui-common-input",11),E.jc(21,"translate"),E.Mc(22,F,3,3,"vitamui-common-input-error",10),E.Mc(23,B,3,3,"vitamui-common-input-error",10),E.Sb(),E.Tb(24,"vitamui-common-input",12),E.jc(25,"translate"),E.Mc(26,k,3,3,"vitamui-common-input-error",10),E.Sb(),E.Tb(27,"mat-form-field",13),E.Tb(28,"mat-select",14),E.jc(29,"translate"),E.Mc(30,j,2,2,"mat-option",15),E.jc(31,"async"),E.Sb(),E.Tb(32,"div",16),E.Tb(33,"i",17),E.Oc(34,"keyboard_arrow_down"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Tb(35,"div",18),E.Tb(36,"button",19),E.Oc(37),E.jc(38,"translate"),E.Sb(),E.Tb(39,"button",20),E.ec("click",(function(){return t.onCancel()})),E.Oc(40),E.jc(41,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Tb(42,"cdk-step"),E.Tb(43,"div",4),E.Tb(44,"div",5),E.Tb(45,"div",21),E.Oc(46),E.jc(47,"translate"),E.Sb(),E.Tb(48,"div",8),E.Tb(49,"vitamui-common-slide-toggle",22),E.Oc(50),E.jc(51,"translate"),E.Sb(),E.Sb(),E.Mc(52,D,10,9,"div",23),E.Sb(),E.Tb(53,"div",18),E.Tb(54,"button",24),E.Oc(55),E.jc(56,"translate"),E.Sb(),E.Tb(57,"button",20),E.ec("click",(function(){return t.onCancel()})),E.Oc(58),E.jc(59,"translate"),E.Sb(),E.Sb(),E.Tb(60,"button",25),E.Ob(61,"i",26),E.Rb(62),E.Tb(63,"span",27),E.Oc(64),E.jc(65,"translate"),E.Sb(),E.Qb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb()),2&e){var r=null,i=null,a=null;E.Bb(1),E.oc("index",t.stepIndex)("count",t.stepCount),E.Bb(1),E.oc("formGroup",t.externalParamProfileForm),E.Bb(6),E.Pc(E.kc(9,25,"EXTERNAL_PARAM_PROFILE.CREATE_EXTERNAL_PARAM_PROFILE_POPUP")),E.Bb(3),E.Qc(" ",E.kc(12,27,"EXTERNAL_PARAM_PROFILE.CREATE_EXTERNAL_PARAM_PROFILE_POPUP_SUBTITLE")," "),E.Bb(4),E.Qc("",E.kc(16,29,"EXTERNAL_PARAM_PROFILE.PROFILE")," "),E.Bb(2),E.oc("ngIf",!t.externalParamProfileForm.get("enabled").value),E.Bb(1),E.Pc(E.kc(19,31,"COMMON.ACTIVE")),E.Bb(2),E.pc("placeholder",E.kc(21,33,"EXTERNAL_PARAM_PROFILE.EXTERNAL_PARAM_PROFILE_NAME_POPUP")),E.Bb(2),E.oc("ngIf",(null==t.externalParamProfileForm||null==(r=t.externalParamProfileForm.get("name"))?null:r.touched)&&!(null==t.externalParamProfileForm||null==(r=t.externalParamProfileForm.get("name"))||null==r.errors||!r.errors.required)),E.Bb(1),E.oc("ngIf",(null==t.externalParamProfileForm||null==(i=t.externalParamProfileForm.get("name"))?null:i.touched)&&!(null==t.externalParamProfileForm||null==(i=t.externalParamProfileForm.get("name"))||null==i.errors||!i.errors.nameExists)),E.Bb(1),E.pc("placeholder",E.kc(25,35,"EXTERNAL_PARAM_PROFILE.DESCRIPTION_ADMIN_PROFILE")),E.Bb(2),E.oc("ngIf",(null==t.externalParamProfileForm||null==(a=t.externalParamProfileForm.get("description"))?null:a.touched)&&!(null==t.externalParamProfileForm||null==(a=t.externalParamProfileForm.get("description"))||null==a.errors||!a.errors.required)),E.Bb(2),E.pc("placeholder",E.kc(29,37,"EXTERNAL_PARAM_PROFILE.SELECT_ACCESS_CONTRACT")),E.Bb(2),E.oc("ngForOf",E.kc(31,39,t.activeAccessContracts$)),E.Bb(6),E.oc("disabled",t.firstStepInvalid()),E.Bb(1),E.Pc(E.kc(38,41,"COMMON.NEXT")),E.Bb(3),E.Qc(" ",E.kc(41,43,"COMMON.CANCEL")," "),E.Bb(6),E.Pc(E.kc(47,45,"EXTERNAL_PARAM_PROFILE.MAX_BULK_OPERATIONS_THRESHOLD_TITLE")),E.Bb(4),E.Qc(" ",E.kc(51,47,"EXTERNAL_PARAM_PROFILE.USE_PLATFORM_BULK_OPERATIONS_THRESHOLD_TITLE")," "),E.Bb(2),E.oc("ngIf",!t.externalParamProfileForm.get("usePlatformThreshold").value),E.Bb(2),E.oc("disabled",t.onValidate()),E.Bb(1),E.Qc(" ",E.kc(56,49,"COMMON.SUBMIT")," "),E.Bb(3),E.Qc(" ",E.kc(59,51,"COMMON.CANCEL")," "),E.Bb(6),E.Pc(E.kc(65,53,"COMMON.BACK"))}},directives:[u.dc,a.y,a.r,a.i,u.mb,I.a,u.ac,a.q,a.g,i.p,u.Qb,a.m,a.l,a.w,L.b,s.a,i.o,I.d,I.e,u.Rb,N.k,M.a],pipes:[C.d,i.b,i.f],styles:[".icon-information[_ngcontent-%COMP%]{margin-left:15px;width:30px;height:31px;font-size:26px;font-weight:700;color:var(--vitamui-secondary)}.select-threshold[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center}.header-title[_ngcontent-%COMP%]{font-family:Mulish;font-style:normal;font-weight:400;font-size:16px;line-height:24px;display:flex;align-items:center;color:#757575;margin:0 0 5px}.header-subtitle[_ngcontent-%COMP%]{margin:0 0 30px}.vitamui-mat-select[_ngcontent-%COMP%]{width:70%}.icon-close[_ngcontent-%COMP%]{text-align:right;float:right;margin:18px 0 0}.icon-close[_ngcontent-%COMP%]:hover{cursor:pointer}vitamui-common-progress-bar[_ngcontent-%COMP%]{display:inline-block;width:95%}"]}),e})();var V=r("jIqt"),q=r("mWib"),H=r("4Xmu"),Q=r("C05f");let K=(()=>{class e{constructor(){this.sourceProfile=new Q.a(null),this.readOnly=new Q.a(!1),this.targetExternalParamProfile=this.sourceProfile.asObservable()}emitSourceProfile(e){this.sourceProfile.next(e)}emitReadOnly(e){this.readOnly.next(e)}getTargetProfile(){return this.sourceProfile.asObservable()}getReadOnly(){return this.readOnly.asObservable()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=E.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function z(e,t){if(1&e){const e=E.Ub();E.Tb(0,"div",14),E.ec("click",(function(){E.Dc(e);const r=t.$implicit;return E.ic().emitExternalProfile(r)})),E.Tb(1,"div",15),E.Tb(2,"div",3),E.Ob(3,"i",16),E.Sb(),E.Tb(4,"div",5),E.Oc(5),E.Sb(),E.Tb(6,"div",5),E.Oc(7),E.Sb(),E.Tb(8,"div",6),E.Oc(9),E.jc(10,"number"),E.Sb(),E.Tb(11,"div",7),E.Oc(12),E.jc(13,"truncate"),E.Sb(),E.Sb(),E.Sb()}if(2&e){const e=t.$implicit;E.Bb(3),E.oc("ngClass",null!=e&&e.enabled?"status-badge-green":"status-badge-grey"),E.Bb(2),E.Pc(e.name),E.Bb(2),E.Pc(e.accessContract),E.Bb(2),E.Pc(E.kc(10,5,e.bulkOperationsThreshold)),E.Bb(3),E.Qc(" ",E.lc(13,7,e.description,50)," ")}}function $(e,t){1&e&&E.Ob(0,"div")}function J(e,t){1&e&&E.Ob(0,"div")}function Y(e,t){1&e&&E.Ob(0,"div")}function W(e,t){1&e&&(E.Tb(0,"div",17),E.Oc(1),E.jc(2,"translate"),E.Sb()),2&e&&(E.Bb(1),E.Pc(E.kc(2,1,"COMMON.NO_RESULT")))}function G(e,t){if(1&e){const e=E.Ub();E.Tb(0,"div",18),E.ec("click",(function(){return E.Dc(e),E.ic().externalParamProfileServiceService.loadMore()})),E.Tb(1,"span",19),E.Oc(2),E.jc(3,"translate"),E.Sb(),E.Sb()}2&e&&(E.Bb(2),E.Pc(E.kc(3,1,"COMMON.MORE_RESULT")))}function Z(e,t){1&e&&(E.Tb(0,"div",20),E.Ob(1,"mat-spinner",21),E.Sb())}let ee=(()=>{class e extends u.O{constructor(e,t,r){super(e),this.externalParamProfileServiceService=e,this.profileService=t,this.sharedService=r,this.orderBy="name",this.direction=u.x.ASCENDANT,this.searchChange=new O.a,this.searchKeys=["name"],this.filterDebounceTimeMs=400,this.externalParamProfileClick=new E.n}set searchText(e){this._searchText=e,this.searchChange.next(e)}ngOnInit(){this.searchCriteriaSub=this.searchChange.pipe(Object(V.a)(null),Object(q.a)(this.filterDebounceTimeMs)).subscribe(()=>this.search()),this.subscribeOnExteralParamProfilePatchOperation()}ngOnDestroy(){this.updatedProfileSub.unsubscribe(),this.searchCriteriaSub.unsubscribe()}subscribeOnExteralParamProfilePatchOperation(){this.updatedProfileSub=this.externalParamProfileServiceService.updated.subscribe(e=>{const t=this.dataSource.findIndex(t=>t.id===e.id);t>-1&&(this.dataSource[t]={id:e.id,enabled:e.enabled,name:e.name,description:e.description,accessContract:e.accessContract,externalParamIdentifier:e.externalParamIdentifier,profileIdentifier:e.profileIdentifier,idExternalParam:e.idExternalParam,idProfile:e.idProfile,bulkOperationsThreshold:e.bulkOperationsThreshold,usePlatformThreshold:e.usePlatformThreshold})})}emitExternalProfile(e){this.profileService.get(""+e.idProfile).subscribe(t=>{this.sharedService.emitSourceProfile(t),this.sharedService.emitReadOnly(t.readonly),this.externalParamProfileClick.emit(e)})}search(){const e={criteria:[...Object(u.Fb)(this._searchText,this.searchKeys)]},t=new u.Z(0,u.w,this.orderBy,this.direction,JSON.stringify(e));super.search(t)}}return e.\u0275fac=function(t){return new(t||e)(E.Nb(S),E.Nb(H.a),E.Nb(K))},e.\u0275cmp=E.Hb({type:e,selectors:[["app-external-param-profile-list"]],inputs:{searchText:["search","searchText"]},outputs:{externalParamProfileClick:"externalParamProfileClick"},features:[E.yb],decls:28,vars:19,consts:[["vitamuiCommonInfiniteScroll","",3,"vitamuiScroll"],[1,"vitamui-table"],[1,"vitamui-table-head"],[1,"col-1"],[1,"vitamui-icon","vitamui-icon-gestion-de-profil"],[1,"col-2"],[1,"col-3"],[1,"col-4"],[1,"vitamui-table-body"],["class","vitamui-table-rows",3,"click",4,"ngFor","ngForOf"],[4,"ngIf","ngIfThen"],["noResults",""],["loadMore",""],["loadingSpinner",""],[1,"vitamui-table-rows",3,"click"],[1,"vitamui-row","d-flex","align-items-center","clickable"],[1,"vitamui-icon","vitamui-icon-gestion-de-profil",3,"ngClass"],[1,"vitamui-min-content","vitamui-table-message"],[1,"vitamui-min-content","vitamui-table-message",3,"click"],[1,"clickable"],[1,"vitamui-min-content"],[1,"vitamui-spinner","medium"]],template:function(e,t){if(1&e&&(E.Tb(0,"div",0),E.ec("vitamuiScroll",(function(){return t.onScroll()})),E.Tb(1,"div",1),E.Tb(2,"div",2),E.Tb(3,"div",3),E.Ob(4,"i",4),E.Sb(),E.Tb(5,"div",5),E.Oc(6),E.jc(7,"translate"),E.Sb(),E.Tb(8,"div",5),E.Oc(9),E.jc(10,"translate"),E.Sb(),E.Tb(11,"div",6),E.Oc(12),E.jc(13,"translate"),E.Sb(),E.Tb(14,"div",7),E.Oc(15),E.jc(16,"translate"),E.Sb(),E.Sb(),E.Tb(17,"div",8),E.Mc(18,z,14,10,"div",9),E.Sb(),E.Sb(),E.Mc(19,$,1,0,"div",10),E.Mc(20,J,1,0,"div",10),E.Mc(21,Y,1,0,"div",10),E.Sb(),E.Mc(22,W,3,3,"ng-template",null,11,E.Nc),E.Mc(24,G,4,3,"ng-template",null,12,E.Nc),E.Mc(26,Z,2,0,"ng-template",null,13,E.Nc)),2&e){const e=E.zc(23),r=E.zc(25),i=E.zc(27);E.Bb(6),E.Qc(" ",E.kc(7,11,"EXTERNAL_PARAM_PROFILE.EXTERNAL_PARAM_PROFILE_NAME")," "),E.Bb(3),E.Pc(E.kc(10,13,"EXTERNAL_PARAM_PROFILE.IDENTIFIER")),E.Bb(3),E.Pc(E.kc(13,15,"EXTERNAL_PARAM_PROFILE.MAX_BULK_OPERATIONS_THRESHOLD_TITLE")),E.Bb(3),E.Pc(E.kc(16,17,"EXTERNAL_PARAM_PROFILE.DESCRIPTION")),E.Bb(3),E.oc("ngForOf",t.dataSource),E.Bb(1),E.oc("ngIf",!t.dataSource||t.pending)("ngIfThen",i),E.Bb(1),E.oc("ngIf",!t.pending&&0===(null==t.dataSource?null:t.dataSource.length))("ngIfThen",e),E.Bb(1),E.oc("ngIf",t.infiniteScrollDisabled&&t.externalParamProfileServiceService.canLoadMore&&!t.pending)("ngIfThen",r)}},directives:[u.N,i.o,i.p,i.n,c.b],pipes:[C.d,i.f,u.qc],styles:[""]}),e})();var te=r("xVbo"),re=r("4e/d"),ie=r("6WTZ");function ae(e,t){1&e&&(E.Tb(0,"span"),E.Oc(1,"in"),E.Sb())}function ne(e,t){if(1&e&&(E.Tb(0,"mat-option",18),E.Oc(1),E.Sb()),2&e){const e=t.$implicit;E.oc("value",e.identifier),E.Bb(1),E.Qc("",e.identifier," ")}}const oe=function(){return{"margin-bottom":"35px"}},le=function(){return{"margin-top":"15px"}};let ce=(()=>{class e{constructor(e,t,r){this.formBuilder=e,this.externalParamProfileService=t,this.externalParamProfileValidators=r}static initFormActivationState(e,t){t?e.disable({emitEvent:!1}):e.enable({emitEvent:!1})}ngOnInit(){this.initForm(),this.initListenersOnFormsValuesChanges(),this.activeAccessContracts$=this.externalParamProfileService.getAllActiveAccessContracts(this.tenantIdentifier)}ngOnDestroy(){this.updateFormSub.unsubscribe()}ngOnChanges(e){e.hasOwnProperty("externalParamProfile")&&this.form&&(this.resetForm(this.form,this.externalParamProfile,this.readOnly),this.previousValue=this.form.value)}initForm(){this.form=this.formBuilder.group({name:[null,a.x.required],description:[null,a.x.required],enabled:!1,accessContract:[null,a.x.required]})}initListenersOnFormsValuesChanges(){this.updateFormSub=this.form.valueChanges.pipe(Object(v.a)(()=>Object(u.Ib)(this.form.value,this.previousValue)),Object(te.a)(e=>!Object(ie.c)(e)),Object(v.a)(e=>Object(ie.a)({id:this.externalParamProfile.id,idExternalParam:this.externalParamProfile.idExternalParam,idProfile:this.externalParamProfile.idProfile},e)),Object(g.a)(e=>this.externalParamProfileService.patch(e).pipe(Object(re.a)(e=>Object(R.a)(e)))),Object(re.a)(e=>Object(R.a)(e))).subscribe(e=>this.resetForm(this.form,e,this.readOnly))}resetForm(t,r,i){t.reset(r,{emitEvent:!1}),this.initFormValidators(t,r),e.initFormActivationState(t,i)}initFormValidators(e,t){e.get("name").setAsyncValidators(this.externalParamProfileValidators.nameExists(+this.tenantIdentifier,u.h.EXTERNAL_PARAM_PROFILE_APP,t.name))}}return e.\u0275fac=function(t){return new(t||e)(E.Nb(a.d),E.Nb(S),E.Nb(_))},e.\u0275cmp=E.Hb({type:e,selectors:[["app-information-tab"]],inputs:{externalParamProfile:"externalParamProfile",readOnly:"readOnly",tenantIdentifier:"tenantIdentifier"},features:[E.zb],decls:41,vars:45,consts:[[3,"formGroup"],["formControlName","enabled"],[4,"ngIf"],[1,"row"],[1,"col-6"],[1,"vitamui-input"],[3,"ngStyle"],[3,"ngStyle","type","required","value","disabled"],["formControlName","name","maxlength","100",3,"label","validator","asyncValidator"],["errorKey","required"],["errorKey","nameExists"],[1,"col-12"],["formControlName","description","maxlength","380",3,"label","validator"],[1,"vitamui-mat-select","w-100"],["formControlName","accessContract","required","required","panelclass","vitamui-mat-select",1,"w-100",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[1,"select-arrow"],[1,"material-icons"],[3,"value"]],template:function(e,t){if(1&e&&(E.Tb(0,"div"),E.Tb(1,"form",0),E.Tb(2,"vitamui-common-slide-toggle",1),E.Oc(3),E.jc(4,"translate"),E.Mc(5,ae,2,0,"span",2),E.Oc(6),E.jc(7,"translate"),E.Sb(),E.Tb(8,"div",3),E.Tb(9,"div",4),E.Tb(10,"div",5),E.Tb(11,"label",6),E.Oc(12),E.jc(13,"translate"),E.Sb(),E.Ob(14,"input",7),E.Sb(),E.Sb(),E.Tb(15,"div",4),E.Tb(16,"vitamui-common-editable-input",8),E.jc(17,"translate"),E.Tb(18,"vitamui-common-field-error",9),E.Oc(19),E.jc(20,"translate"),E.Sb(),E.Tb(21,"vitamui-common-field-error",10),E.Oc(22),E.jc(23,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Tb(24,"div",3),E.Tb(25,"div",11),E.Tb(26,"vitamui-common-editable-input",12),E.jc(27,"translate"),E.Tb(28,"vitamui-common-field-error",9),E.Oc(29),E.jc(30,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Tb(31,"div",3),E.Tb(32,"div",11),E.Tb(33,"mat-form-field",13),E.Tb(34,"mat-select",14),E.jc(35,"translate"),E.Mc(36,ne,2,2,"mat-option",15),E.jc(37,"async"),E.Sb(),E.Tb(38,"div",16),E.Tb(39,"i",17),E.Oc(40,"keyboard_arrow_down"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb()),2&e){var r,i=null,a=null,n=null;E.Bb(1),E.oc("formGroup",t.form),E.Bb(2),E.Qc(" ",E.kc(4,23,"EXTERNAL_PARAM_PROFILE.PROFILE")," "),E.Bb(2),E.oc("ngIf",!(null!=(r=t.form.get("enabled"))&&r.value)),E.Bb(1),E.Qc("",E.kc(7,25,"COMMON.ACTIVE")," "),E.Bb(4),E.Fb("disabled",!0),E.Bb(1),E.oc("ngStyle",E.sc(43,oe)),E.Bb(1),E.Qc(" ",E.kc(13,27,"COMMON.ID"),""),E.Bb(2),E.oc("ngStyle",E.sc(44,le))("type","text")("required",!0)("value",null==t.externalParamProfile?null:t.externalParamProfile.profileIdentifier)("disabled",!0),E.Bb(2),E.pc("label",E.kc(17,29,"EXTERNAL_PARAM_PROFILE.NAME")),E.oc("validator",null==t.form||null==(i=t.form.get("name"))?null:i.validator)("asyncValidator",null==t.form||null==(a=t.form.get("name"))?null:a.asyncValidator),E.Bb(3),E.Pc(E.kc(20,31,"EXTERNAL_PARAM_PROFILE.INPUT_REQUIRED")),E.Bb(3),E.Pc(E.kc(23,33,"EXTERNAL_PARAM_PROFILE.NAME_ALREADY_USED")),E.Bb(4),E.pc("label",E.kc(27,35,"EXTERNAL_PARAM_PROFILE.DESCRIPTION")),E.oc("validator",null==t.form||null==(n=t.form.get("description"))?null:n.validator),E.Bb(3),E.Pc(E.kc(30,37,"EXTERNAL_PARAM_PROFILE.INPUT_REQUIRED")),E.Bb(5),E.pc("placeholder",E.kc(35,39,"EXTERNAL_PARAM_PROFILE.SELECT_ACCESSCONTRACT")),E.Bb(2),E.oc("ngForOf",E.kc(37,41,t.activeAccessContracts$))}},directives:[a.y,a.r,a.i,u.ac,a.q,a.g,i.p,i.q,u.F,a.l,u.zb,L.b,s.a,a.w,i.o,N.k],pipes:[C.d,i.b],styles:[""]}),e})();const se=function(e){return{threshold:e}};function be(e,t){if(1&e&&(E.Tb(0,"mat-option",13),E.Oc(1),E.jc(2,"translate"),E.jc(3,"number"),E.Sb()),2&e){const e=t.$implicit;E.oc("value",e),E.Bb(1),E.Qc(" ",E.lc(2,2,"EXTERNAL_PARAM_PROFILE.MAX_BULK_OPERATIONS_THRESHOLD_VALUES",E.tc(7,se,E.kc(3,5,e)))," ")}}function me(e,t){if(1&e&&(E.Tb(0,"div",6),E.Tb(1,"mat-form-field",7),E.Tb(2,"mat-select",8),E.jc(3,"translate"),E.Mc(4,be,4,9,"mat-option",9),E.Sb(),E.Tb(5,"div",10),E.Tb(6,"i",11),E.Oc(7,"keyboard_arrow_up"),E.Sb(),E.Tb(8,"i",11),E.Oc(9,"keyboard_arrow_down"),E.Sb(),E.Sb(),E.Sb(),E.Ob(10,"i",12),E.jc(11,"translate"),E.Sb()),2&e){const e=E.ic();E.Bb(2),E.pc("placeholder",E.kc(3,4,"EXTERNAL_PARAM_PROFILE.MAX_BULK_OPERATIONS_THRESHOLD_TITLE_SIDE_PANEL")),E.Bb(2),E.oc("ngForOf",e.thresholdValues),E.Bb(6),E.oc("matTooltip",E.kc(11,6,"EXTERNAL_PARAM_PROFILE.MAX_BULK_OPERATIONS_THRESHOLD_HELPER"))("matTooltipShowDelay",300)}}let ue=(()=>{class e{constructor(e,t){this.formBuilder=e,this.externalParamProfileService=t,this.thresholdValues=[100,1e4,1e5,1e6,1e7,1e8,1e9]}static initFormActivationState(e,t){t?e.disable({emitEvent:!1}):e.enable({emitEvent:!1})}ngOnInit(){this.initForm(),this.isUpdated=!1,this.updateFormSub=this.form.valueChanges.subscribe(()=>{const e=Object(u.Ib)(this.form.value,this.previousValue);this.isUpdated=!Object(ie.c)(e)})}ngOnDestroy(){this.updateFormSub.unsubscribe()}ngOnChanges(e){e.hasOwnProperty("externalParamProfile")&&this.form&&(this.resetForm(this.form,this.externalParamProfile,this.readOnly),this.previousValue=this.form.value)}initForm(){this.form=this.formBuilder.group({usePlatformThreshold:!0,bulkOperationsThreshold:[null,[]]})}resetForm(t,r,i){t.reset(r,{emitEvent:!1}),e.initFormActivationState(t,i)}submitModification(){let e=Object(u.Ib)(this.form.value,this.previousValue);Object(ie.c)(e)||(e=Object(ie.a)({id:this.externalParamProfile.id,idExternalParam:this.externalParamProfile.idExternalParam,idProfile:this.externalParamProfile.idProfile},e),e.usePlatformThreshold&&delete e.bulkOperationsThreshold,this.externalParamProfileService.patch(e).subscribe(e=>{this.resetForm(this.form,e,this.readOnly),this.isUpdated=!1}))}}return e.\u0275fac=function(t){return new(t||e)(E.Nb(a.d),E.Nb(S))},e.\u0275cmp=E.Hb({type:e,selectors:[["app-thresholds-tab"]],inputs:{externalParamProfile:"externalParamProfile",readOnly:"readOnly",tenantIdentifier:"tenantIdentifier"},features:[E.zb],decls:13,vars:9,consts:[[3,"formGroup"],["formControlName","usePlatformThreshold"],[1,"row"],[1,"col-12"],["class","select-threshold",4,"ngIf"],["type","submit",1,"btn","primary","mr-4",3,"disabled","click"],[1,"select-threshold"],["required","required",1,"vitamui-mat-select"],["formControlName","bulkOperationsThreshold","required","required",1,"form-select","h-100","w-100","vitamui-mat-select",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[1,"select-arrow"],[1,"material-icons"],["matTooltipClass","vitamui-tooltip",1,"vitamui-icon","vitamui-icon-info-circle","vitamui-row-icon","icon-information",3,"matTooltip","matTooltipShowDelay"],[3,"value"]],template:function(e,t){1&e&&(E.Tb(0,"div"),E.Tb(1,"form",0),E.Tb(2,"vitamui-common-slide-toggle",1),E.Oc(3),E.jc(4,"translate"),E.Sb(),E.Tb(5,"div",2),E.Tb(6,"div",3),E.Mc(7,me,12,8,"div",4),E.Sb(),E.Sb(),E.Ob(8,"br"),E.Tb(9,"div",2),E.Tb(10,"button",5),E.ec("click",(function(){return t.submitModification()})),E.Oc(11),E.jc(12,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb()),2&e&&(E.Bb(1),E.oc("formGroup",t.form),E.Bb(2),E.Qc(" ",E.kc(4,5,"EXTERNAL_PARAM_PROFILE.USE_PLATFORM_BULK_OPERATIONS_THRESHOLD_TITLE")," "),E.Bb(4),E.oc("ngIf",!t.form.get("usePlatformThreshold").value),E.Bb(3),E.oc("disabled",!t.isUpdated||t.form.get("bulkOperationsThreshold").invalid),E.Bb(1),E.Qc(" ",E.kc(12,7,"COMMON.SAVE")," "))},directives:[a.y,a.r,a.i,u.ac,a.q,a.g,i.p,L.b,s.a,a.w,i.o,M.a,N.k],pipes:[C.d,i.f],styles:[".icon-information[_ngcontent-%COMP%]{margin-left:15px;width:30px;height:31px;font-size:26px;font-weight:700;color:var(--vitamui-secondary)}.vitamui-mat-select[_ngcontent-%COMP%]{width:70%}.select-threshold[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center}"]}),e})(),de=(()=>{class e{constructor(e,t){this.sharedService=e,this.externalParamProfileServiceService=t,this.externalParamProfileClose=new E.n,this.sharedService.getReadOnly().subscribe(e=>{this.readOnly=e})}ngOnInit(){this.externalParamProfileUpdateSub=this.externalParamProfileServiceService.updated.subscribe(e=>{e&&this.externalParamProfileServiceService.getOne(e.idProfile).subscribe(e=>{this.externalParamProfile=e})})}emitClose(){this.externalParamProfileClose.emit()}ngOnDestroy(){this.externalParamProfileUpdateSub.unsubscribe()}filterEvents(e){return e.outDetail&&(e.outDetail.includes("EXT_VITAMUI_CREATE_EXTERNAL_PARAM_PROFILE")||e.outDetail.includes("EXT_VITAMUI_UPDATE_EXTERNAL_PARAM_PROFILE"))}}return e.\u0275fac=function(t){return new(t||e)(E.Nb(K),E.Nb(S))},e.\u0275cmp=E.Hb({type:e,selectors:[["app-external-param-profile-detail"]],inputs:{externalParamProfile:"externalParamProfile",tenantIdentifier:"tenantIdentifier",isPopup:"isPopup"},outputs:{externalParamProfileClose:"externalParamProfileClose"},decls:12,vars:21,consts:[[3,"title","icon","badge","onclose"],[1,"vitamui-sidepanel-body"],[1,"preview-tab-group"],[3,"label"],[3,"tenantIdentifier","externalParamProfile","readOnly"],["collectionName","externalparamprofile",3,"id","identifier","filter"]],template:function(e,t){1&e&&(E.Tb(0,"vitamui-common-sidenav-header",0),E.ec("onclose",(function(){return t.emitClose()})),E.Sb(),E.Tb(1,"div",1),E.Tb(2,"mat-tab-group",2),E.Tb(3,"mat-tab",3),E.jc(4,"translate"),E.Ob(5,"app-information-tab",4),E.Sb(),E.Tb(6,"mat-tab",3),E.jc(7,"translate"),E.Ob(8,"app-thresholds-tab",4),E.Sb(),E.Tb(9,"mat-tab",3),E.jc(10,"translate"),E.Ob(11,"vitamui-common-operation-history-tab",5),E.Sb(),E.Sb(),E.Sb()),2&e&&(E.oc("title",null==t.externalParamProfile?null:t.externalParamProfile.name)("icon","vitamui-icon-gestion-de-profil")("badge",null!=t.externalParamProfile&&t.externalParamProfile.enabled?"green":"grey"),E.Bb(3),E.pc("label",E.kc(4,15,"EXTERNAL_PARAM_PROFILE.TABS.INFORMATIONS")),E.Bb(2),E.oc("tenantIdentifier",t.tenantIdentifier)("externalParamProfile",t.externalParamProfile)("readOnly",t.readOnly),E.Bb(1),E.pc("label",E.kc(7,17,"EXTERNAL_PARAM_PROFILE.TABS.THRESHOLDS")),E.Bb(2),E.oc("tenantIdentifier",t.tenantIdentifier)("externalParamProfile",t.externalParamProfile)("readOnly",t.readOnly),E.Bb(1),E.pc("label",E.kc(10,19,"EXTERNAL_PARAM_PROFILE.TABS.HISTORY")),E.Bb(2),E.oc("id",null==t.externalParamProfile?null:t.externalParamProfile.idProfile)("identifier",null==t.externalParamProfile?null:t.externalParamProfile.idProfile)("filter",t.filterEvents))},directives:[u.mc,m.b,m.a,ce,ue,u.Xb],pipes:[C.d],styles:[""]}),e})();const fe=[{path:"",redirectTo:"tenant",pathMatch:"full"},{path:"tenant",component:u.Bb,pathMatch:"full",canActivate:[u.tb]},{path:"tenant/:tenantIdentifier",component:(()=>{class e extends u.kb{constructor(e,t,r,i){super(t,r),this.dialog=e,this.route=t,this.globalEventService=r,this.externalParamProfileServiceService=i}ngOnInit(){this.route.params.subscribe(e=>{this.tenantIdentifier=e.tenantIdentifier})}onSearchSubmit(e){this.search=e}openExternalParamProfilCreateDialog(){this.dialog.open(U,{panelClass:"vitamui-modal",disableClose:!0,data:{tenantIdentifier:this.tenantIdentifier}}).afterClosed().subscribe(e=>{e&&this.refreshList()})}refreshList(){this.externalParamProfileListComponent&&this.externalParamProfileListComponent.search()}}return e.\u0275fac=function(t){return new(t||e)(E.Nb(h.b),E.Nb(P.a),E.Nb(u.M),E.Nb(S))},e.\u0275cmp=E.Hb({type:e,selectors:[["app-external-param-profile"]],viewQuery:function(e,t){var r;1&e&&E.Ic(ee,!0),2&e&&E.yc(r=E.fc())&&(t.externalParamProfileListComponent=r.first)},features:[E.yb],decls:17,vars:15,consts:[[3,"autosize","hasBackdrop"],["mode","side","position","end",3,"fixedInViewport"],["panel",""],[3,"externalParamProfile","tenantIdentifier","externalParamProfileClose"],[1,"vitamui-heading"],[3,"searchbarPlaceholder","search"],[1,"btn","primary","ml-5",3,"click"],[1,"vitamui-content"],[3,"search","externalParamProfileClick"]],template:function(e,t){1&e&&(E.Tb(0,"mat-sidenav-container",0),E.Tb(1,"mat-sidenav",1,2),E.Tb(3,"app-external-param-profile-detail",3),E.ec("externalParamProfileClose",(function(){return t.closePanel()})),E.Sb(),E.Sb(),E.Tb(4,"mat-sidenav-content"),E.Tb(5,"div",4),E.Tb(6,"vitamui-common-title-breadcrumb"),E.Oc(7),E.jc(8,"translate"),E.Sb(),E.Tb(9,"vitamui-common-banner",5),E.ec("search",(function(e){return t.onSearchSubmit(e)})),E.jc(10,"translate"),E.Tb(11,"button",6),E.ec("click",(function(){return t.openExternalParamProfilCreateDialog()})),E.Tb(12,"span"),E.Oc(13),E.jc(14,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Tb(15,"div",7),E.Tb(16,"app-external-param-profile-list",8),E.ec("externalParamProfileClick",(function(e){return t.openPanel(e)})),E.Sb(),E.Sb(),E.Sb(),E.Sb()),2&e&&(E.oc("autosize",!0)("hasBackdrop",!1),E.Bb(1),E.oc("fixedInViewport",!0),E.Bb(2),E.oc("externalParamProfile",t.openedItem)("tenantIdentifier",t.tenantIdentifier),E.Bb(4),E.Qc(" ",E.kc(8,9,"APPLICATION.EXTERNAL_PARAM_PROFILE_APP.NAME")," "),E.Bb(2),E.oc("searchbarPlaceholder",E.kc(10,11,"EXTERNAL_PARAM_PROFILE.EXTERNAL_PARAM_PROFILE_NAME")),E.Bb(4),E.Pc(E.kc(14,13,"EXTERNAL_PARAM_PROFILE.CREATE_EXTERNAL_PARAM_PROFILE")),E.Bb(3),E.oc("search",t.search))},directives:[b.b,b.a,de,b.c,u.cc,u.jc,ee],pipes:[C.d],styles:[""]}),e})(),canActivate:[u.c]}];let Pe=(()=>{class e{}return e.\u0275mod=E.Lb({type:e}),e.\u0275inj=E.Kb({factory:function(t){return new(t||e)},imports:[[i.c,P.g.forChild(fe)],P.g]}),e})(),he=(()=>{class e{}return e.\u0275mod=E.Lb({type:e}),e.\u0275inj=E.Kb({factory:function(t){return new(t||e)},imports:[[i.c,u.xb,d.a,n.c,o.b,s.b,a.v,f.a,u.S,b.d,c.a,Pe,l.b,m.c,u.gb]]}),e})()}}]);