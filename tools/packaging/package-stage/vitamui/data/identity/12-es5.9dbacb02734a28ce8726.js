!function(){function e(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function n(e,t,r){return t=c(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r))}function i(){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=o(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function o(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function b(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{g1uF:function(r,o,u){"use strict";u.r(o),u.d(o,"SubrogationModule",(function(){return ae}));var l,f,d,v=u("2kYt"),p=u("nIj0"),m=u("OZ4H"),g=u("66mq"),h=u("csyo"),y=u("R7+U"),S=u("lQ7A"),O=u("OWX3"),T=u("PCNd"),I=u("sEIs"),E=u("ZTXN"),B=u("TLy2"),k=u("kuMc"),A=u("ROBh"),C=u("4e/d"),w=u("YtkY"),N=u("vobO"),M=u("guXd"),P=u("EM62"),U=((l=function(){function e(t){s(this,e),this.customerApi=t}return b(e,[{key:"getAll",value:function(e){var t=this,r={criteria:[{key:"subrogeable",value:e,operator:O.W.equals}]},n=(new N.g).set("criteria",JSON.stringify(r));return this.customerApi.getAllByParams(n).pipe(Object(C.a)((function(){return Object(A.a)([])})),Object(w.a)((function(e){return t.customers=e,(e||[]).map((function(e){return{value:e.id,label:e.code+" - "+e.name}}))})))}},{key:"getCustomers",value:function(){return this.customers}}]),e}()).\u0275fac=function(e){return new(e||l)(P.bc(M.a))},l.\u0275prov=P.Jb({token:l,factory:l.\u0275fac,providedIn:"root"}),l),j=u("P4Xx"),_=((d=function(e){function t(e,r){return s(this,t),n(this,t,[e,r+"/subrogations/users/generic"])}return a(t,e),b(t,[{key:"getAllPaginated",value:function(e,r,n){return i(c(t.prototype),"getAllPaginated",this).call(this,e,r,n)}}]),t}(O.o)).\u0275fac=function(e){return new(e||d)(P.bc(N.c),P.bc(O.n))},d.\u0275prov=P.Jb({token:d,factory:d.\u0275fac,providedIn:"root"}),d),R=((f=function(e){function t(e,r){var i;return s(this,t),(i=n(this,t,[e])).subrogationApiService=r,i}return a(t,e),b(t,[{key:"getGroupById",value:function(e){return this.subrogationApiService.getGroupById(e)}},{key:"getAllByCustomerId",value:function(e){var t=[];t.push({key:"surrogateCustomerId",value:e,operator:O.W.equals});var r={criteria:t},n=(new N.g).set("criteria",JSON.stringify(r));return this.subrogationApiService.getAllByParams(n)}}]),t}(O.jb)).\u0275fac=function(e){return new(e||f)(P.bc(_),P.bc(O.nb))},f.\u0275prov=P.Jb({token:f,factory:f.\u0275fac,providedIn:"root"}),f),D=u("s2Ay");function L(e,t){1&e&&(P.Tb(0,"div",23),P.Ob(1,"div",24),P.Ob(2,"div",24),P.Ob(3,"div",25),P.Sb())}function x(e,t){1&e&&(P.Tb(0,"div",23),P.Ob(1,"div",24),P.Ob(2,"div",25),P.Ob(3,"div",25),P.Sb())}function G(e,t){1&e&&(P.Tb(0,"div",23),P.Ob(1,"div",24),P.Ob(2,"div",24),P.Ob(3,"div",24),P.Sb())}function H(e,t){1&e&&(P.Tb(0,"span",26),P.Oc(1),P.jc(2,"translate"),P.Sb()),2&e&&(P.Bb(1),P.Pc(P.kc(2,1,"SUBROGATION.HOME.SUBROGATION_WIP")))}var J=function(e){return{param1:e}};function $(e,t){if(1&e&&(P.Tb(0,"span",26),P.Oc(1),P.jc(2,"translate"),P.Sb()),2&e){var r=P.ic().$implicit;P.Bb(1),P.Pc(P.lc(2,1,"SUBROGATION.HOME.SUBROGATE_BY",P.tc(4,J,r.superUserEmail)))}}function W(e,t){if(1&e){var r=P.Ub();P.Tb(0,"button",27),P.ec("click",(function(){P.Dc(r);var e=P.ic().$implicit;return P.ic().openUserSubrogationDialog(e)})),P.Oc(1),P.jc(2,"translate"),P.Sb()}if(2&e){var n=P.ic().$implicit;P.oc("disabled","ENABLED"!==n.status||!n.subrogeable),P.Bb(1),P.Qc(" ",P.kc(2,2,"SUBROGATION.HOME.RESULTS_TABLE.ACTION_BUTTON")," ")}}function F(e,t){if(1&e&&(P.Tb(0,"div",13),P.Tb(1,"div",14),P.Tb(2,"div",3),P.Ob(3,"i",15),P.Sb(),P.Tb(4,"div",16),P.Oc(5),P.Sb(),P.Tb(6,"div",5),P.Rb(7,17),P.Mc(8,L,4,0,"div",18),P.Mc(9,x,4,0,"div",18),P.Mc(10,G,4,0,"div",18),P.Qb(),P.Sb(),P.Tb(11,"div",16),P.Oc(12),P.Sb(),P.Tb(13,"div",19),P.Oc(14),P.Sb(),P.Tb(15,"div",20),P.Mc(16,H,3,3,"span",21),P.Mc(17,$,3,6,"span",21),P.Sb(),P.Tb(18,"div",20),P.Mc(19,W,3,4,"button",22),P.Sb(),P.Sb(),P.Sb()),2&e){var r,n=t.$implicit,i=P.ic();P.Bb(3),P.oc("ngClass","ENABLED"===(null==n?null:n.status)?"status-badge-green":"DISABLED"===(null==n?null:n.status)||"ANONYM"===(null==n?null:n.status)?"status-badge-grey":"status-badge-orange"),P.Bb(2),P.Rc("",null==n?null:n.lastname," ",null==n?null:n.firstname,""),P.Bb(2),P.oc("ngSwitch",null==n?null:n.criticality),P.Bb(1),P.oc("ngSwitchCase",0),P.Bb(1),P.oc("ngSwitchCase",1),P.Bb(1),P.oc("ngSwitchCase",2),P.Bb(2),P.Pc(null==(r=i.getGroup(n))?null:r.name),P.Bb(2),P.Pc(null==n?null:n.identifier),P.Bb(2),P.oc("ngIf",n.superUserEmail&&n.superUserEmail===i.currenteUser.email),P.Bb(1),P.oc("ngIf",n.superUserEmail&&n.superUserEmail!==i.currenteUser.email),P.Bb(2),P.oc("ngIf",!n.superUserEmail||n.superUserEmail===i.currenteUser.email)}}function Y(e,t){1&e&&P.Ob(0,"div")}function q(e,t){1&e&&P.Ob(0,"div")}function z(e,t){1&e&&P.Ob(0,"div")}function Q(e,t){1&e&&(P.Tb(0,"div",28),P.Oc(1),P.jc(2,"translate"),P.Sb()),2&e&&(P.Bb(1),P.Pc(P.kc(2,1,"COMMON.NO_RESULT")))}function K(e,t){if(1&e){var r=P.Ub();P.Tb(0,"div",29),P.ec("click",(function(){return P.Dc(r),P.ic().subrogationService.loadMore()})),P.Tb(1,"span",30),P.Oc(2),P.jc(3,"translate"),P.Sb(),P.Sb()}2&e&&(P.Bb(2),P.Pc(P.kc(3,1,"COMMON.SHOW_MORE_RESULTS")))}function X(e,t){1&e&&(P.Tb(0,"div",31),P.Ob(1,"mat-spinner",32),P.Sb())}var Z,V,ee,te,re,ne=((V=function(r){function i(e,t,r,o,c){var a;return s(this,i),(a=n(this,i,[e])).subrogationService=e,a.dialog=t,a.activatedRoute=r,a.subrogationModalService=o,a.authService=c,a.groups=[],a.loaded=!1,a.searchChange=new E.a,a.searchKeys=["firstname","lastname","email","mobile","phone","identifier"],a}return a(i,r),b(i,[{key:"searchText",set:function(e){this._searchText=e,this.searchChange.next(e)}},{key:"ngOnInit",value:function(){var e=this;this.currenteUser=this.authService.user,this.refreshDataList(),this.activatedRoute.params.subscribe((function(){return e.refreshDataList()})),this.updatedData.subscribe((function(){var t=new Set(e.dataSource.map((function(e){return e.groupId}))),r=new Array;t.forEach((function(t){e.groups.find((function(e){return e.id===t}))||r.push(e.subrogationService.getGroupById(t))})),r&&r.length>0?Object(j.a)([Object(j.a)(r),e.subrogationService.getAllByCustomerId(e._getCustomerId())]).subscribe((function(t){t[0].forEach((function(t){e.groups.push({id:t.id,group:t})}));var r=t[1];e.dataSource.filter((function(e){return!e.criticality})).forEach((function(t){var n=e.getGroup(t),i=r.find((function(e){return e.surrogate===t.email}));i&&i.superUser&&(t.superUserEmail=i.superUser),n&&(t.criticality=e.computeCriticality(n.profiles))})),e.loaded=!0,e.pending=!1})):(e.loaded=!0,e.pending=!1)})),this._onSearchChange()}},{key:"openUserSubrogationDialog",value:function(e){this.subrogationModalService.open(this.emailDomains,e.customerId,e)}},{key:"getGroup",value:function(e){var t=this.groups.find((function(t){return t.id===e.groupId}));return t?t.group:void 0}},{key:"refreshDataList",value:function(){this._search({criteria:this._getCriterionArrayToCustomer()})}},{key:"_getCriterionArrayToCustomer",value:function(){var e=[];return e.push({key:"customerId",value:this._getCustomerId(),operator:O.W.equals}),e.push({key:"status",value:"ENABLED",operator:O.W.equals}),e}},{key:"_onSearchChange",value:function(){var t=this;this.searchChange.subscribe((function(){var r={criteria:[].concat(e(t._getCriterionArrayToCustomer()),e(Object(O.Fb)(t._searchText,t.searchKeys)))};t._search(r)}))}},{key:"_search",value:function(e){this.search(new O.Z(0,O.w,"lastname",O.x.ASCENDANT,JSON.stringify(e)))}},{key:"_getCustomerId",value:function(){return this.activatedRoute.snapshot.paramMap.get("customerId")}},{key:"computeCriticality",value:function(e){var r,n=0,i=function(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=t(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,c=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw c}}}}(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.applicationName===O.h.CUSTOMERS_APP){n=2;break}n<2&&(o.applicationName===O.h.USERS_APP||o.applicationName===O.h.PROFILES_APP||o.applicationName===O.h.SUBROGATIONS_APP||o.applicationName===O.h.GROUPS_APP)&&(n=1)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"ngOnDestroy",value:function(){this.updatedData.unsubscribe()}}]),i}(O.O)).\u0275fac=function(e){return new(e||V)(P.Nb(R),P.Nb(m.b),P.Nb(I.a),P.Nb(O.ob),P.Nb(O.k))},V.\u0275cmp=P.Hb({type:V,selectors:[["app-subrogate-user-list"]],inputs:{emailDomains:"emailDomains",searchText:["search","searchText"]},features:[P.yb],decls:28,vars:16,consts:[["vitamuiCommonInfiniteScroll","",3,"vitamuiScroll"],[1,"vitamui-table"],[1,"vitamui-table-head"],[1,"col-1"],[1,"vitamui-icon","vitamui-icon-user"],[1,"col-2"],[1,"col-4"],[1,"vitamui-table-body"],["class","vitamui-table-rows",4,"ngFor","ngForOf"],[4,"ngIf","ngIfThen"],["noResults",""],["loadMore",""],["loadingSpinner",""],[1,"vitamui-table-rows"],[1,"vitamui-row","d-flex","align-items-center"],[1,"vitamui-icon","vitamui-icon-user",3,"ngClass"],["vitamuiCommonEllipsis","",1,"col-2"],[3,"ngSwitch"],["class","d-flex",4,"ngSwitchCase"],["vitamuiCommonEllipsis","",1,"col-1"],[1,"col-2","d-flex","justify-content-end"],["class","text normal bold danger","vitamuiCommonEllipsis","",4,"ngIf"],["class","btn outline-primary",3,"disabled","click",4,"ngIf"],[1,"d-flex"],["id","rectangle-criticity-high"],["id","rectangle-criticity-low"],["vitamuiCommonEllipsis","",1,"text","normal","bold","danger"],[1,"btn","outline-primary",3,"disabled","click"],[1,"vitamui-min-content","vitamui-table-message"],[1,"vitamui-min-content","vitamui-table-message",3,"click"],[1,"clickable"],[1,"vitamui-min-content"],[1,"vitamui-spinner","medium"]],template:function(e,t){if(1&e&&(P.Tb(0,"div",0),P.ec("vitamuiScroll",(function(){return t.onScroll()})),P.Tb(1,"div",1),P.Tb(2,"div",2),P.Tb(3,"div",3),P.Ob(4,"i",4),P.Sb(),P.Tb(5,"div",5),P.Oc(6),P.jc(7,"translate"),P.Sb(),P.Tb(8,"div",5),P.Oc(9),P.jc(10,"translate"),P.Sb(),P.Tb(11,"div",5),P.Oc(12),P.jc(13,"translate"),P.Sb(),P.Tb(14,"div",3),P.Oc(15,"ID"),P.Sb(),P.Ob(16,"div",6),P.Sb(),P.Tb(17,"div",7),P.Mc(18,F,20,12,"div",8),P.Sb(),P.Sb(),P.Mc(19,Y,1,0,"div",9),P.Mc(20,q,1,0,"div",9),P.Mc(21,z,1,0,"div",9),P.Sb(),P.Mc(22,Q,3,3,"ng-template",null,10,P.Nc),P.Mc(24,K,4,3,"ng-template",null,11,P.Nc),P.Mc(26,X,2,0,"ng-template",null,12,P.Nc)),2&e){var r=P.zc(23),n=P.zc(25),i=P.zc(27);P.Bb(6),P.Pc(P.kc(7,10,"SUBROGATION.HOME.RESULTS_TABLE.NAME")),P.Bb(3),P.Pc(P.kc(10,12,"SUBROGATION.HOME.RESULTS_TABLE.CRITICITY")),P.Bb(3),P.Pc(P.kc(13,14,"SUBROGATION.HOME.RESULTS_TABLE.GROUP")),P.Bb(6),P.oc("ngForOf",t.dataSource),P.Bb(1),P.oc("ngIf",!t.dataSource||t.pending)("ngIfThen",i),P.Bb(1),P.oc("ngIf",!t.pending&&0===(null==t.dataSource?null:t.dataSource.length))("ngIfThen",r),P.Bb(1),P.oc("ngIf",t.infiniteScrollDisabled&&t.subrogationService.canLoadMore&&!t.pending)("ngIfThen",n)}},directives:[O.N,v.o,v.p,v.n,O.Zb,v.r,v.s,h.b],pipes:[D.d],styles:[".criticity-column[_ngcontent-%COMP%]{display:flex;align-items:center}#rectangle-criticity-high[_ngcontent-%COMP%]{background:var(--vitamui-grey)}#rectangle-criticity-high[_ngcontent-%COMP%], #rectangle-criticity-low[_ngcontent-%COMP%]{width:20px;height:10px;border-radius:3px;margin-right:5px}#rectangle-criticity-low[_ngcontent-%COMP%]{background:var(--vitamui-grey-300)}.user-in-subrogation-label[_ngcontent-%COMP%]{color:red}.user-current-in-subrogation-label[_ngcontent-%COMP%]{color:red;margin-left:20px}"]}),V),ie=((Z=function(e){function t(e,r,i,o,c,a,u){var l;return s(this,t),(l=n(this,t,[o])).dialog=e,l.globalEventService=r,l.router=i,l.route=o,l.subrogationModalService=c,l.customerSelectService=a,l.customerSelectionService=u,l.destroyer$=new E.a,l}return a(t,e),b(t,[{key:"ngOnInit",value:function(){var e=this;this.customerSelectService.getAll(!0).pipe(Object(B.a)((function(t){return e.customers=t,e.customerSelectionService.setCustomers(t),e.route.paramMap}))).subscribe((function(t){var r=t.get("customerId"),n=e.customerSelectionService.getSelectedCustomerId();n&&n===r?e.updateCustomer(n):(e.customerSelectionService.setCustomerId(r),e.updateCustomer(r)),e.globalEventService.customerEvent.pipe(Object(k.a)(e.destroyer$)).subscribe((function(t){e.customer&&e.customer.identifier===t||e.changeCustomer(t)}))}))}},{key:"ngOnDestroy",value:function(){this.destroyer$.next(),this.destroyer$.complete()}},{key:"openUserSubrogationDialog",value:function(){this.subrogationModalService.open(this.customer.emailDomains,this.customer.id)}},{key:"onSearchSubmit",value:function(e){this.search=e}},{key:"changeCustomer",value:function(e){this.router.navigate(["..",e],{relativeTo:this.route})}},{key:"updateCustomer",value:function(e){var t=this.customerSelectService.getCustomers();t&&(this.customer=t.find((function(t){return t.id===e})))}}]),t}(O.f)).\u0275fac=function(e){return new(e||Z)(P.Nb(m.b),P.Nb(O.M),P.Nb(I.d),P.Nb(I.a),P.Nb(O.ob),P.Nb(U),P.Nb(O.v))},Z.\u0275cmp=P.Hb({type:Z,selectors:[["app-subrogate-user"]],features:[P.yb],decls:13,vars:13,consts:[[3,"autosize","hasBackdrop"],[1,"vitamui-heading"],[3,"searchbarPlaceholder","search"],[1,"btn","primary","ml-5",3,"click"],[1,"vitamui-content"],[3,"search","emailDomains"]],template:function(e,t){1&e&&(P.Tb(0,"mat-sidenav-container",0),P.Tb(1,"mat-sidenav-content"),P.Tb(2,"div",1),P.Tb(3,"vitamui-common-title-breadcrumb"),P.Oc(4),P.jc(5,"translate"),P.Sb(),P.Tb(6,"vitamui-common-banner",2),P.ec("search",(function(e){return t.onSearchSubmit(e)})),P.jc(7,"translate"),P.Tb(8,"button",3),P.ec("click",(function(){return t.openUserSubrogationDialog()})),P.Oc(9),P.jc(10,"translate"),P.Sb(),P.Sb(),P.Sb(),P.Tb(11,"div",4),P.Ob(12,"app-subrogate-user-list",5),P.Sb(),P.Sb(),P.Sb()),2&e&&(P.oc("autosize",!0)("hasBackdrop",!1),P.Bb(4),P.Qc(" ",P.kc(5,7,"SUBROGATION.HOME.TITLE")," "),P.Bb(2),P.oc("searchbarPlaceholder",P.kc(7,9,"SUBROGATION.HOME.TITLE_PLACEHOLDER")),P.Bb(3),P.Qc(" ",P.kc(10,11,"SUBROGATION.HOME.ACTION_BUTTON")," "),P.Bb(3),P.oc("search",t.search)("emailDomains",null==t.customer?null:t.customer.emailDomains))},directives:[S.b,S.c,O.cc,O.jc,ne],pipes:[D.d],styles:[""]}),Z),oe=[{path:"",redirectTo:"customer",pathMatch:"full"},{path:"customer",component:O.yb,resolve:{customers:(ee=function(){function e(t,r){s(this,e),this.customerSearchService=t,this.router=r}return b(e,[{key:"resolve",value:function(){var e=this;return this.customerSearchService.getAll(!0).pipe(Object(w.a)((function(t){return t||(e.router.navigate(["/"]),null)})))}}]),e}(),ee.\u0275fac=function(e){return new(e||ee)(P.bc(U),P.bc(I.d))},ee.\u0275prov=P.Jb({token:ee,factory:ee.\u0275fac,providedIn:"root"}),ee)}},{path:"customer/:customerId",component:ie}],ce=((re=b((function e(){s(this,e)}))).\u0275mod=P.Lb({type:re}),re.\u0275inj=P.Kb({factory:function(e){return new(e||re)},imports:[[v.c,I.g.forChild(oe)],I.g]}),re),ae=((te=b((function e(){s(this,e)}))).\u0275mod=P.Lb({type:te}),te.\u0275inj=P.Kb({factory:function(e){return new(e||te)},imports:[[v.c,O.xb,T.a,m.f,S.d,y.b,h.a,g.b,p.v,ce]]}),te)}}])}();